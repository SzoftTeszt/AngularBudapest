"use strict";(self.webpackChunkBudapest=self.webpackChunkBudapest||[]).push([[179],{2011:(Ct,Ne,L)=>{L.d(Ne,{Dh:()=>Te,GT:()=>le,cc:()=>Re,hO:()=>Ke,on:()=>W,pX:()=>ae,xv:()=>ve});var u=L(4650),X=L(9260),F=L(4976);Ct=L.hmd(Ct);const he=["ngOnDestroy"],ae=(ke,Fe,We,Le={})=>new Proxy(ke,{get:(be,Ie)=>We.runOutsideAngular(()=>{var Je;if(ke[Ie])return!(null===(Je=Le?.spy)||void 0===Je)&&Je.get&&Le.spy.get(Ie,ke[Ie]),ke[Ie];if(he.indexOf(Ie)>-1)return()=>{};const Be=Fe.toPromise().then(pt=>{const ue=pt&&pt[Ie];return"function"==typeof ue?ue.bind(pt):ue&&ue.then?ue.then(Mt=>We.run(()=>Mt)):We.run(()=>ue)});return new Proxy(()=>{},{get:(pt,ue)=>Be[ue],apply:(pt,ue,Mt)=>Be.then(it=>{var zt;const _t=it&&it(...Mt);return!(null===(zt=Le?.spy)||void 0===zt)&&zt.apply&&Le.spy.apply(Ie,Mt,_t),_t})})})}),le=(ke,Fe)=>{Fe.forEach(We=>{Object.getOwnPropertyNames(We.prototype||We).forEach(Le=>{Object.defineProperty(ke.prototype,Le,Object.getOwnPropertyDescriptor(We.prototype||We,Le))})})};class Ee{constructor(Fe){return Fe}}const Te=new u.OlP("angularfire2.app.options"),ve=new u.OlP("angularfire2.app.name");function W(ke,Fe,We){const be="object"==typeof We&&We||{};be.name=be.name||"string"==typeof We&&We||"[DEFAULT]";const Je=X.Z.apps.filter(Be=>Be&&Be.name===be.name)[0]||Fe.runOutsideAngular(()=>X.Z.initializeApp(ke,be));try{JSON.stringify(ke)!==JSON.stringify(Je.options)&&H("error",`${Je.name} Firebase App already initialized with different options${Ct.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new Ee(Je)}const H=(ke,...Fe)=>{(0,u.X6Q)()&&typeof console<"u"&&console[ke](...Fe)},Y={provide:Ee,useFactory:W,deps:[Te,u.R0b,[new u.FiY,ve]]};let Ke=(()=>{class ke{constructor(We){X.Z.registerVersion("angularfire",F.q4.full,"core"),X.Z.registerVersion("angularfire",F.q4.full,"app-compat"),X.Z.registerVersion("angular",u.q4F.full,We.toString())}static initializeApp(We,Le){return{ngModule:ke,providers:[{provide:Te,useValue:We},{provide:ve,useValue:Le}]}}}return ke.\u0275fac=function(We){return new(We||ke)(u.LFG(u.Lbi))},ke.\u0275mod=u.oAB({type:ke}),ke.\u0275inj=u.cJS({providers:[Y]}),ke})();function Re(ke,Fe,We,Le,be){const[,Ie,Je]=globalThis.\u0275AngularfireInstanceCache.find(Be=>Be[0]===ke)||[];if(Ie)return function nt(ke,Fe){try{return ke.toString()===Fe.toString()}catch{return ke===Fe}}(be,Je)||(_e("error",`${Fe} was already initialized on the ${We} Firebase App with different settings.${yt?" You may need to reload as Firebase is not HMR aware.":""}`),_e("warn",{is:be,was:Je})),Ie;{const Be=Le();return globalThis.\u0275AngularfireInstanceCache.push([ke,Be,be]),Be}}const yt=!!Ct.hot,_e=(ke,...Fe)=>{(0,u.X6Q)()&&typeof console<"u"&&console[ke](...Fe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},4976:(Ct,Ne,L)=>{L.d(Ne,{q4:()=>ga,iC:()=>Uh,HU:()=>di,vb:()=>Us,JM:()=>Fh});var u=L(4650),X=L(259),F=L(5861),he=L(6881),ae=L(2090),le=L(4859),Ee=L(1877);const Te=(E,I)=>I.some(N=>E instanceof N);let ve,W;const Ke=new WeakMap,Re=new WeakMap,nt=new WeakMap,yt=new WeakMap,_e=new WeakMap;let We={get(E,I,N){if(E instanceof IDBTransaction){if("done"===I)return Re.get(E);if("objectStoreNames"===I)return E.objectStoreNames||nt.get(E);if("store"===I)return N.objectStoreNames[1]?void 0:N.objectStore(N.objectStoreNames[0])}return Je(E[I])},set:(E,I,N)=>(E[I]=N,!0),has:(E,I)=>E instanceof IDBTransaction&&("done"===I||"store"===I)||I in E};function Ie(E){return"function"==typeof E?function be(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Y(){return W||(W=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...I){return E.apply(Be(this),I),Je(Ke.get(this))}:function(...I){return Je(E.apply(Be(this),I))}:function(I,...N){const B=E.call(Be(this),I,...N);return nt.set(B,I.sort?I.sort():[I]),Je(B)}}(E):(E instanceof IDBTransaction&&function Fe(E){if(Re.has(E))return;const I=new Promise((N,B)=>{const z=()=>{E.removeEventListener("complete",Q),E.removeEventListener("error",de),E.removeEventListener("abort",de)},Q=()=>{N(),z()},de=()=>{B(E.error||new DOMException("AbortError","AbortError")),z()};E.addEventListener("complete",Q),E.addEventListener("error",de),E.addEventListener("abort",de)});Re.set(E,I)}(E),Te(E,function H(){return ve||(ve=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,We):E)}function Je(E){if(E instanceof IDBRequest)return function ke(E){const I=new Promise((N,B)=>{const z=()=>{E.removeEventListener("success",Q),E.removeEventListener("error",de)},Q=()=>{N(Je(E.result)),z()},de=()=>{B(E.error),z()};E.addEventListener("success",Q),E.addEventListener("error",de)});return I.then(N=>{N instanceof IDBCursor&&Ke.set(N,E)}).catch(()=>{}),_e.set(I,E),I}(E);if(yt.has(E))return yt.get(E);const I=Ie(E);return I!==E&&(yt.set(E,I),_e.set(I,E)),I}const Be=E=>_e.get(E),Mt=["get","getKey","getAll","getAllKeys","count"],it=["put","add","delete","clear"],zt=new Map;function _t(E,I){if(!(E instanceof IDBDatabase)||I in E||"string"!=typeof I)return;if(zt.get(I))return zt.get(I);const N=I.replace(/FromIndex$/,""),B=I!==N,z=it.includes(N);if(!(N in(B?IDBIndex:IDBObjectStore).prototype)||!z&&!Mt.includes(N))return;const Q=function(){var de=(0,F.Z)(function*(Ye,...Ze){const bt=this.transaction(Ye,z?"readwrite":"readonly");let Vt=bt.store;return B&&(Vt=Vt.index(Ze.shift())),(yield Promise.all([Vt[N](...Ze),z&&bt.done]))[0]});return function(Ze){return de.apply(this,arguments)}}();return zt.set(I,Q),Q}!function Le(E){We=E(We)}(E=>({...E,get:(I,N,B)=>_t(I,N)||E.get(I,N,B),has:(I,N)=>!!_t(I,N)||E.has(I,N)}));const Zs="@firebase/installations",ge="0.6.4",De=1e4,Ae=`w:${ge}`,Oe="FIS_v2",rt="https://firebaseinstallations.googleapis.com/v1",je=36e5,Tt=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function At(E){return E instanceof ae.ZR&&E.code.includes("request-failed")}function vn({projectId:E}){return`${rt}/projects/${E}/installations`}function an(E){return{token:E.token,requestStatus:2,expiresIn:ie(E.expiresIn),creationTime:Date.now()}}function Ln(E,I){return Lr.apply(this,arguments)}function Lr(){return(Lr=(0,F.Z)(function*(E,I){const B=(yield I.json()).error;return Tt.create("request-failed",{requestName:E,serverCode:B.code,serverMessage:B.message,serverStatus:B.status})})).apply(this,arguments)}function Br({apiKey:E}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E})}function Vr(E){return oi.apply(this,arguments)}function oi(){return(oi=(0,F.Z)(function*(E){const I=yield E();return I.status>=500&&I.status<600?E():I})).apply(this,arguments)}function ie(E){return Number(E.replace("s","000"))}function te(){return(te=(0,F.Z)(function*({appConfig:E,heartbeatServiceProvider:I},{fid:N}){const B=vn(E),z=Br(E),Q=I.getImmediate({optional:!0});if(Q){const bt=yield Q.getHeartbeatsHeader();bt&&z.append("x-firebase-client",bt)}const Ye={method:"POST",headers:z,body:JSON.stringify({fid:N,authVersion:Oe,appId:E.appId,sdkVersion:Ae})},Ze=yield Vr(()=>fetch(B,Ye));if(Ze.ok){const bt=yield Ze.json();return{fid:bt.fid||N,registrationStatus:2,refreshToken:bt.refreshToken,authToken:an(bt.authToken)}}throw yield Ln("Create Installation",Ze)})).apply(this,arguments)}function qe(E){return new Promise(I=>{setTimeout(I,E)})}const pn=/^[cdef][\w-]{21}$/,Yt="";function sn(){try{const E=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(E),E[0]=112+E[0]%16;const N=function kt(E){return function gt(E){return btoa(String.fromCharCode(...E)).replace(/\+/g,"-").replace(/\//g,"_")}(E).substr(0,22)}(E);return pn.test(N)?N:Yt}catch{return Yt}}function on(E){return`${E.appName}!${E.appId}`}const ut=new Map;function xt(E,I){const N=on(E);Yn(N,I),function gn(E,I){const N=function Jr(){return!Mn&&"BroadcastChannel"in self&&(Mn=new BroadcastChannel("[Firebase] FID Change"),Mn.onmessage=E=>{Yn(E.data.key,E.data.fid)}),Mn}();N&&N.postMessage({key:E,fid:I}),function Tn(){0===ut.size&&Mn&&(Mn.close(),Mn=null)}()}(N,I)}function Yn(E,I){const N=ut.get(E);if(N)for(const B of N)B(I)}let Mn=null;const gs="firebase-installations-database",cn=1,Ps="firebase-installations-store";let Cn=null;function qi(){return Cn||(Cn=function pt(E,I,{blocked:N,upgrade:B,blocking:z,terminated:Q}={}){const de=indexedDB.open(E,I),Ye=Je(de);return B&&de.addEventListener("upgradeneeded",Ze=>{B(Je(de.result),Ze.oldVersion,Ze.newVersion,Je(de.transaction))}),N&&de.addEventListener("blocked",()=>N()),Ye.then(Ze=>{Q&&Ze.addEventListener("close",()=>Q()),z&&Ze.addEventListener("versionchange",()=>z())}).catch(()=>{}),Ye}(gs,cn,{upgrade:(E,I)=>{0===I&&E.createObjectStore(Ps)}})),Cn}function lr(E,I){return yr.apply(this,arguments)}function yr(){return(yr=(0,F.Z)(function*(E,I){const N=on(E),z=(yield qi()).transaction(Ps,"readwrite"),Q=z.objectStore(Ps),de=yield Q.get(N);return yield Q.put(I,N),yield z.done,(!de||de.fid!==I.fid)&&xt(E,I.fid),I})).apply(this,arguments)}function ms(E){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,F.Z)(function*(E){const I=on(E),B=(yield qi()).transaction(Ps,"readwrite");yield B.objectStore(Ps).delete(I),yield B.done})).apply(this,arguments)}function _s(E,I){return Ei.apply(this,arguments)}function Ei(){return(Ei=(0,F.Z)(function*(E,I){const N=on(E),z=(yield qi()).transaction(Ps,"readwrite"),Q=z.objectStore(Ps),de=yield Q.get(N),Ye=I(de);return void 0===Ye?yield Q.delete(N):yield Q.put(Ye,N),yield z.done,Ye&&(!de||de.fid!==Ye.fid)&&xt(E,Ye.fid),Ye})).apply(this,arguments)}function j(E){return U.apply(this,arguments)}function U(){return U=(0,F.Z)(function*(E){let I;const N=yield _s(E.appConfig,B=>{const z=function K(E){return Zn(E||{fid:sn(),registrationStatus:0})}(B),Q=function Ce(E,I){if(0===I.registrationStatus){if(!navigator.onLine)return{installationEntry:I,registrationPromise:Promise.reject(Tt.create("app-offline"))};const N={fid:I.fid,registrationStatus:1,registrationTime:Date.now()},B=function re(E,I){return $e.apply(this,arguments)}(E,N);return{installationEntry:N,registrationPromise:B}}return 1===I.registrationStatus?{installationEntry:I,registrationPromise:Ft(E)}:{installationEntry:I}}(E,z);return I=Q.registrationPromise,Q.installationEntry});return N.fid===Yt?{installationEntry:yield I}:{installationEntry:N,registrationPromise:I}}),U.apply(this,arguments)}function $e(){return $e=(0,F.Z)(function*(E,I){try{const N=yield function fe(E,I){return te.apply(this,arguments)}(E,I);return lr(E.appConfig,N)}catch(N){throw At(N)&&409===N.customData.serverCode?yield ms(E.appConfig):yield lr(E.appConfig,{fid:I.fid,registrationStatus:0}),N}}),$e.apply(this,arguments)}function Ft(E){return mn.apply(this,arguments)}function mn(){return(mn=(0,F.Z)(function*(E){let I=yield fr(E.appConfig);for(;1===I.registrationStatus;)yield qe(100),I=yield fr(E.appConfig);if(0===I.registrationStatus){const{installationEntry:N,registrationPromise:B}=yield j(E);return B||N}return I})).apply(this,arguments)}function fr(E){return _s(E,I=>{if(!I)throw Tt.create("installation-not-found");return Zn(I)})}function Zn(E){return function An(E){return 1===E.registrationStatus&&E.registrationTime+De<Date.now()}(E)?{fid:E.fid,registrationStatus:0}:E}function ai(){return(ai=(0,F.Z)(function*({appConfig:E,heartbeatServiceProvider:I},N){const B=function ys(E,{fid:I}){return`${vn(E)}/${I}/authTokens:generate`}(E,N),z=function sr(E,{refreshToken:I}){const N=Br(E);return N.append("Authorization",function J(E){return`${Oe} ${E}`}(I)),N}(E,N),Q=I.getImmediate({optional:!0});if(Q){const bt=yield Q.getHeartbeatsHeader();bt&&z.append("x-firebase-client",bt)}const Ye={method:"POST",headers:z,body:JSON.stringify({installation:{sdkVersion:Ae,appId:E.appId}})},Ze=yield Vr(()=>fetch(B,Ye));if(Ze.ok)return an(yield Ze.json());throw yield Ln("Generate Auth Token",Ze)})).apply(this,arguments)}function ks(E){return pl.apply(this,arguments)}function pl(){return pl=(0,F.Z)(function*(E,I=!1){let N;const B=yield _s(E.appConfig,Q=>{if(!Xt(Q))throw Tt.create("not-registered");const de=Q.authToken;if(!I&&function Nt(E){return 2===E.requestStatus&&!function bn(E){const I=Date.now();return I<E.creationTime||E.creationTime+E.expiresIn<I+je}(E)}(de))return Q;if(1===de.requestStatus)return N=function me(E,I){return se.apply(this,arguments)}(E,I),Q;{if(!navigator.onLine)throw Tt.create("app-offline");const Ye=function _n(E){const I={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},E),{authToken:I})}(Q);return N=function St(E,I){return Pt.apply(this,arguments)}(E,Ye),Ye}});return N?yield N:B.authToken}),pl.apply(this,arguments)}function se(){return(se=(0,F.Z)(function*(E,I){let N=yield Ve(E.appConfig);for(;1===N.authToken.requestStatus;)yield qe(100),N=yield Ve(E.appConfig);const B=N.authToken;return 0===B.requestStatus?ks(E,I):B})).apply(this,arguments)}function Ve(E){return _s(E,I=>{if(!Xt(I))throw Tt.create("not-registered");return function jr(E){return 1===E.requestStatus&&E.requestTime+De<Date.now()}(I.authToken)?Object.assign(Object.assign({},I),{authToken:{requestStatus:0}}):I})}function Pt(){return Pt=(0,F.Z)(function*(E,I){try{const N=yield function ln(E,I){return ai.apply(this,arguments)}(E,I),B=Object.assign(Object.assign({},I),{authToken:N});return yield lr(E.appConfig,B),N}catch(N){if(!At(N)||401!==N.customData.serverCode&&404!==N.customData.serverCode){const B=Object.assign(Object.assign({},I),{authToken:{requestStatus:0}});yield lr(E.appConfig,B)}else yield ms(E.appConfig);throw N}}),Pt.apply(this,arguments)}function Xt(E){return void 0!==E&&2===E.registrationStatus}function Cu(){return(Cu=(0,F.Z)(function*(E){const I=E,{installationEntry:N,registrationPromise:B}=yield j(I);return B?B.catch(console.error):ks(I).catch(console.error),N.fid})).apply(this,arguments)}function xa(){return xa=(0,F.Z)(function*(E,I=!1){const N=E;return yield function Ki(E){return ot.apply(this,arguments)}(N),(yield ks(N,I)).token}),xa.apply(this,arguments)}function ot(){return(ot=(0,F.Z)(function*(E){const{registrationPromise:I}=yield j(E);I&&(yield I)})).apply(this,arguments)}function pr(E){return Tt.create("missing-app-config-values",{valueName:E})}const Zt="installations",Ho=E=>{const I=E.getProvider("app").getImmediate(),N=function gl(E){if(!E||!E.options)throw pr("App Configuration");if(!E.name)throw pr("App Name");const I=["projectId","apiKey","appId"];for(const N of I)if(!E.options[N])throw pr(N);return{appName:E.name,projectId:E.options.projectId,apiKey:E.options.apiKey,appId:E.options.appId}}(I);return{app:I,appConfig:N,heartbeatServiceProvider:(0,he._getProvider)(I,"heartbeat"),_delete:()=>Promise.resolve()}},Qs=E=>{const I=E.getProvider("app").getImmediate(),N=(0,he._getProvider)(I,Zt).getImmediate();return{getId:()=>function vr(E){return Cu.apply(this,arguments)}(N),getToken:z=>function yp(E){return xa.apply(this,arguments)}(N,z)}};(function zo(){(0,he._registerComponent)(new le.wA(Zt,Ho,"PUBLIC")),(0,he._registerComponent)(new le.wA("installations-internal",Qs,"PRIVATE"))})(),(0,he.registerVersion)(Zs,ge),(0,he.registerVersion)(Zs,ge,"esm2017");const gr="@firebase/remote-config",jn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class Xs{constructor(I,N,B,z){this.client=I,this.storage=N,this.storageCache=B,this.logger=z}isCachedDataFresh(I,N){if(!N)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const B=Date.now()-N,z=B<=I;return this.logger.debug(`Config fetch cache check. Cache age millis: ${B}. Cache max age millis (minimumFetchIntervalMillis setting): ${I}. Is cache hit: ${z}.`),z}fetch(I){var N=this;return(0,F.Z)(function*(){const[B,z]=yield Promise.all([N.storage.getLastSuccessfulFetchTimestampMillis(),N.storage.getLastSuccessfulFetchResponse()]);if(z&&N.isCachedDataFresh(I.cacheMaxAgeMillis,B))return z;I.eTag=z&&z.eTag;const Q=yield N.client.fetch(I),de=[N.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Q.status&&de.push(N.storage.setLastSuccessfulFetchResponse(Q)),yield Promise.all(de),Q})()}}function Rm(E=navigator){return E.languages&&E.languages[0]||E.language}class Yc{constructor(I,N,B,z,Q,de){this.firebaseInstallations=I,this.sdkVersion=N,this.namespace=B,this.projectId=z,this.apiKey=Q,this.appId=de}fetch(I){var N=this;return(0,F.Z)(function*(){const[B,z]=yield Promise.all([N.firebaseInstallations.getId(),N.firebaseInstallations.getToken()]),de=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${N.projectId}/namespaces/${N.namespace}:fetch?key=${N.apiKey}`,Ye={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":I.eTag||"*"},Ze={sdk_version:N.sdkVersion,app_instance_id:B,app_instance_id_token:z,app_id:N.appId,language_code:Rm()},bt={method:"POST",headers:Ye,body:JSON.stringify(Ze)},Vt=fetch(de,bt),Ut=new Promise((ns,rs)=>{I.signal.addEventListener(()=>{const Ka=new Error("The operation was aborted.");Ka.name="AbortError",rs(Ka)})});let Li;try{yield Promise.race([Vt,Ut]),Li=yield Vt}catch(ns){let rs="fetch-client-network";throw"AbortError"===ns?.name&&(rs="fetch-timeout"),jn.create(rs,{originalErrorMessage:ns?.message})}let dr=Li.status;const _a=Li.headers.get("ETag")||void 0;let Hl,ho;if(200===Li.status){let ns;try{ns=yield Li.json()}catch(rs){throw jn.create("fetch-client-parse",{originalErrorMessage:rs?.message})}Hl=ns.entries,ho=ns.state}if("INSTANCE_STATE_UNSPECIFIED"===ho?dr=500:"NO_CHANGE"===ho?dr=304:("NO_TEMPLATE"===ho||"EMPTY_CONFIG"===ho)&&(Hl={}),304!==dr&&200!==dr)throw jn.create("fetch-status",{httpStatus:dr});return{status:dr,eTag:_a,config:Hl}})()}}class xm{constructor(I,N){this.client=I,this.storage=N}fetch(I){var N=this;return(0,F.Z)(function*(){const B=(yield N.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return N.attemptFetch(I,B)})()}attemptFetch(I,{throttleEndTimeMillis:N,backoffCount:B}){var z=this;return(0,F.Z)(function*(){yield function Om(E,I){return new Promise((N,B)=>{const z=Math.max(I-Date.now(),0),Q=setTimeout(N,z);E.addEventListener(()=>{clearTimeout(Q),B(jn.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(I.signal,N);try{const Q=yield z.client.fetch(I);return yield z.storage.deleteThrottleMetadata(),Q}catch(Q){if(!function Zc(E){if(!(E instanceof ae.ZR&&E.customData))return!1;const I=Number(E.customData.httpStatus);return 429===I||500===I||503===I||504===I}(Q))throw Q;const de={throttleEndTimeMillis:Date.now()+(0,ae.$s)(B),backoffCount:B+1};return yield z.storage.setThrottleMetadata(de),z.attemptFetch(I,de)}})()}}class Mv{constructor(I,N,B,z,Q){this.app=I,this._client=N,this._storageCache=B,this._storage=z,this._logger=Q,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Au(E,I){const N=E.target.error||void 0;return jn.create(I,{originalErrorMessage:N&&N?.message})}const Qi="app_namespace_store";class Rv{constructor(I,N,B,z=function La(){return new Promise((E,I)=>{try{const N=indexedDB.open("firebase_remote_config",1);N.onerror=B=>{I(Au(B,"storage-open"))},N.onsuccess=B=>{E(B.target.result)},N.onupgradeneeded=B=>{0===B.oldVersion&&B.target.result.createObjectStore(Qi,{keyPath:"compositeKey"})}}catch(N){I(jn.create("storage-open",{originalErrorMessage:N?.message}))}})}()){this.appId=I,this.appName=N,this.namespace=B,this.openDbPromise=z}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(I){return this.set("last_fetch_status",I)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(I){return this.set("last_successful_fetch_timestamp_millis",I)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(I){return this.set("last_successful_fetch_response",I)}getActiveConfig(){return this.get("active_config")}setActiveConfig(I){return this.set("active_config",I)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(I){return this.set("active_config_etag",I)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(I){return this.set("throttle_metadata",I)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(I){var N=this;return(0,F.Z)(function*(){const B=yield N.openDbPromise;return new Promise((z,Q)=>{const Ye=B.transaction([Qi],"readonly").objectStore(Qi),Ze=N.createCompositeKey(I);try{const bt=Ye.get(Ze);bt.onerror=Vt=>{Q(Au(Vt,"storage-get"))},bt.onsuccess=Vt=>{const Ut=Vt.target.result;z(Ut?Ut.value:void 0)}}catch(bt){Q(jn.create("storage-get",{originalErrorMessage:bt?.message}))}})})()}set(I,N){var B=this;return(0,F.Z)(function*(){const z=yield B.openDbPromise;return new Promise((Q,de)=>{const Ze=z.transaction([Qi],"readwrite").objectStore(Qi),bt=B.createCompositeKey(I);try{const Vt=Ze.put({compositeKey:bt,value:N});Vt.onerror=Ut=>{de(Au(Ut,"storage-set"))},Vt.onsuccess=()=>{Q()}}catch(Vt){de(jn.create("storage-set",{originalErrorMessage:Vt?.message}))}})})()}delete(I){var N=this;return(0,F.Z)(function*(){const B=yield N.openDbPromise;return new Promise((z,Q)=>{const Ye=B.transaction([Qi],"readwrite").objectStore(Qi),Ze=N.createCompositeKey(I);try{const bt=Ye.delete(Ze);bt.onerror=Vt=>{Q(Au(Vt,"storage-delete"))},bt.onsuccess=()=>{z()}}catch(bt){Q(jn.create("storage-delete",{originalErrorMessage:bt?.message}))}})})()}createCompositeKey(I){return[this.appId,this.appName,this.namespace,I].join()}}class fh{constructor(I){this.storage=I}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var I=this;return(0,F.Z)(function*(){const N=I.storage.getLastFetchStatus(),B=I.storage.getLastSuccessfulFetchTimestampMillis(),z=I.storage.getActiveConfig(),Q=yield N;Q&&(I.lastFetchStatus=Q);const de=yield B;de&&(I.lastSuccessfulFetchTimestampMillis=de);const Ye=yield z;Ye&&(I.activeConfig=Ye)})()}setLastFetchStatus(I){return this.lastFetchStatus=I,this.storage.setLastFetchStatus(I)}setLastSuccessfulFetchTimestampMillis(I){return this.lastSuccessfulFetchTimestampMillis=I,this.storage.setLastSuccessfulFetchTimestampMillis(I)}setActiveConfig(I){return this.activeConfig=I,this.storage.setActiveConfig(I)}}function Qc(){return vl.apply(this,arguments)}function vl(){return(vl=(0,F.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}!function eo(){(0,he._registerComponent)(new le.wA("remote-config",function E(I,{instanceIdentifier:N}){const B=I.getProvider("app").getImmediate(),z=I.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw jn.create("registration-window");if(!(0,ae.hl)())throw jn.create("indexed-db-unavailable");const{projectId:Q,apiKey:de,appId:Ye}=B.options;if(!Q)throw jn.create("registration-project-id");if(!de)throw jn.create("registration-api-key");if(!Ye)throw jn.create("registration-app-id");const Ze=new Rv(Ye,B.name,N=N||"firebase"),bt=new fh(Ze),Vt=new Ee.Yd(gr);Vt.logLevel=Ee.in.ERROR;const Ut=new Yc(z,he.SDK_VERSION,N,Q,de,Ye),Li=new xm(Ut,Ze),dr=new Xs(Li,Ze,bt,Vt),_a=new Mv(B,dr,bt,Ze,Vt);return function xi(E){const I=(0,ae.m9)(E);I._initializePromise||(I._initializePromise=I._storageCache.loadFromStorage().then(()=>{I._isInitializationComplete=!0}))}(_a),_a},"PUBLIC").setMultipleInstances(!0)),(0,he.registerVersion)(gr,"0.4.4"),(0,he.registerVersion)(gr,"0.4.4","esm2017")}();const ph=(E,I)=>I.some(N=>E instanceof N);let Jc,Mo;const Mu=new WeakMap,Ro=new WeakMap,Ci=new WeakMap,li=new WeakMap,bl=new WeakMap;let to={get(E,I,N){if(E instanceof IDBTransaction){if("done"===I)return Ro.get(E);if("objectStoreNames"===I)return E.objectStoreNames||Ci.get(E);if("store"===I)return N.objectStoreNames[1]?void 0:N.objectStore(N.objectStoreNames[0])}return ui(E[I])},set:(E,I,N)=>(E[I]=N,!0),has:(E,I)=>E instanceof IDBTransaction&&("done"===I||"store"===I)||I in E};function mh(E){return"function"==typeof E?function gh(E){return E!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Nu(){return Mo||(Mo=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(E)?function(...I){return E.apply(Ar(this),I),ui(Mu.get(this))}:function(...I){return ui(E.apply(Ar(this),I))}:function(I,...N){const B=E.call(Ar(this),I,...N);return Ci.set(B,I.sort?I.sort():[I]),ui(B)}}(E):(E instanceof IDBTransaction&&function Ba(E){if(Ro.has(E))return;const I=new Promise((N,B)=>{const z=()=>{E.removeEventListener("complete",Q),E.removeEventListener("error",de),E.removeEventListener("abort",de)},Q=()=>{N(),z()},de=()=>{B(E.error||new DOMException("AbortError","AbortError")),z()};E.addEventListener("complete",Q),E.addEventListener("error",de),E.addEventListener("abort",de)});Ro.set(E,I)}(E),ph(E,function wp(){return Jc||(Jc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(E,to):E)}function ui(E){if(E instanceof IDBRequest)return function Hr(E){const I=new Promise((N,B)=>{const z=()=>{E.removeEventListener("success",Q),E.removeEventListener("error",de)},Q=()=>{N(ui(E.result)),z()},de=()=>{B(E.error),z()};E.addEventListener("success",Q),E.addEventListener("error",de)});return I.then(N=>{N instanceof IDBCursor&&Mu.set(N,E)}).catch(()=>{}),bl.set(I,E),I}(E);if(li.has(E))return li.get(E);const I=mh(E);return I!==E&&(li.set(E,I),bl.set(I,E)),I}const Ar=E=>bl.get(E);function Ru(E,I,{blocked:N,upgrade:B,blocking:z,terminated:Q}={}){const de=indexedDB.open(E,I),Ye=ui(de);return B&&de.addEventListener("upgradeneeded",Ze=>{B(ui(de.result),Ze.oldVersion,Ze.newVersion,ui(de.transaction))}),N&&de.addEventListener("blocked",()=>N()),Ye.then(Ze=>{Q&&Ze.addEventListener("close",()=>Q()),z&&Ze.addEventListener("versionchange",()=>z())}).catch(()=>{}),Ye}function no(E,{blocked:I}={}){const N=indexedDB.deleteDatabase(E);return I&&N.addEventListener("blocked",()=>I()),ui(N).then(()=>{})}const Xc=["get","getKey","getAll","getAllKeys","count"],Oo=["put","add","delete","clear"],Va=new Map;function wl(E,I){if(!(E instanceof IDBDatabase)||I in E||"string"!=typeof I)return;if(Va.get(I))return Va.get(I);const N=I.replace(/FromIndex$/,""),B=I!==N,z=Oo.includes(N);if(!(N in(B?IDBIndex:IDBObjectStore).prototype)||!z&&!Xc.includes(N))return;const Q=function(){var de=(0,F.Z)(function*(Ye,...Ze){const bt=this.transaction(Ye,z?"readwrite":"readonly");let Vt=bt.store;return B&&(Vt=Vt.index(Ze.shift())),(yield Promise.all([Vt[N](...Ze),z&&bt.done]))[0]});return function(Ze){return de.apply(this,arguments)}}();return Va.set(I,Q),Q}!function zr(E){to=E(to)}(E=>({...E,get:(I,N,B)=>wl(I,N)||E.get(I,N,B),has:(I,N)=>!!wl(I,N)||E.has(I,N)}));const jt="/firebase-messaging-sw.js",Dl="/firebase-cloud-messaging-push-scope",_h="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",yh="https://fcmregistrations.googleapis.com/v1",Ou="google.c.a.c_id",vh="google.c.a.c_l",xu="google.c.a.ts",Pm="google.c.a.e";var ye=(()=>{return(E=ye||(ye={})).PUSH_RECEIVED="push-received",E.NOTIFICATION_CLICKED="notification-clicked",ye;var E})();function Ht(E){const I=new Uint8Array(E);return btoa(String.fromCharCode(...I)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function El(E){const N=(E+"=".repeat((4-E.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),B=atob(N),z=new Uint8Array(B.length);for(let Q=0;Q<B.length;++Q)z[Q]=B.charCodeAt(Q);return z}const Cl="fcm_token_details_db",Nr=5,Yo="fcm_token_object_Store";function Ti(){return Ti=(0,F.Z)(function*(E){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Q=>Q.name).includes(Cl))return null;let I=null;return(yield Ru(Cl,Nr,{upgrade:(B=(0,F.Z)(function*(z,Q,de,Ye){var Ze;if(Q<2||!z.objectStoreNames.contains(Yo))return;const bt=Ye.objectStore(Yo),Vt=yield bt.index("fcmSenderId").get(E);if(yield bt.clear(),Vt)if(2===Q){const Ut=Vt;if(!Ut.auth||!Ut.p256dh||!Ut.endpoint)return;I={token:Ut.fcmToken,createTime:null!==(Ze=Ut.createTime)&&void 0!==Ze?Ze:Date.now(),subscriptionOptions:{auth:Ut.auth,p256dh:Ut.p256dh,endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:"string"==typeof Ut.vapidKey?Ut.vapidKey:Ht(Ut.vapidKey)}}}else if(3===Q){const Ut=Vt;I={token:Ut.fcmToken,createTime:Ut.createTime,subscriptionOptions:{auth:Ht(Ut.auth),p256dh:Ht(Ut.p256dh),endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:Ht(Ut.vapidKey)}}}else if(4===Q){const Ut=Vt;I={token:Ut.fcmToken,createTime:Ut.createTime,subscriptionOptions:{auth:Ht(Ut.auth),p256dh:Ht(Ut.p256dh),endpoint:Ut.endpoint,swScope:Ut.swScope,vapidKey:Ht(Ut.vapidKey)}}}}),function(Q,de,Ye,Ze){return B.apply(this,arguments)})})).close(),yield no(Cl),yield no("fcm_vapid_details_db"),yield no("undefined"),function wh(E){if(!E||!E.subscriptionOptions)return!1;const{subscriptionOptions:I}=E;return"number"==typeof E.createTime&&E.createTime>0&&"string"==typeof E.token&&E.token.length>0&&"string"==typeof I.auth&&I.auth.length>0&&"string"==typeof I.p256dh&&I.p256dh.length>0&&"string"==typeof I.endpoint&&I.endpoint.length>0&&"string"==typeof I.swScope&&I.swScope.length>0&&"string"==typeof I.vapidKey&&I.vapidKey.length>0}(I)?I:null;var B}),Ti.apply(this,arguments)}const ku="firebase-messaging-database",km=1,ro="firebase-messaging-store";let Tl=null;function wr(){return Tl||(Tl=Ru(ku,km,{upgrade:(E,I)=>{0===I&&E.createObjectStore(ro)}})),Tl}function Ji(E){return Ls.apply(this,arguments)}function Ls(){return Ls=(0,F.Z)(function*(E){const I=Fu(E),B=yield(yield wr()).transaction(ro).objectStore(ro).get(I);if(B)return B;{const z=yield function Pu(E){return Ti.apply(this,arguments)}(E.appConfig.senderId);if(z)return yield Zo(E,z),z}}),Ls.apply(this,arguments)}function Zo(E,I){return Xi.apply(this,arguments)}function Xi(){return(Xi=(0,F.Z)(function*(E,I){const N=Fu(E),z=(yield wr()).transaction(ro,"readwrite");return yield z.objectStore(ro).put(I,N),yield z.done,I})).apply(this,arguments)}function Il(){return(Il=(0,F.Z)(function*(E){const I=Fu(E),B=(yield wr()).transaction(ro,"readwrite");yield B.objectStore(ro).delete(I),yield B.done})).apply(this,arguments)}function Fu({appConfig:E}){return E.appId}const Dr=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Ua(E,I){return ed.apply(this,arguments)}function ed(){return(ed=(0,F.Z)(function*(E,I){const N=yield td(E),B=Ch(I),z={method:"POST",headers:N,body:JSON.stringify(B)};let Q;try{Q=yield(yield fetch(Sl(E.appConfig),z)).json()}catch(de){throw Dr.create("token-subscribe-failed",{errorInfo:de?.toString()})}if(Q.error)throw Dr.create("token-subscribe-failed",{errorInfo:Q.error.message});if(!Q.token)throw Dr.create("token-subscribe-no-token");return Q.token})).apply(this,arguments)}function Eh(){return(Eh=(0,F.Z)(function*(E,I){const N=yield td(E),B=Ch(I.subscriptionOptions),z={method:"PATCH",headers:N,body:JSON.stringify(B)};let Q;try{Q=yield(yield fetch(`${Sl(E.appConfig)}/${I.token}`,z)).json()}catch(de){throw Dr.create("token-update-failed",{errorInfo:de?.toString()})}if(Q.error)throw Dr.create("token-update-failed",{errorInfo:Q.error.message});if(!Q.token)throw Dr.create("token-update-no-token");return Q.token})).apply(this,arguments)}function Bu(E,I){return Vu.apply(this,arguments)}function Vu(){return(Vu=(0,F.Z)(function*(E,I){const B={method:"DELETE",headers:yield td(E)};try{const Q=yield(yield fetch(`${Sl(E.appConfig)}/${I}`,B)).json();if(Q.error)throw Dr.create("token-unsubscribe-failed",{errorInfo:Q.error.message})}catch(z){throw Dr.create("token-unsubscribe-failed",{errorInfo:z?.toString()})}})).apply(this,arguments)}function Sl({projectId:E}){return`${yh}/projects/${E}/registrations`}function td(E){return Al.apply(this,arguments)}function Al(){return(Al=(0,F.Z)(function*({appConfig:E,installations:I}){const N=yield I.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":E.apiKey,"x-goog-firebase-installations-auth":`FIS ${N}`})})).apply(this,arguments)}function Ch({p256dh:E,auth:I,endpoint:N,vapidKey:B}){const z={web:{endpoint:N,auth:I,p256dh:E}};return B!==_h&&(z.web.applicationPubKey=B),z}const Uu=6048e5;function ju(){return ju=(0,F.Z)(function*(E){const I=yield function Cp(E,I){return Th.apply(this,arguments)}(E.swRegistration,E.vapidKey),N={vapidKey:E.vapidKey,swScope:E.swRegistration.scope,endpoint:I.endpoint,auth:Ht(I.getKey("auth")),p256dh:Ht(I.getKey("p256dh"))},B=yield Ji(E.firebaseDependencies);if(B){if(function Lm(E,I){return I.vapidKey===E.vapidKey&&I.endpoint===E.endpoint&&I.auth===E.auth&&I.p256dh===E.p256dh}(B.subscriptionOptions,N))return Date.now()>=B.createTime+Uu?function Qn(E,I){return Gu.apply(this,arguments)}(E,{token:B.token,createTime:Date.now(),subscriptionOptions:N}):B.token;try{yield Bu(E.firebaseDependencies,B.token)}catch(z){console.warn(z)}return Ep(E.firebaseDependencies,N)}return Ep(E.firebaseDependencies,N)}),ju.apply(this,arguments)}function io(){return io=(0,F.Z)(function*(E){const I=yield Ji(E.firebaseDependencies);I&&(yield Bu(E.firebaseDependencies,I.token),yield function Dh(E){return Il.apply(this,arguments)}(E.firebaseDependencies));const N=yield E.swRegistration.pushManager.getSubscription();return!N||N.unsubscribe()}),io.apply(this,arguments)}function Gu(){return Gu=(0,F.Z)(function*(E,I){try{const N=yield function Lu(E,I){return Eh.apply(this,arguments)}(E.firebaseDependencies,I),B=Object.assign(Object.assign({},I),{token:N,createTime:Date.now()});return yield Zo(E.firebaseDependencies,B),N}catch(N){throw yield function Xr(E){return io.apply(this,arguments)}(E),N}}),Gu.apply(this,arguments)}function Ep(E,I){return Qo.apply(this,arguments)}function Qo(){return(Qo=(0,F.Z)(function*(E,I){const B={token:yield Ua(E,I),createTime:Date.now(),subscriptionOptions:I};return yield Zo(E,B),B.token})).apply(this,arguments)}function Th(){return(Th=(0,F.Z)(function*(E,I){return(yield E.pushManager.getSubscription())||E.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:El(I)})})).apply(this,arguments)}function $u(E){const I={from:E.from,collapseKey:E.collapse_key,messageId:E.fcmMessageId};return function nd(E,I){if(!I.notification)return;E.notification={};const N=I.notification.title;N&&(E.notification.title=N);const B=I.notification.body;B&&(E.notification.body=B);const z=I.notification.image;z&&(E.notification.image=z);const Q=I.notification.icon;Q&&(E.notification.icon=Q)}(I,E),function rd(E,I){I.data&&(E.data=I.data)}(I,E),function Ih(E,I){var N,B,z,Q,de;if(!(I.fcmOptions||null!==(N=I.notification)&&void 0!==N&&N.click_action))return;E.fcmOptions={};const Ye=null!==(z=null===(B=I.fcmOptions)||void 0===B?void 0:B.link)&&void 0!==z?z:null===(Q=I.notification)||void 0===Q?void 0:Q.click_action;Ye&&(E.fcmOptions.link=Ye);const Ze=null===(de=I.fcmOptions)||void 0===de?void 0:de.analytics_label;Ze&&(E.fcmOptions.analyticsLabel=Ze)}(I,E),I}function ja(E,I){const N=[];for(let B=0;B<E.length;B++)N.push(E.charAt(B)),B<I.length&&N.push(I.charAt(B));return N.join("")}function so(E){return Dr.create("missing-app-config-values",{valueName:E})}ja("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),ja("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Bm{constructor(I,N,B){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const z=function Ga(E){if(!E||!E.options)throw so("App Configuration Object");if(!E.name)throw so("App Name");const I=["projectId","apiKey","appId","messagingSenderId"],{options:N}=E;for(const B of I)if(!N[B])throw so(B);return{appName:E.name,projectId:N.projectId,apiKey:N.apiKey,appId:N.appId,senderId:N.messagingSenderId}}(I);this.firebaseDependencies={app:I,appConfig:z,installations:N,analyticsProvider:B}}_delete(){return Promise.resolve()}}function Tp(E){return Hu.apply(this,arguments)}function Hu(){return(Hu=(0,F.Z)(function*(E){try{E.swRegistration=yield navigator.serviceWorker.register(jt,{scope:Dl}),E.swRegistration.update().catch(()=>{})}catch(I){throw Dr.create("failed-service-worker-registration",{browserErrorMessage:I?.message})}})).apply(this,arguments)}function Nl(){return(Nl=(0,F.Z)(function*(E,I){if(!I&&!E.swRegistration&&(yield Tp(E)),I||!E.swRegistration){if(!(I instanceof ServiceWorkerRegistration))throw Dr.create("invalid-sw-registration");E.swRegistration=I}})).apply(this,arguments)}function Xo(){return(Xo=(0,F.Z)(function*(E,I){I?E.vapidKey=I:E.vapidKey||(E.vapidKey=_h)})).apply(this,arguments)}function $a(){return $a=(0,F.Z)(function*(E,I){if(!navigator)throw Dr.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Dr.create("permission-blocked");return yield function Jo(E,I){return Xo.apply(this,arguments)}(E,I?.vapidKey),yield function Ov(E,I){return Nl.apply(this,arguments)}(E,I?.serviceWorkerRegistration),function Dp(E){return ju.apply(this,arguments)}(E)}),$a.apply(this,arguments)}function ea(){return(ea=(0,F.Z)(function*(E,I,N){const B=function ta(E){switch(E){case ye.NOTIFICATION_CLICKED:return"notification_open";case ye.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(I);(yield E.firebaseDependencies.analyticsProvider.get()).logEvent(B,{message_id:N[Ou],message_name:N[vh],message_time:N[xu],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function na(){return na=(0,F.Z)(function*(E,I){const N=I.data;if(!N.isFirebaseMessaging)return;E.onMessageHandler&&N.messageType===ye.PUSH_RECEIVED&&("function"==typeof E.onMessageHandler?E.onMessageHandler($u(N)):E.onMessageHandler.next($u(N)));const B=N.data;(function id(E){return"object"==typeof E&&!!E&&Ou in E})(B)&&"1"===B[Pm]&&(yield function sd(E,I,N){return ea.apply(this,arguments)}(E,N.messageType,B))}),na.apply(this,arguments)}const xo="@firebase/messaging",ra=E=>{const I=new Bm(E.getProvider("app").getImmediate(),E.getProvider("installations-internal").getImmediate(),E.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",N=>function Wu(E,I){return na.apply(this,arguments)}(I,N)),I},qu=E=>{const I=E.getProvider("messaging").getImmediate();return{getToken:B=>function zu(E,I){return $a.apply(this,arguments)}(I,B)}};function Ip(){return Ku.apply(this,arguments)}function Ku(){return(Ku=(0,F.Z)(function*(){try{yield(0,ae.eu)()}catch{return!1}return typeof window<"u"&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ml(){(0,he._registerComponent)(new le.wA("messaging",ra,"PUBLIC")),(0,he._registerComponent)(new le.wA("messaging-internal",qu,"PRIVATE")),(0,he.registerVersion)(xo,"0.12.4"),(0,he.registerVersion)(xo,"0.12.4","esm2017")}();const Fn="analytics",Mh="firebase_id",Yu="origin",ad=6e4,Zu="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",Qu="https://www.googletagmanager.com/gtag/js",Mr=new Ee.Yd("@firebase/analytics"),mr=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function ld(E){if(!E.startsWith(Qu)){const I=mr.create("invalid-gtag-resource",{gtagURL:E});return Mr.warn(I.message),""}return E}function Rl(E){return Promise.all(E.map(I=>I.catch(N=>N)))}function oa(){return(oa=(0,F.Z)(function*(E,I,N,B,z,Q){const de=B[z];try{if(de)yield I[de];else{const Ze=(yield Rl(N)).find(bt=>bt.measurementId===z);Ze&&(yield I[Ze.appId])}}catch(Ye){Mr.error(Ye)}E("config",z,Q)})).apply(this,arguments)}function xl(){return(xl=(0,F.Z)(function*(E,I,N,B,z){try{let Q=[];if(z&&z.send_to){let de=z.send_to;Array.isArray(de)||(de=[de]);const Ye=yield Rl(N);for(const Ze of de){const bt=Ye.find(Ut=>Ut.measurementId===Ze),Vt=bt&&I[bt.appId];if(!Vt){Q=[];break}Q.push(Vt)}}0===Q.length&&(Q=Object.values(I)),yield Promise.all(Q),E("event",B,z||{})}catch(Q){Mr.error(Q)}})).apply(this,arguments)}const Pl=30,la=new class aa{constructor(I={},N=1e3){this.throttleMetadata=I,this.intervalMillis=N}getThrottleMetadata(I){return this.throttleMetadata[I]}setThrottleMetadata(I,N){this.throttleMetadata[I]=N}deleteThrottleMetadata(I){delete this.throttleMetadata[I]}};function Np(E){return new Headers({Accept:"application/json","x-goog-api-key":E})}function fn(){return(fn=(0,F.Z)(function*(E){var I;const{appId:N,apiKey:B}=E,z={method:"GET",headers:Np(B)},Q=Zu.replace("{app-id}",N),de=yield fetch(Q,z);if(200!==de.status&&304!==de.status){let Ye="";try{const Ze=yield de.json();null!==(I=Ze.error)&&void 0!==I&&I.message&&(Ye=Ze.error.message)}catch{}throw mr.create("config-fetch-failed",{httpStatus:de.status,responseMessage:Ye})}return de.json()})).apply(this,arguments)}function kl(){return(kl=(0,F.Z)(function*(E,I=la,N){const{appId:B,apiKey:z,measurementId:Q}=E.options;if(!B)throw mr.create("no-app-id");if(!z){if(Q)return{measurementId:Q,appId:B};throw mr.create("no-api-key")}const de=I.getThrottleMetadata(B)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Ye=new Pv;return setTimeout((0,F.Z)(function*(){Ye.abort()}),void 0!==N?N:ad),cd({appId:B,apiKey:z,measurementId:Q},de,Ye,I)})).apply(this,arguments)}function cd(E,I,N){return dd.apply(this,arguments)}function dd(){return dd=(0,F.Z)(function*(E,{throttleEndTimeMillis:I,backoffCount:N},B,z=la){var Q;const{appId:de,measurementId:Ye}=E;try{yield function xv(E,I){return new Promise((N,B)=>{const z=Math.max(I-Date.now(),0),Q=setTimeout(N,z);E.addEventListener(()=>{clearTimeout(Q),B(mr.create("fetch-throttle",{throttleEndTimeMillis:I}))})})}(B,I)}catch(Ze){if(Ye)return Mr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${Ze?.message}]`),{appId:de,measurementId:Ye};throw Ze}try{const Ze=yield function Rh(E){return fn.apply(this,arguments)}(E);return z.deleteThrottleMetadata(de),Ze}catch(Ze){const bt=Ze;if(!function Mp(E){if(!(E instanceof ae.ZR&&E.customData))return!1;const I=Number(E.customData.httpStatus);return 429===I||500===I||503===I||504===I}(bt)){if(z.deleteThrottleMetadata(de),Ye)return Mr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Ye} provided in the "measurementId" field in the local Firebase config. [${bt?.message}]`),{appId:de,measurementId:Ye};throw Ze}const Vt=503===Number(null===(Q=bt?.customData)||void 0===Q?void 0:Q.httpStatus)?(0,ae.$s)(N,z.intervalMillis,Pl):(0,ae.$s)(N,z.intervalMillis),Ut={throttleEndTimeMillis:Date.now()+Vt,backoffCount:N+1};return z.setThrottleMetadata(de,Ut),Mr.debug(`Calling attemptFetch again in ${Vt} millis`),cd(E,Ut,B,z)}}),dd.apply(this,arguments)}class Pv{constructor(){this.listeners=[]}addEventListener(I){this.listeners.push(I)}abort(){this.listeners.forEach(I=>I())}}let ua,xp;function Rp(){return(Rp=(0,F.Z)(function*(E,I,N,B,z){if(z&&z.global)E("event",N,B);else{const Q=yield I;E("event",N,Object.assign(Object.assign({},B),{send_to:Q}))}})).apply(this,arguments)}function ko(){return(ko=(0,F.Z)(function*(){if(!(0,ae.hl)())return Mr.warn(mr.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(E){return Mr.warn(mr.create("indexeddb-unavailable",{errorInfo:E?.toString()}).message),!1}return!0})).apply(this,arguments)}function ki(){return ki=(0,F.Z)(function*(E,I,N,B,z,Q,de){var Ye;const Ze=function Vm(E){return kl.apply(this,arguments)}(E);Ze.then(dr=>{N[dr.measurementId]=dr.appId,E.options.measurementId&&dr.measurementId!==E.options.measurementId&&Mr.warn(`The measurement ID in the local Firebase config (${E.options.measurementId}) does not match the measurement ID fetched from the server (${dr.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(dr=>Mr.error(dr)),I.push(Ze);const bt=function Ii(){return ko.apply(this,arguments)}().then(dr=>{if(dr)return B.getId()}),[Vt,Ut]=yield Promise.all([Ze,bt]);(function qa(E){const I=window.document.getElementsByTagName("script");for(const N of Object.values(I))if(N.src&&N.src.includes(Qu)&&N.src.includes(E))return N;return null})(Q)||function ao(E,I){const N=function Ol(E,I){let N;return window.trustedTypes&&(N=window.trustedTypes.createPolicy(E,I)),N}("firebase-js-sdk-policy",{createScriptURL:ld}),B=document.createElement("script"),z=`${Qu}?l=${E}&id=${I}`;B.src=N?N?.createScriptURL(z):z,B.async=!0,document.head.appendChild(B)}(Q,Vt.measurementId),xp&&(z("consent","default",xp),function fd(E){xp=E}(void 0)),z("js",new Date);const Li=null!==(Ye=de?.config)&&void 0!==Ye?Ye:{};return Li[Yu]="firebase",Li.update=!0,null!=Ut&&(Li[Mh]=Ut),z("config",Vt.measurementId,Li),ua&&(z("set",ua),function nc(E){ua=E}(void 0)),Vt.measurementId}),ki.apply(this,arguments)}class wn{constructor(I){this.app=I}_delete(){return delete ct[this.app.options.appId],Promise.resolve()}}let ct={},Ll=[];const vt={};let cr,yn,Bl="dataLayer",Si="gtag",Vn=!1;function lo(E,I,N){!function Es(){const E=[];if((0,ae.ru)()&&E.push("This is a browser extension environment."),(0,ae.zI)()||E.push("Cookies are not available."),E.length>0){const I=E.map((B,z)=>`(${z+1}) ${B}`).join(" "),N=mr.create("invalid-analytics-context",{errorInfo:I});Mr.warn(N.message)}}();const B=E.options.appId;if(!B)throw mr.create("no-app-id");if(!E.options.apiKey){if(!E.options.measurementId)throw mr.create("no-api-key");Mr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${E.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=ct[B])throw mr.create("already-exists",{id:B});if(!Vn){!function Sp(E){let I=[];Array.isArray(window[E])?I=window[E]:window[E]=I}(Bl);const{wrappedGtag:Q,gtagCore:de}=function Po(E,I,N,B,z){let Q=function(...de){window[B].push(arguments)};return window[z]&&"function"==typeof window[z]&&(Q=window[z]),window[z]=function Wa(E,I,N,B){function Q(){return Q=(0,F.Z)(function*(de,...Ye){try{if("event"===de){const[Ze,bt]=Ye;yield function ud(E,I,N,B,z){return xl.apply(this,arguments)}(E,I,N,Ze,bt)}else if("config"===de){const[Ze,bt]=Ye;yield function Ju(E,I,N,B,z,Q){return oa.apply(this,arguments)}(E,I,N,B,Ze,bt)}else if("consent"===de){const[Ze]=Ye;E("consent","update",Ze)}else if("get"===de){const[Ze,bt,Vt]=Ye;E("get",Ze,bt,Vt)}else if("set"===de){const[Ze]=Ye;E("set",Ze)}else E(de,...Ye)}catch(Ze){Mr.error(Ze)}}),Q.apply(this,arguments)}return function z(de){return Q.apply(this,arguments)}}(Q,E,I,N),{gtagCore:Q,wrappedGtag:window[z]}}(ct,Ll,vt,Bl,Si);yn=Q,cr=de,Vn=!0}return ct[B]=function Jn(E,I,N,B,z,Q,de){return ki.apply(this,arguments)}(E,Ll,vt,I,cr,Bl,N),new wn(E)}function da(){return Vs.apply(this,arguments)}function Vs(){return(Vs=(0,F.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}const Fi="@firebase/analytics";!function xh(){(0,he._registerComponent)(new le.wA(Fn,(I,{options:N})=>lo(I.getProvider("app").getImmediate(),I.getProvider("installations-internal").getImmediate(),N),"PUBLIC")),(0,he._registerComponent)(new le.wA("analytics-internal",function E(I){try{const N=I.getProvider(Fn).getImmediate();return{logEvent:(B,z,Q)=>function es(E,I,N,B){E=(0,ae.m9)(E),function kv(E,I,N,B,z){return Rp.apply(this,arguments)}(yn,ct[E.app.options.appId],I,N,B).catch(z=>Mr.error(z))}(N,B,z,Q)}}catch(N){throw mr.create("interop-component-reg-failed",{reason:N})}},"PRIVATE")),(0,he.registerVersion)(Fi,"0.10.0"),(0,he.registerVersion)(Fi,"0.10.0","esm2017")}();var Vl=L(4408),ic=L(7565);const kh=new class sc extends ic.v{}(class Ph extends Vl.o{constructor(I,N){super(I,N),this.scheduler=I,this.work=N}schedule(I,N=0){return N>0?super.schedule(I,N):(this.delay=N,this.state=I,this.scheduler.flush(this),this)}execute(I,N){return N>0||this.closed?super.execute(I,N):this._execute(I,N)}requestAsyncId(I,N,B=0){return null!=B&&B>0||null==B&&this.delay>0?super.requestAsyncId(I,N,B):(I.flush(this),0)}});var oc=L(4986),pa=L(8505),gd=L(9468),Ul=L(5363);const ga=new u.GfV("7.6.1"),ts="__angularfire_symbol__analyticsIsSupportedValue",jl="__angularfire_symbol__analyticsIsSupported",md="__angularfire_symbol__remoteConfigIsSupportedValue",Xn="__angularfire_symbol__remoteConfigIsSupported",ma="__angularfire_symbol__messagingIsSupportedValue",Gl="__angularfire_symbol__messagingIsSupported";function Fh(E,I,N){if(I){if(1===I.length)return I[0];const Q=I.filter(de=>de.app===N);if(1===Q.length)return Q[0]}return N.container.getProvider(E).getImmediate({optional:!0})}globalThis[jl]||(globalThis[jl]=da().then(E=>globalThis[ts]=E).catch(()=>globalThis[ts]=!1)),globalThis[Gl]||(globalThis[Gl]=Ip().then(E=>globalThis[ma]=E).catch(()=>globalThis[ma]=!1)),globalThis[Xn]||(globalThis[Xn]=Qc().then(E=>globalThis[md]=E).catch(()=>globalThis[md]=!1));const Us=(E,I)=>{const N=I?[I]:(0,X.C6)(),B=[];return N.forEach(z=>{z.container.getProvider(E).instances.forEach(de=>{B.includes(de)||B.push(de)})}),B};function qr(){}class uo{constructor(I,N=kh){this.zone=I,this.delegate=N}now(){return this.delegate.now()}schedule(I,N,B){const z=this.zone;return this.delegate.schedule(function(de){z.runGuarded(()=>{I.apply(this,[de])})},N,B)}}class Lh{constructor(I){this.zone=I,this.task=null}call(I,N){const B=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",qr,{},qr,qr)),N.pipe((0,pa.b)({next:B,complete:B,error:B})).subscribe(I).add(B)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let di=(()=>{class E{constructor(N){this.ngZone=N,this.outsideAngular=N.runOutsideAngular(()=>new uo(Zone.current)),this.insideAngular=N.run(()=>new uo(Zone.current,oc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return E.\u0275fac=function(N){return new(N||E)(u.LFG(u.R0b))},E.\u0275prov=u.Yz7({token:E,factory:E.\u0275fac,providedIn:"root"}),E})();function co(){const E=globalThis.\u0275AngularFireScheduler;if(!E)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return E}function Uh(E){return co(),function Fp(E){return function(N){return(N=N.lift(new Lh(E.ngZone))).pipe((0,gd.R)(E.outsideAngular),(0,Ul.Q)(E.insideAngular))}}(co())(E)}},2090:(Ct,Ne,L)=>{L.d(Ne,{$s:()=>ms,BH:()=>Ie,DV:()=>ie,Dv:()=>Yn,G6:()=>Ae,GJ:()=>Vr,L:()=>ve,LL:()=>Gt,Pz:()=>be,Sg:()=>Je,UG:()=>ue,UI:()=>fe,US:()=>le,Wj:()=>Jr,Wl:()=>an,Yr:()=>De,ZB:()=>Y,ZR:()=>wt,aH:()=>Le,b$:()=>zt,cI:()=>vn,dS:()=>gs,eu:()=>rt,g5:()=>F,gK:()=>gn,gQ:()=>kt,h$:()=>Te,hl:()=>Oe,hu:()=>X,jU:()=>Mt,lb:()=>Tn,m9:()=>Ei,ne:()=>on,p$:()=>H,pd:()=>sn,r3:()=>oi,ru:()=>it,tV:()=>W,uI:()=>pt,ug:()=>cn,vZ:()=>te,w1:()=>Zs,w9:()=>sr,xO:()=>pn,xb:()=>J,z$:()=>Be,zI:()=>je,zd:()=>Yt});const u={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},X=function(j,U){if(!j)throw F(U)},F=function(j){return new Error("Firebase Database ("+u.SDK_VERSION+") INTERNAL ASSERT FAILED: "+j)},he=function(j){const U=[];let K=0;for(let Ce=0;Ce<j.length;Ce++){let re=j.charCodeAt(Ce);re<128?U[K++]=re:re<2048?(U[K++]=re>>6|192,U[K++]=63&re|128):55296==(64512&re)&&Ce+1<j.length&&56320==(64512&j.charCodeAt(Ce+1))?(re=65536+((1023&re)<<10)+(1023&j.charCodeAt(++Ce)),U[K++]=re>>18|240,U[K++]=re>>12&63|128,U[K++]=re>>6&63|128,U[K++]=63&re|128):(U[K++]=re>>12|224,U[K++]=re>>6&63|128,U[K++]=63&re|128)}return U},le={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(j,U){if(!Array.isArray(j))throw Error("encodeByteArray takes an array as a parameter");this.init_();const K=U?this.byteToCharMapWebSafe_:this.byteToCharMap_,Ce=[];for(let re=0;re<j.length;re+=3){const $e=j[re],Ft=re+1<j.length,mn=Ft?j[re+1]:0,fr=re+2<j.length,Zn=fr?j[re+2]:0;let ai=(15&mn)<<2|Zn>>6,ys=63&Zn;fr||(ys=64,Ft||(ai=64)),Ce.push(K[$e>>2],K[(3&$e)<<4|mn>>4],K[ai],K[ys])}return Ce.join("")},encodeString(j,U){return this.HAS_NATIVE_SUPPORT&&!U?btoa(j):this.encodeByteArray(he(j),U)},decodeString(j,U){return this.HAS_NATIVE_SUPPORT&&!U?atob(j):function(j){const U=[];let K=0,Ce=0;for(;K<j.length;){const re=j[K++];if(re<128)U[Ce++]=String.fromCharCode(re);else if(re>191&&re<224){const $e=j[K++];U[Ce++]=String.fromCharCode((31&re)<<6|63&$e)}else if(re>239&&re<365){const fr=((7&re)<<18|(63&j[K++])<<12|(63&j[K++])<<6|63&j[K++])-65536;U[Ce++]=String.fromCharCode(55296+(fr>>10)),U[Ce++]=String.fromCharCode(56320+(1023&fr))}else{const $e=j[K++],Ft=j[K++];U[Ce++]=String.fromCharCode((15&re)<<12|(63&$e)<<6|63&Ft)}}return U.join("")}(this.decodeStringToByteArray(j,U))},decodeStringToByteArray(j,U){this.init_();const K=U?this.charToByteMapWebSafe_:this.charToByteMap_,Ce=[];for(let re=0;re<j.length;){const $e=K[j.charAt(re++)],mn=re<j.length?K[j.charAt(re)]:0;++re;const Zn=re<j.length?K[j.charAt(re)]:64;++re;const ln=re<j.length?K[j.charAt(re)]:64;if(++re,null==$e||null==mn||null==Zn||null==ln)throw new Ee;Ce.push($e<<2|mn>>4),64!==Zn&&(Ce.push(mn<<4&240|Zn>>2),64!==ln&&Ce.push(Zn<<6&192|ln))}return Ce},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let j=0;j<this.ENCODED_VALS.length;j++)this.byteToCharMap_[j]=this.ENCODED_VALS.charAt(j),this.charToByteMap_[this.byteToCharMap_[j]]=j,this.byteToCharMapWebSafe_[j]=this.ENCODED_VALS_WEBSAFE.charAt(j),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[j]]=j,j>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(j)]=j,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(j)]=j)}}};class Ee extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Te=function(j){const U=he(j);return le.encodeByteArray(U,!0)},ve=function(j){return Te(j).replace(/\./g,"")},W=function(j){try{return le.decodeString(j,!0)}catch(U){console.error("base64Decode failed: ",U)}return null};function H(j){return Y(void 0,j)}function Y(j,U){if(!(U instanceof Object))return U;switch(U.constructor){case Date:return new Date(U.getTime());case Object:void 0===j&&(j={});break;case Array:j=[];break;default:return U}for(const K in U)!U.hasOwnProperty(K)||!Ke(K)||(j[K]=Y(j[K],U[K]));return j}function Ke(j){return"__proto__"!==j}const ke=()=>{try{return function Re(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const j=process.env.__FIREBASE_DEFAULTS__;return j?JSON.parse(j):void 0})()||(()=>{if(typeof document>"u")return;let j;try{j=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const U=j&&W(j[1]);return U&&JSON.parse(U)})()}catch(j){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${j}`)}},Le=()=>{var j;return null===(j=ke())||void 0===j?void 0:j.config},be=j=>{var U;return null===(U=ke())||void 0===U?void 0:U[`_${j}`]};class Ie{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((U,K)=>{this.resolve=U,this.reject=K})}wrapCallback(U){return(K,Ce)=>{K?this.reject(K):this.resolve(Ce),"function"==typeof U&&(this.promise.catch(()=>{}),1===U.length?U(K):U(K,Ce))}}}function Je(j,U){if(j.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Ce=U||"demo-project",re=j.iat||0,$e=j.sub||j.user_id;if(!$e)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Ft=Object.assign({iss:`https://securetoken.google.com/${Ce}`,aud:Ce,iat:re,exp:re+3600,auth_time:re,sub:$e,user_id:$e,firebase:{sign_in_provider:"custom",identities:{}}},j);return[ve(JSON.stringify({alg:"none",type:"JWT"})),ve(JSON.stringify(Ft)),""].join(".")}function Be(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function pt(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Be())}function ue(){var j;const U=null===(j=ke())||void 0===j?void 0:j.forceEnvironment;if("node"===U)return!0;if("browser"===U)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function Mt(){return"object"==typeof self&&self.self===self}function it(){const j="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof j&&void 0!==j.id}function zt(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Zs(){const j=Be();return j.indexOf("MSIE ")>=0||j.indexOf("Trident/")>=0}function De(){return!0===u.NODE_CLIENT||!0===u.NODE_ADMIN}function Ae(){return!ue()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Oe(){try{return"object"==typeof indexedDB}catch{return!1}}function rt(){return new Promise((j,U)=>{try{let K=!0;const Ce="validate-browser-context-for-indexeddb-analytics-module",re=self.indexedDB.open(Ce);re.onsuccess=()=>{re.result.close(),K||self.indexedDB.deleteDatabase(Ce),j(!0)},re.onupgradeneeded=()=>{K=!1},re.onerror=()=>{var $e;U((null===($e=re.error)||void 0===$e?void 0:$e.message)||"")}}catch(K){U(K)}})}function je(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class wt extends Error{constructor(U,K,Ce){super(K),this.code=U,this.customData=Ce,this.name="FirebaseError",Object.setPrototypeOf(this,wt.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Gt.prototype.create)}}class Gt{constructor(U,K,Ce){this.service=U,this.serviceName=K,this.errors=Ce}create(U,...K){const Ce=K[0]||{},re=`${this.service}/${U}`,$e=this.errors[U],Ft=$e?function Tt(j,U){return j.replace(At,(K,Ce)=>{const re=U[Ce];return null!=re?String(re):`<${Ce}?>`})}($e,Ce):"Error";return new wt(re,`${this.serviceName}: ${Ft} (${re}).`,Ce)}}const At=/\{\$([^}]+)}/g;function vn(j){return JSON.parse(j)}function an(j){return JSON.stringify(j)}const Ln=function(j){let U={},K={},Ce={},re="";try{const $e=j.split(".");U=vn(W($e[0])||""),K=vn(W($e[1])||""),re=$e[2],Ce=K.d||{},delete K.d}catch{}return{header:U,claims:K,data:Ce,signature:re}},sr=function(j){const K=Ln(j).claims;return!!K&&"object"==typeof K&&K.hasOwnProperty("iat")},Vr=function(j){const U=Ln(j).claims;return"object"==typeof U&&!0===U.admin};function oi(j,U){return Object.prototype.hasOwnProperty.call(j,U)}function ie(j,U){if(Object.prototype.hasOwnProperty.call(j,U))return j[U]}function J(j){for(const U in j)if(Object.prototype.hasOwnProperty.call(j,U))return!1;return!0}function fe(j,U,K){const Ce={};for(const re in j)Object.prototype.hasOwnProperty.call(j,re)&&(Ce[re]=U.call(K,j[re],re,j));return Ce}function te(j,U){if(j===U)return!0;const K=Object.keys(j),Ce=Object.keys(U);for(const re of K){if(!Ce.includes(re))return!1;const $e=j[re],Ft=U[re];if(qe($e)&&qe(Ft)){if(!te($e,Ft))return!1}else if($e!==Ft)return!1}for(const re of Ce)if(!K.includes(re))return!1;return!0}function qe(j){return null!==j&&"object"==typeof j}function pn(j){const U=[];for(const[K,Ce]of Object.entries(j))Array.isArray(Ce)?Ce.forEach(re=>{U.push(encodeURIComponent(K)+"="+encodeURIComponent(re))}):U.push(encodeURIComponent(K)+"="+encodeURIComponent(Ce));return U.length?"&"+U.join("&"):""}function Yt(j){const U={};return j.replace(/^\?/,"").split("&").forEach(Ce=>{if(Ce){const[re,$e]=Ce.split("=");U[decodeURIComponent(re)]=decodeURIComponent($e)}}),U}function sn(j){const U=j.indexOf("?");if(!U)return"";const K=j.indexOf("#",U);return j.substring(U,K>0?K:void 0)}class kt{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let U=1;U<this.blockSize;++U)this.pad_[U]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(U,K){K||(K=0);const Ce=this.W_;if("string"==typeof U)for(let ln=0;ln<16;ln++)Ce[ln]=U.charCodeAt(K)<<24|U.charCodeAt(K+1)<<16|U.charCodeAt(K+2)<<8|U.charCodeAt(K+3),K+=4;else for(let ln=0;ln<16;ln++)Ce[ln]=U[K]<<24|U[K+1]<<16|U[K+2]<<8|U[K+3],K+=4;for(let ln=16;ln<80;ln++){const ai=Ce[ln-3]^Ce[ln-8]^Ce[ln-14]^Ce[ln-16];Ce[ln]=4294967295&(ai<<1|ai>>>31)}let Zn,An,re=this.chain_[0],$e=this.chain_[1],Ft=this.chain_[2],mn=this.chain_[3],fr=this.chain_[4];for(let ln=0;ln<80;ln++){ln<40?ln<20?(Zn=mn^$e&(Ft^mn),An=1518500249):(Zn=$e^Ft^mn,An=1859775393):ln<60?(Zn=$e&Ft|mn&($e|Ft),An=2400959708):(Zn=$e^Ft^mn,An=3395469782);const ai=(re<<5|re>>>27)+Zn+fr+An+Ce[ln]&4294967295;fr=mn,mn=Ft,Ft=4294967295&($e<<30|$e>>>2),$e=re,re=ai}this.chain_[0]=this.chain_[0]+re&4294967295,this.chain_[1]=this.chain_[1]+$e&4294967295,this.chain_[2]=this.chain_[2]+Ft&4294967295,this.chain_[3]=this.chain_[3]+mn&4294967295,this.chain_[4]=this.chain_[4]+fr&4294967295}update(U,K){if(null==U)return;void 0===K&&(K=U.length);const Ce=K-this.blockSize;let re=0;const $e=this.buf_;let Ft=this.inbuf_;for(;re<K;){if(0===Ft)for(;re<=Ce;)this.compress_(U,re),re+=this.blockSize;if("string"==typeof U){for(;re<K;)if($e[Ft]=U.charCodeAt(re),++Ft,++re,Ft===this.blockSize){this.compress_($e),Ft=0;break}}else for(;re<K;)if($e[Ft]=U[re],++Ft,++re,Ft===this.blockSize){this.compress_($e),Ft=0;break}}this.inbuf_=Ft,this.total_+=K}digest(){const U=[];let K=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let re=this.blockSize-1;re>=56;re--)this.buf_[re]=255&K,K/=256;this.compress_(this.buf_);let Ce=0;for(let re=0;re<5;re++)for(let $e=24;$e>=0;$e-=8)U[Ce]=this.chain_[re]>>$e&255,++Ce;return U}}function on(j,U){const K=new ut(j,U);return K.subscribe.bind(K)}class ut{constructor(U,K){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=K,this.task.then(()=>{U(this)}).catch(Ce=>{this.error(Ce)})}next(U){this.forEachObserver(K=>{K.next(U)})}error(U){this.forEachObserver(K=>{K.error(U)}),this.close(U)}complete(){this.forEachObserver(U=>{U.complete()}),this.close()}subscribe(U,K,Ce){let re;if(void 0===U&&void 0===K&&void 0===Ce)throw new Error("Missing Observer.");re=function Ur(j,U){if("object"!=typeof j||null===j)return!1;for(const K of U)if(K in j&&"function"==typeof j[K])return!0;return!1}(U,["next","error","complete"])?U:{next:U,error:K,complete:Ce},void 0===re.next&&(re.next=Un),void 0===re.error&&(re.error=Un),void 0===re.complete&&(re.complete=Un);const $e=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?re.error(this.finalError):re.complete()}catch{}}),this.observers.push(re),$e}unsubscribeOne(U){void 0===this.observers||void 0===this.observers[U]||(delete this.observers[U],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(U){if(!this.finalized)for(let K=0;K<this.observers.length;K++)this.sendOne(K,U)}sendOne(U,K){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[U])try{K(this.observers[U])}catch(Ce){typeof console<"u"&&console.error&&console.error(Ce)}})}close(U){this.finalized||(this.finalized=!0,void 0!==U&&(this.finalError=U),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Un(){}const Yn=function(j,U,K,Ce){let re;if(Ce<U?re="at least "+U:Ce>K&&(re=0===K?"none":"no more than "+K),re)throw new Error(j+" failed: Was called with "+Ce+(1===Ce?" argument.":" arguments.")+" Expects "+re+".")};function gn(j,U){return`${j} failed: ${U} argument `}function Jr(j,U,K,Ce){if((!Ce||K)&&"function"!=typeof K)throw new Error(gn(j,U)+"must be a valid function.")}function Tn(j,U,K,Ce){if((!Ce||K)&&("object"!=typeof K||null===K))throw new Error(gn(j,U)+"must be a valid context object.")}const gs=function(j){const U=[];let K=0;for(let Ce=0;Ce<j.length;Ce++){let re=j.charCodeAt(Ce);if(re>=55296&&re<=56319){const $e=re-55296;Ce++,X(Ce<j.length,"Surrogate pair missing trail surrogate."),re=65536+($e<<10)+(j.charCodeAt(Ce)-56320)}re<128?U[K++]=re:re<2048?(U[K++]=re>>6|192,U[K++]=63&re|128):re<65536?(U[K++]=re>>12|224,U[K++]=re>>6&63|128,U[K++]=63&re|128):(U[K++]=re>>18|240,U[K++]=re>>12&63|128,U[K++]=re>>6&63|128,U[K++]=63&re|128)}return U},cn=function(j){let U=0;for(let K=0;K<j.length;K++){const Ce=j.charCodeAt(K);Ce<128?U++:Ce<2048?U+=2:Ce>=55296&&Ce<=56319?(U+=4,K++):U+=3}return U},Cn=1e3,qi=2,lr=144e5,yr=.5;function ms(j,U=Cn,K=qi){const Ce=U*Math.pow(K,j),re=Math.round(yr*Ce*(Math.random()-.5)*2);return Math.min(lr,Ce+re)}function Ei(j){return j&&j._delegate?j._delegate:j}},7851:(Ct,Ne,L)=>{var u=L(4650);let X=null;function F(){return X}class ae{}const le=new u.OlP("DocumentToken");let Ee=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Te(){return(0,u.LFG)(W)}()},providedIn:"platform"}),n})();const ve=new u.OlP("Location Initialized");let W=(()=>{class n extends Ee{constructor(t){super(),this._doc=t,this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return F().getBaseHref(this._doc)}onPopState(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",t,!1),()=>r.removeEventListener("popstate",t)}onHashChange(t){const r=F().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",t,!1),()=>r.removeEventListener("hashchange",t)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(t){this._location.pathname=t}pushState(t,r,i){H()?this._history.pushState(t,r,i):this._location.hash=i}replaceState(t,r,i){H()?this._history.replaceState(t,r,i):this._location.hash=i}forward(){this._history.forward()}back(){this._history.back()}historyGo(t=0){this._history.go(t)}getState(){return this._history.state}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Y(){return new W((0,u.LFG)(le))}()},providedIn:"platform"}),n})();function H(){return!!window.history.pushState}function Ke(n,e){if(0==n.length)return e;if(0==e.length)return n;let t=0;return n.endsWith("/")&&t++,e.startsWith("/")&&t++,2==t?n+e.substring(1):1==t?n+e:n+"/"+e}function Re(n){const e=n.match(/#|\?|$/),t=e&&e.index||n.length;return n.slice(0,t-("/"===n[t-1]?1:0))+n.slice(t)}function nt(n){return n&&"?"!==n[0]?"?"+n:n}let yt=(()=>{class n{historyGo(t){throw new Error("Not implemented")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(ke)},providedIn:"root"}),n})();const _e=new u.OlP("appBaseHref");let ke=(()=>{class n extends yt{constructor(t,r){super(),this._platformLocation=t,this._removeListenerFns=[],this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??(0,u.f3M)(le).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return Ke(this._baseHref,t)}path(t=!1){const r=this._platformLocation.pathname+nt(this._platformLocation.search),i=this._platformLocation.hash;return i&&t?`${r}${i}`:r}pushState(t,r,i,s){const l=this.prepareExternalUrl(i+nt(s));this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){const l=this.prepareExternalUrl(i+nt(s));this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ee),u.LFG(_e,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Fe=(()=>{class n extends yt{constructor(t,r){super(),this._platformLocation=t,this._baseHref="",this._removeListenerFns=[],null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(t){this._removeListenerFns.push(this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t))}getBaseHref(){return this._baseHref}path(t=!1){let r=this._platformLocation.hash;return null==r&&(r="#"),r.length>0?r.substring(1):r}prepareExternalUrl(t){const r=Ke(this._baseHref,t);return r.length>0?"#"+r:r}pushState(t,r,i,s){let l=this.prepareExternalUrl(i+nt(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.pushState(t,r,l)}replaceState(t,r,i,s){let l=this.prepareExternalUrl(i+nt(s));0==l.length&&(l=this._platformLocation.pathname),this._platformLocation.replaceState(t,r,l)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(t=0){this._platformLocation.historyGo?.(t)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Ee),u.LFG(_e,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),We=(()=>{class n{constructor(t){this._subject=new u.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=t;const r=this._locationStrategy.getBaseHref();this._basePath=function Je(n){if(new RegExp("^(https?:)?//").test(n)){const[,t]=n.split(/\/\/[^\/]+/);return t}return n}(Re(Ie(r))),this._locationStrategy.onPopState(i=>{this._subject.emit({url:this.path(!0),pop:!0,state:i.state,type:i.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(t=!1){return this.normalize(this._locationStrategy.path(t))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(t,r=""){return this.path()==this.normalize(t+nt(r))}normalize(t){return n.stripTrailingSlash(function be(n,e){if(!n||!e.startsWith(n))return e;const t=e.substring(n.length);return""===t||["/",";","?","#"].includes(t[0])?t:e}(this._basePath,Ie(t)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._locationStrategy.prepareExternalUrl(t)}go(t,r="",i=null){this._locationStrategy.pushState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),i)}replaceState(t,r="",i=null){this._locationStrategy.replaceState(i,"",t,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+nt(r)),i)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(t=0){this._locationStrategy.historyGo?.(t)}onUrlChange(t){return this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)})),()=>{const r=this._urlChangeListeners.indexOf(t);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(t="",r){this._urlChangeListeners.forEach(i=>i(t,r))}subscribe(t,r,i){return this._subject.subscribe({next:t,error:r,complete:i})}}return n.normalizeQueryParams=nt,n.joinWithSlash=Ke,n.stripTrailingSlash=Re,n.\u0275fac=function(t){return new(t||n)(u.LFG(yt))},n.\u0275prov=u.Yz7({token:n,factory:function(){return function Le(){return new We((0,u.LFG)(yt))}()},providedIn:"root"}),n})();function Ie(n){return n.replace(/\/index.html$/,"")}var pt=(()=>((pt=pt||{})[pt.Decimal=0]="Decimal",pt[pt.Percent=1]="Percent",pt[pt.Currency=2]="Currency",pt[pt.Scientific=3]="Scientific",pt))(),Mt=(()=>((Mt=Mt||{})[Mt.Format=0]="Format",Mt[Mt.Standalone=1]="Standalone",Mt))(),it=(()=>((it=it||{})[it.Narrow=0]="Narrow",it[it.Abbreviated=1]="Abbreviated",it[it.Wide=2]="Wide",it[it.Short=3]="Short",it))(),zt=(()=>((zt=zt||{})[zt.Short=0]="Short",zt[zt.Medium=1]="Medium",zt[zt.Long=2]="Long",zt[zt.Full=3]="Full",zt))(),_t=(()=>((_t=_t||{})[_t.Decimal=0]="Decimal",_t[_t.Group=1]="Group",_t[_t.List=2]="List",_t[_t.PercentSign=3]="PercentSign",_t[_t.PlusSign=4]="PlusSign",_t[_t.MinusSign=5]="MinusSign",_t[_t.Exponential=6]="Exponential",_t[_t.SuperscriptingExponent=7]="SuperscriptingExponent",_t[_t.PerMille=8]="PerMille",_t[_t.Infinity=9]="Infinity",_t[_t.NaN=10]="NaN",_t[_t.TimeSeparator=11]="TimeSeparator",_t[_t.CurrencyDecimal=12]="CurrencyDecimal",_t[_t.CurrencyGroup=13]="CurrencyGroup",_t))();function De(n,e,t){const r=(0,u.cg1)(n),s=fe([r[u.wAp.DayPeriodsFormat],r[u.wAp.DayPeriodsStandalone]],e);return fe(s,t)}function Ae(n,e,t){const r=(0,u.cg1)(n),s=fe([r[u.wAp.DaysFormat],r[u.wAp.DaysStandalone]],e);return fe(s,t)}function Oe(n,e,t){const r=(0,u.cg1)(n),s=fe([r[u.wAp.MonthsFormat],r[u.wAp.MonthsStandalone]],e);return fe(s,t)}function wt(n,e){return fe((0,u.cg1)(n)[u.wAp.DateFormat],e)}function Gt(n,e){return fe((0,u.cg1)(n)[u.wAp.TimeFormat],e)}function Tt(n,e){return fe((0,u.cg1)(n)[u.wAp.DateTimeFormat],e)}function At(n,e){const t=(0,u.cg1)(n),r=t[u.wAp.NumberSymbols][e];if(typeof r>"u"){if(e===_t.CurrencyDecimal)return t[u.wAp.NumberSymbols][_t.Decimal];if(e===_t.CurrencyGroup)return t[u.wAp.NumberSymbols][_t.Group]}return r}function Vr(n){if(!n[u.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${n[u.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function fe(n,e){for(let t=e;t>-1;t--)if(typeof n[t]<"u")return n[t];throw new Error("Locale data API: locale data undefined")}function te(n){const[e,t]=n.split(":");return{hours:+e,minutes:+t}}const Yt=/^(\d{4,})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,sn={},kt=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var on=(()=>((on=on||{})[on.Short=0]="Short",on[on.ShortGMT=1]="ShortGMT",on[on.Long=2]="Long",on[on.Extended=3]="Extended",on))(),ut=(()=>((ut=ut||{})[ut.FullYear=0]="FullYear",ut[ut.Month=1]="Month",ut[ut.Date=2]="Date",ut[ut.Hours=3]="Hours",ut[ut.Minutes=4]="Minutes",ut[ut.Seconds=5]="Seconds",ut[ut.FractionalSeconds=6]="FractionalSeconds",ut[ut.Day=7]="Day",ut))(),xt=(()=>((xt=xt||{})[xt.DayPeriods=0]="DayPeriods",xt[xt.Days=1]="Days",xt[xt.Months=2]="Months",xt[xt.Eras=3]="Eras",xt))();function Ur(n,e,t,r){let i=function re(n){if(Ft(n))return n;if("number"==typeof n&&!isNaN(n))return new Date(n);if("string"==typeof n){if(n=n.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(n)){const[i,s=1,l=1]=n.split("-").map(h=>+h);return Un(i,s-1,l)}const t=parseFloat(n);if(!isNaN(n-t))return new Date(t);let r;if(r=n.match(Yt))return function $e(n){const e=new Date(0);let t=0,r=0;const i=n[8]?e.setUTCFullYear:e.setFullYear,s=n[8]?e.setUTCHours:e.setHours;n[9]&&(t=Number(n[9]+n[10]),r=Number(n[9]+n[11])),i.call(e,Number(n[1]),Number(n[2])-1,Number(n[3]));const l=Number(n[4]||0)-t,h=Number(n[5]||0)-r,m=Number(n[6]||0),y=Math.floor(1e3*parseFloat("0."+(n[7]||0)));return s.call(e,l,h,m,y),e}(r)}const e=new Date(n);if(!Ft(e))throw new Error(`Unable to convert "${n}" into a date`);return e}(n);e=Yn(t,e)||e;let h,l=[];for(;e;){if(h=kt.exec(e),!h){l.push(e);break}{l=l.concat(h.slice(1));const D=l.pop();if(!D)break;e=D}}let m=i.getTimezoneOffset();r&&(m=U(r,m),i=function Ce(n,e,t){const r=t?-1:1,i=n.getTimezoneOffset();return function K(n,e){return(n=new Date(n.getTime())).setMinutes(n.getMinutes()+e),n}(n,r*(U(e,i)-i))}(i,r,!0));let y="";return l.forEach(D=>{const S=function j(n){if(Ei[n])return Ei[n];let e;switch(n){case"G":case"GG":case"GGG":e=cn(xt.Eras,it.Abbreviated);break;case"GGGG":e=cn(xt.Eras,it.Wide);break;case"GGGGG":e=cn(xt.Eras,it.Narrow);break;case"y":e=Tn(ut.FullYear,1,0,!1,!0);break;case"yy":e=Tn(ut.FullYear,2,0,!0,!0);break;case"yyy":e=Tn(ut.FullYear,3,0,!1,!0);break;case"yyyy":e=Tn(ut.FullYear,4,0,!1,!0);break;case"Y":e=_s(1);break;case"YY":e=_s(2,!0);break;case"YYY":e=_s(3);break;case"YYYY":e=_s(4);break;case"M":case"L":e=Tn(ut.Month,1,1);break;case"MM":case"LL":e=Tn(ut.Month,2,1);break;case"MMM":e=cn(xt.Months,it.Abbreviated);break;case"MMMM":e=cn(xt.Months,it.Wide);break;case"MMMMM":e=cn(xt.Months,it.Narrow);break;case"LLL":e=cn(xt.Months,it.Abbreviated,Mt.Standalone);break;case"LLLL":e=cn(xt.Months,it.Wide,Mt.Standalone);break;case"LLLLL":e=cn(xt.Months,it.Narrow,Mt.Standalone);break;case"w":e=Hn(1);break;case"ww":e=Hn(2);break;case"W":e=Hn(1,!0);break;case"d":e=Tn(ut.Date,1);break;case"dd":e=Tn(ut.Date,2);break;case"c":case"cc":e=Tn(ut.Day,1);break;case"ccc":e=cn(xt.Days,it.Abbreviated,Mt.Standalone);break;case"cccc":e=cn(xt.Days,it.Wide,Mt.Standalone);break;case"ccccc":e=cn(xt.Days,it.Narrow,Mt.Standalone);break;case"cccccc":e=cn(xt.Days,it.Short,Mt.Standalone);break;case"E":case"EE":case"EEE":e=cn(xt.Days,it.Abbreviated);break;case"EEEE":e=cn(xt.Days,it.Wide);break;case"EEEEE":e=cn(xt.Days,it.Narrow);break;case"EEEEEE":e=cn(xt.Days,it.Short);break;case"a":case"aa":case"aaa":e=cn(xt.DayPeriods,it.Abbreviated);break;case"aaaa":e=cn(xt.DayPeriods,it.Wide);break;case"aaaaa":e=cn(xt.DayPeriods,it.Narrow);break;case"b":case"bb":case"bbb":e=cn(xt.DayPeriods,it.Abbreviated,Mt.Standalone,!0);break;case"bbbb":e=cn(xt.DayPeriods,it.Wide,Mt.Standalone,!0);break;case"bbbbb":e=cn(xt.DayPeriods,it.Narrow,Mt.Standalone,!0);break;case"B":case"BB":case"BBB":e=cn(xt.DayPeriods,it.Abbreviated,Mt.Format,!0);break;case"BBBB":e=cn(xt.DayPeriods,it.Wide,Mt.Format,!0);break;case"BBBBB":e=cn(xt.DayPeriods,it.Narrow,Mt.Format,!0);break;case"h":e=Tn(ut.Hours,1,-12);break;case"hh":e=Tn(ut.Hours,2,-12);break;case"H":e=Tn(ut.Hours,1);break;case"HH":e=Tn(ut.Hours,2);break;case"m":e=Tn(ut.Minutes,1);break;case"mm":e=Tn(ut.Minutes,2);break;case"s":e=Tn(ut.Seconds,1);break;case"ss":e=Tn(ut.Seconds,2);break;case"S":e=Tn(ut.FractionalSeconds,1);break;case"SS":e=Tn(ut.FractionalSeconds,2);break;case"SSS":e=Tn(ut.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":e=Cn(on.Short);break;case"ZZZZZ":e=Cn(on.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":e=Cn(on.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":e=Cn(on.Long);break;default:return null}return Ei[n]=e,e}(D);y+=S?S(i,t,m):"''"===D?"'":D.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),y}function Un(n,e,t){const r=new Date(0);return r.setFullYear(n,e,t),r.setHours(0,0,0),r}function Yn(n,e){const t=function ge(n){return(0,u.cg1)(n)[u.wAp.LocaleId]}(n);if(sn[t]=sn[t]||{},sn[t][e])return sn[t][e];let r="";switch(e){case"shortDate":r=wt(n,zt.Short);break;case"mediumDate":r=wt(n,zt.Medium);break;case"longDate":r=wt(n,zt.Long);break;case"fullDate":r=wt(n,zt.Full);break;case"shortTime":r=Gt(n,zt.Short);break;case"mediumTime":r=Gt(n,zt.Medium);break;case"longTime":r=Gt(n,zt.Long);break;case"fullTime":r=Gt(n,zt.Full);break;case"short":const i=Yn(n,"shortTime"),s=Yn(n,"shortDate");r=gn(Tt(n,zt.Short),[i,s]);break;case"medium":const l=Yn(n,"mediumTime"),h=Yn(n,"mediumDate");r=gn(Tt(n,zt.Medium),[l,h]);break;case"long":const m=Yn(n,"longTime"),y=Yn(n,"longDate");r=gn(Tt(n,zt.Long),[m,y]);break;case"full":const D=Yn(n,"fullTime"),S=Yn(n,"fullDate");r=gn(Tt(n,zt.Full),[D,S])}return r&&(sn[t][e]=r),r}function gn(n,e){return e&&(n=n.replace(/\{([^}]+)}/g,function(t,r){return null!=e&&r in e?e[r]:t})),n}function Mn(n,e,t="-",r,i){let s="";(n<0||i&&n<=0)&&(i?n=1-n:(n=-n,s=t));let l=String(n);for(;l.length<e;)l="0"+l;return r&&(l=l.slice(l.length-e)),s+l}function Tn(n,e,t=0,r=!1,i=!1){return function(s,l){let h=function gs(n,e){switch(n){case ut.FullYear:return e.getFullYear();case ut.Month:return e.getMonth();case ut.Date:return e.getDate();case ut.Hours:return e.getHours();case ut.Minutes:return e.getMinutes();case ut.Seconds:return e.getSeconds();case ut.FractionalSeconds:return e.getMilliseconds();case ut.Day:return e.getDay();default:throw new Error(`Unknown DateType value "${n}".`)}}(n,s);if((t>0||h>-t)&&(h+=t),n===ut.Hours)0===h&&-12===t&&(h=12);else if(n===ut.FractionalSeconds)return function Jr(n,e){return Mn(n,3).substring(0,e)}(h,e);const m=At(l,_t.MinusSign);return Mn(h,e,m,r,i)}}function cn(n,e,t=Mt.Format,r=!1){return function(i,s){return function Ps(n,e,t,r,i,s){switch(t){case xt.Months:return Oe(e,i,r)[n.getMonth()];case xt.Days:return Ae(e,i,r)[n.getDay()];case xt.DayPeriods:const l=n.getHours(),h=n.getMinutes();if(s){const y=function oi(n){const e=(0,u.cg1)(n);return Vr(e),(e[u.wAp.ExtraData][2]||[]).map(r=>"string"==typeof r?te(r):[te(r[0]),te(r[1])])}(e),D=function ie(n,e,t){const r=(0,u.cg1)(n);Vr(r);const s=fe([r[u.wAp.ExtraData][0],r[u.wAp.ExtraData][1]],e)||[];return fe(s,t)||[]}(e,i,r),S=y.findIndex(R=>{if(Array.isArray(R)){const[P,$]=R,Z=l>=P.hours&&h>=P.minutes,oe=l<$.hours||l===$.hours&&h<$.minutes;if(P.hours<$.hours){if(Z&&oe)return!0}else if(Z||oe)return!0}else if(R.hours===l&&R.minutes===h)return!0;return!1});if(-1!==S)return D[S]}return De(e,i,r)[l<12?0:1];case xt.Eras:return function rt(n,e){return fe((0,u.cg1)(n)[u.wAp.Eras],e)}(e,r)[n.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${t}`)}}(i,s,n,e,t,r)}}function Cn(n){return function(e,t,r){const i=-1*r,s=At(t,_t.MinusSign),l=i>0?Math.floor(i/60):Math.ceil(i/60);switch(n){case on.Short:return(i>=0?"+":"")+Mn(l,2,s)+Mn(Math.abs(i%60),2,s);case on.ShortGMT:return"GMT"+(i>=0?"+":"")+Mn(l,1,s);case on.Long:return"GMT"+(i>=0?"+":"")+Mn(l,2,s)+":"+Mn(Math.abs(i%60),2,s);case on.Extended:return 0===r?"Z":(i>=0?"+":"")+Mn(l,2,s)+":"+Mn(Math.abs(i%60),2,s);default:throw new Error(`Unknown zone width "${n}"`)}}}const qi=0,lr=4;function ms(n){return Un(n.getFullYear(),n.getMonth(),n.getDate()+(lr-n.getDay()))}function Hn(n,e=!1){return function(t,r){let i;if(e){const s=new Date(t.getFullYear(),t.getMonth(),1).getDay()-1,l=t.getDate();i=1+Math.floor((l+s)/7)}else{const s=ms(t),l=function yr(n){const e=Un(n,qi,1).getDay();return Un(n,0,1+(e<=lr?lr:lr+7)-e)}(s.getFullYear()),h=s.getTime()-l.getTime();i=1+Math.round(h/6048e5)}return Mn(i,n,At(r,_t.MinusSign))}}function _s(n,e=!1){return function(t,r){return Mn(ms(t).getFullYear(),n,At(r,_t.MinusSign),e)}}const Ei={};function U(n,e){n=n.replace(/:/g,"");const t=Date.parse("Jan 01, 1970 00:00:00 "+n)/6e4;return isNaN(t)?e:t}function Ft(n){return n instanceof Date&&!isNaN(n.valueOf())}const mn=/^(\d+)?\.((\d+)(-(\d+))?)?$/,fr=22,Zn=".",An="0",ln=";",ai=",",ys="#";function _n(n){const e=parseInt(n);if(isNaN(e))throw new Error("Invalid integer literal when parsing "+n);return e}class br{constructor(e,t,r,i){this.$implicit=e,this.ngForOf=t,this.index=r,this.count=i}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let Gr=(()=>{class n{set ngForOf(t){this._ngForOf=t,this._ngForOfDirty=!0}set ngForTrackBy(t){this._trackByFn=t}get ngForTrackBy(){return this._trackByFn}constructor(t,r,i){this._viewContainer=t,this._template=r,this._differs=i,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(t){t&&(this._template=t)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const t=this._ngForOf;!this._differ&&t&&(this._differ=this._differs.find(t).create(this.ngForTrackBy))}if(this._differ){const t=this._differ.diff(this._ngForOf);t&&this._applyChanges(t)}}_applyChanges(t){const r=this._viewContainer;t.forEachOperation((i,s,l)=>{if(null==i.previousIndex)r.createEmbeddedView(this._template,new br(i.item,this._ngForOf,-1,-1),null===l?void 0:l);else if(null==l)r.remove(null===s?void 0:s);else if(null!==s){const h=r.get(s);r.move(h,l),ur(h,i)}});for(let i=0,s=r.length;i<s;i++){const h=r.get(i).context;h.index=i,h.count=s,h.ngForOf=this._ngForOf}t.forEachIdentityChange(i=>{ur(r.get(i.currentIndex),i)})}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc),u.Y36(u.ZZ4))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),n})();function ur(n,e){n.context.$implicit=e.item}let pr=(()=>{class n{constructor(t,r){this._viewContainer=t,this._context=new Zt,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=r}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){ml("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){ml("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,r){return!0}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b),u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),n})();class Zt{constructor(){this.$implicit=null,this.ngIf=null}}function ml(n,e){if(e&&!e.createEmbeddedView)throw new Error(`${n} must be a TemplateRef, but received '${(0,u.AaK)(e)}'.`)}let jn=(()=>{class n{constructor(t){this._viewContainerRef=t,this._viewRef=null,this.ngTemplateOutletContext=null,this.ngTemplateOutlet=null,this.ngTemplateOutletInjector=null}ngOnChanges(t){if(t.ngTemplateOutlet||t.ngTemplateOutletInjector){const r=this._viewContainerRef;if(this._viewRef&&r.remove(r.indexOf(this._viewRef)),this.ngTemplateOutlet){const{ngTemplateOutlet:i,ngTemplateOutletContext:s,ngTemplateOutletInjector:l}=this;this._viewRef=r.createEmbeddedView(i,s,l?{injector:l}:void 0)}else this._viewRef=null}else this._viewRef&&t.ngTemplateOutletContext&&this.ngTemplateOutletContext&&(this._viewRef.context=this.ngTemplateOutletContext)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.s_b))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngTemplateOutlet",""]],inputs:{ngTemplateOutletContext:"ngTemplateOutletContext",ngTemplateOutlet:"ngTemplateOutlet",ngTemplateOutletInjector:"ngTemplateOutletInjector"},standalone:!0,features:[u.TTD]}),n})();let Zc=(()=>{class n{constructor(t){this._locale=t}transform(t,r,i){if(!function Su(n){return!(null==n||""===n||n!=n)}(t))return null;i=i||this._locale;try{return function Ve(n,e,t){return function me(n,e,t,r,i,s,l=!1){let h="",m=!1;if(isFinite(n)){let y=function Nt(n){let r,i,s,l,h,e=Math.abs(n)+"",t=0;for((i=e.indexOf(Zn))>-1&&(e=e.replace(Zn,"")),(s=e.search(/e/i))>0?(i<0&&(i=s),i+=+e.slice(s+1),e=e.substring(0,s)):i<0&&(i=e.length),s=0;e.charAt(s)===An;s++);if(s===(h=e.length))r=[0],i=1;else{for(h--;e.charAt(h)===An;)h--;for(i-=s,r=[],l=0;s<=h;s++,l++)r[l]=Number(e.charAt(s))}return i>fr&&(r=r.splice(0,fr-1),t=i-1,i=1),{digits:r,exponent:t,integerLen:i}}(n);l&&(y=function Xt(n){if(0===n.digits[0])return n;const e=n.digits.length-n.integerLen;return n.exponent?n.exponent+=2:(0===e?n.digits.push(0,0):1===e&&n.digits.push(0),n.integerLen+=2),n}(y));let D=e.minInt,S=e.minFrac,R=e.maxFrac;if(s){const Ge=s.match(mn);if(null===Ge)throw new Error(`${s} is not a valid digit info`);const tt=Ge[1],Xe=Ge[3],ht=Ge[5];null!=tt&&(D=_n(tt)),null!=Xe&&(S=_n(Xe)),null!=ht?R=_n(ht):null!=Xe&&S>R&&(R=S)}!function bn(n,e,t){if(e>t)throw new Error(`The minimum number of digits after fraction (${e}) is higher than the maximum (${t}).`);let r=n.digits,i=r.length-n.integerLen;const s=Math.min(Math.max(e,i),t);let l=s+n.integerLen,h=r[l];if(l>0){r.splice(Math.max(n.integerLen,l));for(let S=l;S<r.length;S++)r[S]=0}else{i=Math.max(0,i),n.integerLen=1,r.length=Math.max(1,l=s+1),r[0]=0;for(let S=1;S<l;S++)r[S]=0}if(h>=5)if(l-1<0){for(let S=0;S>l;S--)r.unshift(0),n.integerLen++;r.unshift(1),n.integerLen++}else r[l-1]++;for(;i<Math.max(0,s);i++)r.push(0);let m=0!==s;const y=e+n.integerLen,D=r.reduceRight(function(S,R,P,$){return $[P]=(R+=S)<10?R:R-10,m&&(0===$[P]&&P>=y?$.pop():m=!1),R>=10?1:0},0);D&&(r.unshift(D),n.integerLen++)}(y,S,R);let P=y.digits,$=y.integerLen;const Z=y.exponent;let oe=[];for(m=P.every(Ge=>!Ge);$<D;$++)P.unshift(0);for(;$<0;$++)P.unshift(0);$>0?oe=P.splice($,P.length):(oe=P,P=[0]);const Ue=[];for(P.length>=e.lgSize&&Ue.unshift(P.splice(-e.lgSize,P.length).join(""));P.length>e.gSize;)Ue.unshift(P.splice(-e.gSize,P.length).join(""));P.length&&Ue.unshift(P.join("")),h=Ue.join(At(t,r)),oe.length&&(h+=At(t,i)+oe.join("")),Z&&(h+=At(t,_t.Exponential)+"+"+Z)}else h=At(t,_t.Infinity);return h=n<0&&!m?e.negPre+h+e.negSuf:e.posPre+h+e.posSuf,h}(n,function Pt(n,e="-"){const t={minInt:1,minFrac:0,maxFrac:0,posPre:"",posSuf:"",negPre:"",negSuf:"",gSize:0,lgSize:0},r=n.split(ln),i=r[0],s=r[1],l=-1!==i.indexOf(Zn)?i.split(Zn):[i.substring(0,i.lastIndexOf(An)+1),i.substring(i.lastIndexOf(An)+1)],h=l[0],m=l[1]||"";t.posPre=h.substring(0,h.indexOf(ys));for(let D=0;D<m.length;D++){const S=m.charAt(D);S===An?t.minFrac=t.maxFrac=D+1:S===ys?t.maxFrac=D+1:t.posSuf+=S}const y=h.split(ai);if(t.gSize=y[1]?y[1].length:0,t.lgSize=y[2]||y[1]?(y[2]||y[1]).length:0,s){const D=i.length-t.posPre.length-t.posSuf.length,S=s.indexOf(ys);t.negPre=s.substring(0,S).replace(/'/g,""),t.negSuf=s.slice(S+D).replace(/'/g,"")}else t.negPre=e+t.posPre,t.negSuf=t.posSuf;return t}(function vn(n,e){return(0,u.cg1)(n)[u.wAp.NumberFormats][e]}(e,pt.Percent),At(e,_t.MinusSign)),e,_t.Group,_t.Decimal,t,!0).replace(new RegExp("%","g"),At(e,_t.PercentSign))}(function dh(n){if("string"==typeof n&&!isNaN(Number(n)-parseFloat(n)))return Number(n);if("number"!=typeof n)throw new Error(`${n} is not a number`);return n}(t),i,r)}catch(s){throw function Oi(n,e){return new u.vHH(2100,!1)}()}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.soG,16))},n.\u0275pipe=u.Yjl({name:"percent",type:n,pure:!0,standalone:!0}),n})();let Qi=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const bp="browser",hh="server";function eo(n){return n===hh}let vl=(()=>{class n{}return n.\u0275prov=(0,u.Yz7)({token:n,providedIn:"root",factory:()=>new ph((0,u.LFG)(le),window)}),n})();class ph{constructor(e,t){this.document=e,this.window=t,this.offset=()=>[0,0]}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(e){this.supportsScrolling()&&this.window.scrollTo(e[0],e[1])}scrollToAnchor(e){if(!this.supportsScrolling())return;const t=function Mo(n,e){const t=n.getElementById(e)||n.getElementsByName(e)[0];if(t)return t;if("function"==typeof n.createTreeWalker&&n.body&&(n.body.createShadowRoot||n.body.attachShadow)){const r=n.createTreeWalker(n.body,NodeFilter.SHOW_ELEMENT);let i=r.currentNode;for(;i;){const s=i.shadowRoot;if(s){const l=s.getElementById(e)||s.querySelector(`[name="${e}"]`);if(l)return l}i=r.nextNode()}}return null}(this.document,e);t&&(this.scrollToElement(t),t.focus())}setHistoryScrollRestoration(e){if(this.supportScrollRestoration()){const t=this.window.history;t&&t.scrollRestoration&&(t.scrollRestoration=e)}}scrollToElement(e){const t=e.getBoundingClientRect(),r=t.left+this.window.pageXOffset,i=t.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo(r-s[0],i-s[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const e=Jc(this.window.history)||Jc(Object.getPrototypeOf(this.window.history));return!(!e||!e.writable&&!e.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Jc(n){return Object.getOwnPropertyDescriptor(n,"scrollRestoration")}class Ih extends ae{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class id extends Ih{static makeCurrent(){!function he(n){X||(X=n)}(new id)}onAndCancel(e,t,r){return e.addEventListener(t,r,!1),()=>{e.removeEventListener(t,r,!1)}}dispatchEvent(e,t){e.dispatchEvent(t)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,t){return(t=t||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,t){return"window"===t?window:"document"===t?e:"body"===t?e.body:null}getBaseHref(e){const t=function Ga(){return ja=ja||document.querySelector("base"),ja?ja.getAttribute("href"):null}();return null==t?null:function Bm(n){so=so||document.createElement("a"),so.setAttribute("href",n);const e=so.pathname;return"/"===e.charAt(0)?e:`/${e}`}(t)}resetBaseElement(){ja=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return function xa(n,e){e=encodeURIComponent(e);for(const t of n.split(";")){const r=t.indexOf("="),[i,s]=-1==r?[t,""]:[t.slice(0,r),t.slice(r+1)];if(i.trim()===e)return decodeURIComponent(s)}return null}(document.cookie,e)}}let so,ja=null;const Tp=new u.OlP("TRANSITION_ID"),Ov=[{provide:u.ip1,useFactory:function Hu(n,e,t){return()=>{t.get(u.CZH).donePromise.then(()=>{const r=F(),i=e.querySelectorAll(`style[ng-transition="${n}"]`);for(let s=0;s<i.length;s++)r.remove(i[s])})}},deps:[Tp,le,u.zs3],multi:!0}];let Jo=(()=>{class n{build(){return new XMLHttpRequest}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const Xo=new u.OlP("EventManagerPlugins");let zu=(()=>{class n{constructor(t,r){this._zone=r,this._eventNameToPlugin=new Map,t.forEach(i=>{i.manager=this}),this._plugins=t.slice().reverse()}addEventListener(t,r,i){return this._findPluginFor(r).addEventListener(t,r,i)}addGlobalEventListener(t,r,i){return this._findPluginFor(r).addGlobalEventListener(t,r,i)}getZone(){return this._zone}_findPluginFor(t){const r=this._eventNameToPlugin.get(t);if(r)return r;const i=this._plugins;for(let s=0;s<i.length;s++){const l=i[s];if(l.supports(t))return this._eventNameToPlugin.set(t,l),l}throw new Error(`No event manager plugin found for event ${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Xo),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class $a{constructor(e){this._doc=e}addGlobalEventListener(e,t,r){const i=F().getGlobalEventTarget(this._doc,e);if(!i)throw new Error(`Unsupported event target ${i} for event ${t}`);return this.addEventListener(i,t,r)}}let sd=(()=>{class n{constructor(){this.usageCount=new Map}addStyles(t){for(const r of t)1===this.changeUsageCount(r,1)&&this.onStyleAdded(r)}removeStyles(t){for(const r of t)0===this.changeUsageCount(r,-1)&&this.onStyleRemoved(r)}onStyleRemoved(t){}onStyleAdded(t){}getAllStyles(){return this.usageCount.keys()}changeUsageCount(t,r){const i=this.usageCount;let s=i.get(t)??0;return s+=r,s>0?i.set(t,s):i.delete(t),s}ngOnDestroy(){for(const t of this.getAllStyles())this.onStyleRemoved(t);this.usageCount.clear()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),ea=(()=>{class n extends sd{constructor(t){super(),this.doc=t,this.styleRef=new Map,this.hostNodes=new Set,this.resetHostNodes()}onStyleAdded(t){for(const r of this.hostNodes)this.addStyleToHost(r,t)}onStyleRemoved(t){const r=this.styleRef;r.get(t)?.forEach(s=>s.remove()),r.delete(t)}ngOnDestroy(){super.ngOnDestroy(),this.styleRef.clear(),this.resetHostNodes()}addHost(t){this.hostNodes.add(t);for(const r of this.getAllStyles())this.addStyleToHost(t,r)}removeHost(t){this.hostNodes.delete(t)}addStyleToHost(t,r){const i=this.doc.createElement("style");i.textContent=r,t.appendChild(i);const s=this.styleRef.get(r);s?s.push(i):this.styleRef.set(r,[i])}resetHostNodes(){const t=this.hostNodes;t.clear(),t.add(this.doc.head)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const ta={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},Wu=/%COMP%/g,Ml=new u.OlP("RemoveStylesOnCompDestory",{providedIn:"root",factory:()=>!1});function Ah(n,e){return e.flat(100).map(t=>t.replace(Wu,n))}function ia(n){return e=>{if("__ngUnwrap__"===e)return n;!1===n(e)&&(e.preventDefault(),e.returnValue=!1)}}let ws=(()=>{class n{constructor(t,r,i,s){this.eventManager=t,this.sharedStylesHost=r,this.appId=i,this.removeStylesOnCompDestory=s,this.rendererByCompId=new Map,this.defaultRenderer=new oo(t)}createRenderer(t,r){if(!t||!r)return this.defaultRenderer;const i=this.getOrCreateRenderer(t,r);return i instanceof Mh?i.applyToHost(t):i instanceof Fn&&i.applyStyles(),i}getOrCreateRenderer(t,r){const i=this.rendererByCompId;let s=i.get(r.id);if(!s){const l=this.eventManager,h=this.sharedStylesHost,m=this.removeStylesOnCompDestory;switch(r.encapsulation){case u.ifc.Emulated:s=new Mh(l,h,r,this.appId,m);break;case u.ifc.ShadowDom:return new Nh(l,h,t,r);default:s=new Fn(l,h,r,m)}s.onDestroy=()=>i.delete(r.id),i.set(r.id,s)}return s}ngOnDestroy(){this.rendererByCompId.clear()}begin(){}end(){}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(zu),u.LFG(ea),u.LFG(u.AFp),u.LFG(Ml))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();class oo{constructor(e){this.eventManager=e,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(e,t){return t?document.createElementNS(ta[t]||t,e):document.createElement(e)}createComment(e){return document.createComment(e)}createText(e){return document.createTextNode(e)}appendChild(e,t){(za(e)?e.content:e).appendChild(t)}insertBefore(e,t,r){e&&(za(e)?e.content:e).insertBefore(t,r)}removeChild(e,t){e&&e.removeChild(t)}selectRootElement(e,t){let r="string"==typeof e?document.querySelector(e):e;if(!r)throw new Error(`The selector "${e}" did not match any elements`);return t||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,t,r,i){if(i){t=i+":"+t;const s=ta[i];s?e.setAttributeNS(s,t,r):e.setAttribute(t,r)}else e.setAttribute(t,r)}removeAttribute(e,t,r){if(r){const i=ta[r];i?e.removeAttributeNS(i,t):e.removeAttribute(`${r}:${t}`)}else e.removeAttribute(t)}addClass(e,t){e.classList.add(t)}removeClass(e,t){e.classList.remove(t)}setStyle(e,t,r,i){i&(u.JOm.DashCase|u.JOm.Important)?e.style.setProperty(t,r,i&u.JOm.Important?"important":""):e.style[t]=r}removeStyle(e,t,r){r&u.JOm.DashCase?e.style.removeProperty(t):e.style[t]=""}setProperty(e,t,r){e[t]=r}setValue(e,t){e.nodeValue=t}listen(e,t,r){return"string"==typeof e?this.eventManager.addGlobalEventListener(e,t,ia(r)):this.eventManager.addEventListener(e,t,ia(r))}}function za(n){return"TEMPLATE"===n.tagName&&void 0!==n.content}class Nh extends oo{constructor(e,t,r,i){super(e),this.sharedStylesHost=t,this.hostEl=r,this.shadowRoot=r.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const s=Ah(i.id,i.styles);for(const l of s){const h=document.createElement("style");h.textContent=l,this.shadowRoot.appendChild(h)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,t){return super.appendChild(this.nodeOrShadowRoot(e),t)}insertBefore(e,t,r){return super.insertBefore(this.nodeOrShadowRoot(e),t,r)}removeChild(e,t){return super.removeChild(this.nodeOrShadowRoot(e),t)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Fn extends oo{constructor(e,t,r,i,s=r.id){super(e),this.sharedStylesHost=t,this.removeStylesOnCompDestory=i,this.rendererUsageCount=0,this.styles=Ah(s,r.styles)}applyStyles(){this.sharedStylesHost.addStyles(this.styles),this.rendererUsageCount++}destroy(){this.removeStylesOnCompDestory&&(this.sharedStylesHost.removeStyles(this.styles),this.rendererUsageCount--,0===this.rendererUsageCount&&this.onDestroy?.())}}class Mh extends Fn{constructor(e,t,r,i,s){const l=i+"-"+r.id;super(e,t,r,s,l),this.contentAttr=function Ip(n){return"_ngcontent-%COMP%".replace(Wu,n)}(l),this.hostAttr=function Ku(n){return"_nghost-%COMP%".replace(Wu,n)}(l)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,t){const r=super.createElement(e,t);return super.setAttribute(r,this.contentAttr,""),r}}let Yu=(()=>{class n extends $a{constructor(t){super(t)}supports(t){return!0}addEventListener(t,r,i){return t.addEventListener(r,i,!1),()=>this.removeEventListener(t,r,i)}removeEventListener(t,r,i){return t.removeEventListener(r,i)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const ad=["alt","control","meta","shift"],Zu={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Qu={alt:n=>n.altKey,control:n=>n.ctrlKey,meta:n=>n.metaKey,shift:n=>n.shiftKey};let Mr=(()=>{class n extends $a{constructor(t){super(t)}supports(t){return null!=n.parseEventName(t)}addEventListener(t,r,i){const s=n.parseEventName(r),l=n.eventCallback(s.fullKey,i,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>F().onAndCancel(t,s.domEventName,l))}static parseEventName(t){const r=t.toLowerCase().split("."),i=r.shift();if(0===r.length||"keydown"!==i&&"keyup"!==i)return null;const s=n._normalizeKey(r.pop());let l="",h=r.indexOf("code");if(h>-1&&(r.splice(h,1),l="code."),ad.forEach(y=>{const D=r.indexOf(y);D>-1&&(r.splice(D,1),l+=y+".")}),l+=s,0!=r.length||0===s.length)return null;const m={};return m.domEventName=i,m.fullKey=l,m}static matchEventFullKeyCode(t,r){let i=Zu[t.key]||t.key,s="";return r.indexOf("code.")>-1&&(i=t.code,s="code."),!(null==i||!i)&&(i=i.toLowerCase()," "===i?i="space":"."===i&&(i="dot"),ad.forEach(l=>{l!==i&&(0,Qu[l])(t)&&(s+=l+".")}),s+=i,s===r)}static eventCallback(t,r,i){return s=>{n.matchEventFullKeyCode(s,t)&&i.runGuarded(()=>r(s))}}static _normalizeKey(t){return"esc"===t?"escape":t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const ud=(0,u.eFA)(u._c5,"browser",[{provide:u.Lbi,useValue:bp},{provide:u.g9A,useValue:function ao(){id.makeCurrent()},multi:!0},{provide:le,useFactory:function Ju(){return(0,u.RDi)(document),document},deps:[]}]),xl=new u.OlP(""),Wa=[{provide:u.rWj,useClass:class Nl{addToWindow(e){u.dqk.getAngularTestability=(r,i=!0)=>{const s=e.findTestabilityInTree(r,i);if(null==s)throw new Error("Could not find testability for element.");return s},u.dqk.getAllAngularTestabilities=()=>e.getAllTestabilities(),u.dqk.getAllAngularRootElements=()=>e.getAllRootElements(),u.dqk.frameworkStabilizers||(u.dqk.frameworkStabilizers=[]),u.dqk.frameworkStabilizers.push(r=>{const i=u.dqk.getAllAngularTestabilities();let s=i.length,l=!1;const h=function(m){l=l||m,s--,0==s&&r(l)};i.forEach(function(m){m.whenStable(h)})})}findTestabilityInTree(e,t,r){return null==t?null:e.getTestability(t)??(r?F().isShadowRoot(t)?this.findTestabilityInTree(e,t.host,!0):this.findTestabilityInTree(e,t.parentElement,!0):null)}},deps:[]},{provide:u.lri,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]},{provide:u.dDg,useClass:u.dDg,deps:[u.R0b,u.eoX,u.rWj]}],Po=[{provide:u.zSh,useValue:"root"},{provide:u.qLn,useFactory:function Sp(){return new u.qLn},deps:[]},{provide:Xo,useClass:Yu,multi:!0,deps:[le,u.R0b,u.Lbi]},{provide:Xo,useClass:Mr,multi:!0,deps:[le]},{provide:ws,useClass:ws,deps:[zu,ea,u.AFp,Ml]},{provide:u.FYo,useExisting:ws},{provide:sd,useExisting:ea},{provide:ea,useClass:ea,deps:[le]},{provide:zu,useClass:zu,deps:[Xo,u.R0b]},{provide:class Nu{},useClass:Jo,deps:[]},[]];let qa=(()=>{class n{constructor(t){}static withServerTransition(t){return{ngModule:n,providers:[{provide:u.AFp,useValue:t.appId},{provide:Tp,useExisting:u.AFp},Ov]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(xl,12))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[...Po,...Wa],imports:[Qi,u.hGG]}),n})(),Np=(()=>{class n{constructor(t){this._doc=t}getTitle(){return this._doc.title}setTitle(t){this._doc.title=t||""}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function la(){return new Np((0,u.LFG)(le))}(),r},providedIn:"root"}),n})();typeof window<"u"&&window;var ko=L(4986),Jn=L(9751),ki=L(3269),wn=L(8996);function ct(...n){const e=(0,ki.yG)(n);return(0,wn.D)(n,e)}var Ll=L(6451),vt=L(4004),Bl=L(3099),Si=L(8421),cr=L(4482),yn=L(5403);function Vn(n,e){return(0,cr.e)((t,r)=>{let i=null,s=0,l=!1;const h=()=>l&&!i&&r.complete();t.subscribe((0,yn.x)(r,m=>{i?.unsubscribe();let y=0;const D=s++;(0,Si.Xf)(n(m,D)).subscribe(i=(0,yn.x)(r,S=>r.next(e?e(m,S,D,y++):S),()=>{i=null,h()}))},()=>{l=!0,h()}))})}function Es(n,e){return(0,cr.e)(function rc(n,e,t,r,i){return(s,l)=>{let h=t,m=e,y=0;s.subscribe((0,yn.x)(l,D=>{const S=y++;m=h?n(m,D,S):(h=!0,D),r&&l.next(m)},i&&(()=>{h&&l.next(m),l.complete()})))}}(n,e,arguments.length>=2,!0))}var lo=L(4671);function Fo(n,e=lo.y){return n=n??pd,(0,cr.e)((t,r)=>{let i,s=!0;t.subscribe((0,yn.x)(r,l=>{const h=e(l);(s||!n(i,h))&&(s=!1,i=h,r.next(l))}))})}function pd(n,e){return n===e}var da=L(5032);function Vs(...n){const e=(0,ki.jO)(n);return(0,cr.e)((t,r)=>{const i=n.length,s=new Array(i);let l=n.map(()=>!1),h=!1;for(let m=0;m<i;m++)(0,Si.Xf)(n[m]).subscribe((0,yn.x)(r,y=>{s[m]=y,!h&&!l[m]&&(l[m]=!0,(h=l.every(lo.y))&&(l=null))},da.Z));t.subscribe((0,yn.x)(r,m=>{if(h){const y=[m,...s];r.next(e?e(...y):y)}}))})}var Wn=L(4976),Wr=L(2011),Lo=(L(2644),L(3942)),Ai=L(4859),we=L(5861),es=L(6881),k=L(2090),Fi=L(1877);const Oh="@firebase/database";let Vl="";function Ph(n){Vl=n}class ic{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,k.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,k.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class sc{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,k.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const kh=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new ic(e)}}catch{}return new sc},fa=kh("localStorage"),oc=kh("sessionStorage"),pa=new Fi.Yd("@firebase/database"),gd=function(){let n=1;return function(){return n++}}(),Ul=function(n){const e=(0,k.dS)(n),t=new k.gQ;t.update(e);const r=t.digest();return k.US.encodeByteArray(r)},ga=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=ga.apply(null,r):e+="object"==typeof r?(0,k.Wl)(r):r,e+=" "}return e};let ts=null,jl=!0;const md=function(n,e){(0,k.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(pa.logLevel=Fi.in.VERBOSE,ts=pa.log.bind(pa),e&&oc.set("logging_enabled",!0)):"function"==typeof n?ts=n:(ts=null,oc.remove("logging_enabled"))},Xn=function(...n){if(!0===jl&&(jl=!1,null===ts&&!0===oc.get("logging_enabled")&&md(!0)),ts){const e=ga.apply(null,n);ts(e)}},ma=function(n){return function(...e){Xn(n,...e)}},Gl=function(...n){const e="FIREBASE INTERNAL ERROR: "+ga(...n);pa.error(e)},Cs=function(...n){const e=`FIREBASE FATAL ERROR: ${ga(...n)}`;throw pa.error(e),new Error(e)},ci=function(...n){const e="FIREBASE WARNING: "+ga(...n);pa.warn(e)},_d=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Us="[MIN_NAME]",qr="[MAX_NAME]",uo=function(n,e){if(n===e)return 0;if(n===Us||e===qr)return-1;if(e===Us||n===qr)return 1;{const t=I(n),r=I(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},Lh=function(n,e){return n===e?0:n<e?-1:1},di=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,k.Wl)(e))},co=function(n){if("object"!=typeof n||null===n)return(0,k.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,k.Wl)(e[r]),t+=":",t+=co(n[e[r]]);return t+="}",t},$l=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function qn(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const Bh=function(n){(0,k.hu)(!_d(n),"Invalid JSON number");const r=1023;let i,s,l,h,m;0===n?(s=0,l=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(h=Math.min(Math.floor(Math.log(n)/Math.LN2),r),s=h+r,l=Math.round(n*Math.pow(2,52-h)-Math.pow(2,52))):(s=0,l=Math.round(n/Math.pow(2,-1074))));const y=[];for(m=52;m;m-=1)y.push(l%2?1:0),l=Math.floor(l/2);for(m=11;m;m-=1)y.push(s%2?1:0),s=Math.floor(s/2);y.push(i?1:0),y.reverse();const D=y.join("");let S="";for(m=0;m<64;m+=8){let R=parseInt(D.substr(m,8),2).toString(16);1===R.length&&(R="0"+R),S+=R}return S.toLowerCase()},Lp=new RegExp("^-?(0*)\\d{1,10}$"),I=function(n){if(Lp.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},N=function(n){try{n()}catch(e){setTimeout(()=>{throw ci("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},B=function(){return("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},z=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class Q{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){ci(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class de{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(Xn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',ci(e)}}let Ye=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const dr=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ns="websocket",rs="long_polling";class Ka{constructor(e,t,r,i,s=!1,l="",h=!1,m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=l,this.includeNamespaceInQueryParams=h,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=fa.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&fa.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function ac(n,e,t){let r;if((0,k.hu)("string"==typeof e,"typeof type must == string"),(0,k.hu)("object"==typeof t,"typeof params must == object"),e===ns)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==rs)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function Vp(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return qn(t,(s,l)=>{i.push(s+"="+l)}),r+i.join("&")}class FD{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,k.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,k.p$)(this.counters_)}}const yd={},lc={};function Ya(n){const e=n.toString();return yd[e]||(yd[e]=new FD),yd[e]}class zl{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&N(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class ya{constructor(e,t,r,i,s,l,h){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=l,this.lastSessionId=h,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ma(e),this.stats_=Ya(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),ac(t,rs,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new zl(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,k.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new va((...s)=>{const[l,h,m,y,D]=s;if(this.incrementIncomingBytes_(s),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===l)this.id=h,this.password=m;else{if("close"!==l)throw new Error("Unrecognized command received: "+l);h?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(h,()=>{this.onClosed_()})):this.onClosed_()}},(...s)=>{const[l,h]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(l,h)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&dr.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ya.forceAllow_=!0}static forceDisallow(){ya.forceDisallow_=!0}static isAvailable(){return!((0,k.Yr)()||!ya.forceAllow_&&(ya.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,k.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,k.h$)(t),i=$l(r,1840);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,k.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,k.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class va{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,k.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=gd(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=va.createIFrame_();let s="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(s='<script>document.domain="'+document.domain+'";<\/script>');const l="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(l),this.myIFrame.doc.close()}catch(h){Xn("frame writing exception"),h.stack&&Xn(h.stack),Xn(h)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||Xn("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const l=this.pendingSegs.shift();r=r+"&seg"+i+"="+l.seg+"&ts"+i+"="+l.ts+"&d"+i+"="+l.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,k.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{Xn("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let Hh=null;typeof MozWebSocket<"u"?Hh=MozWebSocket:typeof WebSocket<"u"&&(Hh=WebSocket);let bd=(()=>{class n{constructor(t,r,i,s,l,h,m){this.connId=t,this.applicationId=i,this.appCheckToken=s,this.authToken=l,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ma(this.connId),this.stats_=Ya(r),this.connURL=n.connectionURL_(r,h,m,s,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,s,l){const h={v:"5"};return!(0,k.Yr)()&&typeof location<"u"&&location.hostname&&dr.test(location.hostname)&&(h.r="f"),r&&(h.s=r),i&&(h.ls=i),s&&(h.ac=s),l&&(h.p=l),ac(t,ns,h)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,fa.set("previous_websocket_failure",!0);try{let i;if((0,k.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Vl}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const l=process.env,h=0===this.connURL.indexOf("wss://")?l.HTTPS_PROXY||l.https_proxy:l.HTTP_PROXY||l.http_proxy;h&&(i.proxy={origin:h})}this.mySock=new Hh(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const s=i.message||i.data;return s&&this.log_(s),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const s=i.message||i.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==Hh&&!n.forceDisallow_}static previouslyFailed(){return fa.isInMemoryStorage||!0===fa.get("previous_websocket_failure")}markConnectionHealthy(){fa.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,k.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,k.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,k.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=$l(r,16384);i.length>1&&this.sendString_(String(i.length));for(let s=0;s<i.length;s++)this.sendString_(i[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),wd=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[ya,bd]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=bd&&bd.isAvailable();let i=r&&!bd.previouslyFailed();if(t.webSocketOnly&&(r||ci("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[bd];else{const s=this.transports_=[];for(const l of n.ALL_TRANSPORTS)l&&l.isAvailable()&&s.push(l);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class zp{constructor(e,t,r,i,s,l,h,m,y,D){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=l,this.onReady_=h,this.onDisconnect_=m,this.onKill_=y,this.lastSessionId=D,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ma("c:"+this.id+":"),this.transportManager_=new wd(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=z(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=di("t",e),r=di("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=di("t",e),r=di("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=di("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?Gl("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):Gl("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&ci("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),z(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):z(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(fa.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Km{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class Ym{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,k.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===t&&(!r||r===i[s].context))return void i.splice(s,1)}validateEventType_(e){(0,k.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class Kh extends Ym{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,k.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Kh}getInitialEvent(e){return(0,k.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}const Kl=32,Wp=768;class Dn{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function En(){return new Dn("")}function Wt(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Za(n){return n.pieces_.length-n.pieceNum_}function Gn(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Dn(n.pieces_,e)}function qp(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function ba(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function Yp(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Dn(e,0)}function er(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Dn)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Dn(t,0)}function qt(n){return n.pieceNum_>=n.pieces_.length}function hi(n,e){const t=Wt(n),r=Wt(e);if(null===t)return e;if(t===r)return hi(Gn(n),Gn(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function is(n,e){const t=ba(n,0),r=ba(e,0);for(let i=0;i<t.length&&i<r.length;i++){const s=uo(t[i],r[i]);if(0!==s)return s}return t.length===r.length?0:t.length<r.length?-1:1}function Qa(n,e){if(Za(n)!==Za(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function ss(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Za(n)>Za(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class Zm{constructor(e,t){this.errorPrefix_=t,this.parts_=ba(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,k.ug)(this.parts_[r]);Qm(this)}}function Qm(n){if(n.byteLength_>Wp)throw new Error(n.errorPrefix_+"has a key path longer than "+Wp+" bytes ("+n.byteLength_+").");if(n.parts_.length>Kl)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Kl+") or object contains a cycle "+Ja(n))}function Ja(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class Jp extends Ym{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Jp}getInitialEvent(e){return(0,k.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const Kr=1e3;let js,Xa=(()=>{class n extends Km{constructor(t,r,i,s,l,h,m,y){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=s,this.onServerInfoUpdate_=l,this.authTokenProvider_=h,this.appCheckTokenProvider_=m,this.authOverride_=y,this.id=n.nextPersistentConnectionId_++,this.log_=ma("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Kr,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,y&&!(0,k.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Jp.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&Kh.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const s=++this.requestNumber_,l={r:s,a:t,b:r};this.log_((0,k.Wl)(l)),(0,k.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(l),i&&(this.requestCBHash_[s]=i)}get(t){this.initConnection_();const r=new k.BH,s={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:h=>{const m=h.d;"ok"===h.s?r.resolve(m):r.reject(m)}};return this.outstandingGets_.push(s),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,s){this.initConnection_();const l=t._queryIdentifier,h=t._path.toString();this.log_("Listen called for "+h+" "+l),this.listens.has(h)||this.listens.set(h,new Map),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,k.hu)(!this.listens.get(h).has(l),"listen() called twice for same path/queryId.");const m={onComplete:s,hashFn:r,query:t,tag:i};this.listens.get(h).set(l,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),s=r._queryIdentifier;this.log_("Listen on "+i+" for "+s);const l={p:i};t.tag&&(l.q=r._queryObject,l.t=t.tag),l.h=t.hashFn(),this.sendRequest("q",l,m=>{const y=m.d,D=m.s;n.warnOnListenWarnings_(y,r),(this.listens.get(i)&&this.listens.get(i).get(s))===t&&(this.log_("listen response",m),"ok"!==D&&this.removeListen_(i,s),t.onComplete&&t.onComplete(D,y))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,k.r3)(t,"w")){const i=(0,k.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const s='".indexOn": "'+r._queryParams.getIndex().toString()+'"',l=r._path.toString();ci(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${l} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,k.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,k.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,s=>{const l=s.s,h=s.d||"error";this.authToken_===t&&("ok"===l?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(l,h))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),s=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+s),(0,k.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,s)&&this.connected_&&this.sendUnlisten_(i,s,t._queryObject,r)}sendUnlisten_(t,r,i,s){this.log_("Unlisten on "+t+" for "+r);const l={p:t};s&&(l.q=i,l.t=s),this.sendRequest("n",l)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,s){const l={p:r,d:i};this.log_("onDisconnect "+t,l),this.sendRequest(t,l,h=>{s&&setTimeout(()=>{s(h.s,h.d)},Math.floor(0))})}put(t,r,i,s){this.putInternal("p",t,r,i,s)}merge(t,r,i,s){this.putInternal("m",t,r,i,s)}putInternal(t,r,i,s,l){this.initConnection_();const h={p:r,d:i};void 0!==l&&(h.h=l),this.outstandingPuts_.push({action:t,request:h,onComplete:s}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,s=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,l=>{this.log_(r+" response",l),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),s&&s(l.s,l.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,k.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):Gl("Unrecognized action received from server: "+(0,k.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,k.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Kr,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=Kr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Kr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,we.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),s=t.onRealtimeDisconnect_.bind(t),l=t.id+":"+n.nextConnectionId_++,h=t.lastSessionId;let m=!1,y=null;const D=function(){y?y.close():(m=!0,s())};t.realtime_={close:D,sendRequest:function(P){(0,k.hu)(y,"sendRequest call when we're not connected not allowed."),y.sendRequest(P)}};const R=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[P,$]=yield Promise.all([t.authTokenProvider_.getToken(R),t.appCheckTokenProvider_.getToken(R)]);m?Xn("getToken() completed but was canceled"):(Xn("getToken() completed. Creating connection."),t.authToken_=P&&P.accessToken,t.appCheckToken_=$&&$.token,y=new zp(l,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,s,Z=>{ci(Z+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},h))}catch(P){t.log_("Failed to get token: "+P),m||(t.repoInfo_.nodeAdmin&&ci(P),D())}}})()}interrupt(t){Xn("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){Xn("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,k.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Kr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(l=>co(l)).join("$"):"default";const s=this.removeListen_(t,i);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(t,r){const i=new Dn(t).toString();let s;if(this.listens.has(i)){const l=this.listens.get(i);s=l.get(r),l.delete(r),0===l.size&&this.listens.delete(i)}else s=void 0;return s}onAuthRevoked_(t,r){Xn("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){Xn("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,k.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Vl.replace(/\./g,"-")]=1,(0,k.uI)()?t["framework.cordova"]=1:(0,k.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=Kh.getInstance().currentlyOnline();return(0,k.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class tn{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new tn(e,t)}}class Yh{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new tn(Us,e),i=new tn(Us,t);return 0!==this.compare(r,i)}minPost(){return tn.MIN}}class fc extends Yh{static get __EMPTY_NODE(){return js}static set __EMPTY_NODE(e){js=e}compare(e,t){return uo(e.name,t.name)}isDefinedOn(e){throw(0,k.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return tn.MIN}maxPost(){return new tn(qr,js)}makePost(e,t){return(0,k.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new tn(e,js)}toString(){return".key"}}const fo=new fc;class Yl{constructor(e,t,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let l=1;for(;!e.isEmpty();)if(l=t?r(e.key,t):1,i&&(l*=-1),l<0)e=this.isReverse_?e.left:e.right;else{if(0===l){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let e_,Yr=(()=>{class n{constructor(t,r,i,s,l){this.key=t,this.value=r,this.color=i??n.RED,this.left=s??Bi.EMPTY_NODE,this.right=l??Bi.EMPTY_NODE}copy(t,r,i,s,l){return new n(t??this.key,r??this.value,i??this.color,s??this.left,l??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let s=this;const l=i(t,s.key);return s=l<0?s.copy(null,null,null,s.left.insert(t,r,i),null):0===l?s.copy(null,r,null,null,null):s.copy(null,null,null,null,s.right.insert(t,r,i)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return Bi.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,s;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Bi.EMPTY_NODE;s=i.right.min_(),i=i.copy(s.key,s.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Bi{constructor(e,t=Bi.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Bi(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,Yr.BLACK,null,null))}remove(e){return new Bi(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,Yr.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Yl(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new Yl(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new Yl(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new Yl(this.root_,null,this.comparator_,!0,e)}}function Xm(n,e){return uo(n.name,e.name)}function Zh(n,e){return uo(n,e)}Bi.EMPTY_NODE=new class Zl{copy(e,t,r,i,s){return this}insert(e,t,r){return new Yr(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const p=function(n){return"number"==typeof n?"number:"+Bh(n):"string:"+n},g=function(n){if(n.isLeafNode()){const e=n.val();(0,k.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,k.r3)(e,".sv"),"Priority must be a string or number.")}else(0,k.hu)(n===e_||n.isEmpty(),"priority of unexpected type.");(0,k.hu)(n===e_||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let w,O,G,A=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,k.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),g(this.priorityNode_)}static set __childrenNodeConstructor(t){w=t}static get __childrenNodeConstructor(){return w}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return qt(t)?this:".priority"===Wt(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=Wt(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,k.hu)(".priority"!==i||1===Za(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Gn(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+p(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?Bh(this.value_):this.value_,this.lazyHash_=Ul(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,k.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,s=n.VALUE_TYPE_ORDER.indexOf(r),l=n.VALUE_TYPE_ORDER.indexOf(i);return(0,k.hu)(s>=0,"Unknown leaf type: "+r),(0,k.hu)(l>=0,"Unknown leaf type: "+i),s===l?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:l-s}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ze=new class et extends Yh{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),s=r.compareTo(i);return 0===s?uo(e.name,t.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return tn.MIN}maxPost(){return new tn(qr,new A("[PRIORITY-POST]",G))}makePost(e,t){const r=O(e);return new tn(t,new A("[PRIORITY-POST]",r))}toString(){return".priority"}},mt=Math.log(2);class Kn{constructor(e){this.count=parseInt(Math.log(e+1)/mt,10),this.current_=this.count-1;const i=(s=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const as=function(n,e,t,r){n.sort(e);const i=function(m,y){const D=y-m;let S,R;if(0===D)return null;if(1===D)return S=n[m],R=t?t(S):S,new Yr(R,S.node,Yr.BLACK,null,null);{const P=parseInt(D/2,10)+m,$=i(m,P),Z=i(P+1,y);return S=n[P],R=t?t(S):S,new Yr(R,S.node,Yr.BLACK,$,Z)}},h=function(m){let y=null,D=null,S=n.length;const R=function($,Z){const oe=S-$,Ue=S;S-=$;const Ge=i(oe+1,Ue),tt=n[oe],Xe=t?t(tt):tt;P(new Yr(Xe,tt.node,Z,null,Ge))},P=function($){y?(y.left=$,y=$):(D=$,y=$)};for(let $=0;$<m.count;++$){const Z=m.nextBitIsOne(),oe=Math.pow(2,m.count-($+1));Z?R(oe,Yr.BLACK):(R(oe,Yr.BLACK),R(oe,Yr.RED))}return D}(new Kn(n.length));return new Bi(r||e,h)};let el;const Ql={};class On{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,k.hu)(Ql&&ze,"ChildrenNode.ts has not been loaded"),el=el||new On({".priority":Ql},{".priority":ze}),el}get(e){const t=(0,k.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Bi?t:null}hasIndex(e){return(0,k.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,k.hu)(e!==fo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=t.getIterator(tn.Wrap);let h,l=s.getNext();for(;l;)i=i||e.isDefinedOn(l.node),r.push(l),l=s.getNext();h=i?as(r,e.getCompare()):Ql;const m=e.toString(),y=Object.assign({},this.indexSet_);y[m]=e;const D=Object.assign({},this.indexes_);return D[m]=h,new On(D,y)}addToIndexes(e,t){const r=(0,k.UI)(this.indexes_,(i,s)=>{const l=(0,k.DV)(this.indexSet_,s);if((0,k.hu)(l,"Missing index implementation for "+s),i===Ql){if(l.isDefinedOn(e.node)){const h=[],m=t.getIterator(tn.Wrap);let y=m.getNext();for(;y;)y.name!==e.name&&h.push(y),y=m.getNext();return h.push(e),as(h,l.getCompare())}return Ql}{const h=t.get(e.name);let m=i;return h&&(m=m.remove(new tn(e.name,h))),m.insert(e,e.node)}});return new On(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,k.UI)(this.indexes_,i=>{if(i===Ql)return i;{const s=t.get(e.name);return s?i.remove(new tn(e.name,s)):i}});return new On(r,this.indexSet_)}}let pc,Kt=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&g(this.priorityNode_),this.children_.isEmpty()&&(0,k.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return pc||(pc=new n(new Bi(Zh),null,On.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||pc}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?pc:r}}getChild(t){const r=Wt(t);return null===r?this:this.getImmediateChild(r).getChild(Gn(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,k.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new tn(t,r);let s,l;r.isEmpty()?(s=this.children_.remove(t),l=this.indexMap_.removeFromIndexes(i,this.children_)):(s=this.children_.insert(t,r),l=this.indexMap_.addToIndexes(i,this.children_));const h=s.isEmpty()?pc:this.priorityNode_;return new n(s,h,l)}}updateChild(t,r){const i=Wt(t);if(null===i)return r;{(0,k.hu)(".priority"!==Wt(t)||1===Za(t),".priority must be the last token in a path");const s=this.getImmediateChild(i).updateChild(Gn(t),r);return this.updateImmediateChild(i,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,s=0,l=!0;if(this.forEachChild(ze,(h,m)=>{r[h]=m.val(t),i++,l&&n.INTEGER_REGEXP_.test(h)?s=Math.max(s,Number(h)):l=!1}),!t&&l&&s<2*i){const h=[];for(const m in r)h[m]=r[m];return h}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+p(this.getPriority().val())+":"),this.forEachChild(ze,(r,i)=>{const s=i.hash();""!==s&&(t+=":"+r+":"+s)}),this.lazyHash_=""===t?"":Ul(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const s=this.resolveIndex_(i);if(s){const l=s.getPredecessorKey(new tn(t,r));return l?l.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new tn(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new tn(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(s=>r(s.name,s.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,s=>s);{const s=this.children_.getIteratorFrom(t.name,tn.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)<0;)s.getNext(),l=s.peek();return s}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,s=>s);{const s=this.children_.getReverseIteratorFrom(t.name,tn.Wrap);let l=s.peek();for(;null!=l&&r.compare(l,t)>0;)s.getNext(),l=s.peek();return s}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===Jl?-1:0}withIndex(t){if(t===fo||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===fo||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(ze),s=r.getIterator(ze);let l=i.getNext(),h=s.getNext();for(;l&&h;){if(l.name!==h.name||!l.node.equals(h.node))return!1;l=i.getNext(),h=s.getNext()}return null===l&&null===h}return!1}return!1}}resolveIndex_(t){return t===fo?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const Jl=new class Qh extends Kt{constructor(){super(new Bi(Zh),Kt.EMPTY_NODE,On.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return Kt.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(tn,{MIN:{value:new tn(Us,Kt.EMPTY_NODE)},MAX:{value:new tn(qr,Jl)}}),fc.__EMPTY_NODE=Kt.EMPTY_NODE,A.__childrenNodeConstructor=Kt,function v(n){e_=n}(Jl),function Pe(n){G=n}(Jl);const t_=!0;function tr(n,e=null){if(null===n)return Kt.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,k.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new A(n,tr(e));if(n instanceof Array||!t_){let t=Kt.EMPTY_NODE;return qn(n,(r,i)=>{if((0,k.r3)(n,r)&&"."!==r.substring(0,1)){const s=tr(i);(s.isLeafNode()||!s.isEmpty())&&(t=t.updateImmediateChild(r,s))}}),t.updatePriority(tr(e))}{const t=[];let r=!1;if(qn(n,(l,h)=>{if("."!==l.substring(0,1)){const m=tr(h);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new tn(l,m)))}}),0===t.length)return Kt.EMPTY_NODE;const s=as(t,Xm,l=>l.name,Zh);if(r){const l=as(t,ze.getCompare());return new Kt(s,tr(e),new On({".priority":l},{".priority":ze}))}return new Kt(s,tr(e),On.Default)}}!function ee(n){O=n}(tr);class Jh extends Yh{constructor(e){super(),this.indexPath_=e,(0,k.hu)(!qt(e)&&".priority"!==Wt(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),s=r.compareTo(i);return 0===s?uo(e.name,t.name):s}makePost(e,t){const r=tr(e),i=Kt.EMPTY_NODE.updateChild(this.indexPath_,r);return new tn(t,i)}maxPost(){const e=Kt.EMPTY_NODE.updateChild(this.indexPath_,Jl);return new tn(qr,e)}toString(){return ba(this.indexPath_,0).join("/")}}const gc=new class Gv extends Yh{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?uo(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return tn.MIN}maxPost(){return tn.MAX}makePost(e,t){const r=tr(e);return new tn(t,r)}toString(){return".value"}};function $v(n){return{type:"value",snapshotNode:n}}function Xp(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function Xl(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function Td(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class n_{constructor(e){this.index_=e}updateChild(e,t,r,i,s,l){(0,k.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const h=e.getImmediateChild(t);return h.getChild(i).equals(r.getChild(i))&&h.isEmpty()===r.isEmpty()||(null!=l&&(r.isEmpty()?e.hasChild(t)?l.trackChildChange(Xl(t,h)):(0,k.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):h.isEmpty()?l.trackChildChange(Xp(t,r)):l.trackChildChange(Td(t,r,h))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(ze,(i,s)=>{t.hasChild(i)||r.trackChildChange(Xl(i,s))}),t.isLeafNode()||t.forEachChild(ze,(i,s)=>{if(e.hasChild(i)){const l=e.getImmediateChild(i);l.equals(s)||r.trackChildChange(Td(i,s,l))}else r.trackChildChange(Xp(i,s))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?Kt.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class Xh{constructor(e){this.indexedFilter_=new n_(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Xh.getStartPost_(e),this.endPost_=Xh.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,s,l){return this.matches(new tn(t,r))||(r=Kt.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,s,l)}updateFullNode(e,t,r){t.isLeafNode()&&(t=Kt.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(Kt.EMPTY_NODE);const s=this;return t.forEachChild(ze,(l,h)=>{s.matches(new tn(l,h))||(i=i.updateImmediateChild(l,Kt.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class Xx{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Xh(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,s,l){return this.rangedFilter_.matches(new tn(t,r))||(r=Kt.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,s,l):this.fullLimitUpdateChild_(e,t,r,s,l)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=Kt.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let s;i=Kt.EMPTY_NODE.withIndex(this.index_),s=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let l=0;for(;s.hasNext()&&l<this.limit_;){const h=s.getNext();if(this.withinDirectionalStart(h)){if(!this.withinDirectionalEnd(h))break;i=i.updateImmediateChild(h.name,h.node),l++}}}else{let s;i=t.withIndex(this.index_),i=i.updatePriority(Kt.EMPTY_NODE),s=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let l=0;for(;s.hasNext();){const h=s.getNext();l<this.limit_&&this.withinDirectionalStart(h)&&this.withinDirectionalEnd(h)?l++:i=i.updateImmediateChild(h.name,Kt.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,s){let l;if(this.reverse_){const S=this.index_.getCompare();l=(R,P)=>S(P,R)}else l=this.index_.getCompare();const h=e;(0,k.hu)(h.numChildren()===this.limit_,"");const m=new tn(t,r),y=this.reverse_?h.getFirstChild(this.index_):h.getLastChild(this.index_),D=this.rangedFilter_.matches(m);if(h.hasChild(t)){const S=h.getImmediateChild(t);let R=i.getChildAfterChild(this.index_,y,this.reverse_);for(;null!=R&&(R.name===t||h.hasChild(R.name));)R=i.getChildAfterChild(this.index_,R,this.reverse_);const P=null==R?1:l(R,m);if(D&&!r.isEmpty()&&P>=0)return s?.trackChildChange(Td(t,r,S)),h.updateImmediateChild(t,r);{s?.trackChildChange(Xl(t,S));const Z=h.updateImmediateChild(t,Kt.EMPTY_NODE);return null!=R&&this.rangedFilter_.matches(R)?(s?.trackChildChange(Xp(R.name,R.node)),Z.updateImmediateChild(R.name,R.node)):Z}}return r.isEmpty()?e:D&&l(y,m)>=0?(null!=s&&(s.trackChildChange(Xl(y.name,y.node)),s.trackChildChange(Xp(t,r))),h.updateImmediateChild(t,r).updateImmediateChild(y.name,Kt.EMPTY_NODE)):e}}class r_{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ze}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,k.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Us}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,k.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:qr}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,k.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ze}copy(){const e=new r_;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function $D(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function Wv(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function eg(n,e){const t=n.copy();return t.index_=e,t}function Kv(n){const e={};if(n.isDefault())return e;let t;if(n.index_===ze?t="$priority":n.index_===gc?t="$value":n.index_===fo?t="$key":((0,k.hu)(n.index_ instanceof Jh,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,k.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,k.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,k.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,k.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function mc(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ze&&(e.i=n.index_.toString()),e}class i_ extends Km{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ma("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,k.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const l=i_.getListenId_(e,r),h={};this.listens_[l]=h;const m=Kv(e._queryParams);this.restRequest_(s+".json",m,(y,D)=>{let S=D;if(404===y&&(S=null,y=null),null===y&&this.onDataUpdate_(s,S,!1,r),(0,k.DV)(this.listens_,l)===h){let R;R=y?401===y?"permission_denied":"rest_error:"+y:"ok",i(R,null)}})}unlisten(e,t){const r=i_.getListenId_(e,t);delete this.listens_[r]}get(e){const t=Kv(e._queryParams),r=e._path.toString(),i=new k.BH;return this.restRequest_(r+".json",t,(s,l)=>{let h=l;404===s&&(h=null,s=null),null===s?(this.onDataUpdate_(r,h,!1,null),i.resolve(h)):i.reject(new Error(h))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(t.auth=i.accessToken),s&&s.token&&(t.ac=s.token);const l=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,k.xO)(t);this.log_("Sending REST request for "+l);const h=new XMLHttpRequest;h.onreadystatechange=()=>{if(r&&4===h.readyState){this.log_("REST Response for "+l+" received. status:",h.status,"response:",h.responseText);let m=null;if(h.status>=200&&h.status<300){try{m=(0,k.cI)(h.responseText)}catch{ci("Failed to parse JSON response for "+l+": "+h.responseText)}r(null,m)}else 401!==h.status&&404!==h.status&&ci("Got unsuccessful REST response for "+l+" Status: "+h.status),r(h.status);r=null}},h.open("GET",l,!0),h.send()})}}class Yv{constructor(){this.rootNode_=Kt.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function Id(){return{value:null,children:new Map}}function ef(n,e,t){if(qt(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=Wt(e);n.children.has(r)||n.children.set(r,Id()),ef(n.children.get(r),e=Gn(e),t)}}function tg(n,e){if(qt(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(ze,(r,i)=>{ef(n,new Dn(r),i)}),tg(n,e)}}if(n.children.size>0){const t=Wt(e);return e=Gn(e),n.children.has(t)&&tg(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function tf(n,e,t){null!==n.value?t(e,n.value):function Sd(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{tf(i,new Dn(e.toString()+"/"+r),t)})}class HD{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&qn(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class zD{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new HD(e);const r=1e4+2e4*Math.random();z(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;qn(e,(i,s)=>{s>0&&(0,k.r3)(this.statsToReport_,i)&&(t[i]=s,r=!0)}),r&&this.server_.reportStats(t),z(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var Vi=(()=>{return(n=Vi||(Vi={}))[n.OVERWRITE=0]="OVERWRITE",n[n.MERGE=1]="MERGE",n[n.ACK_USER_WRITE=2]="ACK_USER_WRITE",n[n.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",Vi;var n})();function Jv(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class nf{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=Vi.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(qt(this.path)){if(null!=this.affectedTree.value)return(0,k.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Dn(e));return new nf(En(),t,this.revert)}}return(0,k.hu)(Wt(this.path)===e,"operationForChild called for unrelated child."),new nf(Gn(this.path),this.affectedTree,this.revert)}}class ng{constructor(e,t){this.source=e,this.path=t,this.type=Vi.LISTEN_COMPLETE}operationForChild(e){return qt(this.path)?new ng(this.source,En()):new ng(this.source,Gn(this.path))}}class _c{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=Vi.OVERWRITE}operationForChild(e){return qt(this.path)?new _c(this.source,En(),this.snap.getImmediateChild(e)):new _c(this.source,Gn(this.path),this.snap)}}class rf{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=Vi.MERGE}operationForChild(e){if(qt(this.path)){const t=this.children.subtree(new Dn(e));return t.isEmpty()?null:t.value?new _c(this.source,En(),t.value):new rf(this.source,En(),t)}return(0,k.hu)(Wt(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new rf(this.source,Gn(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class eu{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(qt(e))return this.isFullyInitialized()&&!this.filtered_;const t=Wt(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class eP{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function tu(n,e,t,r,i,s){const l=r.filter(h=>h.type===t);l.sort((h,m)=>function sf(n,e,t){if(null==e.childName||null==t.childName)throw(0,k.g5)("Should only compare child_ events.");const r=new tn(e.childName,e.snapshotNode),i=new tn(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,h,m)),l.forEach(h=>{const m=function iS(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,h,s);i.forEach(y=>{y.respondsTo(h.type)&&e.push(y.createEvent(m,n.query_))})})}function yc(n,e){return{eventCache:n,serverCache:e}}function rg(n,e,t,r){return yc(new eu(e,t,r),n.serverCache)}function Xv(n,e,t,r){return yc(n.eventCache,new eu(e,t,r))}function o_(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function Ad(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let e0;class nr{constructor(e,t=(()=>(e0||(e0=new Bi(Lh)),e0))()){this.value=e,this.children=t}static fromObject(e){let t=new nr(null);return qn(e,(r,i)=>{t=t.set(new Dn(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:En(),value:this.value};if(qt(e))return null;{const r=Wt(e),i=this.children.get(r);if(null!==i){const s=i.findRootMostMatchingPathAndValue(Gn(e),t);return null!=s?{path:er(new Dn(r),s.path),value:s.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(qt(e))return this;{const t=Wt(e),r=this.children.get(t);return null!==r?r.subtree(Gn(e)):new nr(null)}}set(e,t){if(qt(e))return new nr(t,this.children);{const r=Wt(e),s=(this.children.get(r)||new nr(null)).set(Gn(e),t),l=this.children.insert(r,s);return new nr(this.value,l)}}remove(e){if(qt(e))return this.children.isEmpty()?new nr(null):new nr(null,this.children);{const t=Wt(e),r=this.children.get(t);if(r){const i=r.remove(Gn(e));let s;return s=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&s.isEmpty()?new nr(null):new nr(this.value,s)}return this}}get(e){if(qt(e))return this.value;{const t=Wt(e),r=this.children.get(t);return r?r.get(Gn(e)):null}}setTree(e,t){if(qt(e))return t;{const r=Wt(e),s=(this.children.get(r)||new nr(null)).setTree(Gn(e),t);let l;return l=s.isEmpty()?this.children.remove(r):this.children.insert(r,s),new nr(this.value,l)}}fold(e){return this.fold_(En(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(er(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,En(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(qt(e))return null;{const s=Wt(e),l=this.children.get(s);return l?l.findOnPath_(Gn(e),er(t,s),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,En(),t)}foreachOnPath_(e,t,r){if(qt(e))return this;{this.value&&r(t,this.value);const i=Wt(e),s=this.children.get(i);return s?s.foreachOnPath_(Gn(e),er(t,i),r):new nr(null)}}foreach(e){this.foreach_(En(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(er(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class po{constructor(e){this.writeTree_=e}static empty(){return new po(new nr(null))}}function Nd(n,e,t){if(qt(e))return new po(new nr(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let s=r.value;const l=hi(i,e);return s=s.updateChild(l,t),new po(n.writeTree_.set(i,s))}{const i=new nr(t),s=n.writeTree_.setTree(e,i);return new po(s)}}}function t0(n,e,t){let r=n;return qn(t,(i,s)=>{r=Nd(r,er(e,i),s)}),r}function a_(n,e){if(qt(e))return po.empty();{const t=n.writeTree_.setTree(e,new nr(null));return new po(t)}}function Md(n,e){return null!=Rd(n,e)}function Rd(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(hi(t.path,e)):null}function qD(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ze,(r,i)=>{e.push(new tn(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new tn(r,i.value))}),e}function vc(n,e){if(qt(e))return n;{const t=Rd(n,e);return new po(null!=t?new nr(t):n.writeTree_.subtree(e))}}function n0(n){return n.writeTree_.isEmpty()}function af(n,e){return KD(En(),n.writeTree_,e)}function KD(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{".priority"===i?((0,k.hu)(null!==s.value,"Priority writes must always be leaf nodes"),r=s.value):t=KD(er(n,i),s,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(er(n,".priority"),r)),t}}function l_(n,e){return XD(e,n)}function tP(n,e){if(n.snap)return ss(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&ss(er(n.path,t),e))return!0;return!1}function YD(n){return n.visible}function aS(n,e,t){let r=po.empty();for(let i=0;i<n.length;++i){const s=n[i];if(e(s)){const l=s.path;let h;if(s.snap)ss(t,l)?(h=hi(t,l),r=Nd(r,h,s.snap)):ss(l,t)&&(h=hi(l,t),r=Nd(r,En(),s.snap.getChild(h)));else{if(!s.children)throw(0,k.g5)("WriteRecord should have .snap or .children");if(ss(t,l))h=hi(t,l),r=t0(r,h,s.children);else if(ss(l,t))if(h=hi(l,t),qt(h))r=t0(r,En(),s.children);else{const m=(0,k.DV)(s.children,Wt(h));if(m){const y=m.getChild(Gn(h));r=Nd(r,En(),y)}}}}}return r}function r0(n,e,t,r,i){if(r||i){const s=vc(n.visibleWrites,e);return!i&&n0(s)?t:i||null!=t||Md(s,En())?af(aS(n.allWrites,function(y){return(y.visible||i)&&(!r||!~r.indexOf(y.writeId))&&(ss(y.path,e)||ss(e,y.path))},e),t||Kt.EMPTY_NODE):null}{const s=Rd(n.visibleWrites,e);if(null!=s)return s;{const l=vc(n.visibleWrites,e);return n0(l)?t:null!=t||Md(l,En())?af(l,t||Kt.EMPTY_NODE):null}}}function u_(n,e,t,r){return r0(n.writeTree,n.treePath,e,t,r)}function c_(n,e){return function ZD(n,e,t){let r=Kt.EMPTY_NODE;const i=Rd(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ze,(s,l)=>{r=r.updateImmediateChild(s,l)}),r;if(t){const s=vc(n.visibleWrites,e);return t.forEachChild(ze,(l,h)=>{const m=af(vc(s,new Dn(l)),h);r=r.updateImmediateChild(l,m)}),qD(s).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}return qD(vc(n.visibleWrites,e)).forEach(l=>{r=r.updateImmediateChild(l.name,l.node)}),r}(n.writeTree,n.treePath,e)}function JD(n,e,t,r){return function lS(n,e,t,r,i){(0,k.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=er(e,t);if(Md(n.visibleWrites,s))return null;{const l=vc(n.visibleWrites,s);return n0(l)?i.getChild(t):af(l,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function d_(n,e){return function uS(n,e){return Rd(n.visibleWrites,e)}(n.writeTree,er(n.treePath,e))}function s0(n,e,t){return function QD(n,e,t,r){const i=er(e,t),s=Rd(n.visibleWrites,i);return null!=s?s:r.isCompleteForChild(t)?af(vc(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function o0(n,e){return XD(er(n.treePath,e),n.writeTree)}function XD(n,e){return{treePath:n,writeTree:e}}class hS{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,k.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,k.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if("child_added"===t&&"child_removed"===s)this.changeMap.set(r,Td(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===s)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===s)this.changeMap.set(r,Xl(r,i.oldSnap));else if("child_changed"===t&&"child_added"===s)this.changeMap.set(r,Xp(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==s)throw(0,k.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,Td(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const Qt=new class fS{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class h_{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new eu(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return s0(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Ad(this.viewCache_),s=function dS(n,e,t,r,i,s){return function cS(n,e,t,r,i,s,l){let h;const m=vc(n.visibleWrites,e),y=Rd(m,En());if(null!=y)h=y;else{if(null==t)return[];h=af(m,t)}if(h=h.withIndex(l),h.isEmpty()||h.isLeafNode())return[];{const D=[],S=l.getCompare(),R=s?h.getReverseIteratorFrom(r,l):h.getIteratorFrom(r,l);let P=R.getNext();for(;P&&D.length<i;)0!==S(P,r)&&D.push(P),P=R.getNext();return D}}(n.writeTree,n.treePath,e,t,r,i,s)}(this.writes_,i,t,1,r,e);return 0===s.length?null:s[0]}}function a0(n,e,t,r,i,s){const l=e.eventCache;if(null!=d_(r,t))return e;{let h,m;if(qt(t))if((0,k.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const y=Ad(e),S=c_(r,y instanceof Kt?y:Kt.EMPTY_NODE);h=n.filter.updateFullNode(e.eventCache.getNode(),S,s)}else{const y=u_(r,Ad(e));h=n.filter.updateFullNode(e.eventCache.getNode(),y,s)}else{const y=Wt(t);if(".priority"===y){(0,k.hu)(1===Za(t),"Can't have a priority with additional path components");const D=l.getNode();m=e.serverCache.getNode();const S=JD(r,t,D,m);h=null!=S?n.filter.updatePriority(D,S):l.getNode()}else{const D=Gn(t);let S;if(l.isCompleteForChild(y)){m=e.serverCache.getNode();const R=JD(r,t,l.getNode(),m);S=null!=R?l.getNode().getImmediateChild(y).updateChild(D,R):l.getNode().getImmediateChild(y)}else S=s0(r,y,e.serverCache);h=null!=S?n.filter.updateChild(l.getNode(),y,S,D,i,s):l.getNode()}}return rg(e,h,l.isFullyInitialized()||qt(t),n.filter.filtersNodes())}}function f_(n,e,t,r,i,s,l,h){const m=e.serverCache;let y;const D=l?n.filter:n.filter.getIndexedFilter();if(qt(t))y=D.updateFullNode(m.getNode(),r,null);else if(D.filtersNodes()&&!m.isFiltered()){const P=m.getNode().updateChild(t,r);y=D.updateFullNode(m.getNode(),P,null)}else{const P=Wt(t);if(!m.isCompleteForPath(t)&&Za(t)>1)return e;const $=Gn(t),oe=m.getNode().getImmediateChild(P).updateChild($,r);y=".priority"===P?D.updatePriority(m.getNode(),oe):D.updateChild(m.getNode(),P,oe,$,Qt,null)}const S=Xv(e,y,m.isFullyInitialized()||qt(t),D.filtersNodes());return a0(n,S,t,i,new h_(i,S,s),h)}function p_(n,e,t,r,i,s,l){const h=e.eventCache;let m,y;const D=new h_(i,e,s);if(qt(t))y=n.filter.updateFullNode(e.eventCache.getNode(),r,l),m=rg(e,y,!0,n.filter.filtersNodes());else{const S=Wt(t);if(".priority"===S)y=n.filter.updatePriority(e.eventCache.getNode(),r),m=rg(e,y,h.isFullyInitialized(),h.isFiltered());else{const R=Gn(t),P=h.getNode().getImmediateChild(S);let $;if(qt(R))$=r;else{const Z=D.getCompleteChild(S);$=null!=Z?".priority"===qp(R)&&Z.getChild(Yp(R)).isEmpty()?Z:Z.updateChild(R,r):Kt.EMPTY_NODE}m=P.equals($)?e:rg(e,n.filter.updateChild(h.getNode(),S,$,R,D,l),h.isFullyInitialized(),n.filter.filtersNodes())}}return m}function nE(n,e){return n.eventCache.isCompleteForChild(e)}function _S(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function g_(n,e,t,r,i,s,l,h){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let y,m=e;y=qt(t)?r:new nr(null).setTree(t,r);const D=e.serverCache.getNode();return y.children.inorderTraversal((S,R)=>{if(D.hasChild(S)){const $=_S(0,e.serverCache.getNode().getImmediateChild(S),R);m=f_(n,m,new Dn(S),$,i,s,l,h)}}),y.children.inorderTraversal((S,R)=>{const P=!e.serverCache.isCompleteForChild(S)&&null===R.value;if(!D.hasChild(S)&&!P){const Z=_S(0,e.serverCache.getNode().getImmediateChild(S),R);m=f_(n,m,new Dn(S),Z,i,s,l,h)}}),m}class l0{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new n_(r.getIndex()),s=function jD(n){return n.loadsAllData()?new n_(n.getIndex()):n.hasLimit()?new Xx(n):new Xh(n)}(r);this.processor_=function eE(n){return{filter:n}}(s);const l=t.serverCache,h=t.eventCache,m=i.updateFullNode(Kt.EMPTY_NODE,l.getNode(),null),y=s.updateFullNode(Kt.EMPTY_NODE,h.getNode(),null),D=new eu(m,l.isFullyInitialized(),i.filtersNodes()),S=new eu(y,h.isFullyInitialized(),s.filtersNodes());this.viewCache_=yc(S,D),this.eventGenerator_=new eP(this.query_)}get query(){return this.query_}}function rP(n,e){const t=Ad(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!qt(e)&&!t.getImmediateChild(Wt(e)).isEmpty())?t.getChild(e):null}function bS(n){return 0===n.eventRegistrations_.length}function iE(n,e,t){const r=[];if(t){(0,k.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(s=>{const l=s.createCancelEvent(t,i);l&&r.push(l)})}if(e){let i=[];for(let s=0;s<n.eventRegistrations_.length;++s){const l=n.eventRegistrations_[s];if(l.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(s+1));break}}else i.push(l)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function c0(n,e,t,r){e.type===Vi.MERGE&&null!==e.source.queryId&&((0,k.hu)(Ad(n.viewCache_),"We should always have a full cache before handling merges"),(0,k.hu)(o_(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,s=function pS(n,e,t,r,i){const s=new hS;let l,h;if(t.type===Vi.OVERWRITE){const y=t;y.source.fromUser?l=p_(n,e,y.path,y.snap,r,i,s):((0,k.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered()&&!qt(y.path),l=f_(n,e,y.path,y.snap,r,i,h,s))}else if(t.type===Vi.MERGE){const y=t;y.source.fromUser?l=function mS(n,e,t,r,i,s,l){let h=e;return r.foreach((m,y)=>{const D=er(t,m);nE(e,Wt(D))&&(h=p_(n,h,D,y,i,s,l))}),r.foreach((m,y)=>{const D=er(t,m);nE(e,Wt(D))||(h=p_(n,h,D,y,i,s,l))}),h}(n,e,y.path,y.children,r,i,s):((0,k.hu)(y.source.fromServer,"Unknown source."),h=y.source.tagged||e.serverCache.isFiltered(),l=g_(n,e,y.path,y.children,r,i,h,s))}else if(t.type===Vi.ACK_USER_WRITE){const y=t;l=y.revert?function yS(n,e,t,r,i,s){let l;if(null!=d_(r,t))return e;{const h=new h_(r,e,i),m=e.eventCache.getNode();let y;if(qt(t)||".priority"===Wt(t)){let D;if(e.serverCache.isFullyInitialized())D=u_(r,Ad(e));else{const S=e.serverCache.getNode();(0,k.hu)(S instanceof Kt,"serverChildren would be complete if leaf node"),D=c_(r,S)}y=n.filter.updateFullNode(m,D,s)}else{const D=Wt(t);let S=s0(r,D,e.serverCache);null==S&&e.serverCache.isCompleteForChild(D)&&(S=m.getImmediateChild(D)),y=null!=S?n.filter.updateChild(m,D,S,Gn(t),h,s):e.eventCache.getNode().hasChild(D)?n.filter.updateChild(m,D,Kt.EMPTY_NODE,Gn(t),h,s):m,y.isEmpty()&&e.serverCache.isFullyInitialized()&&(l=u_(r,Ad(e)),l.isLeafNode()&&(y=n.filter.updateFullNode(y,l,s)))}return l=e.serverCache.isFullyInitialized()||null!=d_(r,En()),rg(e,y,l,n.filter.filtersNodes())}}(n,e,y.path,r,i,s):function rE(n,e,t,r,i,s,l){if(null!=d_(i,t))return e;const h=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(qt(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return f_(n,e,t,m.getNode().getChild(t),i,s,h,l);if(qt(t)){let y=new nr(null);return m.getNode().forEachChild(fo,(D,S)=>{y=y.set(new Dn(D),S)}),g_(n,e,t,y,i,s,h,l)}return e}{let y=new nr(null);return r.foreach((D,S)=>{const R=er(t,D);m.isCompleteForPath(R)&&(y=y.set(D,m.getNode().getChild(R)))}),g_(n,e,t,y,i,s,h,l)}}(n,e,y.path,y.affectedTree,r,i,s)}else{if(t.type!==Vi.LISTEN_COMPLETE)throw(0,k.g5)("Unknown operation type: "+t.type);l=function Od(n,e,t,r,i){const s=e.serverCache;return a0(n,Xv(e,s.getNode(),s.isFullyInitialized()||qt(t),s.isFiltered()),t,r,Qt,i)}(n,e,t.path,r,s)}const m=s.getChanges();return function gS(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=o_(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&t.push($v(o_(e)))}}(e,l,m),{viewCache:l,changes:m}}(n.processor_,i,e,t,r);return function tE(n,e){(0,k.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,k.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,s.viewCache),(0,k.hu)(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=s.viewCache,sE(n,s.changes,s.viewCache.eventCache.getNode(),null)}function sE(n,e,t,r){return function rS(n,e,t,r){const i=[],s=[];return e.forEach(l=>{"child_changed"===l.type&&n.index_.indexedValueChanged(l.oldSnap,l.snapshotNode)&&s.push(function UD(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(l.childName,l.snapshotNode))}),tu(n,i,"child_removed",e,r,t),tu(n,i,"child_added",e,r,t),tu(n,i,"child_moved",s,r,t),tu(n,i,"child_changed",e,r,t),tu(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let ru,uf;class oE{constructor(){this.views=new Map}}function __(n,e,t,r){const i=e.source.queryId;if(null!==i){const s=n.views.get(i);return(0,k.hu)(null!=s,"SyncTree gave us an op for an invalid query."),c0(s,e,t,r)}{let s=[];for(const l of n.views.values())s=s.concat(c0(l,e,t,r));return s}}function lE(n,e,t,r,i){const l=n.views.get(e._queryIdentifier);if(!l){let h=u_(t,i?r:null),m=!1;h?m=!0:r instanceof Kt?(h=c_(t,r),m=!1):(h=Kt.EMPTY_NODE,m=!1);const y=yc(new eu(h,m,!1),new eu(r,i,!1));return new l0(e,y)}return l}function uE(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function bc(n,e){let t=null;for(const r of n.views.values())t=t||rP(r,e);return t}function d0(n,e){return e._queryParams.loadsAllData()?ig(n):n.views.get(e._queryIdentifier)}function cE(n,e){return null!=d0(n,e)}function iu(n){return null!=ig(n)}function ig(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let CS=1;class TS{constructor(e){this.listenProvider_=e,this.syncPointTree_=new nr(null),this.pendingWriteTree_=function wa(){return{visibleWrites:po.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function wc(n,e,t,r,i){return function lf(n,e,t,r,i){(0,k.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=Nd(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Ec(n,new _c({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function Dc(n,e,t=!1){const r=function sS(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function oS(n,e){const t=n.allWrites.findIndex(h=>h.writeId===e);(0,k.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,s=!1,l=n.allWrites.length-1;for(;i&&l>=0;){const h=n.allWrites[l];h.visible&&(l>=t&&tP(h,r.path)?i=!1:ss(r.path,h.path)&&(s=!0)),l--}return!!i&&(s?(function nP(n){n.visibleWrites=aS(n.allWrites,YD,En()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=a_(n.visibleWrites,r.path):qn(r.children,m=>{n.visibleWrites=a_(n.visibleWrites,er(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let s=new nr(null);return null!=r.snap?s=s.set(En(),!0):qn(r.children,l=>{s=s.set(new Dn(l),!0)}),Ec(n,new nf(r.path,s,t))}return[]}function cf(n,e,t){return Ec(n,new _c({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function su(n,e,t,r,i=!1){const s=e._path,l=n.syncPointTree_.get(s);let h=[];if(l&&("default"===e._queryIdentifier||cE(l,e))){const m=function ES(n,e,t,r){const i=e._queryIdentifier,s=[];let l=[];const h=iu(n);if("default"===i)for(const[m,y]of n.views.entries())l=l.concat(iE(y,t,r)),bS(y)&&(n.views.delete(m),y.query._queryParams.loadsAllData()||s.push(y.query));else{const m=n.views.get(i);m&&(l=l.concat(iE(m,t,r)),bS(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||s.push(m.query)))}return h&&!iu(n)&&s.push(new(function m_(){return(0,k.hu)(ru,"Reference.ts has not been loaded"),ru}())(e._repo,e._path)),{removed:s,events:l}}(l,e,t,r);(function wS(n){return 0===n.views.size})(l)&&(n.syncPointTree_=n.syncPointTree_.remove(s));const y=m.removed;if(h=m.events,!i){const D=-1!==y.findIndex(R=>R._queryParams.loadsAllData()),S=n.syncPointTree_.findOnPath(s,(R,P)=>iu(P));if(D&&!S){const R=n.syncPointTree_.subtree(s);if(!R.isEmpty()){const P=function fE(n){return n.fold((e,t,r)=>{if(t&&iu(t))return[ig(t)];{let i=[];return t&&(i=uE(t)),qn(r,(s,l)=>{i=i.concat(l)}),i}})}(R);for(let $=0;$<P.length;++$){const Z=P[$],oe=Z.query,Ue=f0(n,Z);n.listenProvider_.startListening(df(oe),Pd(n,oe),Ue.hashFn,Ue.onComplete)}}}!S&&y.length>0&&!r&&(D?n.listenProvider_.stopListening(df(e),null):y.forEach(R=>{const P=n.queryToTagMap.get(D_(R));n.listenProvider_.stopListening(df(R),P)}))}!function AS(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=D_(r),s=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(s)}}}(n,y)}return h}function v_(n,e,t,r){const i=p0(n,r);if(null!=i){const s=E_(i),l=s.path,h=s.queryId,m=hi(l,e);return g0(n,l,new _c(Jv(h),m,t))}return[]}function og(n,e,t,r=!1){const i=e._path;let s=null,l=!1;n.syncPointTree_.foreachOnPath(i,(R,P)=>{const $=hi(R,i);s=s||bc(P,$),l=l||iu(P)});let m,h=n.syncPointTree_.get(i);h?(l=l||iu(h),s=s||bc(h,En())):(h=new oE,n.syncPointTree_=n.syncPointTree_.set(i,h)),null!=s?m=!0:(m=!1,s=Kt.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((P,$)=>{const Z=bc($,En());Z&&(s=s.updateImmediateChild(P,Z))}));const y=cE(h,e);if(!y&&!e._queryParams.loadsAllData()){const R=D_(e);(0,k.hu)(!n.queryToTagMap.has(R),"View does not exist, but we have a tag");const P=function NS(){return CS++}();n.queryToTagMap.set(R,P),n.tagToQueryMap.set(P,R)}let S=function DS(n,e,t,r,i,s){const l=lE(n,e,r,i,s);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,l),function iP(n,e){n.eventRegistrations_.push(e)}(l,t),function sP(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ze,(s,l)=>{r.push(Xp(s,l))}),t.isFullyInitialized()&&r.push($v(t.getNode())),sE(n,r,t.getNode(),e)}(l,t)}(h,e,t,l_(n.pendingWriteTree_,i),s,m);if(!y&&!l&&!r){const R=d0(h,e);S=S.concat(function go(n,e,t){const r=e._path,i=Pd(n,e),s=f0(n,t),l=n.listenProvider_.startListening(df(e),i,s.hashFn,s.onComplete),h=n.syncPointTree_.subtree(r);if(i)(0,k.hu)(!iu(h.value),"If we're adding a query, it shouldn't be shadowed");else{const m=h.fold((y,D,S)=>{if(!qt(y)&&D&&iu(D))return[ig(D).query];{let R=[];return D&&(R=R.concat(uE(D).map(P=>P.query))),qn(S,(P,$)=>{R=R.concat($)}),R}});for(let y=0;y<m.length;++y){const D=m[y];n.listenProvider_.stopListening(df(D),Pd(n,D))}}return l}(n,e,R))}return S}function xd(n,e,t){const i=n.pendingWriteTree_,s=n.syncPointTree_.findOnPath(e,(l,h)=>{const y=bc(h,hi(l,e));if(y)return y});return r0(i,e,s,t,!0)}function Ec(n,e){return b_(e,n.syncPointTree_,null,l_(n.pendingWriteTree_,En()))}function b_(n,e,t,r){if(qt(n.path))return w_(n,e,t,r);{const i=e.get(En());null==t&&null!=i&&(t=bc(i,En()));let s=[];const l=Wt(n.path),h=n.operationForChild(l),m=e.children.get(l);if(m&&h){const y=t?t.getImmediateChild(l):null,D=o0(r,l);s=s.concat(b_(h,m,y,D))}return i&&(s=s.concat(__(i,n,r,t))),s}}function w_(n,e,t,r){const i=e.get(En());null==t&&null!=i&&(t=bc(i,En()));let s=[];return e.children.inorderTraversal((l,h)=>{const m=t?t.getImmediateChild(l):null,y=o0(r,l),D=n.operationForChild(l);D&&(s=s.concat(w_(D,h,m,y)))}),i&&(s=s.concat(__(i,n,r,t))),s}function f0(n,e){const t=e.query,r=Pd(n,t);return{hashFn:()=>(function u0(n){return n.viewCache_.serverCache.getNode()}(e)||Kt.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function y_(n,e,t){const r=p0(n,t);if(r){const i=E_(r),s=i.path,l=i.queryId,h=hi(s,e);return g0(n,s,new ng(Jv(l),h))}return[]}(n,t._path,r):function SS(n,e){return Ec(n,new ng({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const s=function Fp(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return su(n,t,null,s)}}}}function Pd(n,e){const t=D_(e);return n.queryToTagMap.get(t)}function D_(n){return n._path.toString()+"$"+n._queryIdentifier}function p0(n,e){return n.tagToQueryMap.get(e)}function E_(n){const e=n.indexOf("$");return(0,k.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Dn(n.substr(0,e))}}function g0(n,e,t){const r=n.syncPointTree_.get(e);return(0,k.hu)(r,"Missing sync point for query tag that we're tracking"),__(r,t,l_(n.pendingWriteTree_,e),null)}function df(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function h0(){return(0,k.hu)(uf,"Reference.ts has not been loaded"),uf}())(n._repo,n._path):n}class m0{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new m0(t)}node(){return this.node_}}class _0{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=er(this.path_,e);return new _0(this.syncTree_,t)}node(){return xd(this.syncTree_,this.path_)}}const aP=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},C_=function(n,e,t){return n&&"object"==typeof n?((0,k.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?pE(n[".sv"],e,t):"object"==typeof n[".sv"]?MS(n[".sv"],e):void(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},pE=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,k.hu)(!1,"Unexpected server value: "+n)},MS=function(n,e,t){n.hasOwnProperty("increment")||(0,k.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,k.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,k.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const l=i.getValue();return"number"!=typeof l?r:l+r},gE=function(n,e,t,r){return T_(e,new _0(t,n),r)},y0=function(n,e,t){return T_(n,new m0(e),t)};function T_(n,e,t){const r=n.getPriority().val(),i=C_(r,e.getImmediateChild(".priority"),t);let s;if(n.isLeafNode()){const l=n,h=C_(l.getValue(),e,t);return h!==l.getValue()||i!==l.getPriority().val()?new A(h,tr(i)):n}{const l=n;return s=l,i!==l.getPriority().val()&&(s=s.updatePriority(new A(i))),l.forEachChild(ze,(h,m)=>{const y=T_(m,e.getImmediateChild(h),t);y!==m&&(s=s.updateImmediateChild(h,y))}),s}}class v0{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function I_(n,e){let t=e instanceof Dn?e:new Dn(e),r=n,i=Wt(t);for(;null!==i;){const s=(0,k.DV)(r.node.children,i)||{children:{},childCount:0};r=new v0(i,r,s),t=Gn(t),i=Wt(t)}return r}function ou(n){return n.node.value}function b0(n,e){n.node.value=e,w0(n)}function mE(n){return n.node.childCount>0}function S_(n,e){qn(n.node.children,(t,r)=>{e(new v0(t,n,r))})}function _E(n,e,t,r){t&&!r&&e(n),S_(n,i=>{_E(i,e,!0,r)}),t&&r&&e(n)}function kd(n){return new Dn(null===n.parent?n.name:kd(n.parent)+"/"+n.name)}function w0(n){null!==n.parent&&function OS(n,e,t){const r=function RS(n){return void 0===ou(n)&&!mE(n)}(t),i=(0,k.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,w0(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,w0(n))}(n.parent,n.name,n)}const yE=/[\[\].#$\/\u0000-\u001F\u007F]/,xS=/[\[\].#$\u0000-\u001F\u007F]/,D0=10485760,A_=function(n){return"string"==typeof n&&0!==n.length&&!yE.test(n)},N_=function(n){return"string"==typeof n&&0!==n.length&&!xS.test(n)},ag=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!_d(n)||n&&"object"==typeof n&&(0,k.r3)(n,".sv")},mo=function(n,e,t,r){r&&void 0===e||Cc((0,k.gK)(n,"value"),e,t)},Cc=function(n,e,t){const r=t instanceof Dn?new Zm(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Ja(r));if("function"==typeof e)throw new Error(n+"contains a function "+Ja(r)+" with contents = "+e.toString());if(_d(e))throw new Error(n+"contains "+e.toString()+" "+Ja(r));if("string"==typeof e&&e.length>D0/3&&(0,k.ug)(e)>D0)throw new Error(n+"contains a string greater than "+D0+" utf8 bytes "+Ja(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,s=!1;if(qn(e,(l,h)=>{if(".value"===l)i=!0;else if(".priority"!==l&&".sv"!==l&&(s=!0,!A_(l)))throw new Error(n+" contains an invalid key ("+l+") "+Ja(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function Zp(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,k.ug)(e),Qm(n)})(r,l),Cc(n,h,r),function Qp(n){const e=n.parts_.pop();n.byteLength_-=(0,k.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&s)throw new Error(n+' contains ".value" child '+Ja(r)+" in addition to actual children.")}},kS=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,k.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];qn(e,(l,h)=>{const m=new Dn(l);if(Cc(i,h,er(t,m)),".priority"===qp(m)&&!ag(h))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const s=ba(r);for(let l=0;l<s.length;l++)if((".priority"!==s[l]||l!==s.length-1)&&!A_(s[l]))throw new Error(n+"contains an invalid key ("+s[l]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(is);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&ss(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,s)},lg=function(n,e,t){if(!t||void 0!==e){if(_d(e))throw new Error((0,k.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!ag(e))throw new Error((0,k.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},R_=function(n,e,t,r){if(!(r&&void 0===t||A_(t)))throw new Error((0,k.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},hf=function(n,e,t,r){if(!(r&&void 0===t||N_(t)))throw new Error((0,k.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},vE=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),hf(n,e,t,r)},_o=function(n,e){if(".info"===Wt(e))throw new Error(n+" failed = Can't modify data under /.info/")},E0=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!A_(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),N_(n)}(t))throw new Error((0,k.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class C0{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function Bo(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();null!==t&&!Qa(s,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:s}),t.events.push(i)}t&&n.eventLists_.push(t)}function ug(n,e,t){Bo(n,t),ff(n,r=>Qa(r,e))}function ls(n,e,t){Bo(n,t),ff(n,r=>ss(r,e)||ss(e,r))}function ff(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(FS(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function FS(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();ts&&Xn("event: "+t.toString()),N(r)}}}const T0="repo_interrupt",bE=25;class LS{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new C0,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Id(),this.transactionQueueTree_=new v0,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function pf(n){const t=n.infoData_.getNode(new Dn(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function cg(n){return aP({timestamp:pf(n)})}function VS(n,e,t,r,i){n.dataUpdateCount++;const s=new Dn(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let l=[];if(i)if(r){const m=(0,k.UI)(t,y=>tr(y));l=function sg(n,e,t,r){const i=p0(n,r);if(i){const s=E_(i),l=s.path,h=s.queryId,m=hi(l,e),y=nr.fromObject(t);return g0(n,l,new rf(Jv(h),m,y))}return[]}(n.serverSyncTree_,s,m,i)}else{const m=tr(t);l=v_(n.serverSyncTree_,s,m,i)}else if(r){const m=(0,k.UI)(t,y=>tr(y));l=function IS(n,e,t){const r=nr.fromObject(t);return Ec(n,new rf({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,s,m)}else{const m=tr(t);l=cf(n.serverSyncTree_,s,m)}let h=s;l.length>0&&(h=Fd(n,s)),ls(n.eventQueue_,h,l)}function wE(n,e){I0(n,"connected",e),!1===e&&function DE(n){gf(n,"onDisconnectEvents");const e=cg(n),t=Id();tf(n.onDisconnect_,En(),(i,s)=>{const l=gE(i,s,n.serverSyncTree_,e);ef(t,i,l)});let r=[];tf(t,En(),(i,s)=>{r=r.concat(cf(n.serverSyncTree_,i,s));const l=R0(n,i);Fd(n,l)}),n.onDisconnect_=Id(),ls(n.eventQueue_,En(),r)}(n)}function I0(n,e,t){const r=new Dn("/.info/"+e),i=tr(t);n.infoData_.updateSnapshot(r,i);const s=cf(n.infoSyncTree_,r,i);ls(n.eventQueue_,r,s)}function O_(n){return n.nextWriteId_++}function S0(n,e,t,r,i){gf(n,"set",{path:e.toString(),value:t,priority:r});const s=cg(n),l=tr(t,r),h=xd(n.serverSyncTree_,e),m=y0(l,h,s),y=O_(n),D=wc(n.serverSyncTree_,e,m,y,!0);Bo(n.eventQueue_,D),n.server_.put(e.toString(),l.val(!0),(R,P)=>{const $="ok"===R;$||ci("set at "+e+" failed: "+R);const Z=Dc(n.serverSyncTree_,y,!$);ls(n.eventQueue_,e,Z),au(0,i,R,P)});const S=R0(n,e);Fd(n,S),ls(n.eventQueue_,S,[])}function A0(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&tg(n.onDisconnect_,e),au(0,t,r,i)})}function EE(n,e,t,r){const i=tr(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(s,l)=>{"ok"===s&&ef(n.onDisconnect_,e,i),au(0,r,s,l)})}function M0(n,e,t){let r;r=".info"===Wt(e._path)?su(n.infoSyncTree_,e,t):su(n.serverSyncTree_,e,t),ug(n.eventQueue_,e._path,r)}function CE(n){n.persistentConnection_&&n.persistentConnection_.interrupt(T0)}function gf(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),Xn(t,...e)}function au(n,e,t,r){e&&N(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let s=i;r&&(s+=": "+r);const l=new Error(s);l.code=i,e(l)}})}function x_(n,e,t){return xd(n.serverSyncTree_,e,t)||Kt.EMPTY_NODE}function P_(n,e=n.transactionQueueTree_){if(e||mf(n,e),ou(e)){const t=IE(n,e);(0,k.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function lP(n,e,t){const r=t.map(y=>y.currentWriteId),i=x_(n,e,r);let s=i;const l=i.hash();for(let y=0;y<t.length;y++){const D=t[y];(0,k.hu)(0===D.status,"tryToSendTransactionQueue_: items in queue should all be run."),D.status=1,D.retryCount++;const S=hi(e,D.path);s=s.updateChild(S,D.currentOutputSnapshotRaw)}const h=s.val(!0),m=e;n.server_.put(m.toString(),h,y=>{gf(n,"transaction put response",{path:m.toString(),status:y});let D=[];if("ok"===y){const S=[];for(let R=0;R<t.length;R++)t[R].status=2,D=D.concat(Dc(n.serverSyncTree_,t[R].currentWriteId)),t[R].onComplete&&S.push(()=>t[R].onComplete(null,!0,t[R].currentOutputSnapshotResolved)),t[R].unwatcher();mf(n,I_(n.transactionQueueTree_,e)),P_(n,n.transactionQueueTree_),ls(n.eventQueue_,e,D);for(let R=0;R<S.length;R++)N(S[R])}else{if("datastale"===y)for(let S=0;S<t.length;S++)t[S].status=3===t[S].status?4:0;else{ci("transaction at "+m.toString()+" failed: "+y);for(let S=0;S<t.length;S++)t[S].status=4,t[S].abortReason=y}Fd(n,e)}},l)}(n,kd(e),t)}else mE(e)&&S_(e,t=>{P_(n,t)})}function Fd(n,e){const t=dg(n,e),r=kd(t);return function uP(n,e,t){if(0===e.length)return;const r=[];let i=[];const l=e.filter(h=>0===h.status).map(h=>h.currentWriteId);for(let h=0;h<e.length;h++){const m=e[h],y=hi(t,m.path);let S,D=!1;if((0,k.hu)(null!==y,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)D=!0,S=m.abortReason,i=i.concat(Dc(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=bE)D=!0,S="maxretry",i=i.concat(Dc(n.serverSyncTree_,m.currentWriteId,!0));else{const R=x_(n,m.path,l);m.currentInputSnapshot=R;const P=e[h].update(R.val());if(void 0!==P){Cc("transaction failed: Data returned ",P,m.path);let $=tr(P);"object"==typeof P&&null!=P&&(0,k.r3)(P,".priority")||($=$.updatePriority(R.getPriority()));const oe=m.currentWriteId,Ue=cg(n),Ge=y0($,R,Ue);m.currentOutputSnapshotRaw=$,m.currentOutputSnapshotResolved=Ge,m.currentWriteId=O_(n),l.splice(l.indexOf(oe),1),i=i.concat(wc(n.serverSyncTree_,m.path,Ge,m.currentWriteId,m.applyLocally)),i=i.concat(Dc(n.serverSyncTree_,oe,!0))}else D=!0,S="nodata",i=i.concat(Dc(n.serverSyncTree_,m.currentWriteId,!0))}ls(n.eventQueue_,t,i),i=[],D&&(e[h].status=2,setTimeout(e[h].unwatcher,Math.floor(0)),e[h].onComplete&&r.push("nodata"===S?()=>e[h].onComplete(null,!1,e[h].currentInputSnapshot):()=>e[h].onComplete(new Error(S),!1,null)))}mf(n,n.transactionQueueTree_);for(let h=0;h<r.length;h++)N(r[h]);P_(n,n.transactionQueueTree_)}(n,IE(n,t),r),r}function dg(n,e){let t,r=n.transactionQueueTree_;for(t=Wt(e);null!==t&&void 0===ou(r);)r=I_(r,t),t=Wt(e=Gn(e));return r}function IE(n,e){const t=[];return SE(n,e,t),t.sort((r,i)=>r.order-i.order),t}function SE(n,e,t){const r=ou(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);S_(e,i=>{SE(n,i,t)})}function mf(n,e){const t=ou(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,b0(e,t.length>0?t:void 0)}S_(e,r=>{mf(n,r)})}function R0(n,e){const t=kd(dg(n,e)),r=I_(n.transactionQueueTree_,e);return function tl(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{Vo(n,i)}),Vo(n,r),_E(r,i=>{Vo(n,i)}),t}function Vo(n,e){const t=ou(e);if(t){const r=[];let i=[],s=-1;for(let l=0;l<t.length;l++)3===t[l].status||(1===t[l].status?((0,k.hu)(s===l-1,"All SENT items should be at beginning of queue."),s=l,t[l].status=3,t[l].abortReason="set"):((0,k.hu)(0===t[l].status,"Unexpected transaction status in abort"),t[l].unwatcher(),i=i.concat(Dc(n.serverSyncTree_,t[l].currentWriteId,!0)),t[l].onComplete&&r.push(t[l].onComplete.bind(null,new Error("set"),!1,null))));-1===s?b0(e,void 0):t.length=s+1,ls(n.eventQueue_,kd(e),i);for(let l=0;l<r.length;l++)N(r[l])}}const lu=function(n,e){const t=k_(n),r=t.namespace;return"firebase.com"===t.domain&&Cs(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&Cs("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&ci("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ka(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Dn(t.pathString)}},k_=function(n){let e="",t="",r="",i="",s="",l=!0,h="https",m=443;if("string"==typeof n){let y=n.indexOf("//");y>=0&&(h=n.substring(0,y-1),n=n.substring(y+2));let D=n.indexOf("/");-1===D&&(D=n.length);let S=n.indexOf("?");-1===S&&(S=n.length),e=n.substring(0,Math.min(D,S)),D<S&&(i=function hg(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(D,S)));const R=function us(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):ci(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,S)));y=e.indexOf(":"),y>=0?(l="https"===h||"wss"===h,m=parseInt(e.substring(y+1),10)):y=e.length;const P=e.slice(0,y);if("localhost"===P.toLowerCase())t="localhost";else if(P.split(".").length<=2)t=P;else{const $=e.indexOf(".");r=e.substring(0,$).toLowerCase(),t=e.substring($+1),s=r}"ns"in R&&(s=R.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:l,scheme:h,pathString:i,namespace:s}},yo="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",O0=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const s=new Array(8);for(i=7;i>=0;i--)s[i]=yo.charAt(t%64),t=Math.floor(t/64);(0,k.hu)(0===t,"Cannot push at time == 0");let l=s.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)l+=yo.charAt(e[i]);return(0,k.hu)(20===l.length,"nextPushId: Length should be 20."),l}}();class Ld{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,k.Wl)(this.snapshot.exportVal())}}class Bd{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Tc{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,k.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class Vd{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new k.BH;return A0(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){_o("OnDisconnect.remove",this._path);const e=new k.BH;return EE(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){_o("OnDisconnect.set",this._path),mo("OnDisconnect.set",e,this._path,!1);const t=new k.BH;return EE(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){_o("OnDisconnect.setWithPriority",this._path),mo("OnDisconnect.setWithPriority",e,this._path,!1),lg("OnDisconnect.setWithPriority",t,!1);const r=new k.BH;return function N0(n,e,t,r,i){const s=tr(t,r);n.server_.onDisconnectPut(e.toString(),s.val(!0),(l,h)=>{"ok"===l&&ef(n.onDisconnect_,e,s),au(0,i,l,h)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){_o("OnDisconnect.update",this._path),kS("OnDisconnect.update",e,this._path,!1);const t=new k.BH;return function $S(n,e,t,r){if((0,k.xb)(t))return Xn("onDisconnect().update() called with empty data.  Don't do anything."),void au(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,s)=>{"ok"===i&&qn(t,(l,h)=>{const m=tr(h);ef(n.onDisconnect_,er(e,l),m)}),au(0,r,i,s)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class fi{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return qt(this._path)?null:qp(this._path)}get ref(){return new Ui(this._repo,this._path)}get _queryIdentifier(){const e=mc(this._queryParams),t=co(e);return"{}"===t?"default":t}get _queryObject(){return mc(this._queryParams)}isEqual(e){if(!((e=(0,k.m9)(e))instanceof fi))return!1;const t=this._repo===e._repo,r=Qa(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function Kp(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function uu(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function vo(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===fo){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Us)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==qr)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===ze){if(null!=e&&!ag(e)||null!=t&&!ag(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,k.hu)(n.getIndex()instanceof Jh||n.getIndex()===gc,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function cu(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Ui extends fi{constructor(e,t){super(e,t,new r_,!1)}get parent(){const e=Yp(this._path);return null===e?null:new Ui(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Ic{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Dn(e),r=Sc(this.ref,e);return new Ic(this._node.getChild(t),r,ze)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Ic(i,Sc(this.ref,r),ze)))}hasChild(e){const t=new Dn(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function x0(n,e){return(n=(0,k.m9)(n))._checkNotDeleted("ref"),void 0!==e?Sc(n._root,e):n._root}function P0(n,e){(n=(0,k.m9)(n))._checkNotDeleted("refFromURL");const t=lu(e,n._repo.repoInfo_.nodeAdmin);E0("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&Cs("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),x0(n,t.path.toString())}function Sc(n,e){return null===Wt((n=(0,k.m9)(n))._path)?vE("child","path",e,!1):hf("child","path",e,!1),new Ui(n._repo,er(n._path,e))}function F_(n,e){n=(0,k.m9)(n),_o("set",n._path),mo("set",e,n._path,!1);const t=new k.BH;return S0(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function KS(n,e){kS("update",e,n._path,!1);const t=new k.BH;return function GS(n,e,t,r){gf(n,"update",{path:e.toString(),value:t});let i=!0;const s=cg(n),l={};if(qn(t,(h,m)=>{i=!1,l[h]=gE(er(e,h),tr(m),n.serverSyncTree_,s)}),i)Xn("update() called with empty data.  Don't do anything."),au(0,r,"ok",void 0);else{const h=O_(n),m=function dE(n,e,t,r){!function nu(n,e,t,r){(0,k.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=t0(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=nr.fromObject(t);return Ec(n,new rf({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,l,h);Bo(n.eventQueue_,m),n.server_.merge(e.toString(),t,(y,D)=>{const S="ok"===y;S||ci("update at "+e+" failed: "+y);const R=Dc(n.serverSyncTree_,h,!S),P=R.length>0?Fd(n,e):e;ls(n.eventQueue_,P,R),au(0,r,y,D)}),qn(t,y=>{const D=R0(n,er(e,y));Fd(n,D)}),ls(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function RE(n){n=(0,k.m9)(n);const e=new Tc(()=>{}),t=new fg(e);return function jS(n,e,t){const r=function hE(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(y,D)=>{const S=hi(y,t);r=r||bc(D,S)});let i=n.syncPointTree_.get(t);i?r=r||bc(i,En()):(i=new oE,n.syncPointTree_=n.syncPointTree_.set(t,i));const s=null!=r,l=s?new eu(r,!0,!1):null;return function vS(n){return o_(n.viewCache_)}(lE(i,e,l_(n.pendingWriteTree_,e._path),s?l.getNode():Kt.EMPTY_NODE,s))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const s=tr(i).withIndex(e._queryParams.getIndex());let l;if(og(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())l=cf(n.serverSyncTree_,e._path,s);else{const h=Pd(n.serverSyncTree_,e);l=v_(n.serverSyncTree_,e._path,s,h)}return ls(n.eventQueue_,e._path,l),su(n.serverSyncTree_,e,t,null,!0),s},i=>(gf(n,"get for query "+(0,k.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Ic(r,new Ui(n._repo,n._path),n._queryParams.getIndex()))}class fg{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new Ld("value",this,new Ic(e.snapshotNode,new Ui(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Bd(this,e,t):null}matches(e){return e instanceof fg&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class pg{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new Bd(this,e,t):null}createEvent(e,t){(0,k.hu)(null!=e.childName,"Child events should have a childName.");const r=Sc(new Ui(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new Ld(e.type,this,new Ic(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof pg&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function Ud(n,e,t,r,i){let s;if("object"==typeof r&&(s=void 0,i=r),"function"==typeof r&&(s=r),i&&i.onlyOnce){const m=t,y=(D,S)=>{M0(n._repo,n,h),m(D,S)};y.userCallback=t.userCallback,y.context=t.context,t=y}const l=new Tc(t,s||void 0),h="value"===e?new fg(l):new pg(e,l);return function HS(n,e,t){let r;r=".info"===Wt(e._path)?og(n.infoSyncTree_,e,t):og(n.serverSyncTree_,e,t),ug(n.eventQueue_,e._path,r)}(n._repo,n,h),()=>M0(n._repo,n,h)}function gg(n,e,t,r){return Ud(n,"value",e,t,r)}function OE(n,e,t,r){return Ud(n,"child_added",e,t,r)}function mg(n,e,t,r){return Ud(n,"child_changed",e,t,r)}function _g(n,e,t,r){return Ud(n,"child_moved",e,t,r)}function L_(n,e,t,r){return Ud(n,"child_removed",e,t,r)}function xE(n,e,t){let r=null;const i=t?new Tc(t):null;"value"===e?r=new fg(i):e&&(r=new pg(e,i)),M0(n._repo,n,r)}class Gs{}class yg extends Gs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){mo("endAt",this._value,e._path,!0);const t=Wv(e._queryParams,this._value,this._key);if(cu(t),vo(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fi(e._repo,e._path,t,e._orderByCalled)}}class kE extends Gs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){mo("endBefore",this._value,e._path,!1);const t=function qv(n,e,t){let r;return r=Wv(n,e,n.index_===fo||t?t:Us),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(cu(t),vo(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new fi(e._repo,e._path,t,e._orderByCalled)}}class F0 extends Gs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){mo("startAt",this._value,e._path,!0);const t=$D(e._queryParams,this._value,this._key);if(cu(t),vo(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new fi(e._repo,e._path,t,e._orderByCalled)}}class L0 extends Gs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){mo("startAfter",this._value,e._path,!1);const t=function zv(n,e,t){let r;return r=$D(n,e,n.index_===fo||t?t:qr),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(cu(t),vo(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new fi(e._repo,e._path,t,e._orderByCalled)}}class YS extends Gs{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new fi(e._repo,e._path,function GD(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class VE extends Gs{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new fi(e._repo,e._path,function Hv(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class jE extends Gs{constructor(e){super(),this._path=e}_apply(e){uu(e,"orderByChild");const t=new Dn(this._path);if(qt(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Jh(t),i=eg(e._queryParams,r);return vo(i),new fi(e._repo,e._path,i,!0)}}class GE extends Gs{_apply(e){uu(e,"orderByKey");const t=eg(e._queryParams,fo);return vo(t),new fi(e._repo,e._path,t,!0)}}class B0 extends Gs{_apply(e){uu(e,"orderByPriority");const t=eg(e._queryParams,ze);return vo(t),new fi(e._repo,e._path,t,!0)}}class HE extends Gs{_apply(e){uu(e,"orderByValue");const t=eg(e._queryParams,gc);return vo(t),new fi(e._repo,e._path,t,!0)}}class WE extends Gs{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(mo("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new yg(this._value,this._key)._apply(new F0(this._value,this._key)._apply(e))}}function Uo(n,...e){let t=(0,k.m9)(n);for(const r of e)t=r._apply(t);return t}(function aE(n){(0,k.hu)(!ru,"__referenceConstructor has already been defined"),ru=n})(Ui),function oP(n){(0,k.hu)(!uf,"__referenceConstructor has already been defined"),uf=n}(Ui);const KE="FIREBASE_DATABASE_EMULATOR_HOST",V_={};let V0=!1;function du(n,e,t,r,i){let s=r||n.options.databaseURL;void 0===s&&(n.options.projectId||Cs("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),Xn("Using default host for project ",n.options.projectId),s=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,y,l=lu(s,i),h=l.repoInfo;typeof process<"u"&&process.env&&(y=process.env[KE]),y?(m=!0,s=`http://${y}?ns=${h.namespace}`,l=lu(s,i),h=l.repoInfo):m=!l.repoInfo.secure;const D=i&&m?new Ye(Ye.OWNER):new de(n.name,n.options,e);E0("Invalid Firebase Database URL",l),qt(l.path)||Cs("Database URL must point to the root of a Firebase Database (not including a child path).");const S=function JS(n,e,t,r){let i=V_[e.name];i||(i={},V_[e.name]=i);let s=i[n.toURLString()];return s&&Cs("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new LS(n,V0,t,r),i[n.toURLString()]=s,s}(h,n,D,new Q(n.name,t));return new jd(S,n)}class jd{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function BS(n,e,t){if(n.stats_=Ya(n.repoInfo_),n.forceRestClient_||B())n.server_=new i_(n.repoInfo_,(r,i,s,l)=>{VS(n,r,i,s,l)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>wE(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,k.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new Xa(n.repoInfo_,e,(r,i,s,l)=>{VS(n,r,i,s,l)},r=>{wE(n,r)},r=>{!function US(n,e){qn(e,(t,r)=>{I0(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function Up(n,e){const t=n.toString();return lc[t]||(lc[t]=e()),lc[t]}(n.repoInfo_,()=>new zD(n.stats_,n.server_)),n.infoData_=new Yv,n.infoSyncTree_=new TS({startListening:(r,i,s,l)=>{let h=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(h=cf(n.infoSyncTree_,r._path,m),setTimeout(()=>{l("ok")},0)),h},stopListening:()=>{}}),I0(n,"connected",!1),n.serverSyncTree_=new TS({startListening:(r,i,s,l)=>(n.server_.listen(r,s,i,(h,m)=>{const y=l(h,m);ls(n.eventQueue_,r._path,y)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ui(this._repo,En())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function QS(n,e){const t=V_[e];(!t||t[n.key]!==n)&&Cs(`Database ${e}(${n.repoInfo_}) has already been deleted.`),CE(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&Cs("Cannot call "+e+" on a deleted database.")}}function j_(){wd.IS_TRANSPORT_INITIALIZED&&ci("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function XS(){j_(),ya.forceDisallow()}function j0(){j_(),bd.forceDisallow(),ya.forceAllow()}function YE(n,e){md(n,e)}const pi={".sv":"timestamp"};class sA{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}Xa.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},Xa.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function rA(n){Ph(es.SDK_VERSION),(0,es._registerComponent)(new Ai.wA("database",(e,{instanceIdentifier:t})=>du(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,es.registerVersion)(Oh,"0.14.4",n),(0,es.registerVersion)(Oh,"0.14.4","esm2017")}();const aA=new Fi.Yd("@firebase/database-compat"),XE=function(n){aA.warn("FIREBASE WARNING: "+n)};class tC{constructor(e){this._delegate=e}cancel(e){(0,k.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,k.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,k.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,k.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,k.Dv)("OnDisconnect.set",1,2,arguments.length),(0,k.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,k.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),s=>r(s)),i}update(e,t){if((0,k.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,XE("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,k.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class dP{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,k.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class nl{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,k.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,k.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,k.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,k.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,k.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),hf("DataSnapshot.child","path",e,!1),new nl(this._database,this._delegate.child(e))}hasChild(e){return(0,k.Dv)("DataSnapshot.hasChild",1,1,arguments.length),hf("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,k.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,k.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,k.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new nl(this._database,t)))}hasChildren(){return(0,k.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,k.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,k.Dv)("DataSnapshot.ref",0,0,arguments.length),new Or(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class gi{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var s;(0,k.Dv)("Query.on",2,4,arguments.length),(0,k.Wj)("Query.on","callback",t,!1);const l=gi.getCancelAndContextArgs_("Query.on",r,i),h=(y,D)=>{t.call(l.context,new nl(this.database,y),D)};h.userCallback=t,h.context=l.context;const m=null===(s=l.cancel)||void 0===s?void 0:s.bind(l.context);switch(e){case"value":return gg(this._delegate,h,m),t;case"child_added":return OE(this._delegate,h,m),t;case"child_removed":return L_(this._delegate,h,m),t;case"child_changed":return mg(this._delegate,h,m),t;case"child_moved":return _g(this._delegate,h,m),t;default:throw new Error((0,k.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,k.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,k.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,k.Wj)("Query.off","callback",t,!0),(0,k.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,xE(this._delegate,e,i)}else xE(this._delegate,e)}get(){return RE(this._delegate).then(e=>new nl(this.database,e))}once(e,t,r,i){(0,k.Dv)("Query.once",1,4,arguments.length),(0,k.Wj)("Query.once","callback",t,!0);const s=gi.getCancelAndContextArgs_("Query.once",r,i),l=new k.BH,h=(y,D)=>{const S=new nl(this.database,y);t&&t.call(s.context,S,D),l.resolve(S)};h.userCallback=t,h.context=s.context;const m=y=>{s.cancel&&s.cancel.call(s.context,y),l.reject(y)};switch(e){case"value":gg(this._delegate,h,m,{onlyOnce:!0});break;case"child_added":OE(this._delegate,h,m,{onlyOnce:!0});break;case"child_removed":L_(this._delegate,h,m,{onlyOnce:!0});break;case"child_changed":mg(this._delegate,h,m,{onlyOnce:!0});break;case"child_moved":_g(this._delegate,h,m,{onlyOnce:!0});break;default:throw new Error((0,k.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return l.promise}limitToFirst(e){return(0,k.Dv)("Query.limitToFirst",1,1,arguments.length),new gi(this.database,Uo(this._delegate,function BE(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new YS(n)}(e)))}limitToLast(e){return(0,k.Dv)("Query.limitToLast",1,1,arguments.length),new gi(this.database,Uo(this._delegate,function UE(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new VE(n)}(e)))}orderByChild(e){return(0,k.Dv)("Query.orderByChild",1,1,arguments.length),new gi(this.database,Uo(this._delegate,function ZS(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return hf("orderByChild","path",n,!1),new jE(n)}(e)))}orderByKey(){return(0,k.Dv)("Query.orderByKey",0,0,arguments.length),new gi(this.database,Uo(this._delegate,function $E(){return new GE}()))}orderByPriority(){return(0,k.Dv)("Query.orderByPriority",0,0,arguments.length),new gi(this.database,Uo(this._delegate,function B_(){return new B0}()))}orderByValue(){return(0,k.Dv)("Query.orderByValue",0,0,arguments.length),new gi(this.database,Uo(this._delegate,function zE(){return new HE}()))}startAt(e=null,t){return(0,k.Dv)("Query.startAt",0,2,arguments.length),new gi(this.database,Uo(this._delegate,function FE(n=null,e){return R_("startAt","key",e,!0),new F0(n,e)}(e,t)))}startAfter(e=null,t){return(0,k.Dv)("Query.startAfter",0,2,arguments.length),new gi(this.database,Uo(this._delegate,function LE(n,e){return R_("startAfter","key",e,!0),new L0(n,e)}(e,t)))}endAt(e=null,t){return(0,k.Dv)("Query.endAt",0,2,arguments.length),new gi(this.database,Uo(this._delegate,function PE(n,e){return R_("endAt","key",e,!0),new yg(n,e)}(e,t)))}endBefore(e=null,t){return(0,k.Dv)("Query.endBefore",0,2,arguments.length),new gi(this.database,Uo(this._delegate,function k0(n,e){return R_("endBefore","key",e,!0),new kE(n,e)}(e,t)))}equalTo(e,t){return(0,k.Dv)("Query.equalTo",1,2,arguments.length),new gi(this.database,Uo(this._delegate,function qE(n,e){return R_("equalTo","key",e,!0),new WE(n,e)}(e,t)))}toString(){return(0,k.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,k.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,k.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof gi))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,k.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,k.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,k.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Or(this.database,new Ui(this._delegate._repo,this._delegate._path))}}class Or extends gi{constructor(e,t){super(e,new fi(t._repo,t._path,new r_,!1)),this.database=e,this._delegate=t}getKey(){return(0,k.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,k.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Or(this.database,Sc(this._delegate,e))}getParent(){(0,k.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Or(this.database,e):null}getRoot(){return(0,k.Dv)("Reference.root",0,0,arguments.length),new Or(this.database,this._delegate.root)}set(e,t){(0,k.Dv)("Reference.set",1,2,arguments.length),(0,k.Wj)("Reference.set","onComplete",t,!0);const r=F_(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,k.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let s=0;s<e.length;++s)i[""+s]=e[s];e=i,XE("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}_o("Reference.update",this._delegate._path),(0,k.Wj)("Reference.update","onComplete",t,!0);const r=KS(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,k.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,k.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function qS(n,e,t){if(_o("setWithPriority",n._path),mo("setWithPriority",e,n._path,!1),lg("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new k.BH;return S0(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),s=>r(s)),i}remove(e){(0,k.Dv)("Reference.remove",0,1,arguments.length),(0,k.Wj)("Reference.remove","onComplete",e,!0);const t=function NE(n){return _o("remove",n._path),F_(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,k.Dv)("Reference.transaction",1,3,arguments.length),(0,k.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,k.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,k.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function QE(n,e,t){var r;if(n=(0,k.m9)(n),_o("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,s=new k.BH,h=gg(n,()=>{});return function TE(n,e,t,r,i,s){gf(n,"transaction on "+e);const l={path:e,update:t,onComplete:r,status:null,order:gd(),applyLocally:s,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},h=x_(n,e,void 0);l.currentInputSnapshot=h;const m=l.update(h.val());if(void 0===m)l.unwatcher(),l.currentOutputSnapshotRaw=null,l.currentOutputSnapshotResolved=null,l.onComplete&&l.onComplete(null,!1,l.currentInputSnapshot);else{Cc("transaction failed: Data returned ",m,l.path),l.status=0;const y=I_(n.transactionQueueTree_,e),D=ou(y)||[];let S;D.push(l),b0(y,D),"object"==typeof m&&null!==m&&(0,k.r3)(m,".priority")?(S=(0,k.DV)(m,".priority"),(0,k.hu)(ag(S),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):S=(xd(n.serverSyncTree_,e)||Kt.EMPTY_NODE).getPriority().val();const R=cg(n),P=tr(m,S),$=y0(P,h,R);l.currentOutputSnapshotRaw=P,l.currentOutputSnapshotResolved=$,l.currentWriteId=O_(n);const Z=wc(n.serverSyncTree_,e,$,l.currentWriteId,l.applyLocally);ls(n.eventQueue_,e,Z),P_(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,y,D)=>{let S=null;m?s.reject(m):(S=new Ic(D,new Ui(n._repo,n._path),ze),s.resolve(new sA(y,S)))},h,i),s.promise}(this._delegate,e,{applyLocally:r}).then(s=>new dP(s.committed,new nl(this.database,s.snapshot)));return t&&i.then(s=>t(null,s.committed,s.snapshot),s=>t(s,!1,null)),i}setPriority(e,t){(0,k.Dv)("Reference.setPriority",1,2,arguments.length),(0,k.Wj)("Reference.setPriority","onComplete",t,!0);const r=function ME(n,e){n=(0,k.m9)(n),_o("setPriority",n._path),lg("setPriority",e,!1);const t=new k.BH;return S0(n._repo,er(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,k.Dv)("Reference.push",0,2,arguments.length),(0,k.Wj)("Reference.push","onComplete",t,!0);const r=function AE(n,e){n=(0,k.m9)(n),_o("push",n._path),mo("push",e,n._path,!0);const t=pf(n._repo),r=O0(t),i=Sc(n,r),s=Sc(n,r);let l;return l=null!=e?F_(s,e).then(()=>s):Promise.resolve(s),i.then=l.then.bind(l),i.catch=l.then.bind(l,void 0),i}(this._delegate,e),i=r.then(l=>new Or(this.database,l));t&&i.then(()=>t(null),l=>t(l));const s=new Or(this.database,r);return s.then=i.then.bind(i),s.catch=i.catch.bind(i,void 0),s}onDisconnect(){return _o("Reference.onDisconnect",this._delegate._path),new tC(new Vd(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class vg{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:XS,forceLongPolling:j0}}useEmulator(e,t,r={}){!function eA(n,e,t,r={}){(n=(0,k.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&Cs("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&Cs('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Ye(Ye.OWNER);else if(r.mockUserToken){const l="string"==typeof r.mockUserToken?r.mockUserToken:(0,k.Sg)(r.mockUserToken,n.app.options.projectId);s=new Ye(l)}!function U_(n,e,t,r){n.repoInfo_=new Ka(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,s)}(this._delegate,e,t,r)}ref(e){if((0,k.Dv)("database.ref",0,1,arguments.length),e instanceof Or){const t=P0(this._delegate,e.toString());return new Or(this,t)}{const t=x0(this._delegate,e);return new Or(this,t)}}refFromURL(e){(0,k.Dv)("database.refFromURL",1,1,arguments.length);const r=P0(this._delegate,e);return new Or(this,r)}goOffline(){return(0,k.Dv)("database.goOffline",0,0,arguments.length),function tA(n){(n=(0,k.m9)(n))._checkNotDeleted("goOffline"),CE(n._repo)}(this._delegate)}goOnline(){return(0,k.Dv)("database.goOnline",0,0,arguments.length),function nA(n){(n=(0,k.m9)(n))._checkNotDeleted("goOnline"),function zS(n){n.persistentConnection_&&n.persistentConnection_.resume(T0)}(n._repo)}(this._delegate)}}vg.ServerValue={TIMESTAMP:function ZE(){return pi}(),increment:n=>function iA(n){return{".sv":{increment:n}}}(n)};var rl=Object.freeze({__proto__:null,initStandalone:function nC({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:s=!1}){Ph(t);const l=new Ai.zt("auth-internal",new Ai.H0("database-standalone"));return l.setComponent(new Ai.wA("auth-internal",()=>r,"PRIVATE")),{instance:new vg(du(n,l,void 0,e,s),n),namespace:i}}});const Da=vg.ServerValue;!function Ea(n){n.INTERNAL.registerComponent(new Ai.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new vg(i,r)},"PUBLIC").setServiceProps({Reference:Or,Query:gi,Database:vg,DataSnapshot:nl,enableLogging:YE,INTERNAL:rl,ServerValue:Da}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(Lo.Z);var or=L(7579),bg=L(5363),uA=L(6063);class cA extends or.x{constructor(e=1/0,t=1/0,r=uA.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:s,_windowTime:l}=this;t||(r.push(e),!i&&r.push(s.now()+l)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,s=i.slice();for(let l=0;l<s.length&&!e.closed;l+=r?1:2)e.next(s[l]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,s=(i?1:2)*e;if(e<1/0&&s<r.length&&r.splice(0,r.length-s),!i){const l=t.now();let h=0;for(let m=1;m<r.length&&r[m]<=l;m+=2)h=m;h&&r.splice(0,h+1)}}}function rC(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,Bl.B)({connector:()=>new cA(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}const yf=(0,L(3888).d)(n=>function(){n(this),this.name="EmptyError",this.message="no elements in sequence"});function hr(n,e){return(0,cr.e)((t,r)=>{let i=0;t.subscribe((0,yn.x)(r,s=>n.call(e,s,i++)&&r.next(s)))})}var il=L(515);function Zr(n){return n<=0?()=>il.E:(0,cr.e)((e,t)=>{let r=0;e.subscribe((0,yn.x)(t,i=>{++r<=n&&(t.next(i),n<=r&&t.complete())}))})}function G_(n){return(0,cr.e)((e,t)=>{let r=!1;e.subscribe((0,yn.x)(t,i=>{r=!0,t.next(i)},()=>{r||t.next(n),t.complete()}))})}function iC(n=sC){return(0,cr.e)((e,t)=>{let r=!1;e.subscribe((0,yn.x)(t,i=>{r=!0,t.next(i)},()=>r?t.complete():t.error(n())))})}function sC(){return new yf}function sl(n,e){const t=arguments.length>=2;return r=>r.pipe(n?hr((i,s)=>n(i,s,r)):lo.y,Zr(1),t?G_(e):iC(()=>new yf))}var bo=L(576);function oC(n,e){return(0,bo.m)(e)?Vn(()=>n,e):Vn(()=>n)}var $_=L(9468);L(259);const $0=new Map,cC={activated:!1,tokenObservers:[]},_A={initialized:!1,enabled:!1};function xr(n){return $0.get(n)||Object.assign({},cC)}function W_(){return _A}const H0="https://content-firebaseappcheck.googleapis.com/v1",wA="exchangeDebugToken",dC={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class fC{constructor(e,t,r,i,s){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=i,i>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,we.Z)(function*(){t.stop();try{t.pending=new k.BH,yield function pC(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new k.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const Ni=new k.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function q_(n){if(!xr(n).activated)throw Ni.create("use-before-activation",{appName:n.name})}function bf(n,e){return Y_.apply(this,arguments)}function Y_(){return(Y_=(0,we.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const S=yield i.getHeartbeatsHeader();S&&(r["X-Firebase-Client"]=S)}const s={method:"POST",body:JSON.stringify(e),headers:r};let l,h;try{l=yield fetch(n,s)}catch(S){throw Ni.create("fetch-network-error",{originalErrorMessage:S?.message})}if(200!==l.status)throw Ni.create("fetch-status-error",{httpStatus:l.status});try{h=yield l.json()}catch(S){throw Ni.create("fetch-parse-error",{originalErrorMessage:S?.message})}const m=h.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw Ni.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${h.ttl}`});const y=1e3*Number(m[1]),D=Date.now();return{token:h.token,expireTimeMillis:D+y,issuedAtTimeMillis:D}})).apply(this,arguments)}function mC(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${H0}/projects/${t}/apps/${r}:${wA}?key=${i}`,body:{debug_token:e}}}const wf="firebase-app-check-database",yP=1,$d="firebase-app-check-store";let Eg=null;function _C(n,e){return Ac.apply(this,arguments)}function Ac(){return(Ac=(0,we.Z)(function*(n,e){const r=(yield function z0(){return Eg||(Eg=new Promise((n,e)=>{try{const t=indexedDB.open(wf,yP);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(Ni.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore($d,{keyPath:"compositeKey"})}}catch(t){e(Ni.create("storage-open",{originalErrorMessage:t?.message}))}}),Eg)}()).transaction($d,"readwrite"),s=r.objectStore($d).put({compositeKey:n,value:e});return new Promise((l,h)=>{s.onsuccess=m=>{l()},r.onerror=m=>{var y;h(Ni.create("storage-set",{originalErrorMessage:null===(y=m.target.error)||void 0===y?void 0:y.message}))}})})).apply(this,arguments)}const ar=new Fi.Yd("@firebase/app-check");function Q_(n,e){return(0,k.hl)()?function Lt(n,e){return _C(function Cg(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{ar.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function X_(){return W_().enabled}function ey(){return ty.apply(this,arguments)}function ty(){return(ty=(0,we.Z)(function*(){const n=W_();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const AA={error:"UNKNOWN_ERROR"};function NA(n){return k.US.encodeString(JSON.stringify(n),!1)}function Nc(n){return W0.apply(this,arguments)}function W0(){return(W0=(0,we.Z)(function*(n,e=!1){const t=n.app;q_(t);const r=xr(t);let s,i=r.token;if(i&&!ol(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(ol(m)?i=m:yield Q_(t,void 0))}if(!e&&i&&ol(i))return{token:i.token};let h,l=!1;if(X_()){r.exchangeTokenPromise||(r.exchangeTokenPromise=bf(mC(t,yield ey()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),l=!0);const m=yield r.exchangeTokenPromise;return yield Q_(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),l=!0),i=yield xr(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?ar.warn(m.message):ar.error(m),s=m}return i?s?h=ol(i)?{token:i.token,internalError:s}:Cf(s):(h={token:i.token},r.token=i,yield Q_(t,i)):h=Cf(s),l&&function wC(n,e){const t=xr(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,h),h})).apply(this,arguments)}function vC(n){return q0.apply(this,arguments)}function q0(){return(q0=(0,we.Z)(function*(n){const e=n.app;q_(e);const{provider:t}=xr(e);if(X_()){const r=yield ey(),{token:i}=yield bf(mC(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function ny(n,e){const t=xr(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function K0(n){const{app:e}=n,t=xr(e);let r=t.tokenRefresher;r||(r=function bC(n){const{app:e}=n;return new fC((0,we.Z)(function*(){let r;if(r=xr(e).token?yield Nc(n,!0):yield Nc(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=xr(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},dC.RETRIAL_MIN_WAIT,dC.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function ol(n){return n.expireTimeMillis-Date.now()>0}function Cf(n){return{token:NA(AA),error:n}}class MA{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=xr(this.app);for(const t of e)ny(this.app,t.next);return Promise.resolve()}}const If="app-check-internal";!function UA(){(0,es._registerComponent)(new Ai.wA("app-check",n=>function RA(n,e){return new MA(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(If).initialize()})),(0,es._registerComponent)(new Ai.wA(If,n=>function OA(n){return{getToken:e=>Nc(n,e),getLimitedUseToken:()=>vC(n),addTokenListener:e=>function Ef(n,e,t,r){const{app:i}=n,s=xr(i);if(s.tokenObservers=[...s.tokenObservers,{next:t,error:r,type:e}],s.token&&ol(s.token)){const h=s.token;Promise.resolve().then(()=>{t({token:h.token}),K0(n)}).catch(()=>{})}s.cachedTokenPromise.then(()=>K0(n))}(n,"INTERNAL",e),removeTokenListener:e=>ny(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,es.registerVersion)("@firebase/app-check","0.8.0")}();class Tg{constructor(){return(0,Wn.vb)("app-check")}}typeof window<"u"&&window;var $A=L(9260);const eb=new u.OlP("angularfire2.auth.use-emulator"),tb=new u.OlP("angularfire2.auth.settings"),nb=new u.OlP("angularfire2.auth.tenant-id"),rb=new u.OlP("angularfire2.auth.langugage-code"),oy=new u.OlP("angularfire2.auth.use-device-language"),ay=new u.OlP("angularfire.auth.persistence"),ly=(n,e,t,r,i,s,l,h)=>(0,Wr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,s&&m.useDeviceLanguage(),l)for(const[y,D]of Object.entries(l))m.settings[y]=D;return h&&m.setPersistence(h),m},[t,r,i,s,l,h]);let ib=(()=>{class n{constructor(t,r,i,s,l,h,m,y,D,S,R,P){const $=new or.x,Z=ct(void 0).pipe((0,bg.Q)(l.outsideAngular),Vn(()=>s.runOutsideAngular(()=>Promise.resolve().then(L.bind(L,2644)))),(0,vt.U)(()=>(0,Wr.on)(t,s,r)),(0,vt.U)(oe=>ly(oe,s,h,y,D,S,m,R)),rC({bufferSize:1,refCount:!1}));if(eo(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=ct(null);else{Z.pipe(sl()).subscribe();const Ue=Z.pipe(Vn(Xe=>Xe.getRedirectResult().then(ht=>ht,()=>null)),Wn.iC,rC({bufferSize:1,refCount:!1})),Ge=Z.pipe(Vn(Xe=>new Jn.y(ht=>({unsubscribe:s.runOutsideAngular(()=>Xe.onAuthStateChanged(It=>ht.next(It),It=>ht.error(It),()=>ht.complete()))})))),tt=Z.pipe(Vn(Xe=>new Jn.y(ht=>({unsubscribe:s.runOutsideAngular(()=>Xe.onIdTokenChanged(It=>ht.next(It),It=>ht.error(It),()=>ht.complete()))}))));this.authState=Ue.pipe(oC(Ge),(0,$_.R)(l.outsideAngular),(0,bg.Q)(l.insideAngular)),this.user=Ue.pipe(oC(tt),(0,$_.R)(l.outsideAngular),(0,bg.Q)(l.insideAngular)),this.idToken=this.user.pipe(Vn(Xe=>Xe?(0,wn.D)(Xe.getIdToken()):ct(null))),this.idTokenResult=this.user.pipe(Vn(Xe=>Xe?(0,wn.D)(Xe.getIdTokenResult()):ct(null))),this.credential=(0,Ll.T)(Ue,$,this.authState.pipe(hr(Xe=>!Xe))).pipe((0,vt.U)(Xe=>Xe?.user?Xe:null),(0,$_.R)(l.outsideAngular),(0,bg.Q)(l.insideAngular))}return(0,Wr.pX)(this,Z,s,{spy:{apply:(oe,Ue,Ge)=>{(oe.startsWith("signIn")||oe.startsWith("createUser"))&&Ge.then(tt=>$.next(tt))}}})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Wr.Dh),u.LFG(Wr.xv,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Wn.HU),u.LFG(eb,8),u.LFG(tb,8),u.LFG(nb,8),u.LFG(rb,8),u.LFG(oy,8),u.LFG(ay,8),u.LFG(Tg,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})();function FC(n){return null==n}function uy(n){return"function"==typeof n.set}function cy(n,e){return uy(e)?e:n.ref(e)}function sb(n,e){if(function kC(n){return"string"==typeof n}(n))return e.stringCase();if(uy(n))return e.firebaseCase();if(function zA(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function Hd(n,e,t="on",r=ko.z){return new Jn.y(i=>{let s=null;return s=n[t](e,(l,h)=>{r.schedule(()=>{i.next({snapshot:l,prevKey:h})}),"once"===t&&r.schedule(()=>i.complete())},l=>{r.schedule(()=>i.error(l))}),"on"===t?{unsubscribe(){null!=s&&n.off(e,s)}}:{unsubscribe(){}}}).pipe((0,vt.U)(i=>{const{snapshot:s,prevKey:l}=i;let h=null;return s.exists()&&(h=s.key),{type:e,payload:s,prevKey:l,key:h}}),(0,Bl.B)())}function LC(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function qA(n,e){const{payload:t,prevKey:r,key:i}=e,s=LC(n,i),l=function ob(n,e){if(FC(e))return 0;{const t=LC(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let h=null;e.payload.forEach(m=>{const y={payload:m,type:"value",prevKey:h,key:m.key};return h=m.key,n=[...n,y],!1})}return n;case"child_added":if(s>-1){const h=n[s-1];(h&&h.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(l,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(l,0,e)}return n;case"child_removed":return n.filter(h=>h.payload.key!==t.key);case"child_changed":return n.map(h=>h.payload.key===i?e:h);case"child_moved":if(s>-1){const h=n.splice(s,1)[0];return(n=n.slice()).splice(l,0,h),n}return n;default:return n}}function ab(n){return(FC(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function zd(n,e,t){return function WA(n,e,t){return Hd(n,"value","once",t).pipe(Vn(r=>{const i=[ct(r)];return e.forEach(s=>i.push(Hd(n,s,"on",t))),(0,Ll.T)(...i).pipe(Es(qA,[]))}),Fo())}(n,e=ab(e),t)}function lb(n,e,t){const r=(e=ab(e)).map(i=>Hd(n,i,"on",t));return(0,Ll.T)(...r)}function dy(n,e){return function(r,i){return sb(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function YA(n){return function(t){return t?sb(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function VC(n,e){return function(){return Hd(n,"value","on",e)}}const cb=new u.OlP("angularfire2.realtimeDatabaseURL"),jC=new u.OlP("angularfire2.database.use-emulator");let db=(()=>{class n{constructor(t,r,i,s,l,h,m,y,D,S,R,P,$,Z,oe){this.schedulers=h;const Ue=m,Ge=(0,Wr.on)(t,l,r);y&&ly(Ge,l,D,R,P,$,S,Z),this.database=(0,Wr.cc)(`${Ge.name}.database.${i}`,"AngularFireDatabase",Ge.name,()=>{const tt=l.runOutsideAngular(()=>Ge.database(i||void 0));return Ue&&tt.useEmulator(...Ue),tt},[Ue])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>cy(this.database,t));let s=i;return r&&(s=r(i)),function ub(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:dy(r,"update"),set:dy(r,"set"),push:i=>r.push(i),remove:YA(r),snapshotChanges:i=>zd(n,i,t).pipe(Wn.iC),stateChanges:i=>lb(n,i,t).pipe(Wn.iC),auditTrail:i=>function KA(n,e,t){return function BC(n,e,t){return function xP(n,e){return Hd(n,"value","on",e).pipe((0,vt.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(Vs(e),(0,vt.U)(([i,s])=>{const l=i.lastKeyToLoad,h=s.map(m=>m.key);return{actions:s,lastKeyToLoad:l,loadedKeys:h}}),function ha(n){return(0,cr.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,yn.x)(t,s=>(r||(r=!n(s,i++)))&&t.next(s)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,vt.U)(i=>i.actions))}(n,lb(n,e).pipe(Es((i,s)=>[...i,s],[])),t)}(n,i,t).pipe(Wn.iC),valueChanges:(i,s)=>zd(n,i,t).pipe((0,vt.U)(h=>h.map(m=>s&&s.idField?Object.assign(Object.assign({},m.payload.val()),{[s.idField]:m.key}):m.payload.val())),Wn.iC)}}(s,this)}object(t){return function UC(n,e){return{query:n,snapshotChanges:()=>VC(n,e.schedulers.outsideAngular)().pipe(Wn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>VC(n,e.schedulers.outsideAngular)().pipe(Wn.iC,(0,vt.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>cy(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Wr.Dh),u.LFG(Wr.xv,8),u.LFG(cb,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Wn.HU),u.LFG(jC,8),u.LFG(ib,8),u.LFG(eb,8),u.LFG(tb,8),u.LFG(nb,8),u.LFG(rb,8),u.LFG(oy,8),u.LFG(ay,8),u.LFG(Tg,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),GC=(()=>{class n{constructor(){$A.Z.registerVersion("angularfire",Wn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[db]}),n})();class mi extends or.x{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const t=super._subscribe(e);return!t.closed&&e.next(this._value),t}getValue(){const{hasError:e,thrownError:t,_value:r}=this;if(e)throw t;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}const{isArray:ZA}=Array,{getPrototypeOf:QA,prototype:JA,keys:XA}=Object;function hb(n){if(1===n.length){const e=n[0];if(ZA(e))return{args:e,keys:null};if(function PP(n){return n&&"object"==typeof n&&QA(n)===JA}(e)){const t=XA(e);return{args:t.map(r=>e[r]),keys:t}}}return{args:n,keys:null}}const{isArray:$C}=Array;function fb(n){return(0,vt.U)(e=>function eN(n,e){return $C(e)?n(...e):n(e)}(n,e))}function tN(n,e){return n.reduce((t,r,i)=>(t[r]=e[i],t),{})}var nN=L(9672);function hy(...n){const e=(0,ki.yG)(n),t=(0,ki.jO)(n),{args:r,keys:i}=hb(n);if(0===r.length)return(0,wn.D)([],e);const s=new Jn.y(function HC(n,e,t=lo.y){return r=>{pb(e,()=>{const{length:i}=n,s=new Array(i);let l=i,h=i;for(let m=0;m<i;m++)pb(e,()=>{const y=(0,wn.D)(n[m],e);let D=!1;y.subscribe((0,yn.x)(r,S=>{s[m]=S,D||(D=!0,h--),h||r.next(t(s.slice()))},()=>{--l||r.complete()}))},r)},r)}}(r,e,i?l=>tN(i,l):lo.y));return t?s.pipe(fb(t)):s}function pb(n,e,t){n?(0,nN.f)(t,n,e):e()}var Sf=L(8189);function Ig(...n){return function zC(){return(0,Sf.J)(1)}()((0,wn.D)(n,(0,ki.yG)(n)))}function WC(n){return new Jn.y(e=>{(0,Si.Xf)(n()).subscribe(e)})}var rN=L(9635);function Sg(n,e){const t=(0,bo.m)(n)?n:()=>n,r=i=>i.error(t());return new Jn.y(e?i=>e.schedule(r,0,i):r)}var qC=L(727);function gb(){return(0,cr.e)((n,e)=>{let t=null;n._refCount++;const r=(0,yn.x)(e,void 0,void 0,void 0,()=>{if(!n||n._refCount<=0||0<--n._refCount)return void(t=null);const i=n._connection,s=t;t=null,i&&(!s||i===s)&&i.unsubscribe(),e.unsubscribe()});n.subscribe(r),r.closed||(t=n.connect())})}class Af extends Jn.y{constructor(e,t){super(),this.source=e,this.subjectFactory=t,this._subject=null,this._refCount=0,this._connection=null,(0,cr.A)(e)&&(this.lift=e.lift)}_subscribe(e){return this.getSubject().subscribe(e)}getSubject(){const e=this._subject;return(!e||e.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:e}=this;this._subject=this._connection=null,e?.unsubscribe()}connect(){let e=this._connection;if(!e){e=this._connection=new qC.w0;const t=this.getSubject();e.add(this.source.subscribe((0,yn.x)(t,void 0,()=>{this._teardown(),t.complete()},r=>{this._teardown(),t.error(r)},()=>this._teardown()))),e.closed&&(this._connection=null,e=qC.w0.EMPTY)}return e}refCount(){return gb()(this)}}function Mc(...n){const e=(0,ki.yG)(n);return(0,cr.e)((t,r)=>{(e?Ig(n,t,e):Ig(n,t)).subscribe(r)})}var Mi=L(5577);function Rc(n,e){return(0,bo.m)(e)?(0,Mi.z)(n,e,1):(0,Mi.z)(n,1)}var _i=L(8505);function hu(n){return(0,cr.e)((e,t)=>{let s,r=null,i=!1;r=e.subscribe((0,yn.x)(t,void 0,void 0,l=>{s=(0,Si.Xf)(n(l,hu(n)(e))),r?(r.unsubscribe(),r=null,s.subscribe(t)):i=!0})),i&&(r.unsubscribe(),r=null,s.subscribe(t))})}function fy(n){return n<=0?()=>il.E:(0,cr.e)((e,t)=>{let r=[];e.subscribe((0,yn.x)(t,i=>{r.push(i),n<r.length&&r.shift()},()=>{for(const i of r)t.next(i);t.complete()},void 0,()=>{r=null}))})}function KC(n,e){const t=arguments.length>=2;return r=>r.pipe(n?hr((i,s)=>n(i,s,r)):lo.y,fy(1),t?G_(e):iC(()=>new yf))}function _b(n){return(0,cr.e)((e,t)=>{try{e.subscribe(t)}finally{t.add(n)}})}const nn="primary",Ag=Symbol("RouteTitle");class iN{constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t[0]:t}return null}getAll(e){if(this.has(e)){const t=this.params[e];return Array.isArray(t)?t:[t]}return[]}get keys(){return Object.keys(this.params)}}function al(n){return new iN(n)}function sN(n,e,t){const r=t.path.split("/");if(r.length>n.length||"full"===t.pathMatch&&(e.hasChildren()||r.length<n.length))return null;const i={};for(let s=0;s<r.length;s++){const l=r[s],h=n[s];if(l.startsWith(":"))i[l.substring(1)]=h;else if(l!==h.path)return null}return{consumed:n.slice(0,r.length),posParams:i}}function yi(n,e){const t=n?Object.keys(n):void 0,r=e?Object.keys(e):void 0;if(!t||!r||t.length!=r.length)return!1;let i;for(let s=0;s<t.length;s++)if(i=t[s],!YC(n[i],e[i]))return!1;return!0}function YC(n,e){if(Array.isArray(n)&&Array.isArray(e)){if(n.length!==e.length)return!1;const t=[...n].sort(),r=[...e].sort();return t.every((i,s)=>r[s]===i)}return n===e}function py(n){return Array.prototype.concat.apply([],n)}function Nf(n){return n.length>0?n[n.length-1]:null}function ji(n,e){for(const t in n)n.hasOwnProperty(t)&&e(n[t],t)}function Oc(n){return(0,u.CqO)(n)?n:(0,u.QGY)(n)?(0,wn.D)(Promise.resolve(n)):ct(n)}const Wd=!1,gy={exact:function vb(n,e,t){if(!Kd(n.segments,e.segments)||!Mf(n.segments,e.segments,t)||n.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!n.children[r]||!vb(n.children[r],e.children[r],t))return!1;return!0},subset:wb},ZC={exact:function JC(n,e){return yi(n,e)},subset:function bb(n,e){return Object.keys(e).length<=Object.keys(n).length&&Object.keys(e).every(t=>YC(n[t],e[t]))},ignored:()=>!0};function QC(n,e,t){return gy[t.paths](n.root,e.root,t.matrixParams)&&ZC[t.queryParams](n.queryParams,e.queryParams)&&!("exact"===t.fragment&&n.fragment!==e.fragment)}function wb(n,e,t){return my(n,e,e.segments,t)}function my(n,e,t,r){if(n.segments.length>t.length){const i=n.segments.slice(0,t.length);return!(!Kd(i,t)||e.hasChildren()||!Mf(i,t,r))}if(n.segments.length===t.length){if(!Kd(n.segments,t)||!Mf(n.segments,t,r))return!1;for(const i in e.children)if(!n.children[i]||!wb(n.children[i],e.children[i],r))return!1;return!0}{const i=t.slice(0,n.segments.length),s=t.slice(n.segments.length);return!!(Kd(n.segments,i)&&Mf(n.segments,i,r)&&n.children[nn])&&my(n.children[nn],e,s,r)}}function Mf(n,e,t){return e.every((r,i)=>ZC[t](n[i].parameters,r.parameters))}class fu{constructor(e=new un([],{}),t={},r=null){this.root=e,this.queryParams=t,this.fragment=r}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=al(this.queryParams)),this._queryParamMap}toString(){return Db.serialize(this)}}class un{constructor(e,t){this.segments=e,this.children=t,this.parent=null,ji(t,(r,i)=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Mg(this)}}class qd{constructor(e,t){this.path=e,this.parameters=t}get parameterMap(){return this._parameterMap||(this._parameterMap=al(this.parameters)),this._parameterMap}toString(){return Cb(this)}}function Kd(n,e){return n.length===e.length&&n.every((t,r)=>t.path===e[r].path)}let Ng=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return new _y},providedIn:"root"}),n})();class _y{parse(e){const t=new Tb(e);return new fu(t.parseRootSegment(),t.parseQueryParams(),t.parseFragment())}serialize(e){const t=`/${Rf(e.root,!0)}`,r=function Ts(n){const e=Object.keys(n).map(t=>{const r=n[t];return Array.isArray(r)?r.map(i=>`${Rg(t)}=${Rg(i)}`).join("&"):`${Rg(t)}=${Rg(r)}`}).filter(t=>!!t);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${t}${r}${"string"==typeof e.fragment?`#${function lN(n){return encodeURI(n)}(e.fragment)}`:""}`}}const Db=new _y;function Mg(n){return n.segments.map(e=>Cb(e)).join("/")}function Rf(n,e){if(!n.hasChildren())return Mg(n);if(e){const t=n.children[nn]?Rf(n.children[nn],!1):"",r=[];return ji(n.children,(i,s)=>{s!==nn&&r.push(`${s}:${Rf(i,!1)}`)}),r.length>0?`${t}(${r.join("//")})`:t}{const t=function aN(n,e){let t=[];return ji(n.children,(r,i)=>{i===nn&&(t=t.concat(e(r,i)))}),ji(n.children,(r,i)=>{i!==nn&&(t=t.concat(e(r,i)))}),t}(n,(r,i)=>i===nn?[Rf(n.children[nn],!1)]:[`${i}:${Rf(r,!1)}`]);return 1===Object.keys(n.children).length&&null!=n.children[nn]?`${Mg(n)}/${t[0]}`:`${Mg(n)}/(${t.join("//")})`}}function Eb(n){return encodeURIComponent(n).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function Rg(n){return Eb(n).replace(/%3B/gi,";")}function yy(n){return Eb(n).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Og(n){return decodeURIComponent(n)}function XC(n){return Og(n.replace(/\+/g,"%20"))}function Cb(n){return`${yy(n.path)}${function eT(n){return Object.keys(n).map(e=>`;${yy(e)}=${yy(n[e])}`).join("")}(n.parameters)}`}const Of=/^[^\/()?;=#]+/;function vy(n){const e=n.match(Of);return e?e[0]:""}const uN=/^[^=?&#]+/,BP=/^[^&#]+/;class Tb{constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new un([],{}):new un([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let t={};this.peekStartsWith("/(")&&(this.capture("/"),t=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(t).length>0)&&(r[nn]=new un(e,t)),r}parseSegment(){const e=vy(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new u.vHH(4009,Wd);return this.capture(e),new qd(Og(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const t=vy(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const i=vy(this.remaining);i&&(r=i,this.capture(r))}e[Og(t)]=Og(r)}parseQueryParam(e){const t=function LP(n){const e=n.match(uN);return e?e[0]:""}(this.remaining);if(!t)return;this.capture(t);let r="";if(this.consumeOptional("=")){const l=function tT(n){const e=n.match(BP);return e?e[0]:""}(this.remaining);l&&(r=l,this.capture(r))}const i=XC(t),s=XC(r);if(e.hasOwnProperty(i)){let l=e[i];Array.isArray(l)||(l=[l],e[i]=l),l.push(s)}else e[i]=s}parseParens(e){const t={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=vy(this.remaining),i=this.remaining[r.length];if("/"!==i&&")"!==i&&";"!==i)throw new u.vHH(4010,Wd);let s;r.indexOf(":")>-1?(s=r.slice(0,r.indexOf(":")),this.capture(s),this.capture(":")):e&&(s=nn);const l=this.parseChildren();t[s]=1===Object.keys(l).length?l[nn]:new un([],l),this.consumeOptional("//")}return t}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new u.vHH(4011,Wd)}}function Yd(n){return n.segments.length>0?new un([],{[nn]:n}):n}function by(n){const e={};for(const r of Object.keys(n.children)){const s=by(n.children[r]);(s.segments.length>0||s.hasChildren())&&(e[r]=s)}return function Ib(n){if(1===n.numberOfChildren&&n.children[nn]){const e=n.children[nn];return new un(n.segments.concat(e.segments),e.children)}return n}(new un(n.segments,e))}function Zd(n){return n instanceof fu}const wy=!1;function Sb(n,e,t,r,i){if(0===t.length)return pu(e.root,e.root,e.root,r,i);const s=function Ab(n){if("string"==typeof n[0]&&1===n.length&&"/"===n[0])return new cN(!0,0,n);let e=0,t=!1;const r=n.reduce((i,s,l)=>{if("object"==typeof s&&null!=s){if(s.outlets){const h={};return ji(s.outlets,(m,y)=>{h[y]="string"==typeof m?m.split("/"):m}),[...i,{outlets:h}]}if(s.segmentPath)return[...i,s.segmentPath]}return"string"!=typeof s?[...i,s]:0===l?(s.split("/").forEach((h,m)=>{0==m&&"."===h||(0==m&&""===h?t=!0:".."===h?e++:""!=h&&i.push(h))}),i):[...i,s]},[]);return new cN(t,e,r)}(t);return s.toRoot()?pu(e.root,e.root,new un([],{}),r,i):function l(m){const y=function Ff(n,e,t,r){if(n.isAbsolute)return new kf(e.root,!0,0);if(-1===r)return new kf(t,t===e.root,0);return function sT(n,e,t){let r=n,i=e,s=t;for(;s>i;){if(s-=i,r=r.parent,!r)throw new u.vHH(4005,wy&&"Invalid number of '../'");i=r.segments.length}return new kf(r,!1,i-s)}(t,r+(xf(n.commands[0])?0:1),n.numberOfDoubleDots)}(s,e,n.snapshot?._urlSegment,m),D=y.processChildren?Pg(y.segmentGroup,y.index,s.commands):xg(y.segmentGroup,y.index,s.commands);return pu(e.root,y.segmentGroup,D,r,i)}(n.snapshot?._lastPathIndex)}function xf(n){return"object"==typeof n&&null!=n&&!n.outlets&&!n.segmentPath}function Pf(n){return"object"==typeof n&&null!=n&&n.outlets}function pu(n,e,t,r,i){let l,s={};r&&ji(r,(m,y)=>{s[y]=Array.isArray(m)?m.map(D=>`${D}`):`${m}`}),l=n===e?t:Dy(n,e,t);const h=Yd(by(l));return new fu(h,s,i)}function Dy(n,e,t){const r={};return ji(n.children,(i,s)=>{r[s]=i===e?t:Dy(i,e,t)}),new un(n.segments,r)}class cN{constructor(e,t,r){if(this.isAbsolute=e,this.numberOfDoubleDots=t,this.commands=r,e&&r.length>0&&xf(r[0]))throw new u.vHH(4003,wy&&"Root segment cannot have matrix parameters");const i=r.find(Pf);if(i&&i!==Nf(r))throw new u.vHH(4004,wy&&"{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class kf{constructor(e,t,r){this.segmentGroup=e,this.processChildren=t,this.index=r}}function xg(n,e,t){if(n||(n=new un([],{})),0===n.segments.length&&n.hasChildren())return Pg(n,e,t);const r=function dN(n,e,t){let r=0,i=e;const s={match:!1,pathIndex:0,commandIndex:0};for(;i<n.segments.length;){if(r>=t.length)return s;const l=n.segments[i],h=t[r];if(Pf(h))break;const m=`${h}`,y=r<t.length-1?t[r+1]:null;if(i>0&&void 0===m)break;if(m&&y&&"object"==typeof y&&void 0===y.outlets){if(!uT(m,y,l))return s;r+=2}else{if(!uT(m,{},l))return s;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(n,e,t),i=t.slice(r.commandIndex);if(r.match&&r.pathIndex<n.segments.length){const s=new un(n.segments.slice(0,r.pathIndex),{});return s.children[nn]=new un(n.segments.slice(r.pathIndex),n.children),Pg(s,0,i)}return r.match&&0===i.length?new un(n.segments,{}):r.match&&!n.hasChildren()?aT(n,e,t):r.match?Pg(n,0,i):aT(n,e,t)}function Pg(n,e,t){if(0===t.length)return new un(n.segments,{});{const r=function oT(n){return Pf(n[0])?n[0].outlets:{[nn]:n}}(t),i={};if(!r[nn]&&n.children[nn]&&1===n.numberOfChildren&&0===n.children[nn].segments.length){const s=Pg(n.children[nn],e,t);return new un(n.segments,s.children)}return ji(r,(s,l)=>{"string"==typeof s&&(s=[s]),null!==s&&(i[l]=xg(n.children[l],e,s))}),ji(n.children,(s,l)=>{void 0===r[l]&&(i[l]=s)}),new un(n.segments,i)}}function aT(n,e,t){const r=n.segments.slice(0,e);let i=0;for(;i<t.length;){const s=t[i];if(Pf(s)){const m=hN(s.outlets);return new un(r,m)}if(0===i&&xf(t[0])){r.push(new qd(n.segments[e].path,lT(t[0]))),i++;continue}const l=Pf(s)?s.outlets[nn]:`${s}`,h=i<t.length-1?t[i+1]:null;l&&h&&xf(h)?(r.push(new qd(l,lT(h))),i+=2):(r.push(new qd(l,{})),i++)}return new un(r,{})}function hN(n){const e={};return ji(n,(t,r)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[r]=aT(new un([],{}),0,t))}),e}function lT(n){const e={};return ji(n,(t,r)=>e[r]=`${t}`),e}function uT(n,e,t){return n==t.path&&yi(e,t.parameters)}const Lf="imperative";class Ca{constructor(e,t){this.id=e,this.url=t}}class Nb extends Ca{constructor(e,t,r="imperative",i=null){super(e,t),this.type=0,this.navigationTrigger=r,this.restoredState=i}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class xc extends Ca{constructor(e,t,r){super(e,t),this.urlAfterRedirects=r,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class kg extends Ca{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ey extends Ca{constructor(e,t,r,i){super(e,t),this.reason=r,this.code=i,this.type=16}}class Mb extends Ca{constructor(e,t,r,i){super(e,t),this.error=r,this.target=i,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class cT extends Ca{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fN extends Ca{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class dT extends Ca{constructor(e,t,r,i,s){super(e,t),this.urlAfterRedirects=r,this.state=i,this.shouldActivate=s,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class hT extends Ca{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class fT extends Ca{constructor(e,t,r,i){super(e,t),this.urlAfterRedirects=r,this.state=i,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class pT{constructor(e){this.route=e,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class pN{constructor(e){this.route=e,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class gN{constructor(e){this.snapshot=e,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class UP{constructor(e){this.snapshot=e,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class gT{constructor(e){this.snapshot=e,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class jP{constructor(e){this.snapshot=e,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mN{constructor(e,t,r){this.routerEvent=e,this.position=t,this.anchor=r,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}let HP=(()=>{class n{createUrlTree(t,r,i,s,l,h){return Sb(t||r.root,i,s,l,h)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),WP=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(e){return HP.\u0275fac(e)},providedIn:"root"}),n})();class _N{constructor(e){this._root=e}get root(){return this._root.value}parent(e){const t=this.pathFromRoot(e);return t.length>1?t[t.length-2]:null}children(e){const t=Bf(e,this._root);return t?t.children.map(r=>r.value):[]}firstChild(e){const t=Bf(e,this._root);return t&&t.children.length>0?t.children[0].value:null}siblings(e){const t=mT(e,this._root);return t.length<2?[]:t[t.length-2].children.map(i=>i.value).filter(i=>i!==e)}pathFromRoot(e){return mT(e,this._root).map(t=>t.value)}}function Bf(n,e){if(n===e.value)return e;for(const t of e.children){const r=Bf(n,t);if(r)return r}return null}function mT(n,e){if(n===e.value)return[e];for(const t of e.children){const r=mT(n,t);if(r.length)return r.unshift(e),r}return[]}class ll{constructor(e,t){this.value=e,this.children=t}toString(){return`TreeNode(${this.value})`}}function gu(n){const e={};return n&&n.children.forEach(t=>e[t.value.outlet]=t),e}class Rb extends _N{constructor(e,t){super(e),this.snapshot=t,kb(this,e)}toString(){return this.snapshot.toString()}}function Ob(n,e){const t=function qP(n,e){const l=new Pb([],{},{},"",{},nn,e,null,n.root,-1,{});return new vN("",new ll(l,[]))}(n,e),r=new mi([new qd("",{})]),i=new mi({}),s=new mi({}),l=new mi({}),h=new mi(""),m=new Pc(r,i,l,h,s,nn,e,t.root);return m.snapshot=t.root,new Rb(new ll(m,[]),t)}class Pc{constructor(e,t,r,i,s,l,h,m){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=h,this.title=this.data?.pipe((0,vt.U)(y=>y[Ag]))??ct(void 0),this._futureSnapshot=m}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,vt.U)(e=>al(e)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,vt.U)(e=>al(e)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function xb(n,e="emptyOnly"){const t=n.pathFromRoot;let r=0;if("always"!==e)for(r=t.length-1;r>=1;){const i=t[r],s=t[r-1];if(i.routeConfig&&""===i.routeConfig.path)r--;else{if(s.component)break;r--}}return function yN(n){return n.reduce((e,t)=>({params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.resolve,...t.routeConfig?.data,...t._resolvedData}}),{params:{},data:{},resolve:{}})}(t.slice(r))}class Pb{get title(){return this.data?.[Ag]}constructor(e,t,r,i,s,l,h,m,y,D,S){this.url=e,this.params=t,this.queryParams=r,this.fragment=i,this.data=s,this.outlet=l,this.component=h,this.routeConfig=m,this._urlSegment=y,this._lastPathIndex=D,this._resolve=S}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=al(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=al(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vN extends _N{constructor(e,t){super(t),this.url=e,kb(this,t)}toString(){return _T(this._root)}}function kb(n,e){e.value._routerState=n,e.children.forEach(t=>kb(n,t))}function _T(n){const e=n.children.length>0?` { ${n.children.map(_T).join(", ")} } `:"";return`${n.value}${e}`}function Vf(n){if(n.snapshot){const e=n.snapshot,t=n._futureSnapshot;n.snapshot=t,yi(e.queryParams,t.queryParams)||n.queryParams.next(t.queryParams),e.fragment!==t.fragment&&n.fragment.next(t.fragment),yi(e.params,t.params)||n.params.next(t.params),function yb(n,e){if(n.length!==e.length)return!1;for(let t=0;t<n.length;++t)if(!yi(n[t],e[t]))return!1;return!0}(e.url,t.url)||n.url.next(t.url),yi(e.data,t.data)||n.data.next(t.data)}else n.snapshot=n._futureSnapshot,n.data.next(n._futureSnapshot.data)}function Fb(n,e){const t=yi(n.params,e.params)&&function oN(n,e){return Kd(n,e)&&n.every((t,r)=>yi(t.parameters,e[r].parameters))}(n.url,e.url);return t&&!(!n.parent!=!e.parent)&&(!n.parent||Fb(n.parent,e.parent))}function Cy(n,e,t){if(t&&n.shouldReuseRoute(e.value,t.value.snapshot)){const r=t.value;r._futureSnapshot=e.value;const i=function YP(n,e,t){return e.children.map(r=>{for(const i of t.children)if(n.shouldReuseRoute(r.value,i.value.snapshot))return Cy(n,r,i);return Cy(n,r)})}(n,e,t);return new ll(r,i)}{if(n.shouldAttach(e.value)){const s=n.retrieve(e.value);if(null!==s){const l=s.route;return l.value._futureSnapshot=e.value,l.children=e.children.map(h=>Cy(n,h)),l}}const r=function bN(n){return new Pc(new mi(n.url),new mi(n.params),new mi(n.queryParams),new mi(n.fragment),new mi(n.data),n.outlet,n.component,n)}(e.value),i=e.children.map(s=>Cy(n,s));return new ll(r,i)}}const Lb="ngNavigationCancelingError";function yT(n,e){const{redirectTo:t,navigationBehaviorOptions:r}=Zd(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,i=wN(!1,0,e);return i.url=t,i.navigationBehaviorOptions=r,i}function wN(n,e,t){const r=new Error("NavigationCancelingError: "+(n||""));return r[Lb]=!0,r.cancellationCode=e,t&&(r.url=t),r}function vT(n){return Bb(n)&&Zd(n.url)}function Bb(n){return n&&n[Lb]}class bT{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.injector=null,this.children=new Ty,this.attachRef=null}}let Ty=(()=>{class n{constructor(){this.contexts=new Map}onChildOutletCreated(t,r){const i=this.getOrCreateContext(t);i.outlet=r,this.contexts.set(t,i)}onChildOutletDestroyed(t){const r=this.getContext(t);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let r=this.getContext(t);return r||(r=new bT,this.contexts.set(t,r)),r}getContext(t){return this.contexts.get(t)||null}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const $s=!1;let Vb=(()=>{class n{constructor(){this.activated=null,this._activatedRoute=null,this.name=nn,this.activateEvents=new u.vpe,this.deactivateEvents=new u.vpe,this.attachEvents=new u.vpe,this.detachEvents=new u.vpe,this.parentContexts=(0,u.f3M)(Ty),this.location=(0,u.f3M)(u.s_b),this.changeDetector=(0,u.f3M)(u.sBO),this.environmentInjector=(0,u.f3M)(u.lqb)}ngOnChanges(t){if(t.name){const{firstChange:r,previousValue:i}=t.name;if(r)return;this.isTrackedInParentContexts(i)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(i)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name)}isTrackedInParentContexts(t){return this.parentContexts.getContext(t)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const t=this.parentContexts.getContext(this.name);t?.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new u.vHH(4012,$s);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new u.vHH(4012,$s);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new u.vHH(4012,$s);this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(t.instance),t}attach(t,r){this.activated=t,this._activatedRoute=r,this.location.insert(t.hostView),this.attachEvents.emit(t.instance)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,r){if(this.isActivated)throw new u.vHH(4013,$s);this._activatedRoute=t;const i=this.location,l=t.snapshot.component,h=this.parentContexts.getOrCreateContext(this.name).children,m=new Ub(t,h,i.injector);if(r&&function DN(n){return!!n.resolveComponentFactory}(r)){const y=r.resolveComponentFactory(l);this.activated=i.createComponent(y,i.length,m)}else this.activated=i.createComponent(l,{index:i.length,injector:m,environmentInjector:r??this.environmentInjector});this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[u.TTD]}),n})();class Ub{constructor(e,t,r){this.route=e,this.childContexts=t,this.parent=r}get(e,t){return e===Pc?this.route:e===Ty?this.childContexts:this.parent.get(e,t)}}let wT=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ng-component"]],standalone:!0,features:[u.jDz],decls:1,vars:0,template:function(t,r){1&t&&u._UZ(0,"router-outlet")},dependencies:[Vb],encapsulation:2}),n})();function wo(n,e){return n.providers&&!n._injector&&(n._injector=(0,u.MMx)(n.providers,e,`Route: ${n.path}`)),n._injector??e}function Iy(n){const e=n.children&&n.children.map(Iy),t=e?{...n,children:e}:{...n};return!t.component&&!t.loadComponent&&(e||t.loadChildren)&&t.outlet&&t.outlet!==nn&&(t.component=wT),t}function Do(n){return n.outlet||nn}function TT(n,e){const t=n.filter(r=>Do(r)===e);return t.push(...n.filter(r=>Do(r)!==e)),t}function Uf(n){if(!n)return null;if(n.routeConfig?._injector)return n.routeConfig._injector;for(let e=n.parent;e;e=e.parent){const t=e.routeConfig;if(t?._loadedInjector)return t._loadedInjector;if(t?._injector)return t._injector}return null}class jb{constructor(e,t,r,i){this.routeReuseStrategy=e,this.futureState=t,this.currState=r,this.forwardEvent=i}activate(e){const t=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(t,r,e),Vf(this.futureState.root),this.activateChildRoutes(t,r,e)}deactivateChildRoutes(e,t,r){const i=gu(t);e.children.forEach(s=>{const l=s.value.outlet;this.deactivateRoutes(s,i[l],r),delete i[l]}),ji(i,(s,l)=>{this.deactivateRouteAndItsChildren(s,r)})}deactivateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(i===s)if(i.component){const l=r.getContext(i.outlet);l&&this.deactivateChildRoutes(e,t,l.children)}else this.deactivateChildRoutes(e,t,r);else s&&this.deactivateRouteAndItsChildren(t,r)}deactivateRouteAndItsChildren(e,t){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,t):this.deactivateRouteAndOutlet(e,t)}detachAndStoreRouteSubtree(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=gu(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);if(r&&r.outlet){const l=r.outlet.detach(),h=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:l,route:e,contexts:h})}}deactivateRouteAndOutlet(e,t){const r=t.getContext(e.value.outlet),i=r&&e.value.component?r.children:t,s=gu(e);for(const l of Object.keys(s))this.deactivateRouteAndItsChildren(s[l],i);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.resolver=null,r.route=null)}activateChildRoutes(e,t,r){const i=gu(t);e.children.forEach(s=>{this.activateRoutes(s,i[s.value.outlet],r),this.forwardEvent(new jP(s.value.snapshot))}),e.children.length&&this.forwardEvent(new UP(e.value.snapshot))}activateRoutes(e,t,r){const i=e.value,s=t?t.value:null;if(Vf(i),i===s)if(i.component){const l=r.getOrCreateContext(i.outlet);this.activateChildRoutes(e,t,l.children)}else this.activateChildRoutes(e,t,r);else if(i.component){const l=r.getOrCreateContext(i.outlet);if(this.routeReuseStrategy.shouldAttach(i.snapshot)){const h=this.routeReuseStrategy.retrieve(i.snapshot);this.routeReuseStrategy.store(i.snapshot,null),l.children.onOutletReAttached(h.contexts),l.attachRef=h.componentRef,l.route=h.route.value,l.outlet&&l.outlet.attach(h.componentRef,h.route.value),Vf(h.route.value),this.activateChildRoutes(e,null,l.children)}else{const h=Uf(i.snapshot),m=h?.get(u._Vd)??null;l.attachRef=null,l.route=i,l.resolver=m,l.injector=h,l.outlet&&l.outlet.activateWith(i,l.injector),this.activateChildRoutes(e,null,l.children)}}else this.activateChildRoutes(e,null,r)}}class ul{constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Ta{constructor(e,t){this.component=e,this.route=t}}function IT(n,e,t){const r=n._root;return Lg(r,e?e._root:null,t,[r.value])}function Qd(n,e){const t=Symbol(),r=e.get(n,t);return r===t?"function"!=typeof n||(0,u.Z0I)(n)?e.get(n):n:r}function Lg(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=gu(e);return n.children.forEach(l=>{(function XP(n,e,t,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const s=n.value,l=e?e.value:null,h=t?t.getContext(n.value.outlet):null;if(l&&s.routeConfig===l.routeConfig){const m=function TN(n,e,t){if("function"==typeof t)return t(n,e);switch(t){case"pathParamsChange":return!Kd(n.url,e.url);case"pathParamsOrQueryParamsChange":return!Kd(n.url,e.url)||!yi(n.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Fb(n,e)||!yi(n.queryParams,e.queryParams);default:return!Fb(n,e)}}(l,s,s.routeConfig.runGuardsAndResolvers);m?i.canActivateChecks.push(new ul(r)):(s.data=l.data,s._resolvedData=l._resolvedData),Lg(n,e,s.component?h?h.children:null:t,r,i),m&&h&&h.outlet&&h.outlet.isActivated&&i.canDeactivateChecks.push(new Ta(h.outlet.component,l))}else l&&Bg(e,h,i),i.canActivateChecks.push(new ul(r)),Lg(n,null,s.component?h?h.children:null:t,r,i)})(l,s[l.value.outlet],t,r.concat([l.value]),i),delete s[l.value.outlet]}),ji(s,(l,h)=>Bg(l,t.getContext(h),i)),i}function Bg(n,e,t){const r=gu(n),i=n.value;ji(r,(s,l)=>{Bg(s,i.component?e?e.children.getContext(l):null:e,t)}),t.canDeactivateChecks.push(new Ta(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}function Vg(n){return"function"==typeof n}function Sy(n){return n instanceof yf||"EmptyError"===n?.name}const Ug=Symbol("INITIAL_VALUE");function Jd(){return Vn(n=>hy(n.map(e=>e.pipe(Zr(1),Mc(Ug)))).pipe((0,vt.U)(e=>{for(const t of e)if(!0!==t){if(t===Ug)return Ug;if(!1===t||t instanceof fu)return t}return!0}),hr(e=>e!==Ug),Zr(1)))}function MN(n){return(0,rN.z)((0,_i.b)(e=>{if(Zd(e))throw yT(0,e)}),(0,vt.U)(e=>!0===e))}const Hb={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function PT(n,e,t,r,i){const s=zb(n,e,t);return s.matched?function xT(n,e,t,r){const i=e.canMatch;return i&&0!==i.length?ct(i.map(l=>{const h=Qd(l,n);return Oc(function NT(n){return n&&Vg(n.canMatch)}(h)?h.canMatch(e,t):n.runInContext(()=>h(e,t)))})).pipe(Jd(),MN()):ct(!0)}(r=wo(e,r),e,t).pipe((0,vt.U)(l=>!0===l?s:{...Hb})):ct(s)}function zb(n,e,t){if(""===e.path)return"full"===e.pathMatch&&(n.hasChildren()||t.length>0)?{...Hb}:{matched:!0,consumedSegments:[],remainingSegments:t,parameters:{},positionalParamSegments:{}};const i=(e.matcher||sN)(t,n,e);if(!i)return{...Hb};const s={};ji(i.posParams,(h,m)=>{s[m]=h.path});const l=i.consumed.length>0?{...s,...i.consumed[i.consumed.length-1].parameters}:s;return{matched:!0,consumedSegments:i.consumed,remainingSegments:t.slice(i.consumed.length),parameters:l,positionalParamSegments:i.posParams??{}}}function Wb(n,e,t,r){if(t.length>0&&function sk(n,e,t){return t.some(r=>My(n,e,r)&&Do(r)!==nn)}(n,t,r)){const s=new un(e,function ik(n,e,t,r){const i={};i[nn]=r,r._sourceSegment=n,r._segmentIndexShift=e.length;for(const s of t)if(""===s.path&&Do(s)!==nn){const l=new un([],{});l._sourceSegment=n,l._segmentIndexShift=e.length,i[Do(s)]=l}return i}(n,e,r,new un(t,n.children)));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:[]}}if(0===t.length&&function ok(n,e,t){return t.some(r=>My(n,e,r))}(n,t,r)){const s=new un(n.segments,function rk(n,e,t,r,i){const s={};for(const l of r)if(My(n,t,l)&&!i[Do(l)]){const h=new un([],{});h._sourceSegment=n,h._segmentIndexShift=e.length,s[Do(l)]=h}return{...i,...s}}(n,e,t,r,n.children));return s._sourceSegment=n,s._segmentIndexShift=e.length,{segmentGroup:s,slicedSegments:t}}const i=new un(n.segments,n.children);return i._sourceSegment=n,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:t}}function My(n,e,t){return(!(n.hasChildren()||e.length>0)||"full"!==t.pathMatch)&&""===t.path}function jg(n,e,t,r){return!!(Do(n)===r||r!==nn&&My(e,t,n))&&("**"===n.path||zb(e,n,t).matched)}function kT(n,e,t){return 0===e.length&&!n.children[t]}const Ry=!1;class Gg{constructor(e){this.segmentGroup=e||null}}class kc{constructor(e){this.urlTree=e}}function jf(n){return Sg(new Gg(n))}function Oy(n){return Sg(new kc(n))}class Yb{constructor(e,t,r,i,s){this.injector=e,this.configLoader=t,this.urlSerializer=r,this.urlTree=i,this.config=s,this.allowRedirects=!0}apply(){const e=Wb(this.urlTree.root,[],[],this.config).segmentGroup,t=new un(e.segments,e.children);return this.expandSegmentGroup(this.injector,this.config,t,nn).pipe((0,vt.U)(s=>this.createUrlTree(by(s),this.urlTree.queryParams,this.urlTree.fragment))).pipe(hu(s=>{if(s instanceof kc)return this.allowRedirects=!1,this.match(s.urlTree);throw s instanceof Gg?this.noMatchError(s):s}))}match(e){return this.expandSegmentGroup(this.injector,this.config,e.root,nn).pipe((0,vt.U)(i=>this.createUrlTree(by(i),e.queryParams,e.fragment))).pipe(hu(i=>{throw i instanceof Gg?this.noMatchError(i):i}))}noMatchError(e){return new u.vHH(4002,Ry)}createUrlTree(e,t,r){const i=Yd(e);return new fu(i,t,r)}expandSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.expandChildren(e,t,r).pipe((0,vt.U)(s=>new un([],s))):this.expandSegment(e,r,t,r.segments,i,!0)}expandChildren(e,t,r){const i=[];for(const s of Object.keys(r.children))"primary"===s?i.unshift(s):i.push(s);return(0,wn.D)(i).pipe(Rc(s=>{const l=r.children[s],h=TT(t,s);return this.expandSegmentGroup(e,h,l,s).pipe((0,vt.U)(m=>({segment:m,outlet:s})))}),Es((s,l)=>(s[l.outlet]=l.segment,s),{}),KC())}expandSegment(e,t,r,i,s,l){return(0,wn.D)(r).pipe(Rc(h=>this.expandSegmentAgainstRoute(e,t,r,h,i,s,l).pipe(hu(y=>{if(y instanceof Gg)return ct(null);throw y}))),sl(h=>!!h),hu((h,m)=>{if(Sy(h))return kT(t,i,s)?ct(new un([],{})):jf(t);throw h}))}expandSegmentAgainstRoute(e,t,r,i,s,l,h){return jg(i,t,s,l)?void 0===i.redirectTo?this.matchSegmentAgainstRoute(e,t,i,s,l):h&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l):jf(t):jf(t)}expandSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){return"**"===i.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(e,r,i,l):this.expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l)}expandWildCardWithParamsAgainstRouteUsingRedirect(e,t,r,i){const s=this.applyRedirectCommands([],r.redirectTo,{});return r.redirectTo.startsWith("/")?Oy(s):this.lineralizeSegments(r,s).pipe((0,Mi.z)(l=>{const h=new un(l,{});return this.expandSegment(e,h,t,l,i,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(e,t,r,i,s,l){const{matched:h,consumedSegments:m,remainingSegments:y,positionalParamSegments:D}=zb(t,i,s);if(!h)return jf(t);const S=this.applyRedirectCommands(m,i.redirectTo,D);return i.redirectTo.startsWith("/")?Oy(S):this.lineralizeSegments(i,S).pipe((0,Mi.z)(R=>this.expandSegment(e,t,r,R.concat(y),l,!1)))}matchSegmentAgainstRoute(e,t,r,i,s){return"**"===r.path?(e=wo(r,e),r.loadChildren?(r._loadedRoutes?ct({routes:r._loadedRoutes,injector:r._loadedInjector}):this.configLoader.loadChildren(e,r)).pipe((0,vt.U)(h=>(r._loadedRoutes=h.routes,r._loadedInjector=h.injector,new un(i,{})))):ct(new un(i,{}))):PT(t,r,i,e).pipe(Vn(({matched:l,consumedSegments:h,remainingSegments:m})=>l?this.getChildConfig(e=r._injector??e,r,i).pipe((0,Mi.z)(D=>{const S=D.injector??e,R=D.routes,{segmentGroup:P,slicedSegments:$}=Wb(t,h,m,R),Z=new un(P.segments,P.children);if(0===$.length&&Z.hasChildren())return this.expandChildren(S,R,Z).pipe((0,vt.U)(tt=>new un(h,tt)));if(0===R.length&&0===$.length)return ct(new un(h,{}));const oe=Do(r)===s;return this.expandSegment(S,Z,R,$,oe?nn:s,!0).pipe((0,vt.U)(Ge=>new un(h.concat(Ge.segments),Ge.children)))})):jf(t)))}getChildConfig(e,t,r){return t.children?ct({routes:t.children,injector:e}):t.loadChildren?void 0!==t._loadedRoutes?ct({routes:t._loadedRoutes,injector:t._loadedInjector}):function nk(n,e,t,r){const i=e.canLoad;return void 0===i||0===i.length?ct(!0):ct(i.map(l=>{const h=Qd(l,n);return Oc(function ST(n){return n&&Vg(n.canLoad)}(h)?h.canLoad(e,t):n.runInContext(()=>h(e,t)))})).pipe(Jd(),MN())}(e,t,r).pipe((0,Mi.z)(i=>i?this.configLoader.loadChildren(e,t).pipe((0,_i.b)(s=>{t._loadedRoutes=s.routes,t._loadedInjector=s.injector})):function RN(n){return Sg(wN(Ry,3))}())):ct({routes:[],injector:e})}lineralizeSegments(e,t){let r=[],i=t.root;for(;;){if(r=r.concat(i.segments),0===i.numberOfChildren)return ct(r);if(i.numberOfChildren>1||!i.children[nn])return e.redirectTo,Sg(new u.vHH(4e3,Ry));i=i.children[nn]}}applyRedirectCommands(e,t,r){return this.applyRedirectCreateUrlTree(t,this.urlSerializer.parse(t),e,r)}applyRedirectCreateUrlTree(e,t,r,i){const s=this.createSegmentGroup(e,t.root,r,i);return new fu(s,this.createQueryParams(t.queryParams,this.urlTree.queryParams),t.fragment)}createQueryParams(e,t){const r={};return ji(e,(i,s)=>{if("string"==typeof i&&i.startsWith(":")){const h=i.substring(1);r[s]=t[h]}else r[s]=i}),r}createSegmentGroup(e,t,r,i){const s=this.createSegments(e,t.segments,r,i);let l={};return ji(t.children,(h,m)=>{l[m]=this.createSegmentGroup(e,h,r,i)}),new un(s,l)}createSegments(e,t,r,i){return t.map(s=>s.path.startsWith(":")?this.findPosParam(e,s,i):this.findOrReturn(s,r))}findPosParam(e,t,r){const i=r[t.path.substring(1)];if(!i)throw new u.vHH(4001,Ry);return i}findOrReturn(e,t){let r=0;for(const i of t){if(i.path===e.path)return t.splice(r),i;r++}return e}}class ak{}class FT{constructor(e,t,r,i,s,l,h){this.injector=e,this.rootComponentType=t,this.config=r,this.urlTree=i,this.url=s,this.paramsInheritanceStrategy=l,this.urlSerializer=h}recognize(){const e=Wb(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo)).segmentGroup;return this.processSegmentGroup(this.injector,this.config,e,nn).pipe((0,vt.U)(t=>{if(null===t)return null;const r=new Pb([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},nn,this.rootComponentType,null,this.urlTree.root,-1,{}),i=new ll(r,t),s=new vN(this.url,i);return this.inheritParamsAndData(s._root),s}))}inheritParamsAndData(e){const t=e.value,r=xb(t,this.paramsInheritanceStrategy);t.params=Object.freeze(r.params),t.data=Object.freeze(r.data),e.children.forEach(i=>this.inheritParamsAndData(i))}processSegmentGroup(e,t,r,i){return 0===r.segments.length&&r.hasChildren()?this.processChildren(e,t,r):this.processSegment(e,t,r,r.segments,i)}processChildren(e,t,r){return(0,wn.D)(Object.keys(r.children)).pipe(Rc(i=>{const s=r.children[i],l=TT(t,i);return this.processSegmentGroup(e,l,s,i)}),Es((i,s)=>i&&s?(i.push(...s),i):null),function kP(n,e=!1){return(0,cr.e)((t,r)=>{let i=0;t.subscribe((0,yn.x)(r,s=>{const l=n(s,i++);(l||e)&&r.next(s),!l&&r.complete()}))})}(i=>null!==i),G_(null),KC(),(0,vt.U)(i=>{if(null===i)return null;const s=LT(i);return function xN(n){n.sort((e,t)=>e.value.outlet===nn?-1:t.value.outlet===nn?1:e.value.outlet.localeCompare(t.value.outlet))}(s),s}))}processSegment(e,t,r,i,s){return(0,wn.D)(t).pipe(Rc(l=>this.processSegmentAgainstRoute(l._injector??e,l,r,i,s)),sl(l=>!!l),hu(l=>{if(Sy(l))return kT(r,i,s)?ct([]):ct(null);throw l}))}processSegmentAgainstRoute(e,t,r,i,s){if(t.redirectTo||!jg(t,r,i,s))return ct(null);let l;if("**"===t.path){const h=i.length>0?Nf(i).parameters:{},m=Qb(r)+i.length;l=ct({snapshot:new Pb(i,h,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,VT(t),Do(t),t.component??t._loadedComponent??null,t,Zb(r),m,Jb(t)),consumedSegments:[],remainingSegments:[]})}else l=PT(r,t,i,e).pipe((0,vt.U)(({matched:h,consumedSegments:m,remainingSegments:y,parameters:D})=>{if(!h)return null;const S=Qb(r)+m.length;return{snapshot:new Pb(m,D,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,VT(t),Do(t),t.component??t._loadedComponent??null,t,Zb(r),S,Jb(t)),consumedSegments:m,remainingSegments:y}}));return l.pipe(Vn(h=>{if(null===h)return ct(null);const{snapshot:m,consumedSegments:y,remainingSegments:D}=h;e=t._injector??e;const S=t._loadedInjector??e,R=function PN(n){return n.children?n.children:n.loadChildren?n._loadedRoutes:[]}(t),{segmentGroup:P,slicedSegments:$}=Wb(r,y,D,R.filter(oe=>void 0===oe.redirectTo));if(0===$.length&&P.hasChildren())return this.processChildren(S,R,P).pipe((0,vt.U)(oe=>null===oe?null:[new ll(m,oe)]));if(0===R.length&&0===$.length)return ct([new ll(m,[])]);const Z=Do(t)===s;return this.processSegment(S,R,P,$,Z?nn:s).pipe((0,vt.U)(oe=>null===oe?null:[new ll(m,oe)]))}))}}function kN(n){const e=n.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function LT(n){const e=[],t=new Set;for(const r of n){if(!kN(r)){e.push(r);continue}const i=e.find(s=>r.value.routeConfig===s.value.routeConfig);void 0!==i?(i.children.push(...r.children),t.add(i)):e.push(r)}for(const r of t){const i=LT(r.children);e.push(new ll(r.value,i))}return e.filter(r=>!t.has(r))}function Zb(n){let e=n;for(;e._sourceSegment;)e=e._sourceSegment;return e}function Qb(n){let e=n,t=e._segmentIndexShift??0;for(;e._sourceSegment;)e=e._sourceSegment,t+=e._segmentIndexShift??0;return t-1}function VT(n){return n.data||{}}function Jb(n){return n.resolve||{}}function dk(n,e){return(0,Mi.z)(t=>{const{targetSnapshot:r,guards:{canActivateChecks:i}}=t;if(!i.length)return ct(t);let s=0;return(0,wn.D)(i).pipe(Rc(l=>function UT(n,e,t,r){const i=n.routeConfig,s=n._resolve;return void 0!==i?.title&&!BN(i)&&(s[Ag]=i.title),function ew(n,e,t,r){const i=function FN(n){return[...Object.keys(n),...Object.getOwnPropertySymbols(n)]}(n);if(0===i.length)return ct({});const s={};return(0,wn.D)(i).pipe((0,Mi.z)(l=>function LN(n,e,t,r){const i=Uf(e)??r,s=Qd(n,i);return Oc(s.resolve?s.resolve(e,t):i.runInContext(()=>s(e,t)))}(n[l],e,t,r).pipe(sl(),(0,_i.b)(h=>{s[l]=h}))),fy(1),function mb(n){return(0,vt.U)(()=>n)}(s),hu(l=>Sy(l)?il.E:Sg(l)))}(s,n,e,r).pipe((0,vt.U)(l=>(n._resolvedData=l,n.data=xb(n,t).resolve,i&&BN(i)&&(n.data[Ag]=i.title),null)))}(l.route,r,n,e)),(0,_i.b)(()=>s++),fy(1),(0,Mi.z)(l=>s===i.length?ct(t):il.E))})}function BN(n){return"string"==typeof n.title||null===n.title}function jT(n){return Vn(e=>{const t=n(e);return t?(0,wn.D)(t).pipe((0,vt.U)(()=>e)):ct(e)})}const Gf=new u.OlP("ROUTES");let tw=(()=>{class n{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,u.f3M)(u.Sil)}loadComponent(t){if(this.componentLoaders.get(t))return this.componentLoaders.get(t);if(t._loadedComponent)return ct(t._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(t);const r=Oc(t.loadComponent()).pipe((0,vt.U)(VN),(0,_i.b)(s=>{this.onLoadEndListener&&this.onLoadEndListener(t),t._loadedComponent=s}),_b(()=>{this.componentLoaders.delete(t)})),i=new Af(r,()=>new or.x).pipe(gb());return this.componentLoaders.set(t,i),i}loadChildren(t,r){if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return ct({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const s=this.loadModuleFactoryOrRoutes(r.loadChildren).pipe((0,vt.U)(h=>{this.onLoadEndListener&&this.onLoadEndListener(r);let m,y,D=!1;Array.isArray(h)?y=h:(m=h.create(t).injector,y=py(m.get(Gf,[],u.XFs.Self|u.XFs.Optional)));return{routes:y.map(Iy),injector:m}}),_b(()=>{this.childrenLoaders.delete(r)})),l=new Af(s,()=>new or.x).pipe(gb());return this.childrenLoaders.set(r,l),l}loadModuleFactoryOrRoutes(t){return Oc(t()).pipe((0,vt.U)(VN),(0,Mi.z)(r=>r instanceof u.YKP||Array.isArray(r)?ct(r):(0,wn.D)(this.compiler.compileModuleAsync(r))))}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function VN(n){return function hk(n){return n&&"object"==typeof n&&"default"in n}(n)?n.default:n}let rw=(()=>{class n{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new or.x,this.configLoader=(0,u.f3M)(tw),this.environmentInjector=(0,u.f3M)(u.lqb),this.urlSerializer=(0,u.f3M)(Ng),this.rootContexts=(0,u.f3M)(Ty),this.navigationId=0,this.afterPreactivation=()=>ct(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=i=>this.events.next(new pN(i)),this.configLoader.onLoadStartListener=i=>this.events.next(new pT(i))}complete(){this.transitions?.complete()}handleNavigationRequest(t){const r=++this.navigationId;this.transitions?.next({...this.transitions.value,...t,id:r})}setupNavigations(t){return this.transitions=new mi({id:0,targetPageId:0,currentUrlTree:t.currentUrlTree,currentRawUrl:t.currentUrlTree,extractedUrl:t.urlHandlingStrategy.extract(t.currentUrlTree),urlAfterRedirects:t.urlHandlingStrategy.extract(t.currentUrlTree),rawUrl:t.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Lf,restoredState:null,currentSnapshot:t.routerState.snapshot,targetSnapshot:null,currentRouterState:t.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe(hr(r=>0!==r.id),(0,vt.U)(r=>({...r,extractedUrl:t.urlHandlingStrategy.extract(r.rawUrl)})),Vn(r=>{let i=!1,s=!1;return ct(r).pipe((0,_i.b)(l=>{this.currentNavigation={id:l.id,initialUrl:l.rawUrl,extractedUrl:l.extractedUrl,trigger:l.source,extras:l.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),Vn(l=>{const h=t.browserUrlTree.toString(),m=!t.navigated||l.extractedUrl.toString()!==h||h!==t.currentUrlTree.toString();if(!m&&"reload"!==(l.extras.onSameUrlNavigation??t.onSameUrlNavigation)){const D="";return this.events.next(new Ey(l.id,t.serializeUrl(r.rawUrl),D,0)),t.rawUrlTree=l.rawUrl,l.resolve(null),il.E}if(t.urlHandlingStrategy.shouldProcessUrl(l.rawUrl))return $T(l.source)&&(t.browserUrlTree=l.extractedUrl),ct(l).pipe(Vn(D=>{const S=this.transitions?.getValue();return this.events.next(new Nb(D.id,this.urlSerializer.serialize(D.extractedUrl),D.source,D.restoredState)),S!==this.transitions?.getValue()?il.E:Promise.resolve(D)}),function xy(n,e,t,r){return Vn(i=>function Kb(n,e,t,r,i){return new Yb(n,e,t,r,i).apply()}(n,e,t,i.extractedUrl,r).pipe((0,vt.U)(s=>({...i,urlAfterRedirects:s}))))}(this.environmentInjector,this.configLoader,this.urlSerializer,t.config),(0,_i.b)(D=>{this.currentNavigation={...this.currentNavigation,finalUrl:D.urlAfterRedirects},r.urlAfterRedirects=D.urlAfterRedirects}),function Xb(n,e,t,r,i){return(0,Mi.z)(s=>function uk(n,e,t,r,i,s,l="emptyOnly"){return new FT(n,e,t,r,i,l,s).recognize().pipe(Vn(h=>null===h?function lk(n){return new Jn.y(e=>e.error(n))}(new ak):ct(h)))}(n,e,t,s.urlAfterRedirects,r.serialize(s.urlAfterRedirects),r,i).pipe((0,vt.U)(l=>({...s,targetSnapshot:l}))))}(this.environmentInjector,this.rootComponentType,t.config,this.urlSerializer,t.paramsInheritanceStrategy),(0,_i.b)(D=>{if(r.targetSnapshot=D.targetSnapshot,"eager"===t.urlUpdateStrategy){if(!D.extras.skipLocationChange){const R=t.urlHandlingStrategy.merge(D.urlAfterRedirects,D.rawUrl);t.setBrowserUrl(R,D)}t.browserUrlTree=D.urlAfterRedirects}const S=new cT(D.id,this.urlSerializer.serialize(D.extractedUrl),this.urlSerializer.serialize(D.urlAfterRedirects),D.targetSnapshot);this.events.next(S)}));if(m&&t.urlHandlingStrategy.shouldProcessUrl(t.rawUrlTree)){const{id:D,extractedUrl:S,source:R,restoredState:P,extras:$}=l,Z=new Nb(D,this.urlSerializer.serialize(S),R,P);this.events.next(Z);const oe=Ob(S,this.rootComponentType).snapshot;return ct(r={...l,targetSnapshot:oe,urlAfterRedirects:S,extras:{...$,skipLocationChange:!1,replaceUrl:!1}})}{const D="";return this.events.next(new Ey(l.id,t.serializeUrl(r.extractedUrl),D,1)),t.rawUrlTree=l.rawUrl,l.resolve(null),il.E}}),(0,_i.b)(l=>{const h=new fN(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot);this.events.next(h)}),(0,vt.U)(l=>r={...l,guards:IT(l.targetSnapshot,l.currentSnapshot,this.rootContexts)}),function MT(n,e){return(0,Mi.z)(t=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:s,canDeactivateChecks:l}}=t;return 0===l.length&&0===s.length?ct({...t,guardsResult:!0}):function RT(n,e,t,r){return(0,wn.D)(n).pipe((0,Mi.z)(i=>function tk(n,e,t,r,i){const s=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return s&&0!==s.length?ct(s.map(h=>{const m=Uf(e)??i,y=Qd(h,m);return Oc(function SN(n){return n&&Vg(n.canDeactivate)}(y)?y.canDeactivate(n,e,t,r):m.runInContext(()=>y(n,e,t,r))).pipe(sl())})).pipe(Jd()):ct(!0)}(i.component,i.route,t,e,r)),sl(i=>!0!==i,!0))}(l,r,i,n).pipe((0,Mi.z)(h=>h&&function IN(n){return"boolean"==typeof n}(h)?function Ay(n,e,t,r){return(0,wn.D)(e).pipe(Rc(i=>Ig(function OT(n,e){return null!==n&&e&&e(new gN(n)),ct(!0)}(i.route.parent,r),function Ny(n,e){return null!==n&&e&&e(new gT(n)),ct(!0)}(i.route,r),function NN(n,e,t){const r=e[e.length-1],s=e.slice(0,e.length-1).reverse().map(l=>function Gb(n){const e=n.routeConfig?n.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:n,guards:e}:null}(l)).filter(l=>null!==l).map(l=>WC(()=>ct(l.guards.map(m=>{const y=Uf(l.node)??t,D=Qd(m,y);return Oc(function AT(n){return n&&Vg(n.canActivateChild)}(D)?D.canActivateChild(r,n):y.runInContext(()=>D(r,n))).pipe(sl())})).pipe(Jd())));return ct(s).pipe(Jd())}(n,i.path,t),function AN(n,e,t){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return ct(!0);const i=r.map(s=>WC(()=>{const l=Uf(e)??t,h=Qd(s,l);return Oc(function ek(n){return n&&Vg(n.canActivate)}(h)?h.canActivate(e,n):l.runInContext(()=>h(e,n))).pipe(sl())}));return ct(i).pipe(Jd())}(n,i.route,t))),sl(i=>!0!==i,!0))}(r,s,n,e):ct(h)),(0,vt.U)(h=>({...t,guardsResult:h})))})}(this.environmentInjector,l=>this.events.next(l)),(0,_i.b)(l=>{if(r.guardsResult=l.guardsResult,Zd(l.guardsResult))throw yT(0,l.guardsResult);const h=new dT(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(l.urlAfterRedirects),l.targetSnapshot,!!l.guardsResult);this.events.next(h)}),hr(l=>!!l.guardsResult||(t.restoreHistory(l),this.cancelNavigationTransition(l,"",3),!1)),jT(l=>{if(l.guards.canActivateChecks.length)return ct(l).pipe((0,_i.b)(h=>{const m=new hT(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}),Vn(h=>{let m=!1;return ct(h).pipe(dk(t.paramsInheritanceStrategy,this.environmentInjector),(0,_i.b)({next:()=>m=!0,complete:()=>{m||(t.restoreHistory(h),this.cancelNavigationTransition(h,"",2))}}))}),(0,_i.b)(h=>{const m=new fT(h.id,this.urlSerializer.serialize(h.extractedUrl),this.urlSerializer.serialize(h.urlAfterRedirects),h.targetSnapshot);this.events.next(m)}))}),jT(l=>{const h=m=>{const y=[];m.routeConfig?.loadComponent&&!m.routeConfig._loadedComponent&&y.push(this.configLoader.loadComponent(m.routeConfig).pipe((0,_i.b)(D=>{m.component=D}),(0,vt.U)(()=>{})));for(const D of m.children)y.push(...h(D));return y};return hy(h(l.targetSnapshot.root)).pipe(G_(),Zr(1))}),jT(()=>this.afterPreactivation()),(0,vt.U)(l=>{const h=function KP(n,e,t){const r=Cy(n,e._root,t?t._root:void 0);return new Rb(r,e)}(t.routeReuseStrategy,l.targetSnapshot,l.currentRouterState);return r={...l,targetRouterState:h}}),(0,_i.b)(l=>{t.currentUrlTree=l.urlAfterRedirects,t.rawUrlTree=t.urlHandlingStrategy.merge(l.urlAfterRedirects,l.rawUrl),t.routerState=l.targetRouterState,"deferred"===t.urlUpdateStrategy&&(l.extras.skipLocationChange||t.setBrowserUrl(t.rawUrlTree,l),t.browserUrlTree=l.urlAfterRedirects)}),((n,e,t)=>(0,vt.U)(r=>(new jb(e,r.targetRouterState,r.currentRouterState,t).activate(n),r)))(this.rootContexts,t.routeReuseStrategy,l=>this.events.next(l)),Zr(1),(0,_i.b)({next:l=>{i=!0,this.lastSuccessfulNavigation=this.currentNavigation,t.navigated=!0,this.events.next(new xc(l.id,this.urlSerializer.serialize(l.extractedUrl),this.urlSerializer.serialize(t.currentUrlTree))),t.titleStrategy?.updateTitle(l.targetRouterState.snapshot),l.resolve(!0)},complete:()=>{i=!0}}),_b(()=>{i||s||this.cancelNavigationTransition(r,"",1),this.currentNavigation?.id===r.id&&(this.currentNavigation=null)}),hu(l=>{if(s=!0,Bb(l)){vT(l)||(t.navigated=!0,t.restoreHistory(r,!0));const h=new kg(r.id,this.urlSerializer.serialize(r.extractedUrl),l.message,l.cancellationCode);if(this.events.next(h),vT(l)){const m=t.urlHandlingStrategy.merge(l.url,t.rawUrlTree),y={skipLocationChange:r.extras.skipLocationChange,replaceUrl:"eager"===t.urlUpdateStrategy||$T(r.source)};t.scheduleNavigation(m,Lf,null,y,{resolve:r.resolve,reject:r.reject,promise:r.promise})}else r.resolve(!1)}else{t.restoreHistory(r,!0);const h=new Mb(r.id,this.urlSerializer.serialize(r.extractedUrl),l,r.targetSnapshot??void 0);this.events.next(h);try{r.resolve(t.errorHandler(l))}catch(m){r.reject(m)}}return il.E}))}))}cancelNavigationTransition(t,r,i){const s=new kg(t.id,this.urlSerializer.serialize(t.extractedUrl),r,i);this.events.next(s),t.resolve(!1)}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();function $T(n){return n!==Lf}let UN=(()=>{class n{buildTitle(t){let r,i=t.root;for(;void 0!==i;)r=this.getResolvedTitleForRoute(i)??r,i=i.children.find(s=>s.outlet===nn);return r}getResolvedTitleForRoute(t){return t.data[Ag]}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(fk)},providedIn:"root"}),n})(),fk=(()=>{class n extends UN{constructor(t){super(),this.title=t}updateTitle(t){const r=this.buildTitle(t);void 0!==r&&this.title.setTitle(r)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Np))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),pk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(jN)},providedIn:"root"}),n})();class gk{shouldDetach(e){return!1}store(e,t){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,t){return e.routeConfig===t.routeConfig}}let jN=(()=>{class n extends gk{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const o=new u.OlP("",{providedIn:"root",factory:()=>({})});let a=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return(0,u.f3M)(c)},providedIn:"root"}),n})(),c=(()=>{class n{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,r){return t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const d=!1;function f(n){throw n}function _(n,e,t){return e.parse("/")}const b={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},C={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let T=(()=>{class n{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,u.f3M)(u.c2e),this.isNgZoneEnabled=!1,this.options=(0,u.f3M)(o,{optional:!0})||{},this.errorHandler=this.options.errorHandler||f,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||_,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,u.f3M)(a),this.routeReuseStrategy=(0,u.f3M)(pk),this.urlCreationStrategy=(0,u.f3M)(WP),this.titleStrategy=(0,u.f3M)(UN),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=py((0,u.f3M)(Gf,{optional:!0})??[]),this.navigationTransitions=(0,u.f3M)(rw),this.urlSerializer=(0,u.f3M)(Ng),this.location=(0,u.f3M)(We),this.isNgZoneEnabled=(0,u.f3M)(u.R0b)instanceof u.R0b&&u.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new fu,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Ob(this.currentUrlTree,null),this.navigationTransitions.setupNavigations(this).subscribe(t=>{this.lastSuccessfulId=t.id,this.currentPageId=this.browserPageId??0},t=>{this.console.warn(`Unhandled Navigation Error: ${t}`)})}resetRootComponentType(t){this.routerState.root.component=t,this.navigationTransitions.rootComponentType=t}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const t=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Lf,t)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const r="popstate"===t.type?"popstate":"hashchange";"popstate"===r&&setTimeout(()=>{this.navigateToSyncWithBrowser(t.url,r,t.state)},0)}))}navigateToSyncWithBrowser(t,r,i){const s={replaceUrl:!0},l=i?.navigationId?i:null;if(i){const m={...i};delete m.navigationId,delete m.\u0275routerPageId,0!==Object.keys(m).length&&(s.state=m)}const h=this.parseUrl(t);this.scheduleNavigation(h,r,l,s)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}resetConfig(t){this.config=t.map(Iy),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,r={}){const{relativeTo:i,queryParams:s,fragment:l,queryParamsHandling:h,preserveFragment:m}=r,y=m?this.currentUrlTree.fragment:l;let D=null;switch(h){case"merge":D={...this.currentUrlTree.queryParams,...s};break;case"preserve":D=this.currentUrlTree.queryParams;break;default:D=s||null}return null!==D&&(D=this.removeEmptyProps(D)),this.urlCreationStrategy.createUrlTree(i,this.routerState,this.currentUrlTree,t,D,y??null)}navigateByUrl(t,r={skipLocationChange:!1}){const i=Zd(t)?t:this.parseUrl(t),s=this.urlHandlingStrategy.merge(i,this.rawUrlTree);return this.scheduleNavigation(s,Lf,null,r)}navigate(t,r={skipLocationChange:!1}){return function M(n){for(let e=0;e<n.length;e++){const t=n[e];if(null==t)throw new u.vHH(4008,d)}}(t),this.navigateByUrl(this.createUrlTree(t,r),r)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let r;try{r=this.urlSerializer.parse(t)}catch(i){r=this.malformedUriErrorHandler(i,this.urlSerializer,t)}return r}isActive(t,r){let i;if(i=!0===r?{...b}:!1===r?{...C}:r,Zd(t))return QC(this.currentUrlTree,t,i);const s=this.parseUrl(t);return QC(this.currentUrlTree,s,i)}removeEmptyProps(t){return Object.keys(t).reduce((r,i)=>{const s=t[i];return null!=s&&(r[i]=s),r},{})}scheduleNavigation(t,r,i,s,l){if(this.disposed)return Promise.resolve(!1);let h,m,y,D;return l?(h=l.resolve,m=l.reject,y=l.promise):y=new Promise((S,R)=>{h=S,m=R}),D="computed"===this.canceledNavigationResolution?i&&i.\u0275routerPageId?i.\u0275routerPageId:(this.browserPageId??0)+1:0,this.navigationTransitions.handleNavigationRequest({targetPageId:D,source:r,restoredState:i,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:t,extras:s,resolve:h,reject:m,promise:y,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),y.catch(S=>Promise.reject(S))}setBrowserUrl(t,r){const i=this.urlSerializer.serialize(t);if(this.location.isCurrentPathEqualTo(i)||r.extras.replaceUrl){const l={...r.extras.state,...this.generateNgRouterState(r.id,this.browserPageId)};this.location.replaceState(i,"",l)}else{const s={...r.extras.state,...this.generateNgRouterState(r.id,r.targetPageId)};this.location.go(i,"",s)}}restoreHistory(t,r=!1){if("computed"===this.canceledNavigationResolution){const s=this.currentPageId-(this.browserPageId??this.currentPageId);0!==s?this.location.historyGo(s):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===s&&(this.resetState(t),this.browserUrlTree=t.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetState(t),this.resetUrlToCurrentUrlTree())}resetState(t){this.routerState=t.currentRouterState,this.currentUrlTree=t.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(t,r){return"computed"===this.canceledNavigationResolution?{navigationId:t,\u0275routerPageId:r}:{navigationId:t}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),x=(()=>{class n{constructor(t,r,i,s,l,h){this.router=t,this.route=r,this.tabIndexAttribute=i,this.renderer=s,this.el=l,this.locationStrategy=h,this._preserveFragment=!1,this._skipLocationChange=!1,this._replaceUrl=!1,this.href=null,this.commands=null,this.onChanges=new or.x;const m=l.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===m||"area"===m,this.isAnchorElement?this.subscription=t.events.subscribe(y=>{y instanceof xc&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}set preserveFragment(t){this._preserveFragment=(0,u.D6c)(t)}get preserveFragment(){return this._preserveFragment}set skipLocationChange(t){this._skipLocationChange=(0,u.D6c)(t)}get skipLocationChange(){return this._skipLocationChange}set replaceUrl(t){this._replaceUrl=(0,u.D6c)(t)}get replaceUrl(){return this._replaceUrl}setTabIndexIfNotOnNativeEl(t){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",t)}ngOnChanges(t){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(t){null!=t?(this.commands=Array.isArray(t)?t:[t],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(t,r,i,s,l){return!!(null===this.urlTree||this.isAnchorElement&&(0!==t||r||i||s||l||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const t=null===this.href?null:(0,u.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",t)}applyAttributeValue(t,r){const i=this.renderer,s=this.el.nativeElement;null!==r?i.setAttribute(s,t,r):i.removeAttribute(s,t)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(T),u.Y36(Pc),u.$8M("tabindex"),u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(yt))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(t,r){1&t&&u.NdJ("click",function(s){return r.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&t&&u.uIk("target",r.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",routerLink:"routerLink"},standalone:!0,features:[u.TTD]}),n})(),V=(()=>{class n{get isActive(){return this._isActive}constructor(t,r,i,s,l){this.router=t,this.element=r,this.renderer=i,this.cdr=s,this.link=l,this.classes=[],this._isActive=!1,this.routerLinkActiveOptions={exact:!1},this.isActiveChange=new u.vpe,this.routerEventsSubscription=t.events.subscribe(h=>{h instanceof xc&&this.update()})}ngAfterContentInit(){ct(this.links.changes,ct(null)).pipe((0,Sf.J)()).subscribe(t=>{this.update(),this.subscribeToEachLinkOnChanges()})}subscribeToEachLinkOnChanges(){this.linkInputChangesSubscription?.unsubscribe();const t=[...this.links.toArray(),this.link].filter(r=>!!r).map(r=>r.onChanges);this.linkInputChangesSubscription=(0,wn.D)(t).pipe((0,Sf.J)()).subscribe(r=>{this._isActive!==this.isLinkActive(this.router)(r)&&this.update()})}set routerLinkActive(t){const r=Array.isArray(t)?t:t.split(" ");this.classes=r.filter(i=>!!i)}ngOnChanges(t){this.update()}ngOnDestroy(){this.routerEventsSubscription.unsubscribe(),this.linkInputChangesSubscription?.unsubscribe()}update(){!this.links||!this.router.navigated||Promise.resolve().then(()=>{const t=this.hasActiveLinks();this._isActive!==t&&(this._isActive=t,this.cdr.markForCheck(),this.classes.forEach(r=>{t?this.renderer.addClass(this.element.nativeElement,r):this.renderer.removeClass(this.element.nativeElement,r)}),t&&void 0!==this.ariaCurrentWhenActive?this.renderer.setAttribute(this.element.nativeElement,"aria-current",this.ariaCurrentWhenActive.toString()):this.renderer.removeAttribute(this.element.nativeElement,"aria-current"),this.isActiveChange.emit(t))})}isLinkActive(t){const r=function q(n){return!!n.paths}(this.routerLinkActiveOptions)?this.routerLinkActiveOptions:this.routerLinkActiveOptions.exact||!1;return i=>!!i.urlTree&&t.isActive(i.urlTree,r)}hasActiveLinks(){const t=this.isLinkActive(this.router);return this.link&&t(this.link)||this.links.some(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(T),u.Y36(u.SBq),u.Y36(u.Qsj),u.Y36(u.sBO),u.Y36(x,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","routerLinkActive",""]],contentQueries:function(t,r,i){if(1&t&&u.Suo(i,x,5),2&t){let s;u.iGM(s=u.CRH())&&(r.links=s)}},inputs:{routerLinkActiveOptions:"routerLinkActiveOptions",ariaCurrentWhenActive:"ariaCurrentWhenActive",routerLinkActive:"routerLinkActive"},outputs:{isActiveChange:"isActiveChange"},exportAs:["routerLinkActive"],standalone:!0,features:[u.TTD]}),n})();class ne{}let at=(()=>{class n{constructor(t,r,i,s,l){this.router=t,this.injector=i,this.preloadingStrategy=s,this.loader=l}setUpPreloading(){this.subscription=this.router.events.pipe(hr(t=>t instanceof xc),Rc(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,r){const i=[];for(const s of r){s.providers&&!s._injector&&(s._injector=(0,u.MMx)(s.providers,t,`Route: ${s.path}`));const l=s._injector??t,h=s._loadedInjector??l;(s.loadChildren&&!s._loadedRoutes&&void 0===s.canLoad||s.loadComponent&&!s._loadedComponent)&&i.push(this.preloadConfig(l,s)),(s.children||s._loadedRoutes)&&i.push(this.processRoutes(h,s.children??s._loadedRoutes))}return(0,wn.D)(i).pipe((0,Sf.J)())}preloadConfig(t,r){return this.preloadingStrategy.preload(r,()=>{let i;i=r.loadChildren&&void 0===r.canLoad?this.loader.loadChildren(t,r):ct(null);const s=i.pipe((0,Mi.z)(l=>null===l?ct(void 0):(r._loadedRoutes=l.routes,r._loadedInjector=l.injector,this.processRoutes(l.injector??t,l.routes))));if(r.loadComponent&&!r._loadedComponent){const l=this.loader.loadComponent(r);return(0,wn.D)([s,l]).pipe((0,Sf.J)())}return s})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(T),u.LFG(u.Sil),u.LFG(u.lqb),u.LFG(ne),u.LFG(tw))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();const Dt=new u.OlP("");let Bt=(()=>{class n{constructor(t,r,i,s,l={}){this.urlSerializer=t,this.transitions=r,this.viewportScroller=i,this.zone=s,this.options=l,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},l.scrollPositionRestoration=l.scrollPositionRestoration||"disabled",l.anchorScrolling=l.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof Nb?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof xc&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.urlSerializer.parse(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(t=>{t instanceof mN&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,r){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new mN(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,r))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return n.\u0275fac=function(t){u.$Z()},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();var Me=(()=>((Me=Me||{})[Me.COMPLETE=0]="COMPLETE",Me[Me.FAILED=1]="FAILED",Me[Me.REDIRECTING=2]="REDIRECTING",Me))();const $n=!1;function $f(n,e){return{\u0275kind:n,\u0275providers:e}}const $N=new u.OlP("",{providedIn:"root",factory:()=>!1});function _k(){const n=(0,u.f3M)(u.zs3);return e=>{const t=n.get(u.z2F);if(e!==t.components[0])return;const r=n.get(T),i=n.get(yk);1===n.get(HN)&&r.initialNavigation(),n.get(vk,null,u.XFs.Optional)?.setUpPreloading(),n.get(Dt,null,u.XFs.Optional)?.init(),r.resetRootComponentType(t.componentTypes[0]),i.closed||(i.next(),i.complete(),i.unsubscribe())}}const yk=new u.OlP($n?"bootstrap done indicator":"",{factory:()=>new or.x}),HN=new u.OlP($n?"initial navigation":"",{providedIn:"root",factory:()=>1});function vG(){let n=[];return n=$n?[{provide:u.Xts,multi:!0,useFactory:()=>{const e=(0,u.f3M)(T);return()=>e.events.subscribe(t=>{console.group?.(`Router Event: ${t.constructor.name}`),console.log(function GP(n){if(!("type"in n))return`Unknown Router Event: ${n.constructor.name}`;switch(n.type){case 14:return`ActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 13:return`ActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 12:return`ChildActivationEnd(path: '${n.snapshot.routeConfig?.path||""}')`;case 11:return`ChildActivationStart(path: '${n.snapshot.routeConfig?.path||""}')`;case 8:return`GuardsCheckEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state}, shouldActivate: ${n.shouldActivate})`;case 7:return`GuardsCheckStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 2:return`NavigationCancel(id: ${n.id}, url: '${n.url}')`;case 16:return`NavigationSkipped(id: ${n.id}, url: '${n.url}')`;case 1:return`NavigationEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}')`;case 3:return`NavigationError(id: ${n.id}, url: '${n.url}', error: ${n.error})`;case 0:return`NavigationStart(id: ${n.id}, url: '${n.url}')`;case 6:return`ResolveEnd(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 5:return`ResolveStart(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 10:return`RouteConfigLoadEnd(path: ${n.route.path})`;case 9:return`RouteConfigLoadStart(path: ${n.route.path})`;case 4:return`RoutesRecognized(id: ${n.id}, url: '${n.url}', urlAfterRedirects: '${n.urlAfterRedirects}', state: ${n.state})`;case 15:return`Scroll(anchor: '${n.anchor}', position: '${n.position?`${n.position[0]}, ${n.position[1]}`:null}')`}}(t)),console.log(t),console.groupEnd?.()})}}]:[],$f(1,n)}const vk=new u.OlP($n?"router preloader":"");function bG(n){return $f(0,[{provide:vk,useExisting:at},{provide:ne,useExisting:n}])}const iw=!1,bk=new u.OlP(iw?"router duplicate forRoot guard":"ROUTER_FORROOT_GUARD"),wG=[We,{provide:Ng,useClass:_y},T,Ty,{provide:Pc,useFactory:function GN(n){return n.routerState.root},deps:[T]},tw,iw?{provide:$N,useValue:!0}:[]];function DG(){return new u.PXZ("Router",T)}let wk=(()=>{class n{constructor(t){}static forRoot(t,r){return{ngModule:n,providers:[wG,iw&&r?.enableTracing?vG().\u0275providers:[],{provide:Gf,multi:!0,useValue:t},{provide:bk,useFactory:IG,deps:[[T,new u.FiY,new u.tp0]]},{provide:o,useValue:r||{}},r?.useHash?{provide:yt,useClass:Fe}:{provide:yt,useClass:ke},{provide:Dt,useFactory:()=>{const n=(0,u.f3M)(vl),e=(0,u.f3M)(u.R0b),t=(0,u.f3M)(o),r=(0,u.f3M)(rw),i=(0,u.f3M)(Ng);return t.scrollOffset&&n.setOffset(t.scrollOffset),new Bt(i,r,n,e,t)}},r?.preloadingStrategy?bG(r.preloadingStrategy).\u0275providers:[],{provide:u.PXZ,multi:!0,useFactory:DG},r?.initialNavigation?SG(r):[],[{provide:Dk,useFactory:_k},{provide:u.tb,multi:!0,useExisting:Dk}]]}}static forChild(t){return{ngModule:n,providers:[{provide:Gf,multi:!0,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(bk,8))},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[wT]}),n})();function IG(n){if(iw&&n)throw new u.vHH(4007,"The Router was provided more than once. This can happen if 'forRoot' is used outside of the root injector. Lazy loaded modules should use RouterModule.forChild() instead.");return"guarded"}function SG(n){return["disabled"===n.initialNavigation?$f(3,[{provide:u.ip1,multi:!0,useFactory:()=>{const e=(0,u.f3M)(T);return()=>{e.setUpLocationChangeListener()}}},{provide:HN,useValue:2}]).\u0275providers:[],"enabledBlocking"===n.initialNavigation?$f(2,[{provide:HN,useValue:0},{provide:u.ip1,multi:!0,deps:[u.zs3],useFactory:e=>{const t=e.get(ve,Promise.resolve());return()=>t.then(()=>new Promise(r=>{const i=e.get(T),s=e.get(yk);(function Jt(n,e){n.events.pipe(hr(t=>t instanceof xc||t instanceof kg||t instanceof Mb||t instanceof Ey),(0,vt.U)(t=>t instanceof xc||t instanceof Ey?Me.COMPLETE:t instanceof kg&&(0===t.code||1===t.code)?Me.REDIRECTING:Me.FAILED),hr(t=>t!==Me.REDIRECTING),Zr(1)).subscribe(()=>{e()})})(i,()=>{r(!0)}),e.get(rw).afterPreactivation=()=>(r(!0),s.closed?ct(void 0):s),i.initialNavigation()}))}}]).\u0275providers:[]]}const Dk=new u.OlP(iw?"Router Initializer":"");let NG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-home"]],decls:2,vars:0,template:function(t,r){1&t&&(u.TgZ(0,"p"),u._uU(1,"home works!"),u.qZA())}}),n})();function zN(){return(0,cr.e)((n,e)=>{let t,r=!1;n.subscribe((0,yn.x)(e,i=>{const s=t;t=i,r&&e.next([s,i]),r=!0}))})}var ft,MG=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},mu={},WN=WN||{},rn=MG||self;function HT(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function sw(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var qN="closure_uid_"+(1e9*Math.random()>>>0),OG=0;function xG(n,e,t){return n.call.apply(n.bind,arguments)}function PG(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function Hs(n,e,t){return(Hs=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?xG:PG).apply(null,arguments)}function zT(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function cs(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,s){for(var l=Array(arguments.length-2),h=2;h<arguments.length;h++)l[h-2]=arguments[h];return e.prototype[i].apply(r,l)}}function Hf(){this.s=this.s,this.o=this.o}Hf.prototype.s=!1,Hf.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function RG(n){Object.prototype.hasOwnProperty.call(n,qN)&&n[qN]||(n[qN]=++OG)}(this)},Hf.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Ek=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function KN(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function Ck(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(HT(r)){const i=n.length||0,s=r.length||0;n.length=i+s;for(let l=0;l<s;l++)n[i+l]=r[l]}else n.push(r)}}function zs(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}zs.prototype.h=function(){this.defaultPrevented=!0};var FG=function(){if(!rn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{rn.addEventListener("test",()=>{},e),rn.removeEventListener("test",()=>{},e)}catch{}return n}();function ow(n){return/^[\s\xa0]*$/.test(n)}function WT(){var n=rn.navigator;return n&&(n=n.userAgent)?n:""}function Fc(n){return-1!=WT().indexOf(n)}function YN(n){return YN[" "](n),n}YN[" "]=function(){};var QN,n,BG=Fc("Opera"),Py=Fc("Trident")||Fc("MSIE"),Tk=Fc("Edge"),ZN=Tk||Py,Ik=Fc("Gecko")&&!(-1!=WT().toLowerCase().indexOf("webkit")&&!Fc("Edge"))&&!(Fc("Trident")||Fc("MSIE"))&&!Fc("Edge"),VG=-1!=WT().toLowerCase().indexOf("webkit")&&!Fc("Edge");function Sk(){var n=rn.document;return n?n.documentMode:void 0}e:{var JN="",XN=(n=WT(),Ik?/rv:([^\);]+)(\)|;)/.exec(n):Tk?/Edge\/([\d\.]+)/.exec(n):Py?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):VG?/WebKit\/(\S+)/.exec(n):BG?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(XN&&(JN=XN?XN[1]:""),Py){var eM=Sk();if(null!=eM&&eM>parseFloat(JN)){QN=String(eM);break e}}QN=JN}var UG=rn.document&&Py&&(Sk()||parseInt(QN,10))||void 0;function aw(n,e){if(zs.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Ik){e:{try{YN(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:jG[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&aw.$.h.call(this)}}cs(aw,zs);var jG={2:"touch",3:"pen",4:"mouse"};aw.prototype.h=function(){aw.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var lw="closure_listenable_"+(1e6*Math.random()|0),GG=0;function $G(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++GG,this.fa=this.ia=!1}function qT(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function nM(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function Nk(n){const e={};for(const t in n)e[t]=n[t];return e}const Mk="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rk(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let s=0;s<Mk.length;s++)t=Mk[s],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function KT(n){this.src=n,this.g={},this.h=0}function rM(n,e){var t=e.type;if(t in n.g){var s,r=n.g[t],i=Ek(r,e);(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(qT(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function iM(n,e,t,r){for(var i=0;i<n.length;++i){var s=n[i];if(!s.fa&&s.listener==e&&s.capture==!!t&&s.la==r)return i}return-1}KT.prototype.add=function(n,e,t,r,i){var s=n.toString();(n=this.g[s])||(n=this.g[s]=[],this.h++);var l=iM(n,e,r,i);return-1<l?(e=n[l],t||(e.ia=!1)):((e=new $G(e,this.src,s,!!r,i)).ia=t,n.push(e)),e};var sM="closure_lm_"+(1e6*Math.random()|0),oM={};function Ok(n,e,t,r,i){if(r&&r.once)return Pk(n,e,t,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)Ok(n,e[s],t,r,i);return null}return t=cM(t),n&&n[lw]?n.O(e,t,sw(r)?!!r.capture:!!r,i):xk(n,e,t,!1,r,i)}function xk(n,e,t,r,i,s){if(!e)throw Error("Invalid event type");var l=sw(i)?!!i.capture:!!i,h=lM(n);if(h||(n[sM]=h=new KT(n)),(t=h.add(e,t,r,l,s)).proxy)return t;if(r=function zG(){const e=WG;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)FG||(i=l),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(Fk(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function Pk(n,e,t,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)Pk(n,e[s],t,r,i);return null}return t=cM(t),n&&n[lw]?n.P(e,t,sw(r)?!!r.capture:!!r,i):xk(n,e,t,!0,r,i)}function kk(n,e,t,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)kk(n,e[s],t,r,i);else r=sw(r)?!!r.capture:!!r,t=cM(t),n&&n[lw]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=iM(s=n.g[e],t,r,i))&&(qT(s[t]),Array.prototype.splice.call(s,t,1),0==s.length&&(delete n.g[e],n.h--))):n&&(n=lM(n))&&(e=n.g[e.toString()],n=-1,e&&(n=iM(e,t,r,i)),(t=-1<n?e[n]:null)&&aM(t))}function aM(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[lw])rM(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(Fk(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=lM(e))?(rM(t,n),0==t.h&&(t.src=null,e[sM]=null)):qT(n)}}}function Fk(n){return n in oM?oM[n]:oM[n]="on"+n}function WG(n,e){if(n.fa)n=!0;else{e=new aw(e,this);var t=n.listener,r=n.la||n.src;n.ia&&aM(n),n=t.call(r,e)}return n}function lM(n){return(n=n[sM])instanceof KT?n:null}var uM="__closure_events_fn_"+(1e9*Math.random()>>>0);function cM(n){return"function"==typeof n?n:(n[uM]||(n[uM]=function(e){return n.handleEvent(e)}),n[uM])}function ds(){Hf.call(this),this.i=new KT(this),this.S=this,this.J=null}function Is(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new zs(e,n);else if(e instanceof zs)e.target=e.target||n;else{var i=e;Rk(e=new zs(r,n),i)}if(i=!0,t)for(var s=t.length-1;0<=s;s--){var l=e.g=t[s];i=YT(l,r,!0,e)&&i}if(i=YT(l=e.g=n,r,!0,e)&&i,i=YT(l,r,!1,e)&&i,t)for(s=0;s<t.length;s++)i=YT(l=e.g=t[s],r,!1,e)&&i}function YT(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var l=e[s];if(l&&!l.fa&&l.capture==t){var h=l.listener,m=l.la||l.src;l.ia&&rM(n.i,l),i=!1!==h.call(m,r)&&i}}return i&&!r.defaultPrevented}cs(ds,Hf),ds.prototype[lw]=!0,ds.prototype.removeEventListener=function(n,e,t,r){kk(this,n,e,t,r)},ds.prototype.N=function(){if(ds.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)qT(t[r]);delete n.g[e],n.h--}}this.J=null},ds.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ds.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var dM=rn.JSON.stringify;function KG(){var n=hM;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var Lk=new class qG{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ZG,n=>n.reset());class ZG{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function QG(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function JG(n){rn.setTimeout(()=>{throw n},0)}let uw,cw=!1,hM=new class YG{constructor(){this.h=this.g=null}add(e,t){const r=Lk.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},Bk=()=>{const n=rn.Promise.resolve(void 0);uw=()=>{n.then(XG)}};var XG=()=>{for(var n;n=KG();){try{n.h.call(n.g)}catch(t){JG(t)}var e=Lk;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}cw=!1};function ZT(n,e){ds.call(this),this.h=n||1,this.g=e||rn,this.j=Hs(this.qb,this),this.l=Date.now()}function fM(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function pM(n,e,t){if("function"==typeof n)t&&(n=Hs(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=Hs(n.handleEvent,n)}return 2147483647<Number(e)?-1:rn.setTimeout(n,e||0)}function Vk(n){n.g=pM(()=>{n.g=null,n.i&&(n.i=!1,Vk(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}cs(ZT,ds),(ft=ZT.prototype).ga=!1,ft.T=null,ft.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),Is(this,"tick"),this.ga&&(fM(this),this.start()))}},ft.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},ft.N=function(){ZT.$.N.call(this),fM(this),delete this.g};class e$ extends Hf{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Vk(this)}N(){super.N(),this.g&&(rn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function dw(n){Hf.call(this),this.h=n,this.g={}}cs(dw,Hf);var Uk=[];function jk(n,e,t,r){Array.isArray(t)||(t&&(Uk[0]=t.toString()),t=Uk);for(var i=0;i<t.length;i++){var s=Ok(e,t[i],r||n.handleEvent,!1,n.h||n);if(!s)break;n.g[s.key]=s}}function Gk(n){nM(n.g,function(e,t){this.g.hasOwnProperty(t)&&aM(e)},n),n.g={}}function QT(){this.g=!0}function ky(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function i$(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if("noop"!=s&&"stop"!=s&&"close"!=s)for(var l=1;l<i.length;l++)i[l]=""}}}return dM(t)}catch{return e}}(n,t)+(r?" "+r:"")})}dw.prototype.N=function(){dw.$.N.call(this),Gk(this)},dw.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},QT.prototype.Ea=function(){this.g=!1},QT.prototype.info=function(){};var $g={},$k=null;function JT(){return $k=$k||new ds}function Hk(n){zs.call(this,$g.Ta,n)}function hw(n){const e=JT();Is(e,new Hk(e))}function zk(n,e){zs.call(this,$g.STAT_EVENT,n),this.stat=e}function Eo(n){const e=JT();Is(e,new zk(e,n))}function Wk(n,e){zs.call(this,$g.Ua,n),this.size=e}function fw(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return rn.setTimeout(function(){n()},e)}$g.Ta="serverreachability",cs(Hk,zs),$g.STAT_EVENT="statevent",cs(zk,zs),$g.Ua="timingevent",cs(Wk,zs);var XT={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},qk={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function gM(){}function Yk(){}gM.prototype.h=null;var yM,pw={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function mM(){zs.call(this,"d")}function _M(){zs.call(this,"c")}function eI(){}function gw(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new dw(this),this.P=s$,this.V=new ZT(n=ZN?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new Zk}function Zk(){this.i=null,this.g="",this.h=!1}cs(mM,zs),cs(_M,zs),cs(eI,gM),eI.prototype.g=function(){return new XMLHttpRequest},eI.prototype.i=function(){return{}},yM=new eI;var s$=45e3,vM={},tI={};function bM(n,e,t){n.L=1,n.v=sI(Xd(e)),n.s=t,n.S=!0,Qk(n,null)}function Qk(n,e){n.G=Date.now(),mw(n),n.A=Xd(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),aF(t.i,"t",r),n.C=0,t=n.l.J,n.h=new Zk,n.g=RF(n.l,t?e:null,!n.s),0<n.O&&(n.M=new e$(Hs(n.Pa,n,n.g),n.O)),jk(n.U,n.g,"readystatechange",n.nb),e=n.I?Nk(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),hw(),function t$(n,e,t,r,i,s){n.info(function(){if(n.g)if(s)for(var l="",h=s.split("&"),m=0;m<h.length;m++){var y=h[m].split("=");if(1<y.length){var D=y[0];y=y[1];var S=D.split("_");l=2<=S.length&&"type"==S[1]?l+(D+"=")+y+"&":l+(D+"=redacted&")}}else l=null;else l=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+l})}(n.j,n.u,n.A,n.m,n.W,n.s)}function Jk(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function Xk(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=o$(n,t),i==tI){4==e&&(n.o=4,Eo(14),r=!1),ky(n.j,n.m,null,"[Incomplete Response]");break}if(i==vM){n.o=4,Eo(15),ky(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}ky(n.j,n.m,i,null),wM(n,i)}Jk(n)&&i!=tI&&i!=vM&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,Eo(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),AM(e),e.M=!0,Eo(11))):(ky(n.j,n.m,t,"[Invalid Chunked Response]"),Hg(n),_w(n))}function o$(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?tI:(t=Number(e.substring(t,r)),isNaN(t)?vM:(r+=1)+t>e.length?tI:(e=e.slice(r,r+t),n.C=r+t,e))}function mw(n){n.Y=Date.now()+n.P,eF(n,n.P)}function eF(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=fw(Hs(n.lb,n),e)}function nI(n){n.B&&(rn.clearTimeout(n.B),n.B=null)}function _w(n){0==n.l.H||n.J||SF(n.l,n)}function Hg(n){nI(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,fM(n.V),Gk(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function wM(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||DM(t.i,n)))if(!n.K&&DM(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;dI(t),uI(t)}SM(t),Eo(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=fw(Hs(t.ib,t),6e3));if(1>=cF(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Wg(t,11)}else if((n.K||t.g==n)&&dI(t),!ow(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let y=i[e];if(t.V=y[0],y=y[1],2==t.H)if("c"==y[0]){t.K=y[1],t.pa=y[2];const D=y[3];null!=D&&(t.ra=D,t.l.info("VER="+t.ra));const S=y[4];null!=S&&(t.Ga=S,t.l.info("SVER="+t.Ga));const R=y[5];null!=R&&"number"==typeof R&&0<R&&(t.L=r=1.5*R,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const P=n.g;if(P){const $=P.g?P.g.getResponseHeader("X-Client-Wire-Protocol"):null;if($){var s=r.i;s.g||-1==$.indexOf("spdy")&&-1==$.indexOf("quic")&&-1==$.indexOf("h2")||(s.j=s.l,s.g=new Set,s.h&&(EM(s,s.h),s.h=null))}if(r.F){const Z=P.g?P.g.getResponseHeader("X-HTTP-Session-Id"):null;Z&&(r.Da=Z,Er(r.I,r.F,Z))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var l=n;if((r=t).wa=MF(r,r.J?r.pa:null,r.Y),l.K){dF(r.i,l);var h=l,m=r.L;m&&h.setTimeout(m),h.B&&(nI(h),mw(h)),r.g=l}else TF(r);0<t.j.length&&cI(t)}else"stop"!=y[0]&&"close"!=y[0]||Wg(t,7);else 3==t.H&&("stop"==y[0]||"close"==y[0]?"stop"==y[0]?Wg(t,7):IM(t):"noop"!=y[0]&&t.h&&t.h.Aa(y),t.A=0)}hw()}catch{}}function tF(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(HT(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function l$(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(HT(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function a$(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(HT(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],t&&t[s],n)}(ft=gw.prototype).setTimeout=function(n){this.P=n},ft.nb=function(n){n=n.target;const e=this.M;e&&3==Lc(n)?e.l():this.Pa(n)},ft.Pa=function(n){try{if(n==this.g)e:{const D=Lc(this.g);var e=this.g.Ia();if(this.g.da(),!(3>D)&&(3!=D||ZN||this.g&&(this.h.h||this.g.ja()||vF(this.g)))){this.J||4!=D||7==e||hw(),nI(this);var t=this.g.da();this.ca=t;t:if(Jk(this)){var r=vF(this.g);n="";var i=r.length,s=4==Lc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){Hg(this),_w(this);var l="";break t}this.h.i=new rn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,l=this.h.g}else l=this.g.ja();if(this.i=200==t,function n$(n,e,t,r,i,s,l){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+s+" "+l})}(this.j,this.u,this.A,this.m,this.W,D,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var h,m=this.g;if((h=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!ow(h)){var y=h;break t}}y=null}if(!(t=y)){this.i=!1,this.o=3,Eo(12),Hg(this),_w(this);break e}ky(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,wM(this,t)}this.S?(Xk(this,D,l),ZN&&this.i&&3==D&&(jk(this.U,this.V,"tick",this.mb),this.V.start())):(ky(this.j,this.m,l,null),wM(this,l)),4==D&&Hg(this),this.i&&!this.J&&(4==D?SF(this.l,this):(this.i=!1,mw(this)))}else(function I$(n){const e={};n=(n.g&&2<=Lc(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(ow(n[r]))continue;var t=QG(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const s=e[i]||[];e[i]=s,s.push(t)}!function HG(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<l.indexOf("Unknown SID")?(this.o=3,Eo(12)):(this.o=0,Eo(13)),Hg(this),_w(this)}}}catch{}},ft.mb=function(){if(this.g){var n=Lc(this.g),e=this.g.ja();this.C<e.length&&(nI(this),Xk(this,n,e),this.i&&4!=n&&mw(this))}},ft.cancel=function(){this.J=!0,Hg(this)},ft.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function r$(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(hw(),Eo(17)),Hg(this),this.o=2,_w(this)):eF(this,this.Y-n)};var nF=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function zg(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof zg){this.h=n.h,rI(this,n.j),this.s=n.s,this.g=n.g,iI(this,n.m),this.l=n.l;var e=n.i,t=new bw;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),rF(this,t),this.o=n.o}else n&&(e=String(n).match(nF))?(this.h=!1,rI(this,e[1]||"",!0),this.s=yw(e[2]||""),this.g=yw(e[3]||"",!0),iI(this,e[4]),this.l=yw(e[5]||"",!0),rF(this,e[6]||"",!0),this.o=yw(e[7]||"")):(this.h=!1,this.i=new bw(null,this.h))}function Xd(n){return new zg(n)}function rI(n,e,t){n.j=t?yw(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function iI(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function rF(n,e,t){e instanceof bw?(n.i=e,function g$(n,e){e&&!n.j&&(zf(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&(sF(this,r),aF(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=vw(e,f$)),n.i=new bw(e,n.h))}function Er(n,e,t){n.i.set(e,t)}function sI(n){return Er(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function yw(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function vw(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,c$),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function c$(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}zg.prototype.toString=function(){var n=[],e=this.j;e&&n.push(vw(e,iF,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(vw(e,iF,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(vw(t,"/"==t.charAt(0)?h$:d$,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",vw(t,p$)),n.join("")};var iF=/[#\/\?@]/g,d$=/[#\?:]/g,h$=/[#\?]/g,f$=/[#\?@]/g,p$=/#/g;function bw(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function zf(n){n.g||(n.g=new Map,n.h=0,n.i&&function u$(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var s=n[t].substring(0,r);i=n[t].substring(r+1)}else s=n[t];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function sF(n,e){zf(n),e=Fy(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function oF(n,e){return zf(n),e=Fy(n,e),n.g.has(e)}function aF(n,e,t){sF(n,e),0<t.length&&(n.i=null,n.g.set(Fy(n,e),KN(t)),n.h+=t.length)}function Fy(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function lF(n){this.l=n||_$,n=rn.PerformanceNavigationTiming?0<(n=rn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(rn.g&&rn.g.Ka&&rn.g.Ka()&&rn.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(ft=bw.prototype).add=function(n,e){zf(this),this.i=null,n=Fy(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},ft.forEach=function(n,e){zf(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},ft.ta=function(){zf(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let s=0;s<i.length;s++)t.push(e[r])}return t},ft.Z=function(n){zf(this);let e=[];if("string"==typeof n)oF(this,n)&&(e=e.concat(this.g.get(Fy(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},ft.set=function(n,e){return zf(this),this.i=null,oF(this,n=Fy(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},ft.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},ft.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const s=encodeURIComponent(String(r)),l=this.Z(r);for(r=0;r<l.length;r++){var i=s;""!==l[r]&&(i+="="+encodeURIComponent(String(l[r]))),n.push(i)}}return this.i=n.join("&")};var _$=10;function uF(n){return!!n.h||!!n.g&&n.g.size>=n.j}function cF(n){return n.h?1:n.g?n.g.size:0}function DM(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function EM(n,e){n.g?n.g.add(e):n.h=e}function dF(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function hF(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return KN(n.i)}lF.prototype.cancel=function(){if(this.i=hF(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var y$=class{stringify(n){return rn.JSON.stringify(n,void 0)}parse(n){return rn.JSON.parse(n,void 0)}};function v$(){this.g=new y$}function b$(n,e,t){const r=t||"";try{tF(n,function(i,s){let l=i;sw(i)&&(l=dM(i)),e.push(r+s+"="+encodeURIComponent(l))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function oI(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function ww(n){this.l=n.fc||null,this.j=n.ob||!1}function aI(n,e){ds.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=CM,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}cs(ww,gM),ww.prototype.g=function(){return new aI(this.l,this.j)},ww.prototype.i=function(n){return function(){return n}}({}),cs(aI,ds);var CM=0;function fF(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Dw(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Ew(n)}function Ew(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(ft=aI.prototype).open=function(n,e){if(this.readyState!=CM)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Ew(this)},ft.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||rn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},ft.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Dw(this)),this.readyState=CM},ft.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Ew(this)),this.g&&(this.readyState=3,Ew(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof rn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;fF(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},ft.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Dw(this):Ew(this),3==this.readyState&&fF(this)}},ft.Za=function(n){this.g&&(this.response=this.responseText=n,Dw(this))},ft.Ya=function(n){this.g&&(this.response=n,Dw(this))},ft.ka=function(){this.g&&Dw(this)},ft.setRequestHeader=function(n,e){this.v.append(n,e)},ft.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},ft.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(aI.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var D$=rn.JSON.parse;function ti(n){ds.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=pF,this.L=this.M=!1}cs(ti,ds);var pF="",E$=/^https?$/i,C$=["POST","PUT"];function gF(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,mF(n),lI(n)}function mF(n){n.F||(n.F=!0,Is(n,"complete"),Is(n,"error"))}function _F(n){if(n.h&&typeof WN<"u"&&(!n.C[1]||4!=Lc(n)||2!=n.da()))if(n.v&&4==Lc(n))pM(n.La,0,n);else if(Is(n,"readystatechange"),4==Lc(n)){n.h=!1;try{const l=n.da();e:switch(l){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===l){var i=String(n.I).match(nF)[1]||null;!i&&rn.self&&rn.self.location&&(i=rn.self.location.protocol.slice(0,-1)),r=!E$.test(i?i.toLowerCase():"")}t=r}if(t)Is(n,"complete"),Is(n,"success");else{n.m=6;try{var s=2<Lc(n)?n.g.statusText:""}catch{s=""}n.j=s+" ["+n.da()+"]",mF(n)}}finally{lI(n)}}}function lI(n,e){if(n.g){yF(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||Is(n,"ready");try{t.onreadystatechange=r}catch{}}}function yF(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(rn.clearTimeout(n.A),n.A=null)}function Lc(n){return n.g?n.g.readyState:0}function vF(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case pF:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function bF(n){let e="";return nM(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function TM(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=bF(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):Er(n,e,t))}function Cw(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function wF(n){this.Ga=0,this.j=[],this.l=new QT,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Cw("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Cw("baseRetryDelayMs",5e3,n),this.hb=Cw("retryDelaySeedMs",1e4,n),this.eb=Cw("forwardChannelMaxRetries",2,n),this.xa=Cw("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new lF(n&&n.concurrentRequestLimit),this.Ja=new v$,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function IM(n){if(DF(n),3==n.H){var e=n.W++,t=Xd(n.I);if(Er(t,"SID",n.K),Er(t,"RID",e),Er(t,"TYPE","terminate"),Tw(n,t),(e=new gw(n,n.l,e)).L=2,e.v=sI(Xd(t)),t=!1,rn.navigator&&rn.navigator.sendBeacon)try{t=rn.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&rn.Image&&((new Image).src=e.v,t=!0),t||(e.g=RF(e.l,null),e.g.ha(e.v)),e.G=Date.now(),mw(e)}NF(n)}function uI(n){n.g&&(AM(n),n.g.cancel(),n.g=null)}function DF(n){uI(n),n.u&&(rn.clearTimeout(n.u),n.u=null),dI(n),n.i.cancel(),n.m&&("number"==typeof n.m&&rn.clearTimeout(n.m),n.m=null)}function cI(n){if(!uF(n.i)&&!n.m){n.m=!0;var e=n.Na;uw||Bk(),cw||(uw(),cw=!0),hM.add(e,n),n.C=0}}function EF(n,e){var t;t=e?e.m:n.W++;const r=Xd(n.I);Er(r,"SID",n.K),Er(r,"RID",t),Er(r,"AID",n.V),Tw(n,r),n.o&&n.s&&TM(r,n.o,n.s),t=new gw(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=CF(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),EM(n.i,t),bM(t,r,e)}function Tw(n,e){n.na&&nM(n.na,function(t,r){Er(e,r,t)}),n.h&&tF({},function(t,r){Er(e,r,t)})}function CF(n,e,t){t=Math.min(n.j.length,t);var r=n.h?Hs(n.h.Va,n.h,n):null;e:{var i=n.j;let s=-1;for(;;){const l=["count="+t];-1==s?0<t?(s=i[0].g,l.push("ofs="+s)):s=0:l.push("ofs="+s);let h=!0;for(let m=0;m<t;m++){let y=i[m].g;const D=i[m].map;if(y-=s,0>y)s=Math.max(0,i[m].g-100),h=!1;else try{b$(D,l,"req"+y+"_")}catch{r&&r(D)}}if(h){r=l.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function TF(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;uw||Bk(),cw||(uw(),cw=!0),hM.add(e,n),n.A=0}}function SM(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=fw(Hs(n.Ma,n),AF(n,n.A)),n.A++,0))}function AM(n){null!=n.B&&(rn.clearTimeout(n.B),n.B=null)}function IF(n){n.g=new gw(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=Xd(n.wa);Er(e,"RID","rpc"),Er(e,"SID",n.K),Er(e,"AID",n.V),Er(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&Er(e,"TO",n.qa),Er(e,"TYPE","xmlhttp"),Tw(n,e),n.o&&n.s&&TM(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=sI(Xd(e)),t.s=null,t.S=!0,Qk(t,n)}function dI(n){null!=n.v&&(rn.clearTimeout(n.v),n.v=null)}function SF(n,e){var t=null;if(n.g==e){dI(n),AM(n),n.g=null;var r=2}else{if(!DM(n.i,e))return;t=e.F,dF(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;Is(r=JT(),new Wk(r,t)),cI(n)}else TF(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function S$(n,e){return!(cF(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=fw(Hs(n.Na,n,e),AF(n,n.C)),n.C++,0)))}(n,e)||2==r&&SM(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Wg(n,5);break;case 4:Wg(n,10);break;case 3:Wg(n,6);break;default:Wg(n,2)}}function AF(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Wg(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=Hs(n.pb,n);t||(t=new zg("//www.google.com/images/cleardot.gif"),rn.location&&"http"==rn.location.protocol||rI(t,"https"),sI(t)),function w$(n,e){const t=new QT;if(rn.Image){const r=new Image;r.onload=zT(oI,t,r,"TestLoadImage: loaded",!0,e),r.onerror=zT(oI,t,r,"TestLoadImage: error",!1,e),r.onabort=zT(oI,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=zT(oI,t,r,"TestLoadImage: timeout",!1,e),rn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else Eo(2);n.H=0,n.h&&n.h.za(e),NF(n),DF(n)}function NF(n){if(n.H=0,n.ma=[],n.h){const e=hF(n.i);(0!=e.length||0!=n.j.length)&&(Ck(n.ma,e),Ck(n.ma,n.j),n.i.i.length=0,KN(n.j),n.j.length=0),n.h.ya()}}function MF(n,e,t){var r=t instanceof zg?Xd(t):new zg(t);if(""!=r.g)e&&(r.g=e+"."+r.g),iI(r,r.m);else{var i=rn.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new zg(null);r&&rI(s,r),e&&(s.g=e),i&&iI(s,i),t&&(s.l=t),r=s}return e=n.Da,(t=n.F)&&e&&Er(r,t,e),Er(r,"VER",n.ra),Tw(n,r),r}function RF(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new ti(t&&n.Ha&&!n.va?new ww({ob:!0}):n.va)).Oa(n.J),e}function OF(){}function hI(){if(Py&&!(10<=Number(UG)))throw Error("Environmental error: no available transport.")}function Ia(n,e){ds.call(this),this.g=new wF(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!ow(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!ow(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Ly(this)}function xF(n){mM.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function PF(){_M.call(this),this.status=1}function Ly(n){this.g=n}function _u(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function NM(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var s=n.g[3],l=(e=n.g[0])+(s^(t=n.g[1])&((i=n.g[2])^s))+r[0]+3614090360&4294967295;l=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=(t=(i=(s=(e=t+(l<<7&4294967295|l>>>25))+((l=s+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^s&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(s^e))+r[3]+3250441966&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^t&(i^s))+r[4]+4118548399&4294967295)<<7&4294967295|l>>>25))+((l=s+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^s&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(s^e))+r[7]+4249261313&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^t&(i^s))+r[8]+1770035416&4294967295)<<7&4294967295|l>>>25))+((l=s+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^s&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(s^e))+r[11]+2304563134&4294967295)<<22&4294967295|l>>>10))+((l=e+(s^t&(i^s))+r[12]+1804603682&4294967295)<<7&4294967295|l>>>25))+((l=s+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|l>>>20))+((l=i+(t^s&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|l>>>15))+((l=t+(e^i&(s^e))+r[15]+1236535329&4294967295)<<22&4294967295|l>>>10))+((l=e+(i^s&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(s^e))+r[11]+643717713&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(i^s))+r[0]+3921069994&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^s&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(s^e))+r[15]+3634488961&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(i^s))+r[4]+3889429448&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^s&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(s^e))+r[3]+4107603335&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(i^s))+r[8]+1163531501&4294967295)<<20&4294967295|l>>>12))+((l=e+(i^s&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|l>>>27))+((l=s+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|l>>>23))+((l=i+(e^t&(s^e))+r[7]+1735328473&4294967295)<<14&4294967295|l>>>18))+((l=t+(s^e&(i^s))+r[12]+2368359562&4294967295)<<20&4294967295|l>>>12))+((l=e+(t^i^s)+r[5]+4294588738&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|l>>>21))+((l=i+(s^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^s^e)+r[14]+4259657740&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^s)+r[1]+2763975236&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|l>>>21))+((l=i+(s^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^s^e)+r[10]+3200236656&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^s)+r[13]+681279174&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|l>>>21))+((l=i+(s^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^s^e)+r[6]+76029189&4294967295)<<23&4294967295|l>>>9))+((l=e+(t^i^s)+r[9]+3654602809&4294967295)<<4&4294967295|l>>>28))+((l=s+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|l>>>21))+((l=i+(s^e^t)+r[15]+530742520&4294967295)<<16&4294967295|l>>>16))+((l=t+(i^s^e)+r[2]+3299628645&4294967295)<<23&4294967295|l>>>9))+((l=e+(i^(t|~s))+r[0]+4096336452&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(s|~t))+r[14]+2878612391&4294967295)<<15&4294967295|l>>>17))+((l=t+(s^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~s))+r[12]+1700485571&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(s|~t))+r[10]+4293915773&4294967295)<<15&4294967295|l>>>17))+((l=t+(s^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|l>>>11))+((l=e+(i^(t|~s))+r[8]+1873313359&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|l>>>22))+((l=i+(e^(s|~t))+r[6]+2734768916&4294967295)<<15&4294967295|l>>>17))+((l=t+(s^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|l>>>11))+((s=(e=t+((l=e+(i^(t|~s))+r[4]+4149444226&4294967295)<<6&4294967295|l>>>26))+((l=s+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|l>>>22))^((i=s+((l=i+(e^(s|~t))+r[2]+718787259&4294967295)<<15&4294967295|l>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(l<<21&4294967295|l>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+s&4294967295}function rr(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var s=0|n[i];r&&s==e||(t[i]=s,r=!1)}this.g=t}(ft=ti.prototype).Oa=function(n){this.M=n},ft.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():yM.g(),this.C=function Kk(n){return n.h||(n.h=n.i())}(this.u?this.u:yM),this.g.onreadystatechange=Hs(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(s){return void gF(this,s)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const s of r.keys())t.set(s,r.get(s))}r=Array.from(t.keys()).find(s=>"content-type"==s.toLowerCase()),i=rn.FormData&&n instanceof rn.FormData,!(0<=Ek(C$,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,l]of t)this.g.setRequestHeader(s,l);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{yF(this),0<this.B&&((this.L=function T$(n){return Py&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Hs(this.ua,this)):this.A=pM(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(s){gF(this,s)}},ft.ua=function(){typeof WN<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,Is(this,"timeout"),this.abort(8))},ft.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,Is(this,"complete"),Is(this,"abort"),lI(this))},ft.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),lI(this,!0)),ti.$.N.call(this)},ft.La=function(){this.s||(this.G||this.v||this.l?_F(this):this.kb())},ft.kb=function(){_F(this)},ft.isActive=function(){return!!this.g},ft.da=function(){try{return 2<Lc(this)?this.g.status:-1}catch{return-1}},ft.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},ft.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),D$(e)}},ft.Ia=function(){return this.m},ft.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(ft=wF.prototype).ra=8,ft.H=1,ft.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new gw(this,this.l,n);let s=this.s;if(this.U&&(s?(s=Nk(s),Rk(s,this.U)):s=this.U),null!==this.o||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=CF(this,i,e),Er(t=Xd(this.I),"RID",n),Er(t,"CVER",22),this.F&&Er(t,"X-HTTP-Session-Id",this.F),Tw(this,t),s&&(this.O?e="headers="+encodeURIComponent(String(bF(s)))+"&"+e:this.o&&TM(t,this.o,s)),EM(this.i,i),this.bb&&Er(t,"TYPE","init"),this.P?(Er(t,"$req",e),Er(t,"SID","null"),i.aa=!0,bM(i,t,null)):bM(i,t,e),this.H=2}}else 3==this.H&&(n?EF(this,n):0==this.j.length||uF(this.i)||EF(this))},ft.Ma=function(){if(this.u=null,IF(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=fw(Hs(this.jb,this),n)}},ft.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Eo(10),uI(this),IF(this))},ft.ib=function(){null!=this.v&&(this.v=null,uI(this),SM(this),Eo(19))},ft.pb=function(n){n?(this.l.info("Successfully pinged google.com"),Eo(2)):(this.l.info("Failed to ping google.com"),Eo(1))},ft.isActive=function(){return!!this.h&&this.h.isActive(this)},(ft=OF.prototype).Ba=function(){},ft.Aa=function(){},ft.za=function(){},ft.ya=function(){},ft.isActive=function(){return!0},ft.Va=function(){},hI.prototype.g=function(n,e){return new Ia(n,e)},cs(Ia,ds),Ia.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;Eo(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=MF(n,null,n.Y),cI(n)},Ia.prototype.close=function(){IM(this.g)},Ia.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=dM(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&cI(e)},Ia.prototype.N=function(){this.g.h=null,delete this.j,IM(this.g),delete this.g,Ia.$.N.call(this)},cs(xF,mM),cs(PF,_M),cs(Ly,OF),Ly.prototype.Ba=function(){Is(this.g,"a")},Ly.prototype.Aa=function(n){Is(this.g,new xF(n))},Ly.prototype.za=function(n){Is(this.g,new PF)},Ly.prototype.ya=function(){Is(this.g,"b")},cs(_u,function A$(){this.blockSize=-1}),_u.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},_u.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(0==i)for(;s<=t;)NM(this,n,s),s+=this.blockSize;if("string"==typeof n){for(;s<e;)if(r[i++]=n.charCodeAt(s++),i==this.blockSize){NM(this,r),i=0;break}}else for(;s<e;)if(r[i++]=n[s++],i==this.blockSize){NM(this,r),i=0;break}}this.h=i,this.i+=e},_u.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var N$={};function MM(n){return-128<=n&&128>n?function LG(n,e){var t=N$;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new rr([0|e],0>e?-1:0)}):new rr([0|n],0>n?-1:0)}function Bc(n){if(isNaN(n)||!isFinite(n))return By;if(0>n)return Ss(Bc(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=RM;return new rr(e,0)}var RM=4294967296,By=MM(0),OM=MM(1),FF=MM(16777216);function eh(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function cl(n){return-1==n.h}function Ss(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new rr(t,~n.h).add(OM)}function fI(n,e){return n.add(Ss(e))}function pI(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function Iw(n,e){this.g=n,this.h=e}function gI(n,e){if(eh(e))throw Error("division by zero");if(eh(n))return new Iw(By,By);if(cl(n))return e=gI(Ss(n),e),new Iw(Ss(e.g),Ss(e.h));if(cl(e))return e=gI(n,Ss(e)),new Iw(Ss(e.g),e.h);if(30<n.g.length){if(cl(n)||cl(e))throw Error("slowDivide_ only works with positive integers.");for(var t=OM,r=e;0>=r.X(n);)t=LF(t),r=LF(r);var i=Vy(t,1),s=Vy(r,1);for(r=Vy(r,2),t=Vy(t,2);!eh(r);){var l=s.add(r);0>=l.X(n)&&(i=i.add(t),s=l),r=Vy(r,1),t=Vy(t,1)}return e=fI(n,i.R(e)),new Iw(i,e)}for(i=By;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),l=(s=Bc(t)).R(e);cl(l)||0<l.X(n);)l=(s=Bc(t-=r)).R(e);eh(s)&&(s=OM),i=i.add(s),n=fI(n,l)}return new Iw(i,n)}function LF(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new rr(t,n.h)}function Vy(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],s=0;s<r;s++)i[s]=0<e?n.D(s+t)>>>e|n.D(s+t+1)<<32-e:n.D(s+t);return new rr(i,n.h)}(ft=rr.prototype).ea=function(){if(cl(this))return-Ss(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:RM+r)*e,e*=RM}return n},ft.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(eh(this))return"0";if(cl(this))return"-"+Ss(this).toString(n);for(var e=Bc(Math.pow(n,6)),t=this,r="";;){var i=gI(t,e).g,s=((0<(t=fI(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(eh(t=i))return s+r;for(;6>s.length;)s="0"+s;r=s+r}},ft.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},ft.X=function(n){return cl(n=fI(this,n))?-1:eh(n)?0:1},ft.abs=function(){return cl(this)?Ss(this):this},ft.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var s=r+(65535&this.D(i))+(65535&n.D(i)),l=(s>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=l>>>16,t[i]=(l&=65535)<<16|(s&=65535)}return new rr(t,-2147483648&t[t.length-1]?-1:0)},ft.R=function(n){if(eh(this)||eh(n))return By;if(cl(this))return cl(n)?Ss(this).R(Ss(n)):Ss(Ss(this).R(n));if(cl(n))return Ss(this.R(Ss(n)));if(0>this.X(FF)&&0>n.X(FF))return Bc(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var s=this.D(r)>>>16,l=65535&this.D(r),h=n.D(i)>>>16,m=65535&n.D(i);t[2*r+2*i]+=l*m,pI(t,2*r+2*i),t[2*r+2*i+1]+=s*m,pI(t,2*r+2*i+1),t[2*r+2*i+1]+=l*h,pI(t,2*r+2*i+1),t[2*r+2*i+2]+=s*h,pI(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new rr(t,0)},ft.gb=function(n){return gI(this,n).h},ft.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new rr(t,this.h&n.h)},ft.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new rr(t,this.h|n.h)},ft.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new rr(t,this.h^n.h)},hI.prototype.createWebChannel=hI.prototype.g,Ia.prototype.send=Ia.prototype.u,Ia.prototype.open=Ia.prototype.m,Ia.prototype.close=Ia.prototype.close,XT.NO_ERROR=0,XT.TIMEOUT=8,XT.HTTP_ERROR=6,qk.COMPLETE="complete",Yk.EventType=pw,pw.OPEN="a",pw.CLOSE="b",pw.ERROR="c",pw.MESSAGE="d",ds.prototype.listen=ds.prototype.O,ti.prototype.listenOnce=ti.prototype.P,ti.prototype.getLastError=ti.prototype.Sa,ti.prototype.getLastErrorCode=ti.prototype.Ia,ti.prototype.getStatus=ti.prototype.da,ti.prototype.getResponseJson=ti.prototype.Wa,ti.prototype.getResponseText=ti.prototype.ja,ti.prototype.send=ti.prototype.ha,ti.prototype.setWithCredentials=ti.prototype.Oa,_u.prototype.digest=_u.prototype.l,_u.prototype.reset=_u.prototype.reset,_u.prototype.update=_u.prototype.j,rr.prototype.add=rr.prototype.add,rr.prototype.multiply=rr.prototype.R,rr.prototype.modulo=rr.prototype.gb,rr.prototype.compare=rr.prototype.X,rr.prototype.toNumber=rr.prototype.ea,rr.prototype.toString=rr.prototype.toString,rr.prototype.getBits=rr.prototype.D,rr.fromNumber=Bc,rr.fromString=function kF(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return Ss(kF(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=Bc(Math.pow(e,8)),r=By,i=0;i<n.length;i+=8){var s=Math.min(8,n.length-i),l=parseInt(n.substring(i,i+s),e);8>s?(s=Bc(Math.pow(e,s)),r=r.R(s).add(Bc(l))):r=(r=r.R(t)).add(Bc(l))}return r};var M$=mu.createWebChannelTransport=function(){return new hI},R$=mu.getStatEventTarget=function(){return JT()},xM=mu.ErrorCode=XT,O$=mu.EventType=qk,x$=mu.Event=$g,BF=mu.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},P$=mu.FetchXmlHttpFactory=ww,mI=mu.WebChannel=Yk,k$=mu.XhrIo=ti,F$=mu.Md5=_u,Uy=mu.Integer=rr;const VF="@firebase/firestore";class hs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}hs.UNAUTHENTICATED=new hs(null),hs.GOOGLE_CREDENTIALS=new hs("google-credentials-uid"),hs.FIRST_PARTY=new hs("first-party-uid"),hs.MOCK_USER=new hs("mock-user");let jy="9.22.1";const Wf=new Fi.Yd("@firebase/firestore");function PM(){return Wf.logLevel}function He(n,...e){if(Wf.logLevel<=Fi.in.DEBUG){const t=e.map(kM);Wf.debug(`Firestore (${jy}): ${n}`,...t)}}function vi(n,...e){if(Wf.logLevel<=Fi.in.ERROR){const t=e.map(kM);Wf.error(`Firestore (${jy}): ${n}`,...t)}}function dl(n,...e){if(Wf.logLevel<=Fi.in.WARN){const t=e.map(kM);Wf.warn(`Firestore (${jy}): ${n}`,...t)}}function kM(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function Et(n="Unexpected state"){const e=`FIRESTORE (${jy}) INTERNAL ASSERTION FAILED: `+n;throw vi(e),new Error(e)}function Rt(n,e){n||Et()}function dt(n,e){return n}const pe={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class xe extends k.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class Gi{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class UF{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class V${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(hs.UNAUTHENTICATED))}shutdown(){}}class U${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class j${constructor(e){this.t=e,this.currentUser=hs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const s=y=>this.i!==i?(i=this.i,t(y)):Promise.resolve();let l=new Gi;this.o=()=>{this.i++,this.currentUser=this.u(),l.resolve(),l=new Gi,e.enqueueRetryable(()=>s(this.currentUser))};const h=()=>{const y=l;e.enqueueRetryable((0,we.Z)(function*(){yield y.promise,yield s(r.currentUser)}))},m=y=>{He("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=y,this.auth.addAuthTokenListener(this.o),h()};this.t.onInit(y=>m(y)),setTimeout(()=>{if(!this.auth){const y=this.t.getImmediate({optional:!0});y?m(y):(He("FirebaseAuthCredentialsProvider","Auth not yet detected"),l.resolve(),l=new Gi)}},0),h()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(He("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Rt("string"==typeof r.accessToken),new UF(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Rt(null===e||"string"==typeof e),new hs(e)}}class G${constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=hs.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class $${constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new G$(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(hs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class jF{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class H${constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=s=>{null!=s.error&&He("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const l=s.token!==this.T;return this.T=s.token,He("FirebaseAppCheckTokenProvider",`Received ${l?"new":"existing"} token.`),l?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{He("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.I.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.I.getImmediate({optional:!0});s?i(s):He("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(Rt("string"==typeof t.token),this.T=t.token,new jF(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function z$(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class GF{static A(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=z$(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<t&&(r+=e.charAt(i[s]%e.length))}return r}}function en(n,e){return n<e?-1:n>e?1:0}function Gy(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function $F(n){return n+"\0"}class Pr{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new xe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new xe(pe.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new xe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new xe(pe.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Pr.fromMillis(Date.now())}static fromDate(e){return Pr.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Pr(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?en(this.nanoseconds,e.nanoseconds):en(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Ot{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Ot(e)}static min(){return new Ot(new Pr(0,0))}static max(){return new Ot(new Pr(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Sw{constructor(e,t,r){void 0===t?t=0:t>e.length&&Et(),void 0===r?r=e.length-t:r>e.length-t&&Et(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Sw.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Sw?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const s=e.get(i),l=t.get(i);if(s<l)return-1;if(s>l)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class xn extends Sw{construct(e,t,r){return new xn(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new xe(pe.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new xn(t)}static emptyPath(){return new xn([])}}const W$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class ni extends Sw{construct(e,t,r){return new ni(e,t,r)}static isValidIdentifier(e){return W$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),ni.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new ni(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const s=()=>{if(0===r.length)throw new xe(pe.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let l=!1;for(;i<e.length;){const h=e[i];if("\\"===h){if(i+1===e.length)throw new xe(pe.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new xe(pe.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===h?(l=!l,i++):"."!==h||l?(r+=h,i++):(s(),i++)}if(s(),l)throw new xe(pe.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new ni(t)}static emptyPath(){return new ni([])}}class lt{constructor(e){this.path=e}static fromPath(e){return new lt(xn.fromString(e))}static fromName(e){return new lt(xn.fromString(e).popFirst(5))}static empty(){return new lt(xn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===xn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return xn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new lt(new xn(e.slice()))}}class _I{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function FM(n){return n.fields.find(e=>2===e.kind)}function qg(n){return n.fields.filter(e=>2!==e.kind)}_I.UNKNOWN_ID=-1;class yI{constructor(e,t){this.fieldPath=e,this.kind=t}}class Aw{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Aw(0,Sa.min())}}function HF(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Ot.fromTimestamp(1e9===r?new Pr(t+1,0):new Pr(t,r));return new Sa(i,lt.empty(),e)}function zF(n){return new Sa(n.readTime,n.key,-1)}class Sa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new Sa(Ot.min(),lt.empty(),-1)}static max(){return new Sa(Ot.max(),lt.empty(),-1)}}function LM(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=lt.comparator(n.documentKey,e.documentKey),0!==t?t:en(n.largestBatchId,e.largestBatchId))}const WF="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class qF{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function qf(n){return BM.apply(this,arguments)}function BM(){return BM=(0,we.Z)(function*(n){if(n.code!==pe.FAILED_PRECONDITION||n.message!==WF)throw n;He("LocalStore","Unexpectedly lost primary lease")}),BM.apply(this,arguments)}class ce{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Et(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ce((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(t,s).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ce?t:ce.resolve(t)}catch(t){return ce.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ce.reject(t)}static resolve(e){return new ce((t,r)=>{t(e)})}static reject(e){return new ce((t,r)=>{r(e)})}static waitFor(e){return new ce((t,r)=>{let i=0,s=0,l=!1;e.forEach(h=>{++i,h.next(()=>{++s,l&&s===i&&t()},m=>r(m))}),l=!0,s===i&&t()})}static or(e){let t=ce.resolve(!1);for(const r of e)t=t.next(i=>i?ce.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,s)=>{r.push(t.call(this,i,s))}),this.waitFor(r)}static mapArray(e,t){return new ce((r,i)=>{const s=e.length,l=new Array(s);let h=0;for(let m=0;m<s;m++){const y=m;t(e[y]).next(D=>{l[y]=D,++h,h===s&&r(l)},D=>i(D))}})}static doWhile(e,t){return new ce((r,i)=>{const s=()=>{!0===e()?t().next(()=>{s()},i):r()};s()})}}class vI{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new Gi,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Nw(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=VM(r.target.error);this.v.reject(new Nw(e,i))}}static open(e,t,r,i){try{return new vI(t,e.transaction(i,r))}catch(s){throw new Nw(t,s)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(He("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new Z$(t)}}class yu{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===yu.S((0,k.z$)())&&vi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return He("SimpleDb","Removing database:",e),Kg(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,k.hl)())return!1;if(yu.C())return!0;const e=(0,k.z$)(),t=yu.S(e),r=0<t&&t<10,i=yu.N(e),s=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||s)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,we.Z)(function*(){return t.db||(He("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const s=indexedDB.open(t.name,t.version);s.onsuccess=l=>{r(l.target.result)},s.onblocked=()=>{i(new Nw(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},s.onerror=l=>{const h=l.target.error;i("VersionError"===h.name?new xe(pe.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===h.name?new xe(pe.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+h):new Nw(e,h))},s.onupgradeneeded=l=>{He("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',l.oldVersion),t.V.O(l.target.result,s.transaction,l.oldVersion,t.version).next(()=>{He("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var s=this;return(0,we.Z)(function*(){const l="readonly"===t;let h=0;for(;;){++h;try{s.db=yield s.$(e);const m=vI.open(s.db,e,l?"readonly":"readwrite",r),y=i(m).next(D=>(m.P(),D)).catch(D=>(m.abort(D),ce.reject(D))).toPromise();return y.catch(()=>{}),yield m.R,y}catch(m){const y=m,D="FirebaseError"!==y.name&&h<3;if(He("SimpleDb","Transaction failed with error:",y.message,"Retrying:",D),s.close(),!D)return Promise.reject(y)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Y${constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Kg(this.L.delete())}}class Nw extends xe{constructor(e,t){super(pe.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function Kf(n){return"IndexedDbTransactionError"===n.name}class Z${constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(He("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(He("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Kg(r)}add(e){return He("SimpleDb","ADD",this.store.name,e,e),Kg(this.store.add(e))}get(e){return Kg(this.store.get(e)).next(t=>(void 0===t&&(t=null),He("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return He("SimpleDb","DELETE",this.store.name,e),Kg(this.store.delete(e))}count(){return He("SimpleDb","COUNT",this.store.name),Kg(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),s=[];return this.W(i,(l,h)=>{s.push(h)}).next(()=>s)}{const i=this.store.getAll(r.range);return new ce((s,l)=>{i.onerror=h=>{l(h.target.error)},i.onsuccess=h=>{s(h.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ce((i,s)=>{r.onerror=l=>{s(l.target.error)},r.onsuccess=l=>{i(l.target.result)}})}J(e,t){He("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(s,l,h)=>h.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ce((r,i)=>{t.onerror=s=>{const l=VM(s.target.error);i(l)},t.onsuccess=s=>{const l=s.target.result;l?e(l.primaryKey,l.value).next(h=>{h?l.continue():r()}):r()}})}W(e,t){const r=[];return new ce((i,s)=>{e.onerror=l=>{s(l.target.error)},e.onsuccess=l=>{const h=l.target.result;if(!h)return void i();const m=new Y$(h),y=t(h.primaryKey,h.value,m);if(y instanceof ce){const D=y.catch(S=>(m.done(),ce.reject(S)));r.push(D)}m.isDone?i():null===m.K?h.continue():h.continue(m.K)}}).next(()=>ce.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Kg(n){return new ce((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=VM(r.target.error);t(i)}})}let KF=!1;function VM(n){const e=yu.S((0,k.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new xe("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return KF||(KF=!0,setTimeout(()=>{throw r},0)),r}}return n}class Q${constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;He("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,we.Z)(function*(){t.task=null;try{He("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){Kf(r)?He("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield qf(r)}yield t.et(6e4)}))}}class J${constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,we.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,s=!0;return ce.doWhile(()=>!0===s&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(l=>{if(null!==l&&!r.has(l))return He("IndexBackiller",`Processing collection: ${l}`),this.it(e,l,i).next(h=>{i-=h,r.add(l)});s=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(s=>{const l=s.changes;return this.localStore.indexManager.updateIndexEntries(e,l).next(()=>this.rt(i,s)).next(h=>(He("IndexBackiller",`Updating offset: ${h}`),this.localStore.indexManager.updateCollectionGroup(e,t,h))).next(()=>l.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,s)=>{const l=zF(s);LM(l,r)>0&&(r=l)}),new Sa(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Aa=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Mw(n){return null==n}function Rw(n){return 0===n&&1/n==-1/0}function YF(n){return"number"==typeof n&&Number.isInteger(n)&&!Rw(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function Ws(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=ZF(e)),e=X$(n.get(t),e);return ZF(e)}function X$(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const s=n.charAt(i);switch(s){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=s}}return t}function ZF(n){return n+"\x01\x01"}function Vc(n){const e=n.length;if(Rt(e>=2),2===e)return Rt("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),xn.emptyPath();const t=e-2,r=[];let i="";for(let s=0;s<e;){const l=n.indexOf("\x01",s);switch((l<0||l>t)&&Et(),n.charAt(l+1)){case"\x01":const h=n.substring(s,l);let m;0===i.length?m=h:(i+=h,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(s,l),i+="\0";break;case"\x11":i+=n.substring(s,l+1);break;default:Et()}s=l+2}return new xn(r)}const QF=["userId","batchId"];function bI(n,e){return[n,Ws(e)]}function JF(n,e,t){return[n,Ws(e),t]}const eH={},tH=["prefixPath","collectionGroup","readTime","documentId"],nH=["prefixPath","collectionGroup","documentId"],rH=["collectionGroup","readTime","prefixPath","documentId"],iH=["canonicalId","targetId"],sH=["targetId","path"],oH=["path","targetId"],aH=["collectionId","parent"],lH=["indexId","uid"],uH=["uid","sequenceNumber"],cH=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],dH=["indexId","uid","orderedDocumentKey"],hH=["userId","collectionPath","documentId"],fH=["userId","collectionPath","largestBatchId"],pH=["userId","collectionGroup","largestBatchId"],XF=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],gH=[...XF,"documentOverlays"],eL=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],tL=eL,mH=[...tL,"indexConfiguration","indexState","indexEntries"];class UM extends qF{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function fs(n,e){const t=dt(n);return yu.M(t.ht,e)}function nL(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Yf(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function rL(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class _r{constructor(e,t){this.comparator=e,this.root=t||As.EMPTY}insert(e,t){return new _r(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,As.BLACK,null,null))}remove(e){return new _r(this.comparator,this.root.remove(e,this.comparator).copy(null,null,As.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new wI(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new wI(this.root,e,this.comparator,!1)}getReverseIterator(){return new wI(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new wI(this.root,e,this.comparator,!0)}}class wI{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?r(e.key,t):1,t&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(0===s){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class As{constructor(e,t,r,i,s){this.key=e,this.value=t,this.color=r??As.RED,this.left=i??As.EMPTY,this.right=s??As.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,s){return new As(e??this.key,t??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===s?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return As.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return As.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,As.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,As.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Et();const e=this.left.check();if(e!==this.right.check())throw Et();return e+(this.isRed()?0:1)}}As.EMPTY=null,As.RED=!0,As.BLACK=!1,As.EMPTY=new class{constructor(){this.size=0}get key(){throw Et()}get value(){throw Et()}get color(){throw Et()}get left(){throw Et()}get right(){throw Et()}copy(n,e,t,r,i){return this}insert(n,e,t){return new As(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class Cr{constructor(e){this.comparator=e,this.data=new _r(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new iL(this.data.getIterator())}getIteratorFrom(e){return new iL(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof Cr)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(0!==this.comparator(i,s))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Cr(this.comparator);return t.data=e,t}}class iL{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function $y(n){return n.hasNext()?n.getNext():void 0}class jo{constructor(e){this.fields=e,e.sort(ni.comparator)}static empty(){return new jo([])}unionWith(e){let t=new Cr(ni.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new jo(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Gy(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class sL extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class $i{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new sL("Invalid base64 string: "+i):i}}(e);return new $i(t)}static fromUint8Array(e){const t=function(r){let i="";for(let s=0;s<r.length;++s)i+=String.fromCharCode(r[s]);return i}(e);return new $i(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return en(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}$i.EMPTY_BYTE_STRING=new $i("");const yH=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Zf(n){if(Rt(!!n),"string"==typeof n){let e=0;const t=yH.exec(n);if(Rt(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:ri(n.seconds),nanos:ri(n.nanos)}}function ri(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function th(n){return"string"==typeof n?$i.fromBase64String(n):$i.fromUint8Array(n)}function DI(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function EI(n){const e=n.mapValue.fields.__previous_value__;return DI(e)?EI(e):e}function Ow(n){const e=Zf(n.mapValue.fields.__local_write_time__.timestampValue);return new Pr(e.seconds,e.nanos)}class vH{constructor(e,t,r,i,s,l,h,m,y){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=l,this.autoDetectLongPolling=h,this.longPollingOptions=m,this.useFetchStreams=y}}class Qf{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new Qf("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof Qf&&e.projectId===this.projectId&&e.database===this.database}}const Jf={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},CI={nullValue:"NULL_VALUE"};function Xf(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?DI(n)?4:uL(n)?9007199254740991:10:Et()}function Uc(n,e){if(n===e)return!0;const t=Xf(n);if(t!==Xf(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ow(n).isEqual(Ow(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const s=Zf(r.timestampValue),l=Zf(i.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,th(n.bytesValue).isEqual(th(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return ri(r.geoPointValue.latitude)===ri(i.geoPointValue.latitude)&&ri(r.geoPointValue.longitude)===ri(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return ri(r.integerValue)===ri(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const s=ri(r.doubleValue),l=ri(i.doubleValue);return s===l?Rw(s)===Rw(l):isNaN(s)&&isNaN(l)}return!1}(n,e);case 9:return Gy(n.arrayValue.values||[],e.arrayValue.values||[],Uc);case 10:return function(r,i){const s=r.mapValue.fields||{},l=i.mapValue.fields||{};if(nL(s)!==nL(l))return!1;for(const h in s)if(s.hasOwnProperty(h)&&(void 0===l[h]||!Uc(s[h],l[h])))return!1;return!0}(n,e);default:return Et()}var i}function xw(n,e){return void 0!==(n.values||[]).find(t=>Uc(t,e))}function ep(n,e){if(n===e)return 0;const t=Xf(n),r=Xf(e);if(t!==r)return en(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return en(n.booleanValue,e.booleanValue);case 2:return function(i,s){const l=ri(i.integerValue||i.doubleValue),h=ri(s.integerValue||s.doubleValue);return l<h?-1:l>h?1:l===h?0:isNaN(l)?isNaN(h)?0:-1:1}(n,e);case 3:return oL(n.timestampValue,e.timestampValue);case 4:return oL(Ow(n),Ow(e));case 5:return en(n.stringValue,e.stringValue);case 6:return function(i,s){const l=th(i),h=th(s);return l.compareTo(h)}(n.bytesValue,e.bytesValue);case 7:return function(i,s){const l=i.split("/"),h=s.split("/");for(let m=0;m<l.length&&m<h.length;m++){const y=en(l[m],h[m]);if(0!==y)return y}return en(l.length,h.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,s){const l=en(ri(i.latitude),ri(s.latitude));return 0!==l?l:en(ri(i.longitude),ri(s.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,s){const l=i.values||[],h=s.values||[];for(let m=0;m<l.length&&m<h.length;++m){const y=ep(l[m],h[m]);if(y)return y}return en(l.length,h.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,s){if(i===Jf.mapValue&&s===Jf.mapValue)return 0;if(i===Jf.mapValue)return 1;if(s===Jf.mapValue)return-1;const l=i.fields||{},h=Object.keys(l),m=s.fields||{},y=Object.keys(m);h.sort(),y.sort();for(let D=0;D<h.length&&D<y.length;++D){const S=en(h[D],y[D]);if(0!==S)return S;const R=ep(l[h[D]],m[y[D]]);if(0!==R)return R}return en(h.length,y.length)}(n.mapValue,e.mapValue);default:throw Et()}}function oL(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return en(n,e);const t=Zf(n),r=Zf(e),i=en(t.seconds,r.seconds);return 0!==i?i:en(t.nanos,r.nanos)}function Hy(n){return jM(n)}function jM(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=Zf(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?th(n.bytesValue).toBase64():"referenceValue"in n?lt.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",s=!0;for(const l of r.values||[])s?s=!1:i+=",",i+=jM(l);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let s="{",l=!0;for(const h of i)l?l=!1:s+=",",s+=`${h}:${jM(r.fields[h])}`;return s+"}"}(n.mapValue):Et();var e}function Yg(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function GM(n){return!!n&&"integerValue"in n}function Pw(n){return!!n&&"arrayValue"in n}function aL(n){return!!n&&"nullValue"in n}function lL(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function II(n){return!!n&&"mapValue"in n}function kw(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Yf(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=kw(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=kw(n.arrayValue.values[t]);return e}return Object.assign({},n)}function uL(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function bH(n){return"nullValue"in n?CI:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?Yg(Qf.empty(),lt.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:Et()}function wH(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?Yg(Qf.empty(),lt.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?Jf:Et()}function cL(n,e){const t=ep(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function dL(n,e){const t=ep(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class Ns{constructor(e){this.value=e}static empty(){return new Ns({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!II(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=kw(t)}setAll(e){let t=ni.emptyPath(),r={},i=[];e.forEach((l,h)=>{if(!t.isImmediateParentOf(h)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=h.popLast()}l?r[h.lastSegment()]=kw(l):i.push(h.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,r,i)}delete(e){const t=this.field(e.popLast());II(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Uc(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];II(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){Yf(t,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Ns(kw(this.value))}}function hL(n){const e=[];return Yf(n.fields,(t,r)=>{const i=new ni([t]);if(II(r)){const s=hL(r.mapValue).fields;if(0===s.length)e.push(i);else for(const l of s)e.push(i.child(l))}else e.push(i)}),new jo(e)}class Tr{constructor(e,t,r,i,s,l,h){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=s,this.data=l,this.documentState=h}static newInvalidDocument(e){return new Tr(e,0,Ot.min(),Ot.min(),Ot.min(),Ns.empty(),0)}static newFoundDocument(e,t,r,i){return new Tr(e,1,t,Ot.min(),r,i,0)}static newNoDocument(e,t){return new Tr(e,2,t,Ot.min(),Ot.min(),Ns.empty(),0)}static newUnknownDocument(e,t){return new Tr(e,3,t,Ot.min(),Ot.min(),Ns.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Ot.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Ns.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Ns.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ot.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Tr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class tp{constructor(e,t){this.position=e,this.inclusive=t}}function fL(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const s=e[i],l=n.position[i];if(r=s.field.isKeyField()?lt.comparator(lt.fromName(l.referenceValue),t.key):ep(l,t.data.field(s.field)),"desc"===s.dir&&(r*=-1),0!==r)break}return r}function pL(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Uc(n.position[t],e.position[t]))return!1;return!0}class zy{constructor(e,t="asc"){this.field=e,this.dir=t}}function DH(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class gL{}class In extends gL{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new EH(e,t,r):"array-contains"===t?new IH(e,r):"in"===t?new wL(e,r):"not-in"===t?new SH(e,r):"array-contains-any"===t?new AH(e,r):new In(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new CH(e,r):new TH(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(ep(t,this.value)):null!==t&&Xf(this.value)===Xf(t)&&this.matchesComparison(ep(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return Et()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class ir extends gL{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new ir(e,t)}matches(e){return Wy(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function Wy(n){return"and"===n.op}function $M(n){return"or"===n.op}function HM(n){return mL(n)&&Wy(n)}function mL(n){for(const e of n.filters)if(e instanceof ir)return!1;return!0}function zM(n){if(n instanceof In)return n.field.canonicalString()+n.op.toString()+Hy(n.value);if(HM(n))return n.filters.map(e=>zM(e)).join(",");{const e=n.filters.map(t=>zM(t)).join(",");return`${n.op}(${e})`}}function _L(n,e){return n instanceof In?(t=n,(r=e)instanceof In&&t.op===r.op&&t.field.isEqual(r.field)&&Uc(t.value,r.value)):n instanceof ir?function(t,r){return r instanceof ir&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,s,l)=>i&&_L(s,r.filters[l]),!0)}(n,e):void Et();var t,r}function yL(n,e){const t=n.filters.concat(e);return ir.create(t,n.op)}function vL(n){return n instanceof In?`${(e=n).field.canonicalString()} ${e.op} ${Hy(e.value)}`:n instanceof ir?function(e){return e.op.toString()+" {"+e.getFilters().map(vL).join(" ,")+"}"}(n):"Filter";var e}class EH extends In{constructor(e,t,r){super(e,t,r),this.key=lt.fromName(r.referenceValue)}matches(e){const t=lt.comparator(e.key,this.key);return this.matchesComparison(t)}}class CH extends In{constructor(e,t){super(e,"in",t),this.keys=bL(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class TH extends In{constructor(e,t){super(e,"not-in",t),this.keys=bL(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function bL(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>lt.fromName(r.referenceValue))}class IH extends In{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return Pw(t)&&xw(t.arrayValue,this.value)}}class wL extends In{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&xw(this.value.arrayValue,t)}}class SH extends In{constructor(e,t){super(e,"not-in",t)}matches(e){if(xw(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!xw(this.value.arrayValue,t)}}class AH extends In{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!Pw(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>xw(this.value.arrayValue,r))}}class NH{constructor(e,t=null,r=[],i=[],s=null,l=null,h=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=l,this.endAt=h,this.dt=null}}function WM(n,e=null,t=[],r=[],i=null,s=null,l=null){return new NH(n,e,t,r,i,s,l)}function Zg(n){const e=dt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>zM(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Mw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Hy(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Hy(r)).join(",")),e.dt=t}return e.dt}function Fw(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!DH(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!_L(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!pL(n.startAt,e.startAt)&&pL(n.endAt,e.endAt)}function SI(n){return lt.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function AI(n,e){return n.filters.filter(t=>t instanceof In&&t.field.isEqual(e))}function DL(n,e,t){let r=CI,i=!0;for(const s of AI(n,e)){let l=CI,h=!0;switch(s.op){case"<":case"<=":l=bH(s.value);break;case"==":case"in":case">=":l=s.value;break;case">":l=s.value,h=!1;break;case"!=":case"not-in":l=CI}cL({value:r,inclusive:i},{value:l,inclusive:h})<0&&(r=l,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];cL({value:r,inclusive:i},{value:l,inclusive:t.inclusive})<0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}function EL(n,e,t){let r=Jf,i=!0;for(const s of AI(n,e)){let l=Jf,h=!0;switch(s.op){case">=":case">":l=wH(s.value),h=!1;break;case"==":case"in":case"<=":l=s.value;break;case"<":l=s.value,h=!1;break;case"!=":case"not-in":l=Jf}dL({value:r,inclusive:i},{value:l,inclusive:h})>0&&(r=l,i=h)}if(null!==t)for(let s=0;s<n.orderBy.length;++s)if(n.orderBy[s].field.isEqual(e)){const l=t.position[s];dL({value:r,inclusive:i},{value:l,inclusive:t.inclusive})>0&&(r=l,i=t.inclusive);break}return{value:r,inclusive:i}}class nh{constructor(e,t=null,r=[],i=[],s=null,l="F",h=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=l,this.startAt=h,this.endAt=m,this.wt=null,this._t=null}}function CL(n,e,t,r,i,s,l,h){return new nh(n,e,t,r,i,s,l,h)}function qy(n){return new nh(n)}function TL(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function qM(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function NI(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function KM(n){return null!==n.collectionGroup}function Qg(n){const e=dt(n);if(null===e.wt){e.wt=[];const t=NI(e),r=qM(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new zy(t)),e.wt.push(new zy(ni.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.wt.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new zy(ni.keyField(),s))}}}return e.wt}function Co(n){const e=dt(n);if(!e._t)if("F"===e.limitType)e._t=WM(e.path,e.collectionGroup,Qg(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const s of Qg(e))t.push(new zy(s.field,"desc"===s.dir?"asc":"desc"));const r=e.endAt?new tp(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new tp(e.startAt.position,e.startAt.inclusive):null;e._t=WM(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function YM(n,e){e.getFirstInequalityField(),NI(n);const t=n.filters.concat([e]);return new nh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function MI(n,e,t){return new nh(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Lw(n,e){return Fw(Co(n),Co(e))&&n.limitType===e.limitType}function IL(n){return`${Zg(Co(n))}|lt:${n.limitType}`}function ZM(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>vL(r)).join(", ")}]`),Mw(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Hy(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Hy(r)).join(",")),`Target(${t})`}(Co(n))}; limitType=${n.limitType})`}function Bw(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):lt.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Qg(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,s,l){const h=fL(i,s,l);return i.inclusive?h<=0:h<0}(t.startAt,Qg(t),r)||t.endAt&&!function(i,s,l){const h=fL(i,s,l);return i.inclusive?h>=0:h>0}(t.endAt,Qg(t),r)));var t,r}function SL(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function AL(n){return(e,t)=>{let r=!1;for(const i of Qg(n)){const s=MH(i,e,t);if(0!==s)return s;r=r||i.field.isKeyField()}return 0}}function MH(n,e,t){const r=n.field.isKeyField()?lt.comparator(e.key,t.key):function(i,s,l){const h=s.data.field(i),m=l.data.field(i);return null!==h&&null!==m?ep(h,m):Et()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return Et()}}class rh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,s]of r)if(this.equalsFn(i,e))return s}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Yf(this.inner,(t,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return rL(this.inner)}size(){return this.innerSize}}const RH=new _r(lt.comparator);function Go(){return RH}const NL=new _r(lt.comparator);function Vw(...n){let e=NL;for(const t of n)e=e.insert(t.key,t);return e}function ML(n){let e=NL;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function jc(){return Uw()}function RL(){return Uw()}function Uw(){return new rh(n=>n.toString(),(n,e)=>n.isEqual(e))}const OH=new _r(lt.comparator),xH=new Cr(lt.comparator);function dn(...n){let e=xH;for(const t of n)e=e.add(t);return e}const PH=new Cr(en);function QM(){return PH}function OL(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rw(e)?"-0":e}}function xL(n){return{integerValue:""+n}}function PL(n,e){return YF(e)?xL(e):OL(n,e)}class RI{constructor(){this._=void 0}}function kH(n,e,t){return n instanceof Ky?function(r,i){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&DI(i)&&(i=EI(i)),i&&(s.fields.__previous_value__=i),{mapValue:s}}(t,e):n instanceof Jg?FL(n,e):n instanceof Xg?LL(n,e):function(r,i){const s=kL(r,i),l=BL(s)+BL(r.gt);return GM(s)&&GM(r.gt)?xL(l):OL(r.serializer,l)}(n,e)}function FH(n,e,t){return n instanceof Jg?FL(n,e):n instanceof Xg?LL(n,e):t}function kL(n,e){return n instanceof Yy?GM(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class Ky extends RI{}class Jg extends RI{constructor(e){super(),this.elements=e}}function FL(n,e){const t=VL(e);for(const r of n.elements)t.some(i=>Uc(i,r))||t.push(r);return{arrayValue:{values:t}}}class Xg extends RI{constructor(e){super(),this.elements=e}}function LL(n,e){let t=VL(e);for(const r of n.elements)t=t.filter(i=>!Uc(i,r));return{arrayValue:{values:t}}}class Yy extends RI{constructor(e,t){super(),this.serializer=e,this.gt=t}}function BL(n){return ri(n.integerValue||n.doubleValue)}function VL(n){return Pw(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class jw{constructor(e,t){this.field=e,this.transform=t}}class BH{constructor(e,t){this.version=e,this.transformResults=t}}class kr{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new kr}static exists(e){return new kr(void 0,e)}static updateTime(e){return new kr(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function OI(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class xI{}function UL(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new Qy(n.key,kr.none()):new Zy(n.key,n.data,kr.none());{const t=n.data,r=Ns.empty();let i=new Cr(ni.comparator);for(let s of e.fields)if(!i.has(s)){let l=t.field(s);null===l&&s.length>1&&(s=s.popLast(),l=t.field(s)),null===l?r.delete(s):r.set(s,l),i=i.add(s)}return new ih(n.key,r,new jo(i.toArray()),kr.none())}}function VH(n,e,t){n instanceof Zy?function(r,i,s){const l=r.value.clone(),h=$L(r.fieldTransforms,i,s.transformResults);l.setAll(h),i.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(n,e,t):n instanceof ih?function(r,i,s){if(!OI(r.precondition,i))return void i.convertToUnknownDocument(s.version);const l=$L(r.fieldTransforms,i,s.transformResults),h=i.data;h.setAll(GL(r)),h.setAll(l),i.convertToFoundDocument(s.version,h).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Gw(n,e,t,r){return n instanceof Zy?function(i,s,l,h){if(!OI(i.precondition,s))return l;const m=i.value.clone(),y=HL(i.fieldTransforms,h,s);return m.setAll(y),s.convertToFoundDocument(s.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof ih?function(i,s,l,h){if(!OI(i.precondition,s))return l;const m=HL(i.fieldTransforms,h,s),y=s.data;return y.setAll(GL(i)),y.setAll(m),s.convertToFoundDocument(s.version,y).setHasLocalMutations(),null===l?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(D=>D.field))}(n,e,t,r):(l=t,OI(n.precondition,s=e)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l);var s,l}function UH(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),s=kL(r.transform,i||null);null!=s&&(null===t&&(t=Ns.empty()),t.set(r.field,s))}return t||null}function jL(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Gy(t,r,(i,s)=>function LH(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Jg&&r instanceof Jg||t instanceof Xg&&r instanceof Xg?Gy(t.elements,r.elements,Uc):t instanceof Yy&&r instanceof Yy?Uc(t.gt,r.gt):t instanceof Ky&&r instanceof Ky);var t,r}(i,s))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class Zy extends xI{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ih extends xI{constructor(e,t,r,i,s=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function GL(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function $L(n,e,t){const r=new Map;Rt(n.length===t.length);for(let i=0;i<t.length;i++){const s=n[i],l=s.transform,h=e.data.field(s.field);r.set(s.field,FH(l,h,t[i]))}return r}function HL(n,e,t){const r=new Map;for(const i of n){const s=i.transform,l=t.data.field(i.field);r.set(i.field,kH(s,l,e))}return r}class Qy extends xI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class JM extends xI{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class XM{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&VH(s,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Gw(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Gw(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=RL();return this.mutations.forEach(i=>{const s=e.get(i.key),l=s.overlayedDocument;let h=this.applyToLocalView(l,s.mutatedFields);h=t.has(i.key)?null:h;const m=UL(l,h);null!==m&&r.set(i.key,m),l.isValidDocument()||l.convertToNoDocument(Ot.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),dn())}isEqual(e){return this.batchId===e.batchId&&Gy(this.mutations,e.mutations,(t,r)=>jL(t,r))&&Gy(this.baseMutations,e.baseMutations,(t,r)=>jL(t,r))}}class eR{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){Rt(e.mutations.length===r.length);let i=OH;const s=e.mutations;for(let l=0;l<s.length;l++)i=i.insert(s[l].key,r[l].version);return new eR(e,t,r,i)}}class tR{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class GH{constructor(e,t){this.count=e,this.unchangedNames=t}}var Ri,Pn;function zL(n){switch(n){default:return Et();case pe.CANCELLED:case pe.UNKNOWN:case pe.DEADLINE_EXCEEDED:case pe.RESOURCE_EXHAUSTED:case pe.INTERNAL:case pe.UNAVAILABLE:case pe.UNAUTHENTICATED:return!1;case pe.INVALID_ARGUMENT:case pe.NOT_FOUND:case pe.ALREADY_EXISTS:case pe.PERMISSION_DENIED:case pe.FAILED_PRECONDITION:case pe.ABORTED:case pe.OUT_OF_RANGE:case pe.UNIMPLEMENTED:case pe.DATA_LOSS:return!0}}function WL(n){if(void 0===n)return vi("GRPC error has no .code"),pe.UNKNOWN;switch(n){case Ri.OK:return pe.OK;case Ri.CANCELLED:return pe.CANCELLED;case Ri.UNKNOWN:return pe.UNKNOWN;case Ri.DEADLINE_EXCEEDED:return pe.DEADLINE_EXCEEDED;case Ri.RESOURCE_EXHAUSTED:return pe.RESOURCE_EXHAUSTED;case Ri.INTERNAL:return pe.INTERNAL;case Ri.UNAVAILABLE:return pe.UNAVAILABLE;case Ri.UNAUTHENTICATED:return pe.UNAUTHENTICATED;case Ri.INVALID_ARGUMENT:return pe.INVALID_ARGUMENT;case Ri.NOT_FOUND:return pe.NOT_FOUND;case Ri.ALREADY_EXISTS:return pe.ALREADY_EXISTS;case Ri.PERMISSION_DENIED:return pe.PERMISSION_DENIED;case Ri.FAILED_PRECONDITION:return pe.FAILED_PRECONDITION;case Ri.ABORTED:return pe.ABORTED;case Ri.OUT_OF_RANGE:return pe.OUT_OF_RANGE;case Ri.UNIMPLEMENTED:return pe.UNIMPLEMENTED;case Ri.DATA_LOSS:return pe.DATA_LOSS;default:return Et()}}(Pn=Ri||(Ri={}))[Pn.OK=0]="OK",Pn[Pn.CANCELLED=1]="CANCELLED",Pn[Pn.UNKNOWN=2]="UNKNOWN",Pn[Pn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pn[Pn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pn[Pn.NOT_FOUND=5]="NOT_FOUND",Pn[Pn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pn[Pn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pn[Pn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pn[Pn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pn[Pn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pn[Pn.ABORTED=10]="ABORTED",Pn[Pn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pn[Pn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pn[Pn.INTERNAL=13]="INTERNAL",Pn[Pn.UNAVAILABLE=14]="UNAVAILABLE",Pn[Pn.DATA_LOSS=15]="DATA_LOSS";class nR{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return PI}static getOrCreateInstance(){return null===PI&&(PI=new nR),PI}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let PI=null;function qL(){return new TextEncoder}const $H=new Uy([4294967295,4294967295],0);function KL(n){const e=qL().encode(n),t=new F$;return t.update(e),new Uint8Array(t.digest())}function YL(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Uy([t,r],0),new Uy([i,s],0)]}class rR{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new $w(`Invalid padding: ${t}`);if(r<0)throw new $w(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new $w(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new $w(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Uy.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Uy.fromNumber(r)));return 1===i.compare($H)&&(i=new Uy([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=KL(e),[r,i]=YL(t);for(let s=0;s<this.hashCount;s++){const l=this.Et(r,i,s);if(!this.At(l))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),l=new rR(s,i,t);return r.forEach(h=>l.insert(h)),l}insert(e){if(0===this.It)return;const t=KL(e),[r,i]=YL(t);for(let s=0;s<this.hashCount;s++){const l=this.Et(r,i,s);this.Rt(l)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class $w extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Hw{constructor(e,t,r,i,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,zw.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Hw(Ot.min(),i,new _r(en),Go(),dn())}}class zw{constructor(e,t,r,i,s){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new zw(r,t,dn(),dn(),dn())}}class kI{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class ZL{constructor(e,t){this.targetId=e,this.Vt=t}}class QL{constructor(e,t,r=$i.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class JL{constructor(){this.St=0,this.Dt=e2(),this.Ct=$i.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=dn(),t=dn(),r=dn();return this.Dt.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:Et()}}),new zw(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=e2()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class HH{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Go(),this.zt=XL(),this.Wt=new _r(en)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:Et()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,s=this.se(r);if(s){const l=s.target;if(SI(l))if(0===i){const h=new lt(l.path);this.Yt(r,h,Tr.newNoDocument(h,Ot.min()))}else Rt(1===i);else{const h=this.ie(r);if(h!==i){const m=this.re(e,h);0!==m&&(this.ee(r),this.Wt=this.Wt.insert(r,2===m?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=nR.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(y,D,S){var R,P,$,Z,oe,Ue;const Ge={localCacheCount:D,existenceFilterCount:S.count},tt=S.unchangedNames;return tt&&(Ge.bloomFilter={applied:0===y,hashCount:null!==(R=tt?.hashCount)&&void 0!==R?R:0,bitmapLength:null!==(Z=null===($=null===(P=tt?.bits)||void 0===P?void 0:P.bitmap)||void 0===$?void 0:$.length)&&void 0!==Z?Z:0,padding:null!==(Ue=null===(oe=tt?.bits)||void 0===oe?void 0:oe.padding)&&void 0!==Ue?Ue:0}),Ge}(m,h,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:s="",padding:l=0},hashCount:h=0}=r;let m,y;try{m=th(s).toUint8Array()}catch(D){if(D instanceof sL)return dl("Decoding the base64 bloom filter in existence filter failed ("+D.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw D}try{y=new rR(m,l,h)}catch(D){return dl(D instanceof $w?"BloomFilter error: ":"Applying bloom filter failed: ",D),1}return 0===y.It?1:i!==t-this.oe(e.targetId,y)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(s=>{const l=this.Gt.ue(),h=`projects/${l.projectId}/databases/${l.database}/documents/${s.path.canonicalString()}`;t.vt(h)||(this.Yt(e,s,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((s,l)=>{const h=this.se(l);if(h){if(s.current&&SI(h.target)){const m=new lt(h.target.path);null!==this.jt.get(m)||this.ae(l,m)||this.Yt(l,m,Tr.newNoDocument(m,e))}s.Mt&&(t.set(l,s.Ot()),s.Ft())}});let r=dn();this.zt.forEach((s,l)=>{let h=!0;l.forEachWhile(m=>{const y=this.se(m);return!y||"TargetPurposeLimboResolution"===y.purpose||(h=!1,!1)}),h&&(r=r.add(s))}),this.jt.forEach((s,l)=>l.setReadTime(e));const i=new Hw(e,t,this.Wt,this.jt,r);return this.jt=Go(),this.zt=XL(),this.Wt=new _r(en),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new JL,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new Cr(en),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||He("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new JL),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function XL(){return new _r(lt.comparator)}function e2(){return new _r(lt.comparator)}const zH={asc:"ASCENDING",desc:"DESCENDING"},WH={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},qH={and:"AND",or:"OR"};class KH{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function iR(n,e){return n.useProto3Json||Mw(e)?e:{value:e}}function Jy(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function t2(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function YH(n,e){return Jy(n,e.toTimestamp())}function bi(n){return Rt(!!n),Ot.fromTimestamp(function(e){const t=Zf(e);return new Pr(t.seconds,t.nanos)}(n))}function sR(n,e){return(t=n,new xn(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function n2(n){const e=xn.fromString(n);return Rt(d2(e)),e}function Ww(n,e){return sR(n.databaseId,e.path)}function Gc(n,e){const t=n2(e);if(t.get(1)!==n.databaseId.projectId)throw new xe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new xe(pe.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new lt(i2(t))}function oR(n,e){return sR(n.databaseId,e)}function r2(n){const e=n2(n);return 4===e.length?xn.emptyPath():i2(e)}function qw(n){return new xn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function i2(n){return Rt(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function s2(n,e,t){return{name:Ww(n,e),fields:t.value.mapValue.fields}}function o2(n,e,t){const r=Gc(n,e.name),i=bi(e.updateTime),s=e.createTime?bi(e.createTime):Ot.min(),l=new Ns({mapValue:{fields:e.fields}}),h=Tr.newFoundDocument(r,i,s,l);return t&&h.setHasCommittedMutations(),t?h.setHasCommittedMutations():h}function Kw(n,e){let t;if(e instanceof Zy)t={update:s2(n,e.key,e.value)};else if(e instanceof Qy)t={delete:Ww(n,e.key)};else if(e instanceof ih)t={update:s2(n,e.key,e.data),updateMask:r3(e.fieldMask)};else{if(!(e instanceof JM))return Et();t={verify:Ww(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,s){const l=s.transform;if(l instanceof Ky)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Jg)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Xg)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Yy)return{fieldPath:s.field.canonicalString(),increment:l.gt};throw Et()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:YH(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:Et()),t;var i}function aR(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?kr.updateTime(bi(i.updateTime)):void 0!==i.exists?kr.exists(i.exists):kr.none():kr.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(s,l){let h=null;"setToServerValue"in l?(Rt("REQUEST_TIME"===l.setToServerValue),h=new Ky):"appendMissingElements"in l?h=new Jg(l.appendMissingElements.values||[]):"removeAllFromArray"in l?h=new Xg(l.removeAllFromArray.values||[]):"increment"in l?h=new Yy(s,l.increment):Et();const m=ni.fromServerFormat(l.fieldPath);return new jw(m,h)}(n,i)):[];var i;if(e.update){const i=Gc(n,e.update.name),s=new Ns({mapValue:{fields:e.update.fields}});if(e.updateMask){const l=new jo((e.updateMask.fieldPaths||[]).map(y=>ni.fromServerFormat(y)));return new ih(i,s,l,t,r)}return new Zy(i,s,t,r)}if(e.delete){const i=Gc(n,e.delete);return new Qy(i,t)}if(e.verify){const i=Gc(n,e.verify);return new JM(i,t)}return Et()}function a2(n,e){return{documents:[oR(n,e.path)]}}function lR(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=oR(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=oR(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return c2(ir.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const s=function(m){if(0!==m.length)return m.map(y=>{return{field:np((D=y).field),direction:e3(D.dir)};var D})}(e.orderBy);s&&(t.structuredQuery.orderBy=s);const l=iR(n,e.limit);var h,m;return null!==l&&(t.structuredQuery.limit=l),e.startAt&&(t.structuredQuery.startAt={before:(h=e.startAt).inclusive,values:h.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function l2(n){let e=r2(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){Rt(1===r);const D=t.from[0];D.allDescendants?i=D.collectionId:e=e.child(D.collectionId)}let s=[];t.where&&(s=function(D){const S=u2(D);return S instanceof ir&&HM(S)?S.getFilters():[S]}(t.where));let l=[];t.orderBy&&(l=t.orderBy.map(D=>{return new zy(Xy((S=D).field),function(R){switch(R){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(S.direction));var S}));let h=null;t.limit&&(h=function(D){let S;return S="object"==typeof D?D.value:D,Mw(S)?null:S}(t.limit));let m=null;var D;t.startAt&&(m=new tp((D=t.startAt).values||[],!!D.before));let y=null;return t.endAt&&(y=function(D){return new tp(D.values||[],!D.before)}(t.endAt)),CL(e,i,l,s,h,"F",m,y)}function u2(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=Xy(e.unaryFilter.field);return In.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=Xy(e.unaryFilter.field);return In.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=Xy(e.unaryFilter.field);return In.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=Xy(e.unaryFilter.field);return In.create(s,"!=",{nullValue:"NULL_VALUE"});default:return Et()}}(n):void 0!==n.fieldFilter?In.create(Xy((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Et()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return ir.create(e.compositeFilter.filters.map(t=>u2(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return Et()}}(e.compositeFilter.op))}(n):Et();var e}function e3(n){return zH[n]}function t3(n){return WH[n]}function n3(n){return qH[n]}function np(n){return{fieldPath:n.canonicalString()}}function Xy(n){return ni.fromServerFormat(n.fieldPath)}function c2(n){return n instanceof In?function(e){if("=="===e.op){if(lL(e.value))return{unaryFilter:{field:np(e.field),op:"IS_NAN"}};if(aL(e.value))return{unaryFilter:{field:np(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(lL(e.value))return{unaryFilter:{field:np(e.field),op:"IS_NOT_NAN"}};if(aL(e.value))return{unaryFilter:{field:np(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:np(e.field),op:t3(e.op),value:e.value}}}(n):n instanceof ir?function(e){const t=e.getFilters().map(r=>c2(r));return 1===t.length?t[0]:{compositeFilter:{op:n3(e.op),filters:t}}}(n):Et()}function r3(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function d2(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class sh{constructor(e,t,r,i,s=Ot.min(),l=Ot.min(),h=$i.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=l,this.resumeToken=h,this.expectedCount=m}withSequenceNumber(e){return new sh(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new sh(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new sh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new sh(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class h2{constructor(e){this.fe=e}}function f2(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:FI(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Ww(i=n.fe,(s=e).key),fields:s.data.value.mapValue.fields,updateTime:Jy(i,s.version.toTimestamp()),createTime:Jy(i,s.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:em(e.version)};else{if(!e.isUnknownDocument())return Et();r.unknownDocument={path:t.path.toArray(),version:em(e.version)}}var i,s;return r}function FI(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function em(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function tm(n){const e=new Pr(n.seconds,n.nanoseconds);return Ot.fromTimestamp(e)}function nm(n,e){const t=(e.baseMutations||[]).map(s=>aR(n.fe,s));for(let s=0;s<e.mutations.length-1;++s)s+1<e.mutations.length&&void 0!==e.mutations[s+1].transform&&(e.mutations[s].updateTransforms=e.mutations[s+1].transform.fieldTransforms,e.mutations.splice(s+1,1),++s);const r=e.mutations.map(s=>aR(n.fe,s)),i=Pr.fromMillis(e.localWriteTimeMs);return new XM(e.batchId,i,t,r)}function Yw(n){const e=tm(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?tm(n.lastLimboFreeSnapshotVersion):Ot.min();let r;var i;return void 0!==n.query.documents?(Rt(1===(i=n.query).documents.length),r=Co(qy(r2(i.documents[0])))):r=Co(l2(n.query)),new sh(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,$i.fromBase64String(n.resumeToken))}function p2(n,e){const t=em(e.snapshotVersion),r=em(e.lastLimboFreeSnapshotVersion);let i;i=SI(e.target)?a2(n.fe,e.target):lR(n.fe,e.target);const s=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Zg(e.target),readTime:t,resumeToken:s,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function uR(n){const e=l2({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?MI(e,e.limit,"L"):e}function cR(n,e){return new tR(e.largestBatchId,aR(n.fe,e.overlayMutation))}function g2(n,e){const t=e.path.lastSegment();return[n,Ws(e.path.popLast()),t]}function m2(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:em(r.readTime),documentKey:Ws(r.documentKey.path),largestBatchId:r.largestBatchId}}class s3{getBundleMetadata(e,t){return _2(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:tm(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return _2(e).put({bundleId:(r=t).id,createTime:em(bi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return y2(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:uR(i.bundledQuery),readTime:tm(i.readTime)};var i})}saveNamedQuery(e,t){return y2(e).put({name:(r=t).name,readTime:em(bi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function _2(n){return fs(n,"bundles")}function y2(n){return fs(n,"namedQueries")}class LI{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new LI(e,t.uid||"")}getOverlay(e,t){return Zw(e).get(g2(this.userId,t)).next(r=>r?cR(this.serializer,r):null)}getOverlays(e,t){const r=jc();return ce.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((s,l)=>{const h=new tR(t,l);i.push(this.we(e,h))}),ce.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(l=>i.add(Ws(l.getCollectionPath())));const s=[];return i.forEach(l=>{const h=IDBKeyRange.bound([this.userId,l,r],[this.userId,l,r+1],!1,!0);s.push(Zw(e).J("collectionPathOverlayIndex",h))}),ce.waitFor(s)}getOverlaysForCollection(e,t,r){const i=jc(),s=Ws(t),l=IDBKeyRange.bound([this.userId,s,r],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Zw(e).j("collectionPathOverlayIndex",l).next(h=>{for(const m of h){const y=cR(this.serializer,m);i.set(y.getKey(),y)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const s=jc();let l;const h=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return Zw(e).X({index:"collectionGroupOverlayIndex",range:h},(m,y,D)=>{const S=cR(this.serializer,y);s.size()<i||S.largestBatchId===l?(s.set(S.getKey(),S),l=S.largestBatchId):D.done()}).next(()=>s)}we(e,t){return Zw(e).put(function(r,i,s){const[l,h,m]=g2(i,s.mutation.key);return{userId:i,collectionPath:h,documentId:m,collectionGroup:s.mutation.key.getCollectionGroup(),largestBatchId:s.largestBatchId,overlayMutation:Kw(r.fe,s.mutation)}}(this.serializer,this.userId,t))}}function Zw(n){return fs(n,"documentOverlays")}class rm{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(ri(e.integerValue));else if("doubleValue"in e){const r=ri(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Rw(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(th(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?uL(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):Et()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),lt.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function o3(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function v2(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const s=o3(255&t[i]);if(r+=s,8!==s)break}return r}(n);return Math.ceil(e/8)}rm.Ve=new rm;class a3{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=v2(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=v2(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const s=new DataView(new ArrayBuffer(8));return s.setFloat64(0,i,!1),new Uint8Array(s.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class l3{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class u3{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class Qw{constructor(){this.je=new a3,this.ze=new l3(this.je),this.We=new u3(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class im{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new im(this.indexId,this.documentKey,this.arrayValue,r)}}function rp(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=b2(n.arrayValue,e.arrayValue),0!==t?t:(t=b2(n.directionalValue,e.directionalValue),0!==t?t:lt.comparator(n.documentKey,e.documentKey)))}function b2(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class c3{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){Rt(e.collectionGroup===this.collectionId);const t=FM(e);if(void 0!==t&&!this.en(t))return!1;const r=qg(e);let i=0,s=0;for(;i<r.length&&this.en(r[i]);++i);if(i===r.length)return!0;if(void 0!==this.Ze){const l=r[i];if(!this.nn(this.Ze,l)||!this.sn(this.Ye[s++],l))return!1;++i}for(;i<r.length;++i)if(s>=this.Ye.length||!this.sn(this.Ye[s++],r[i]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function w2(n){var e,t;if(Rt(n instanceof In||n instanceof ir),n instanceof In){if(n instanceof wL){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(s=>In.create(n.field,"==",s)))||[];return ir.create(i,"or")}return n}const r=n.filters.map(i=>w2(i));return ir.create(r,n.op)}function d3(n){if(0===n.getFilters().length)return[];const e=fR(w2(n));return Rt(D2(e)),dR(e)||hR(e)?[e]:e.getFilters()}function dR(n){return n instanceof In}function hR(n){return n instanceof ir&&HM(n)}function D2(n){return dR(n)||hR(n)||function(e){if(e instanceof ir&&$M(e)){for(const t of e.getFilters())if(!dR(t)&&!hR(t))return!1;return!0}return!1}(n)}function fR(n){if(Rt(n instanceof In||n instanceof ir),n instanceof In)return n;if(1===n.filters.length)return fR(n.filters[0]);const e=n.filters.map(r=>fR(r));let t=ir.create(e,n.op);return t=BI(t),D2(t)?t:(Rt(t instanceof ir),Rt(Wy(t)),Rt(t.filters.length>1),t.filters.reduce((r,i)=>pR(r,i)))}function pR(n,e){let t;return Rt(n instanceof In||n instanceof ir),Rt(e instanceof In||e instanceof ir),t=n instanceof In?e instanceof In?ir.create([n,e],"and"):E2(n,e):e instanceof In?E2(e,n):function(r,i){if(Rt(r.filters.length>0&&i.filters.length>0),Wy(r)&&Wy(i))return yL(r,i.getFilters());const s=$M(r)?r:i,l=$M(r)?i:r,h=s.filters.map(m=>pR(m,l));return ir.create(h,"or")}(n,e),BI(t)}function E2(n,e){if(Wy(e))return yL(e,n.getFilters());{const t=e.filters.map(r=>pR(n,r));return ir.create(t,"or")}}function BI(n){if(Rt(n instanceof In||n instanceof ir),n instanceof In)return n;const e=n.getFilters();if(1===e.length)return BI(e[0]);if(mL(n))return n;const t=e.map(i=>BI(i)),r=[];return t.forEach(i=>{i instanceof In?r.push(i):i instanceof ir&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:ir.create(r,n.op)}class h3{constructor(){this.rn=new gR}addToCollectionParentIndex(e,t){return this.rn.add(t),ce.resolve()}getCollectionParents(e,t){return ce.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ce.resolve()}deleteFieldIndex(e,t){return ce.resolve()}getDocumentsMatchingTarget(e,t){return ce.resolve(null)}getIndexType(e,t){return ce.resolve(0)}getFieldIndexes(e,t){return ce.resolve([])}getNextCollectionGroupToUpdate(e){return ce.resolve(null)}getMinOffset(e,t){return ce.resolve(Sa.min())}getMinOffsetFromCollectionGroup(e,t){return ce.resolve(Sa.min())}updateCollectionGroup(e,t,r){return ce.resolve()}updateIndexEntries(e,t){return ce.resolve()}}class gR{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new Cr(xn.comparator),s=!i.has(r);return this.index[t]=i.add(r),s}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Cr(xn.comparator)).toArray()}}const VI=new Uint8Array(0);class f3{constructor(e,t){this.user=e,this.databaseId=t,this.on=new gR,this.un=new rh(r=>Zg(r),(r,i)=>Fw(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const s={collectionId:r,parent:Ws(i)};return C2(e).put(s)}return ce.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[$F(t),""],!1,!0);return C2(e).j(i).next(s=>{for(const l of s){if(l.collectionId!==t)break;r.push(Vc(l.parent))}return r})}addFieldIndex(e,t){const r=UI(e),i={indexId:(l=t).indexId,collectionGroup:l.collectionGroup,fields:l.fields.map(h=>[h.fieldPath.canonicalString(),h.kind])};var l;delete i.indexId;const s=r.add(i);if(t.indexState){const l=Xw(e);return s.next(h=>{l.put(m2(h,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return s.next()}deleteFieldIndex(e,t){const r=UI(e),i=Xw(e),s=Jw(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=Jw(e);let i=!0;const s=new Map;return ce.forEach(this.cn(t),l=>this.an(e,l).next(h=>{i&&(i=!!h),s.set(l,h)})).next(()=>{if(i){let l=dn();const h=[];return ce.forEach(s,(m,y)=>{var D;He("IndexedDbIndexManager",`Using index ${D=m,`id=${D.indexId}|cg=${D.collectionGroup}|f=${D.fields.map(tt=>`${tt.fieldPath}:${tt.kind}`).join(",")}`} to execute ${Zg(t)}`);const S=function(tt,Xe){const ht=FM(Xe);if(void 0===ht)return null;for(const It of AI(tt,ht.fieldPath))switch(It.op){case"array-contains-any":return It.value.arrayValue.values||[];case"array-contains":return[It.value]}return null}(y,m),R=function(tt,Xe){const ht=new Map;for(const It of qg(Xe))for(const hn of AI(tt,It.fieldPath))switch(hn.op){case"==":case"in":ht.set(It.fieldPath.canonicalString(),hn.value);break;case"not-in":case"!=":return ht.set(It.fieldPath.canonicalString(),hn.value),Array.from(ht.values())}return null}(y,m),P=function(tt,Xe){const ht=[];let It=!0;for(const hn of qg(Xe)){const kn=0===hn.kind?DL(tt,hn.fieldPath,tt.startAt):EL(tt,hn.fieldPath,tt.startAt);ht.push(kn.value),It&&(It=kn.inclusive)}return new tp(ht,It)}(y,m),$=function(tt,Xe){const ht=[];let It=!0;for(const hn of qg(Xe)){const kn=0===hn.kind?EL(tt,hn.fieldPath,tt.endAt):DL(tt,hn.fieldPath,tt.endAt);ht.push(kn.value),It&&(It=kn.inclusive)}return new tp(ht,It)}(y,m),Z=this.hn(m,y,P),oe=this.hn(m,y,$),Ue=this.ln(m,y,R),Ge=this.fn(m.indexId,S,Z,P.inclusive,oe,$.inclusive,Ue);return ce.forEach(Ge,tt=>r.H(tt,t.limit).next(Xe=>{Xe.forEach(ht=>{const It=lt.fromSegments(ht.documentKey);l.has(It)||(l=l.add(It),h.push(It))})}))}).next(()=>h)}return ce.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:d3(ir.create(e.filters,"and")).map(r=>WM(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,s,l,h){const m=(null!=t?t.length:1)*Math.max(r.length,s.length),y=m/(null!=t?t.length:1),D=[];for(let S=0;S<m;++S){const R=t?this.dn(t[S/y]):VI,P=this.wn(e,R,r[S%y],i),$=this._n(e,R,s[S%y],l),Z=h.map(oe=>this.wn(e,R,oe,!0));D.push(...this.createRange(P,$,Z))}return D}wn(e,t,r,i){const s=new im(e,lt.empty(),t,r);return i?s:s.Je()}_n(e,t,r,i){const s=new im(e,lt.empty(),t,r);return i?s.Je():s}an(e,t){const r=new c3(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(s=>{let l=null;for(const h of s)r.tn(h)&&(!l||h.fields.length>l.fields.length)&&(l=h);return l})}getIndexType(e,t){let r=2;const i=this.cn(t);return ce.forEach(i,s=>this.an(e,s).next(l=>{l?0!==r&&l.fields.length<function(h){let m=new Cr(ni.comparator),y=!1;for(const D of h.filters)for(const S of D.getFlattenedFilters())S.field.isKeyField()||("array-contains"===S.op||"array-contains-any"===S.op?y=!0:m=m.add(S.field));for(const D of h.orderBy)D.field.isKeyField()||(m=m.add(D.field));return m.size+(y?1:0)}(s)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new Qw;for(const i of qg(e)){const s=t.data.field(i.fieldPath);if(null==s)return null;const l=r.He(i.kind);rm.Ve._e(s,l)}return r.Qe()}dn(e){const t=new Qw;return rm.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new Qw;return rm.Ve._e(Yg(this.databaseId,t),r.He(function(i){const s=qg(i);return 0===s.length?0:s[s.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new Qw);let s=0;for(const l of qg(e)){const h=r[s++];for(const m of i)if(this.yn(t,l.fieldPath)&&Pw(h))i=this.pn(i,l,h);else{const y=m.He(l.kind);rm.Ve._e(h,y)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],s=[];for(const l of r.arrayValue.values||[])for(const h of i){const m=new Qw;m.seed(h.Qe()),rm.Ve._e(l,m.He(t.kind)),s.push(m)}return s}yn(e,t){return!!e.filters.find(r=>r instanceof In&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=UI(e),i=Xw(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(s=>{const l=[];return ce.forEach(s,h=>i.get([h.indexId,this.uid]).next(m=>{l.push(function(y,D){const S=D?new Aw(D.sequenceNumber,new Sa(tm(D.readTime),new lt(Vc(D.documentKey)),D.largestBatchId)):Aw.empty(),R=y.fields.map(([P,$])=>new yI(ni.fromServerFormat(P),$));return new _I(y.indexId,y.collectionGroup,R,S)}(h,m))})).next(()=>l)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const s=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==s?s:en(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=UI(e),s=Xw(e);return this.Tn(e).next(l=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(h=>ce.forEach(h,m=>s.put(m2(m.indexId,this.user,l,r)))))}updateIndexEntries(e,t){const r=new Map;return ce.forEach(t,(i,s)=>{const l=r.get(i.collectionGroup);return(l?ce.resolve(l):this.getFieldIndexes(e,i.collectionGroup)).next(h=>(r.set(i.collectionGroup,h),ce.forEach(h,m=>this.En(e,i,m).next(y=>{const D=this.An(s,m);return y.isEqual(D)?ce.resolve():this.vn(e,s,m,y,D)}))))})}Rn(e,t,r,i){return Jw(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return Jw(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=Jw(e);let s=new Cr(rp);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(l,h)=>{s=s.add(new im(r.indexId,t,h.arrayValue,h.directionalValue))}).next(()=>s)}An(e,t){let r=new Cr(rp);const i=this.mn(t,e);if(null==i)return r;const s=FM(t);if(null!=s){const l=e.data.field(s.fieldPath);if(Pw(l))for(const h of l.arrayValue.values||[])r=r.add(new im(t.indexId,e.key,this.dn(h),i))}else r=r.add(new im(t.indexId,e.key,VI,i));return r}vn(e,t,r,i,s){He("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const l=[];return function(h,m,y,D,S){const R=h.getIterator(),P=m.getIterator();let $=$y(R),Z=$y(P);for(;$||Z;){let oe=!1,Ue=!1;if($&&Z){const Ge=y($,Z);Ge<0?Ue=!0:Ge>0&&(oe=!0)}else null!=$?Ue=!0:oe=!0;oe?(D(Z),Z=$y(P)):Ue?(S($),$=$y(R)):($=$y(R),Z=$y(P))}}(i,s,rp,h=>{l.push(this.Rn(e,t,r,h))},h=>{l.push(this.Pn(e,t,r,h))}),ce.waitFor(l)}Tn(e){let t=1;return Xw(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,s)=>{s.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((l,h)=>rp(l,h)).filter((l,h,m)=>!h||0!==rp(l,m[h-1]));const i=[];i.push(e);for(const l of r){const h=rp(l,e),m=rp(l,t);if(0===h)i[0]=e.Je();else if(h>0&&m<0)i.push(l),i.push(l.Je());else if(m>0)break}i.push(t);const s=[];for(let l=0;l<i.length;l+=2){if(this.bn(i[l],i[l+1]))return[];s.push(IDBKeyRange.bound([i[l].indexId,this.uid,i[l].arrayValue,i[l].directionalValue,VI,[]],[i[l+1].indexId,this.uid,i[l+1].arrayValue,i[l+1].directionalValue,VI,[]]))}return s}bn(e,t){return rp(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(T2)}getMinOffset(e,t){return ce.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||Et())).next(T2)}}function C2(n){return fs(n,"collectionParents")}function Jw(n){return fs(n,"indexEntries")}function UI(n){return fs(n,"indexConfiguration")}function Xw(n){return fs(n,"indexState")}function T2(n){Rt(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;LM(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new Sa(e.readTime,e.documentKey,t)}const I2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class qs{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new qs(e,qs.DEFAULT_COLLECTION_PERCENTILE,qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function S2(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),s=[],l=IDBKeyRange.only(t.batchId);let h=0;const m=r.X({range:l},(D,S,R)=>(h++,R.delete()));s.push(m.next(()=>{Rt(1===h)}));const y=[];for(const D of t.mutations){const S=JF(e,D.key.path,t.batchId);s.push(i.delete(S)),y.push(D.key)}return ce.waitFor(s).next(()=>y)}function jI(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw Et();e=n.noDocument}return JSON.stringify(e).length}qs.DEFAULT_COLLECTION_PERCENTILE=10,qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,qs.DEFAULT=new qs(41943040,qs.DEFAULT_COLLECTION_PERCENTILE,qs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),qs.DISABLED=new qs(-1,0,0);class GI{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){Rt(""!==e.uid);const s=e.isAuthenticated()?e.uid:"";return new GI(s,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return ip(e).X({index:"userMutationsIndex",range:r},(i,s,l)=>{t=!1,l.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const s=ev(e),l=ip(e);return l.add({}).next(h=>{Rt("number"==typeof h);const m=new XM(h,t,r,i),y=function(R,P,$){const Z=$.baseMutations.map(Ue=>Kw(R.fe,Ue)),oe=$.mutations.map(Ue=>Kw(R.fe,Ue));return{userId:P,batchId:$.batchId,localWriteTimeMs:$.localWriteTime.toMillis(),baseMutations:Z,mutations:oe}}(this.serializer,this.userId,m),D=[];let S=new Cr((R,P)=>en(R.canonicalString(),P.canonicalString()));for(const R of i){const P=JF(this.userId,R.key.path,h);S=S.add(R.key.path.popLast()),D.push(l.put(y)),D.push(s.put(P,eH))}return S.forEach(R=>{D.push(this.indexManager.addToCollectionParentIndex(e,R))}),e.addOnCommittedListener(()=>{this.Vn[h]=m.keys()}),ce.waitFor(D).next(()=>m)})}lookupMutationBatch(e,t){return ip(e).get(t).next(r=>r?(Rt(r.userId===this.userId),nm(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ce.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let s=null;return ip(e).X({index:"userMutationsIndex",range:i},(l,h,m)=>{h.userId===this.userId&&(Rt(h.batchId>=r),s=nm(this.serializer,h)),m.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return ip(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,s,l)=>{r=s.batchId,l.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return ip(e).j("userMutationsIndex",t).next(r=>r.map(i=>nm(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=bI(this.userId,t.path),i=IDBKeyRange.lowerBound(r),s=[];return ev(e).X({range:i},(l,h,m)=>{const[y,D,S]=l,R=Vc(D);if(y===this.userId&&t.path.isEqual(R))return ip(e).get(S).next(P=>{if(!P)throw Et();Rt(P.userId===this.userId),s.push(nm(this.serializer,P))});m.done()}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cr(en);const i=[];return t.forEach(s=>{const l=bI(this.userId,s.path),h=IDBKeyRange.lowerBound(l),m=ev(e).X({range:h},(y,D,S)=>{const[R,P,$]=y,Z=Vc(P);R===this.userId&&s.path.isEqual(Z)?r=r.add($):S.done()});i.push(m)}),ce.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,s=bI(this.userId,r),l=IDBKeyRange.lowerBound(s);let h=new Cr(en);return ev(e).X({range:l},(m,y,D)=>{const[S,R,P]=m,$=Vc(R);S===this.userId&&r.isPrefixOf($)?$.length===i&&(h=h.add(P)):D.done()}).next(()=>this.Dn(e,h))}Dn(e,t){const r=[],i=[];return t.forEach(s=>{i.push(ip(e).get(s).next(l=>{if(null===l)throw Et();Rt(l.userId===this.userId),r.push(nm(this.serializer,l))}))}),ce.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return S2(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ce.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ce.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return ev(e).X({range:r},(s,l,h)=>{if(s[0]===this.userId){const m=Vc(s[1]);i.push(m)}else h.done()}).next(()=>{Rt(0===i.length)})})}containsKey(e,t){return A2(e,this.userId,t)}xn(e){return N2(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function A2(n,e,t){const r=bI(e,t.path),i=r[1],s=IDBKeyRange.lowerBound(r);let l=!1;return ev(n).X({range:s,Y:!0},(h,m,y)=>{const[D,S,R]=h;D===e&&S===i&&(l=!0),y.done()}).next(()=>l)}function ip(n){return fs(n,"mutations")}function ev(n){return fs(n,"documentMutations")}function N2(n){return fs(n,"mutationQueues")}class sm{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new sm(0)}static Mn(){return new sm(-1)}}class p3{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new sm(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Ot.fromTimestamp(new Pr(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>tv(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(Rt(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const s=[];return tv(e).X((l,h)=>{const m=Yw(h);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,s.push(this.removeTargetData(e,m)))}).next(()=>ce.waitFor(s)).next(()=>i)}forEachTarget(e,t){return tv(e).X((r,i)=>{const s=Yw(i);t(s)})}$n(e){return M2(e).get("targetGlobalKey").next(t=>(Rt(null!==t),t))}On(e,t){return M2(e).put("targetGlobalKey",t)}Fn(e,t){return tv(e).put(p2(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Zg(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let s=null;return tv(e).X({range:i,index:"queryTargetsIndex"},(l,h,m)=>{const y=Yw(h);Fw(t,y.target)&&(s=y,m.done())}).next(()=>s)}addMatchingKeys(e,t,r){const i=[],s=sp(e);return t.forEach(l=>{const h=Ws(l.path);i.push(s.put({targetId:r,path:h})),i.push(this.referenceDelegate.addReference(e,r,l))}),ce.waitFor(i)}removeMatchingKeys(e,t,r){const i=sp(e);return ce.forEach(t,s=>{const l=Ws(s.path);return ce.waitFor([i.delete([r,l]),this.referenceDelegate.removeReference(e,r,s)])})}removeMatchingKeysForTargetId(e,t){const r=sp(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=sp(e);let s=dn();return i.X({range:r,Y:!0},(l,h,m)=>{const y=Vc(l[1]),D=new lt(y);s=s.add(D)}).next(()=>s)}containsKey(e,t){const r=Ws(t.path),i=IDBKeyRange.bound([r],[$F(r)],!1,!0);let s=0;return sp(e).X({index:"documentTargetsIndex",Y:!0,range:i},([l,h],m,y)=>{0!==l&&(s++,y.done())}).next(()=>s>0)}le(e,t){return tv(e).get(t).next(r=>r?Yw(r):null)}}function tv(n){return fs(n,"targets")}function M2(n){return fs(n,"targetGlobal")}function sp(n){return fs(n,"targetDocuments")}function R2([n,e],[t,r]){const i=en(n,t);return 0===i?en(e,r):i}class g3{constructor(e){this.Ln=e,this.buffer=new Cr(R2),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();R2(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class O2{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;He("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,we.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){Kf(r)?He("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield qf(r)}yield t.Qn(3e5)}))}}class m3{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ce.resolve(Aa.ct);const r=new g3(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector","Garbage collection skipped; disabled"),ce.resolve(I2)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(He("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),I2):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,s,l,h,m,y;const D=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(S=>(S>this.params.maximumSequenceNumbersToCollect?(He("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${S}`),i=this.params.maximumSequenceNumbersToCollect):i=S,l=Date.now(),this.nthSequenceNumber(e,i))).next(S=>(r=S,h=Date.now(),this.removeTargets(e,r,t))).next(S=>(s=S,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(S=>(y=Date.now(),PM()<=Fi.in.DEBUG&&He("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${l-D}ms\n\tDetermined least recently used ${i} in `+(h-l)+`ms\n\tRemoved ${s} targets in `+(m-h)+`ms\n\tRemoved ${S} documents in `+(y-m)+`ms\nTotal Duration: ${y-D}ms`),ce.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:S})))}}class _3{constructor(e,t){this.db=e,this.garbageCollector=function x2(n,e){return new m3(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return $I(e,r)}removeReference(e,t,r){return $I(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return $I(e,t)}Xn(e,t){return function(r,i){let s=!1;return N2(r).Z(l=>A2(r,l,i).next(h=>(h&&(s=!0),ce.resolve(!h)))).next(()=>s)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let s=0;return this.Yn(e,(l,h)=>{if(h<=t){const m=this.Xn(e,l).next(y=>{if(!y)return s++,r.getEntry(e,l).next(()=>(r.removeEntry(l,Ot.min()),sp(e).delete([0,Ws(l.path)])))});i.push(m)}}).next(()=>ce.waitFor(i)).next(()=>r.apply(e)).next(()=>s)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return $I(e,t)}Yn(e,t){const r=sp(e);let i,s=Aa.ct;return r.X({index:"documentTargetsIndex"},([l,h],{path:m,sequenceNumber:y})=>{0===l?(s!==Aa.ct&&t(new lt(Vc(i)),s),s=y,i=m):s=Aa.ct}).next(()=>{s!==Aa.ct&&t(new lt(Vc(i)),s)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function $I(n,e){return sp(n).put((r=n.currentSequenceNumber,{targetId:0,path:Ws(e.path),sequenceNumber:r}));var r}class P2{constructor(){this.changes=new rh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Tr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ce.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class y3{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return om(e).put(r)}removeEntry(e,t,r){return om(e).delete(function(i,s){const l=i.path.toArray();return[l.slice(0,l.length-2),l[l.length-2],FI(s),l[l.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Tr.newInvalidDocument(t);return om(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(eD(t))},(i,s)=>{r=this.ts(t,s)}).next(()=>r)}es(e,t){let r={size:0,document:Tr.newInvalidDocument(t)};return om(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(eD(t))},(i,s)=>{r={document:this.ts(t,s),size:jI(s)}}).next(()=>r)}getEntries(e,t){let r=Go();return this.ns(e,t,(i,s)=>{const l=this.ts(i,s);r=r.insert(i,l)}).next(()=>r)}ss(e,t){let r=Go(),i=new _r(lt.comparator);return this.ns(e,t,(s,l)=>{const h=this.ts(s,l);r=r.insert(s,h),i=i.insert(s,jI(l))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ce.resolve();let i=new Cr(B2);t.forEach(m=>i=i.add(m));const s=IDBKeyRange.bound(eD(i.first()),eD(i.last())),l=i.getIterator();let h=l.getNext();return om(e).X({index:"documentKeyIndex",range:s},(m,y,D)=>{const S=lt.fromSegments([...y.prefixPath,y.collectionGroup,y.documentId]);for(;h&&B2(h,S)<0;)r(h,null),h=l.getNext();h&&h.isEqual(S)&&(r(h,y),h=l.hasNext()?l.getNext():null),h?D.G(eD(h)):D.done()}).next(()=>{for(;h;)r(h,null),h=l.hasNext()?l.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const s=t.path,l=[s.popLast().toArray(),s.lastSegment(),FI(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],h=[s.popLast().toArray(),s.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return om(e).j(IDBKeyRange.bound(l,h,!0)).next(m=>{let y=Go();for(const D of m){const S=this.ts(lt.fromSegments(D.prefixPath.concat(D.collectionGroup,D.documentId)),D);S.isFoundDocument()&&(Bw(t,S)||i.has(S.key))&&(y=y.insert(S.key,S))}return y})}getAllFromCollectionGroup(e,t,r,i){let s=Go();const l=L2(t,r),h=L2(t,Sa.max());return om(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(l,h,!0)},(m,y,D)=>{const S=this.ts(lt.fromSegments(y.prefixPath.concat(y.collectionGroup,y.documentId)),y);s=s.insert(S.key,S),s.size===i&&D.done()}).next(()=>s)}newChangeBuffer(e){return new v3(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return F2(e).get("remoteDocumentGlobalKey").next(t=>(Rt(!!t),t))}Zn(e,t){return F2(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function i3(n,e){let t;if(e.document)t=o2(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=lt.fromSegments(e.noDocument.path),i=tm(e.noDocument.readTime);t=Tr.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return Et();{const r=lt.fromSegments(e.unknownDocument.path),i=tm(e.unknownDocument.version);t=Tr.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Pr(r[0],r[1]);return Ot.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Ot.min()))return r}return Tr.newInvalidDocument(e)}}function k2(n){return new y3(n)}class v3 extends P2{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new rh(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new Cr((s,l)=>en(s.canonicalString(),l.canonicalString()));return this.changes.forEach((s,l)=>{const h=this.us.get(s);if(t.push(this.os.removeEntry(e,s,h.readTime)),l.isValidDocument()){const m=f2(this.os.serializer,l);i=i.add(s.path.popLast());const y=jI(m);r+=y-h.size,t.push(this.os.addEntry(e,s,m))}else if(r-=h.size,this.trackRemovals){const m=f2(this.os.serializer,l.convertToNoDocument(Ot.min()));t.push(this.os.addEntry(e,s,m))}}),i.forEach(s=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,s))}),t.push(this.os.updateMetadata(e,r)),ce.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((s,l)=>{this.us.set(s,{size:l,readTime:r.get(s).readTime})}),r))}}function F2(n){return fs(n,"remoteDocumentGlobal")}function om(n){return fs(n,"remoteDocumentsV14")}function eD(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function L2(n,e){const t=e.documentKey.path.toArray();return[n,FI(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function B2(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let s=0;s<t.length-2&&s<r.length-2;++s)if(i=en(t[s],r[s]),i)return i;return i=en(t.length,r.length),i||(i=en(t[t.length-2],r[r.length-2]),i||en(t[t.length-1],r[r.length-1]))}class b3{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class V2{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Gw(r.mutation,i,jo.empty(),Pr.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,dn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=dn()){const i=jc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(s=>{let l=Vw();return s.forEach((h,m)=>{l=l.insert(h,m.overlayedDocument)}),l}))}getOverlayedDocuments(e,t){const r=jc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,dn()))}populateOverlays(e,t,r){const i=[];return r.forEach(s=>{t.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((l,h)=>{t.set(l,h)})})}computeViews(e,t,r,i){let s=Go();const l=Uw(),h=Uw();return t.forEach((m,y)=>{const D=r.get(y.key);i.has(y.key)&&(void 0===D||D.mutation instanceof ih)?s=s.insert(y.key,y):void 0!==D?(l.set(y.key,D.mutation.getFieldMask()),Gw(D.mutation,y,D.mutation.getFieldMask(),Pr.now())):l.set(y.key,jo.empty())}),this.recalculateAndSaveOverlays(e,s).next(m=>(m.forEach((y,D)=>l.set(y,D)),t.forEach((y,D)=>{var S;return h.set(y,new b3(D,null!==(S=l.get(y))&&void 0!==S?S:null))}),h))}recalculateAndSaveOverlays(e,t){const r=Uw();let i=new _r((l,h)=>l-h),s=dn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(l=>{for(const h of l)h.keys().forEach(m=>{const y=t.get(m);if(null===y)return;let D=r.get(m)||jo.empty();D=h.applyToLocalView(y,D),r.set(m,D);const S=(i.get(h.batchId)||dn()).add(m);i=i.insert(h.batchId,S)})}).next(()=>{const l=[],h=i.getReverseIterator();for(;h.hasNext();){const m=h.getNext(),y=m.key,D=m.value,S=RL();D.forEach(R=>{if(!s.has(R)){const P=UL(t.get(R),r.get(R));null!==P&&S.set(R,P),s=s.add(R)}}),l.push(this.documentOverlayCache.saveOverlays(e,y,S))}return ce.waitFor(l)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return lt.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):KM(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(s=>{const l=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-s.size):ce.resolve(jc());let h=-1,m=s;return l.next(y=>ce.forEach(y,(D,S)=>(h<S.largestBatchId&&(h=S.largestBatchId),s.get(D)?ce.resolve():this.remoteDocumentCache.getEntry(e,D).next(R=>{m=m.insert(D,R)}))).next(()=>this.populateOverlays(e,y,s)).next(()=>this.computeViews(e,m,y,dn())).next(D=>({batchId:h,changes:ML(D)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new lt(t)).next(r=>{let i=Vw();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let s=Vw();return this.indexManager.getCollectionParents(e,i).next(l=>ce.forEach(l,h=>{const m=(y=t,D=h.child(i),new nh(D,null,y.explicitOrderBy.slice(),y.filters.slice(),y.limit,y.limitType,y.startAt,y.endAt));var y,D;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(y=>{y.forEach((D,S)=>{s=s.insert(D,S)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(s=>{i.forEach((h,m)=>{const y=m.getKey();null===s.get(y)&&(s=s.insert(y,Tr.newInvalidDocument(y)))});let l=Vw();return s.forEach((h,m)=>{const y=i.get(h);void 0!==y&&Gw(y.mutation,m,jo.empty(),Pr.now()),Bw(t,m)&&(l=l.insert(h,m))}),l})}}class w3{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ce.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:bi(r.createTime)}),ce.resolve()}getNamedQuery(e,t){return ce.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:uR(r.bundledQuery),readTime:bi(r.readTime)}),ce.resolve();var r}}class D3{constructor(){this.overlays=new _r(lt.comparator),this.ls=new Map}getOverlay(e,t){return ce.resolve(this.overlays.get(t))}getOverlays(e,t){const r=jc();return ce.forEach(t,i=>this.getOverlay(e,i).next(s=>{null!==s&&r.set(i,s)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,s)=>{this.we(e,t,s)}),ce.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.ls.delete(r)),ce.resolve()}getOverlaysForCollection(e,t,r){const i=jc(),s=t.length+1,l=new lt(t.child("")),h=this.overlays.getIteratorFrom(l);for(;h.hasNext();){const m=h.getNext().value,y=m.getKey();if(!t.isPrefixOf(y.path))break;y.path.length===s&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ce.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let s=new _r((y,D)=>y-D);const l=this.overlays.getIterator();for(;l.hasNext();){const y=l.getNext().value;if(y.getKey().getCollectionGroup()===t&&y.largestBatchId>r){let D=s.get(y.largestBatchId);null===D&&(D=jc(),s=s.insert(y.largestBatchId,D)),D.set(y.getKey(),y)}}const h=jc(),m=s.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((y,D)=>h.set(y,D)),!(h.size()>=i)););return ce.resolve(h)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const l=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,l)}this.overlays=this.overlays.insert(r.key,new tR(t,r));let s=this.ls.get(t);void 0===s&&(s=dn(),this.ls.set(t,s)),this.ls.set(t,s.add(r.key))}}class mR{constructor(){this.fs=new Cr(ps.ds),this.ws=new Cr(ps._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new ps(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new ps(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new lt(new xn([])),r=new ps(t,e),i=new ps(t,e+1),s=[];return this.ws.forEachInRange([r,i],l=>{this.ys(l),s.push(l.key)}),s}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new lt(new xn([])),r=new ps(t,e),i=new ps(t,e+1);let s=dn();return this.ws.forEachInRange([r,i],l=>{s=s.add(l.key)}),s}containsKey(e){const t=new ps(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class ps{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return lt.comparator(e.key,t.key)||en(e.As,t.As)}static _s(e,t){return en(e.As,t.As)||lt.comparator(e.key,t.key)}}class E3{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new Cr(ps.ds)}checkEmpty(e){return ce.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const s=this.vs;this.vs++;const l=new XM(s,t,r,i);this.mutationQueue.push(l);for(const h of i)this.Rs=this.Rs.add(new ps(h.key,s)),this.indexManager.addToCollectionParentIndex(e,h.key.path.popLast());return ce.resolve(l)}lookupMutationBatch(e,t){return ce.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),s=i<0?0:i;return ce.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return ce.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ce.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new ps(t,0),i=new ps(t,Number.POSITIVE_INFINITY),s=[];return this.Rs.forEachInRange([r,i],l=>{const h=this.Ps(l.As);s.push(h)}),ce.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new Cr(en);return t.forEach(i=>{const s=new ps(i,0),l=new ps(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([s,l],h=>{r=r.add(h.As)})}),ce.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let s=r;lt.isDocumentKey(s)||(s=s.child(""));const l=new ps(new lt(s),0);let h=new Cr(en);return this.Rs.forEachWhile(m=>{const y=m.key.path;return!!r.isPrefixOf(y)&&(y.length===i&&(h=h.add(m.As)),!0)},l),ce.resolve(this.Vs(h))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){Rt(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ce.forEach(t.mutations,i=>{const s=new ps(i.key,t.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new ps(t,0),i=this.Rs.firstAfterOrEqual(r);return ce.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ce.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class C3{constructor(e){this.Ds=e,this.docs=new _r(lt.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),s=i?i.size:0,l=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:l}),this.size+=l-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ce.resolve(r?r.document.mutableCopy():Tr.newInvalidDocument(t))}getEntries(e,t){let r=Go();return t.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Tr.newInvalidDocument(i))}),ce.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let s=Go();const l=t.path,h=new lt(l.child("")),m=this.docs.getIteratorFrom(h);for(;m.hasNext();){const{key:y,value:{document:D}}=m.getNext();if(!l.isPrefixOf(y.path))break;y.path.length>l.length+1||LM(zF(D),r)<=0||(i.has(D.key)||Bw(t,D))&&(s=s.insert(D.key,D.mutableCopy()))}return ce.resolve(s)}getAllFromCollectionGroup(e,t,r,i){Et()}Cs(e,t){return ce.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new T3(this)}getSize(e){return ce.resolve(this.size)}}class T3 extends P2{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ce.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class I3{constructor(e){this.persistence=e,this.xs=new rh(t=>Zg(t),Fw),this.lastRemoteSnapshotVersion=Ot.min(),this.highestTargetId=0,this.Ns=0,this.ks=new mR,this.targetCount=0,this.Ms=sm.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ce.resolve()}getLastRemoteSnapshotVersion(e){return ce.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ce.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ce.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ce.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new sm(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ce.resolve()}updateTargetData(e,t){return this.Fn(t),ce.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ce.resolve()}removeTargets(e,t,r){let i=0;const s=[];return this.xs.forEach((l,h)=>{h.sequenceNumber<=t&&null===r.get(h.targetId)&&(this.xs.delete(l),s.push(this.removeMatchingKeysForTargetId(e,h.targetId)),i++)}),ce.waitFor(s).next(()=>i)}getTargetCount(e){return ce.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ce.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ce.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,s=[];return i&&t.forEach(l=>{s.push(i.markPotentiallyOrphaned(e,l))}),ce.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ce.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ce.resolve(r)}containsKey(e,t){return ce.resolve(this.ks.containsKey(t))}}class _R{constructor(e,t){this.$s={},this.overlays={},this.Os=new Aa(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new I3(this),this.indexManager=new h3,this.remoteDocumentCache=new C3(r=>this.referenceDelegate.Ls(r)),this.serializer=new h2(t),this.qs=new w3(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new D3,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new E3(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){He("MemoryPersistence","Starting transaction:",e);const i=new S3(this.Os.next());return this.referenceDelegate.Us(),r(i).next(s=>this.referenceDelegate.Ks(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Gs(e,t){return ce.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class S3 extends qF{constructor(e){super(),this.currentSequenceNumber=e}}class HI{constructor(e){this.persistence=e,this.Qs=new mR,this.js=null}static zs(e){return new HI(e)}get Ws(){if(this.js)return this.js;throw Et()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ce.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ce.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ce.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(s=>this.Ws.add(s.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ce.forEach(this.Ws,r=>{const i=lt.fromPath(r);return this.Hs(e,i).next(s=>{s||t.removeEntry(i,Ot.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ce.or([()=>ce.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class A3{constructor(e){this.serializer=e}O(e,t,r,i){const s=new vI("createOrUpgrade",t);var h;r<1&&i>=1&&(e.createObjectStore("owner"),(h=e).createObjectStore("mutationQueues",{keyPath:"userId"}),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",QF,{unique:!0}),h.createObjectStore("documentMutations"),U2(e),function(h){h.createObjectStore("remoteDocuments")}(e));let l=ce.resolve();return r<3&&i>=3&&(0!==r&&(function(h){h.deleteObjectStore("targetDocuments"),h.deleteObjectStore("targets"),h.deleteObjectStore("targetGlobal")}(e),U2(e)),l=l.next(()=>function(h){const m=h.store("targetGlobal"),y={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ot.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",y)}(s))),r<4&&i>=4&&(0!==r&&(l=l.next(()=>function(h,m){return m.store("mutations").j().next(y=>{h.deleteObjectStore("mutations"),h.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",QF,{unique:!0});const D=m.store("mutations"),S=y.map(R=>D.put(R));return ce.waitFor(S)})}(e,s))),l=l.next(()=>{!function(h){h.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(l=l.next(()=>this.Ys(s))),r<6&&i>=6&&(l=l.next(()=>(function(h){h.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(s)))),r<7&&i>=7&&(l=l.next(()=>this.Zs(s))),r<8&&i>=8&&(l=l.next(()=>this.ti(e,s))),r<9&&i>=9&&(l=l.next(()=>{!function(h){h.objectStoreNames.contains("remoteDocumentChanges")&&h.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(l=l.next(()=>this.ei(s))),r<11&&i>=11&&(l=l.next(()=>{(function(h){h.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(h){h.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(l=l.next(()=>{!function(h){const m=h.createObjectStore("documentOverlays",{keyPath:hH});m.createIndex("collectionPathOverlayIndex",fH,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",pH,{unique:!1})}(e)})),r<13&&i>=13&&(l=l.next(()=>function(h){const m=h.createObjectStore("remoteDocumentsV14",{keyPath:tH});m.createIndex("documentKeyIndex",nH),m.createIndex("collectionGroupIndex",rH)}(e)).next(()=>this.ni(e,s)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(l=l.next(()=>this.si(e,s))),r<15&&i>=15&&(l=l.next(()=>function(h){h.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),h.createObjectStore("indexState",{keyPath:lH}).createIndex("sequenceNumberIndex",uH,{unique:!1}),h.createObjectStore("indexEntries",{keyPath:cH}).createIndex("documentKeyIndex",dH,{unique:!1})}(e))),l}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=jI(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ce.forEach(i,s=>{const l=IDBKeyRange.bound([s.userId,-1],[s.userId,s.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",l).next(h=>ce.forEach(h,m=>{Rt(m.userId===s.userId);const y=nm(this.serializer,m);return S2(e,s.userId,y).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const s=[];return r.X((l,h)=>{const m=new xn(l),y=[0,Ws(m)];s.push(t.get(y).next(D=>D?ce.resolve():t.put({targetId:0,path:Ws(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ce.waitFor(s))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:aH});const r=t.store("collectionParents"),i=new gR,s=l=>{if(i.add(l)){const h=l.lastSegment(),m=l.popLast();return r.put({collectionId:h,parent:Ws(m)})}};return t.store("remoteDocuments").X({Y:!0},(l,h)=>{const m=new xn(l);return s(m.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([l,h,m],y)=>{const D=Vc(h);return s(D.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const s=Yw(i),l=p2(this.serializer,s);return t.put(l)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((s,l)=>{const h=t.store("remoteDocumentsV14"),m=(y=l,y.document?new lt(xn.fromString(y.document.name).popFirst(5)):y.noDocument?lt.fromSegments(y.noDocument.path):y.unknownDocument?lt.fromSegments(y.unknownDocument.path):Et()).path.toArray();var y;const D={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:l.readTime||[0,0],unknownDocument:l.unknownDocument,noDocument:l.noDocument,document:l.document,hasCommittedMutations:!!l.hasCommittedMutations};i.push(h.put(D))}).next(()=>ce.waitFor(i))}si(e,t){const r=t.store("mutations"),i=k2(this.serializer),s=new _R(HI.zs,this.serializer.fe);return r.j().next(l=>{const h=new Map;return l.forEach(m=>{var y;let D=null!==(y=h.get(m.userId))&&void 0!==y?y:dn();nm(this.serializer,m).keys().forEach(S=>D=D.add(S)),h.set(m.userId,D)}),ce.forEach(h,(m,y)=>{const D=new hs(y),S=LI.de(this.serializer,D),R=s.getIndexManager(D),P=GI.de(D,this.serializer,R,s.referenceDelegate);return new V2(i,P,S,R).recalculateAndSaveOverlaysForDocumentKeys(new UM(t,Aa.ct),m).next()})})}}function U2(n){n.createObjectStore("targetDocuments",{keyPath:sH}).createIndex("documentTargetsIndex",oH,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",iH,{unique:!0}),n.createObjectStore("targetGlobal")}const yR="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class vR{constructor(e,t,r,i,s,l,h,m,y,D,S=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=s,this.window=l,this.document=h,this.ri=y,this.oi=D,this.ui=S,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=R=>Promise.resolve(),!vR.D())throw new xe(pe.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new _3(this,i),this.di=t+"main",this.serializer=new h2(m),this.wi=new yu(this.di,this.ui,new A3(this.serializer)),this.Bs=new p3(this.referenceDelegate,this.serializer),this.remoteDocumentCache=k2(this.serializer),this.qs=new s3,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===D&&vi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new xe(pe.FAILED_PRECONDITION,yR);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Aa(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,we.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,we.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,we.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>WI(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(Kf(e))return He("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return He("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return tD(e).get("owner").next(t=>ce.resolve(this.Ri(t)))}Pi(e){return WI(e).delete(this.clientId)}bi(){var e=this;return(0,we.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=fs(r,"clientMetadata");return i.j().next(s=>{const l=e.Si(s,18e5),h=s.filter(m=>-1===l.indexOf(m));return ce.forEach(h,m=>i.delete(m.clientId)).next(()=>h)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ce.resolve(!0):tD(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new xe(pe.FAILED_PRECONDITION,yR);return!1}}return!(!this.networkEnabled||!this.inForeground)||WI(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&He("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,we.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new UM(t,Aa.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>WI(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return GI.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new f3(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return LI.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){He("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",s=15===(l=this.ui)?mH:14===l?tL:13===l?eL:12===l?gH:11===l?XF:void Et();var l;let h;return this.wi.runTransaction(e,i,s,m=>(h=new UM(m,this.Os?this.Os.next():Aa.ct),"readwrite-primary"===t?this.Ti(h).next(y=>!!y||this.Ei(h)).next(y=>{if(!y)throw vi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new xe(pe.FAILED_PRECONDITION,WF);return r(h)}).next(y=>this.vi(h).next(()=>y)):this.Oi(h).next(()=>r(h)))).then(m=>(h.raiseOnCommittedEvent(),m))}Oi(e){return tD(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new xe(pe.FAILED_PRECONDITION,yR)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return tD(e).put("owner",t)}static D(){return yu.D()}Ai(e){const t=tD(e);return t.get("owner").next(r=>this.Ri(r)?(He("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ce.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(vi(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,k.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return He("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return vi("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){vi("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function tD(n){return fs(n,"owner")}function WI(n){return fs(n,"clientMetadata")}function bR(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class wR{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=dn(),i=dn();for(const s of t.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new wR(e,t.fromCache,r,i)}}class j2{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(s=>s||this.Gi(e,t,i,r)).next(s=>s||this.Qi(e,t))}Ki(e,t){if(TL(t))return ce.resolve(null);let r=Co(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=MI(t,null,"F"),r=Co(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const l=dn(...s);return this.Ui.getDocuments(e,l).next(h=>this.indexManager.getMinOffset(e,r).next(m=>{const y=this.ji(t,h);return this.zi(t,y,l,m.readTime)?this.Ki(e,MI(t,null,"F")):this.Wi(e,y,t,m)}))})))}Gi(e,t,r,i){return TL(t)||i.isEqual(Ot.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(s=>{const l=this.ji(t,s);return this.zi(t,l,r,i)?this.Qi(e,t):(PM()<=Fi.in.DEBUG&&He("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ZM(t)),this.Wi(e,l,t,HF(i,-1)))})}ji(e,t){let r=new Cr(AL(e));return t.forEach((i,s)=>{Bw(e,s)&&(r=r.add(s))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const s="F"===e.limitType?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Qi(e,t){return PM()<=Fi.in.DEBUG&&He("QueryEngine","Using full collection scan to execute query:",ZM(t)),this.Ui.getDocumentsMatchingQuery(e,t,Sa.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(s=>(t.forEach(l=>{s=s.insert(l.key,l)}),s))}}class N3{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new _r(en),this.Yi=new rh(s=>Zg(s),Fw),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new V2(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function G2(n,e,t,r){return new N3(n,e,t,r)}function $2(n,e){return DR.apply(this,arguments)}function DR(){return DR=(0,we.Z)(function*(n,e){const t=dt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(s=>{const l=[],h=[];let m=dn();for(const y of i){l.push(y.batchId);for(const D of y.mutations)m=m.add(D.key)}for(const y of s){h.push(y.batchId);for(const D of y.mutations)m=m.add(D.key)}return t.localDocuments.getDocuments(r,m).next(y=>({er:y,removedBatchIds:l,addedBatchIds:h}))})})}),DR.apply(this,arguments)}function H2(n){const e=dt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function z2(n,e,t){let r=dn(),i=dn();return t.forEach(s=>r=r.add(s)),e.getEntries(n,r).next(s=>{let l=Go();return t.forEach((h,m)=>{const y=s.get(h);m.isFoundDocument()!==y.isFoundDocument()&&(i=i.add(h)),m.isNoDocument()&&m.version.isEqual(Ot.min())?(e.removeEntry(h,m.readTime),l=l.insert(h,m)):!y.isValidDocument()||m.version.compareTo(y.version)>0||0===m.version.compareTo(y.version)&&y.hasPendingWrites?(e.addEntry(m),l=l.insert(h,m)):He("LocalStore","Ignoring outdated watch update for ",h,". Current version:",y.version," Watch version:",m.version)}),{nr:l,sr:i}})}function O3(n,e){const t=dt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function nv(n,e){const t=dt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(s=>s?(i=s,ce.resolve(i)):t.Bs.allocateTargetId(r).next(l=>(i=new sh(e,l,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function rv(n,e,t){return ER.apply(this,arguments)}function ER(){return ER=(0,we.Z)(function*(n,e,t){const r=dt(n),i=r.Ji.get(e),s=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",s,l=>r.persistence.referenceDelegate.removeTarget(l,i)))}catch(l){if(!Kf(l))throw l;He("LocalStore",`Failed to update sequence numbers for target ${e}: ${l}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),ER.apply(this,arguments)}function qI(n,e,t){const r=dt(n);let i=Ot.min(),s=dn();return r.persistence.runTransaction("Execute query","readonly",l=>function(h,m,y){const D=dt(h),S=D.Yi.get(y);return void 0!==S?ce.resolve(D.Ji.get(S)):D.Bs.getTargetData(m,y)}(r,l,Co(e)).next(h=>{if(h)return i=h.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(l,h.targetId).next(m=>{s=m})}).next(()=>r.Hi.getDocumentsMatchingQuery(l,e,t?i:Ot.min(),t?s:dn())).next(h=>(K2(r,SL(e),h),{documents:h,ir:s})))}function W2(n,e){const t=dt(n),r=dt(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",s=>r.le(s,e).next(l=>l?l.target:null))}function q2(n,e){const t=dt(n),r=t.Xi.get(e)||Ot.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,HF(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(K2(t,e,i),i))}function K2(n,e,t){let r=n.Xi.get(e)||Ot.min();t.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),n.Xi.set(e,r)}function CR(){return CR=(0,we.Z)(function*(n,e,t,r){const i=dt(n);let s=dn(),l=Go();for(const y of t){const D=e.rr(y.metadata.name);y.document&&(s=s.add(D));const S=e.ur(y);S.setReadTime(e.cr(y.metadata.readTime)),l=l.insert(D,S)}const h=i.Zi.newChangeBuffer({trackRemovals:!0}),m=yield nv(i,(y=r,Co(qy(xn.fromString(`__bundle__/docs/${y}`)))));var y;return i.persistence.runTransaction("Apply bundle documents","readwrite",y=>z2(y,h,l).next(D=>(h.apply(y),D)).next(D=>i.Bs.removeMatchingKeysForTargetId(y,m.targetId).next(()=>i.Bs.addMatchingKeys(y,s,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(y,D.nr,D.sr)).next(()=>D.nr)))}),CR.apply(this,arguments)}function P3(n,e){return TR.apply(this,arguments)}function TR(){return TR=(0,we.Z)(function*(n,e,t=dn()){const r=yield nv(n,Co(uR(e.bundledQuery))),i=dt(n);return i.persistence.runTransaction("Save named query","readwrite",s=>{const l=bi(e.readTime);if(r.snapshotVersion.compareTo(l)>=0)return i.qs.saveNamedQuery(s,e);const h=r.withResumeToken($i.EMPTY_BYTE_STRING,l);return i.Ji=i.Ji.insert(h.targetId,h),i.Bs.updateTargetData(s,h).next(()=>i.Bs.removeMatchingKeysForTargetId(s,r.targetId)).next(()=>i.Bs.addMatchingKeys(s,t,r.targetId)).next(()=>i.qs.saveNamedQuery(s,e))})}),TR.apply(this,arguments)}function Y2(n,e){return`firestore_clients_${n}_${e}`}function Z2(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function IR(n,e){return`firestore_targets_${n}_${e}`}class KI{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let s,l="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return l&&i.error&&(l="string"==typeof i.error.message&&"string"==typeof i.error.code,l&&(s=new xe(i.error.code,i.error.message))),l?new KI(e,t,i.state,s):(vi("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class nD{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,s="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return s&&r.error&&(s="string"==typeof r.error.message&&"string"==typeof r.error.code,s&&(i=new xe(r.error.code,r.error.message))),s?new nD(e,r.state,i):(vi("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class YI{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,s=QM();for(let l=0;i&&l<r.activeTargetIds.length;++l)i=YF(r.activeTargetIds[l]),s=s.add(r.activeTargetIds[l]);return i?new YI(e,s):(vi("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class SR{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new SR(t.clientId,t.onlineState):(vi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class AR{constructor(){this.activeTargetIds=QM()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class NR{constructor(e,t,r,i,s){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new _r(en),this.started=!1,this.yr=[];const l=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.pr=Y2(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new AR),this.Tr=new RegExp(`^firestore_clients_${l}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${l}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${l}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(h){return`firestore_bundle_loaded_v2_${h}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,we.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const s=e.getItem(Y2(e.persistenceKey,i));if(s){const l=YI.ar(i,s);l&&(e.gr=e.gr.insert(l.clientId,l))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(IR(this.persistenceKey,e));if(r){const i=nD.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(IR(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return He("SharedClientState","READ",e,t),t}setItem(e,t){He("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){He("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(He("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void vi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,we.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(s){let l=Aa.ct;if(null!=s)try{const h=JSON.parse(s);Rt("number"==typeof h),l=h}catch(h){vi("SharedClientState","Failed to read sequence number from WebStorage",h)}return l}(r.newValue);i!==Aa.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(s=>t.syncEngine.Qr(s)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new KI(this.currentUser,e,t,r),s=Z2(this.persistenceKey,this.currentUser,e);this.setItem(s,i.hr())}Cr(e){const t=Z2(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=IR(this.persistenceKey,e),s=new nD(e,t,r);this.setItem(i,s.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return YI.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return KI.ar(new hs(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return nD.ar(i,t)}br(e){return SR.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,we.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);He("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),s=this.Sr(r),l=[],h=[];return s.forEach(m=>{i.has(m)||l.push(m)}),i.forEach(m=>{s.has(m)||h.push(m)}),this.syncEngine.Wr(l,h).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=QM();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class Q2{constructor(){this.Hr=new AR,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new AR,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class k3{Yr(e){}shutdown(){}}class J2{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){He("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){He("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let ZI=null;function MR(){return null===ZI?ZI=268435456+Math.round(2147483648*Math.random()):ZI++,"0x"+ZI.toString(16)}const F3={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class L3{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const Ks="WebChannelConnection";class B3 extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,s){const l=MR(),h=this.To(e,t);He("RestConnection",`Sending RPC '${e}' ${l}:`,h,r);const m={};return this.Eo(m,i,s),this.Ao(e,h,m,r).then(y=>(He("RestConnection",`Received RPC '${e}' ${l}: `,y),y),y=>{throw dl("RestConnection",`RPC '${e}' ${l} failed with error: `,y,"url: ",h,"request:",r),y})}vo(e,t,r,i,s,l){return this.Io(e,t,r,i,s)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+jy,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}To(e,t){return`${this.mo}/v1/${t}:${F3[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const s=MR();return new Promise((l,h)=>{const m=new k$;m.setWithCredentials(!0),m.listenOnce(O$.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case xM.NO_ERROR:const D=m.getResponseJson();He(Ks,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(D)),l(D);break;case xM.TIMEOUT:He(Ks,`RPC '${e}' ${s} timed out`),h(new xe(pe.DEADLINE_EXCEEDED,"Request time out"));break;case xM.HTTP_ERROR:const S=m.getStatus();if(He(Ks,`RPC '${e}' ${s} failed with status:`,S,"response text:",m.getResponseText()),S>0){let R=m.getResponseJson();Array.isArray(R)&&(R=R[0]);const P=R?.error;if(P&&P.status&&P.message){const $=function(Z){const oe=Z.toLowerCase().replace(/_/g,"-");return Object.values(pe).indexOf(oe)>=0?oe:pe.UNKNOWN}(P.status);h(new xe($,P.message))}else h(new xe(pe.UNKNOWN,"Server responded with status "+m.getStatus()))}else h(new xe(pe.UNAVAILABLE,"Connection failed."));break;default:Et()}}finally{He(Ks,`RPC '${e}' ${s} completed.`)}});const y=JSON.stringify(i);He(Ks,`RPC '${e}' ${s} sending request:`,i),m.send(t,"POST",y,r,15)})}Ro(e,t,r){const i=MR(),s=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],l=M$(),h=R$(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},y=this.longPollingOptions.timeoutSeconds;void 0!==y&&(m.longPollingTimeout=Math.round(1e3*y)),this.useFetchStreams&&(m.xmlHttpFactory=new P$({})),this.Eo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const D=s.join("");He(Ks,`Creating RPC '${e}' stream ${i}: ${D}`,m);const S=l.createWebChannel(D,m);let R=!1,P=!1;const $=new L3({ro:oe=>{P?He(Ks,`Not sending because RPC '${e}' stream ${i} is closed:`,oe):(R||(He(Ks,`Opening RPC '${e}' stream ${i} transport.`),S.open(),R=!0),He(Ks,`RPC '${e}' stream ${i} sending:`,oe),S.send(oe))},oo:()=>S.close()}),Z=(oe,Ue,Ge)=>{oe.listen(Ue,tt=>{try{Ge(tt)}catch(Xe){setTimeout(()=>{throw Xe},0)}})};return Z(S,mI.EventType.OPEN,()=>{P||He(Ks,`RPC '${e}' stream ${i} transport opened.`)}),Z(S,mI.EventType.CLOSE,()=>{P||(P=!0,He(Ks,`RPC '${e}' stream ${i} transport closed`),$.wo())}),Z(S,mI.EventType.ERROR,oe=>{P||(P=!0,dl(Ks,`RPC '${e}' stream ${i} transport errored:`,oe),$.wo(new xe(pe.UNAVAILABLE,"The operation could not be completed")))}),Z(S,mI.EventType.MESSAGE,oe=>{var Ue;if(!P){const Ge=oe.data[0];Rt(!!Ge);const Xe=Ge.error||(null===(Ue=Ge[0])||void 0===Ue?void 0:Ue.error);if(Xe){He(Ks,`RPC '${e}' stream ${i} received error:`,Xe);const ht=Xe.status;let It=function(kn){const Di=Ri[kn];if(void 0!==Di)return WL(Di)}(ht),hn=Xe.message;void 0===It&&(It=pe.INTERNAL,hn="Unknown error status: "+ht+" with message "+Xe.message),P=!0,$.wo(new xe(It,hn)),S.close()}else He(Ks,`RPC '${e}' stream ${i} received:`,Ge),$._o(Ge)}}),Z(h,x$.STAT_EVENT,oe=>{oe.stat===BF.PROXY?He(Ks,`RPC '${e}' stream ${i} detected buffering proxy`):oe.stat===BF.NOPROXY&&He(Ks,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{$.fo()},0),$}}function X2(){return typeof window<"u"?window:null}function QI(){return typeof document<"u"?document:null}function rD(n){return new KH(n,!0)}class RR{constructor(e,t,r=1e3,i=1.5,s=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=s,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&He("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class eB{constructor(e,t,r,i,s,l,h,m){this.ii=e,this.$o=r,this.Oo=i,this.connection=s,this.authCredentialsProvider=l,this.appCheckCredentialsProvider=h,this.listener=m,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new RR(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,we.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,we.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,we.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===pe.RESOURCE_EXHAUSTED?(vi(t.toString()),vi("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===pe.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new xe(pe.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,we.Z)(function*(){e.state=0,e.start()}))}tu(e){return He("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(He("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class V3 extends eB{constructor(e,t,r,i,s,l){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,l),this.serializer=s}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function QH(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:Et(),i=e.targetChange.targetIds||[],s=function(m,y){return m.useProto3Json?(Rt(void 0===y||"string"==typeof y),$i.fromBase64String(y||"")):(Rt(void 0===y||y instanceof Uint8Array),$i.fromUint8Array(y||new Uint8Array))}(n,e.targetChange.resumeToken),l=e.targetChange.cause,h=l&&function(m){const y=void 0===m.code?pe.UNKNOWN:WL(m.code);return new xe(y,m.message||"")}(l);t=new QL(r,i,s,h||null)}else if("documentChange"in e){const r=e.documentChange,i=Gc(n,r.document.name),s=bi(r.document.updateTime),l=r.document.createTime?bi(r.document.createTime):Ot.min(),h=new Ns({mapValue:{fields:r.document.fields}}),m=Tr.newFoundDocument(i,s,l,h);t=new kI(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=Gc(n,r.document),s=r.readTime?bi(r.readTime):Ot.min(),l=Tr.newNoDocument(i,s);t=new kI([],r.removedTargetIds||[],l.key,l)}else if("documentRemove"in e){const r=e.documentRemove,i=Gc(n,r.document);t=new kI([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return Et();{const r=e.filter,{count:i=0,unchangedNames:s}=r,l=new GH(i,s);t=new ZL(r.targetId,l)}}var m;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Ot.min();const s=i.targetChange;return s.targetIds&&s.targetIds.length?Ot.min():s.readTime?bi(s.readTime):Ot.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=qw(this.serializer),t.addTarget=function(i,s){let l;const h=s.target;if(l=SI(h)?{documents:a2(i,h)}:{query:lR(i,h)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=t2(i,s.resumeToken);const m=iR(i,s.expectedCount);null!==m&&(l.expectedCount=m)}else if(s.snapshotVersion.compareTo(Ot.min())>0){l.readTime=Jy(i,s.snapshotVersion.toTimestamp());const m=iR(i,s.expectedCount);null!==m&&(l.expectedCount=m)}return l}(this.serializer,e);const r=function XH(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Et()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=qw(this.serializer),t.removeTarget=e,this.Wo(t)}}class U3 extends eB{constructor(e,t,r,i,s,l){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,l),this.serializer=s,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(Rt(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function JH(n,e){return n&&n.length>0?(Rt(void 0!==e),n.map(t=>function(r,i){let s=bi(r.updateTime?r.updateTime:i);return s.isEqual(Ot.min())&&(s=bi(i)),new BH(s,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=bi(e.commitTime);return this.listener.cu(r,t)}return Rt(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=qw(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>Kw(this.serializer,r))};this.Wo(t)}}class j3 extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new xe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.Io(e,t,r,i,s)).catch(i=>{throw"FirebaseError"===i.name?(i.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new xe(pe.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,l])=>this.connection.vo(e,t,r,s,l,i)).catch(s=>{throw"FirebaseError"===s.name?(s.code===pe.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new xe(pe.UNKNOWN,s.toString())})}terminate(){this.lu=!0}}class $3{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(vi(t),this.mu=!1):He("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class H3{constructor(e,t,r,i,s){var l=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=s,this.Pu.Yr(h=>{r.enqueueAndForget((0,we.Z)(function*(){var m;op(l)&&(He("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,we.Z)(function*(y){const D=dt(y);D.vu.add(4),yield iv(D),D.bu.set("Unknown"),D.vu.delete(4),yield iD(D)}),function(y){return m.apply(this,arguments)})(l))}))}),this.bu=new $3(r,i)}}function iD(n){return xR.apply(this,arguments)}function xR(){return xR=(0,we.Z)(function*(n){if(op(n))for(const e of n.Ru)yield e(!0)}),xR.apply(this,arguments)}function iv(n){return PR.apply(this,arguments)}function PR(){return PR=(0,we.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),PR.apply(this,arguments)}function JI(n,e){const t=dt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),LR(t)?FR(t):ov(t).Ko()&&kR(t,e))}function sD(n,e){const t=dt(n),r=ov(t);t.Au.delete(e),r.Ko()&&tB(t,e),0===t.Au.size&&(r.Ko()?r.jo():op(t)&&t.bu.set("Unknown"))}function kR(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Ot.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}ov(n).su(e)}function tB(n,e){n.Vu.qt(e),ov(n).iu(e)}function FR(n){n.Vu=new HH({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),ov(n).start(),n.bu.gu()}function LR(n){return op(n)&&!ov(n).Uo()&&n.Au.size>0}function op(n){return 0===dt(n).vu.size}function nB(n){n.Vu=void 0}function z3(n){return BR.apply(this,arguments)}function BR(){return BR=(0,we.Z)(function*(n){n.Au.forEach((e,t)=>{kR(n,e)})}),BR.apply(this,arguments)}function W3(n,e){return VR.apply(this,arguments)}function VR(){return VR=(0,we.Z)(function*(n,e){nB(n),LR(n)?(n.bu.Iu(e),FR(n)):n.bu.set("Unknown")}),VR.apply(this,arguments)}function q3(n,e,t){return UR.apply(this,arguments)}function UR(){return UR=(0,we.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof QL&&2===e.state&&e.cause)try{yield(r=(0,we.Z)(function*(i,s){const l=s.cause;for(const h of s.targetIds)i.Au.has(h)&&(yield i.remoteSyncer.rejectListen(h,l),i.Au.delete(h),i.Vu.removeTarget(h))}),function(i,s){return r.apply(this,arguments)})(n,e)}catch(r){He("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield XI(n,r)}else if(e instanceof kI?n.Vu.Ht(e):e instanceof ZL?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Ot.min()))try{const r=yield H2(n.localStore);t.compareTo(r)>=0&&(yield function(i,s){const l=i.Vu.ce(s);return l.targetChanges.forEach((h,m)=>{if(h.resumeToken.approximateByteSize()>0){const y=i.Au.get(m);y&&i.Au.set(m,y.withResumeToken(h.resumeToken,s))}}),l.targetMismatches.forEach((h,m)=>{const y=i.Au.get(h);if(!y)return;i.Au.set(h,y.withResumeToken($i.EMPTY_BYTE_STRING,y.snapshotVersion)),tB(i,h);const D=new sh(y.target,h,m,y.sequenceNumber);kR(i,D)}),i.remoteSyncer.applyRemoteEvent(l)}(n,t))}catch(r){He("RemoteStore","Failed to raise snapshot:",r),yield XI(n,r)}var r}),UR.apply(this,arguments)}function XI(n,e,t){return jR.apply(this,arguments)}function jR(){return jR=(0,we.Z)(function*(n,e,t){if(!Kf(e))throw e;n.vu.add(1),yield iv(n),n.bu.set("Offline"),t||(t=()=>H2(n.localStore)),n.asyncQueue.enqueueRetryable((0,we.Z)(function*(){He("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield iD(n)}))}),jR.apply(this,arguments)}function rB(n,e){return e().catch(t=>XI(n,t,e))}function sv(n){return GR.apply(this,arguments)}function GR(){return GR=(0,we.Z)(function*(n){const e=dt(n),t=ap(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;K3(e);)try{const i=yield O3(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,Y3(e,i)}catch(i){yield XI(e,i)}iB(e)&&sB(e)}),GR.apply(this,arguments)}function K3(n){return op(n)&&n.Eu.length<10}function Y3(n,e){n.Eu.push(e);const t=ap(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function iB(n){return op(n)&&!ap(n).Uo()&&n.Eu.length>0}function sB(n){ap(n).start()}function Z3(n){return $R.apply(this,arguments)}function $R(){return $R=(0,we.Z)(function*(n){ap(n).hu()}),$R.apply(this,arguments)}function Q3(n){return HR.apply(this,arguments)}function HR(){return HR=(0,we.Z)(function*(n){const e=ap(n);for(const t of n.Eu)e.uu(t.mutations)}),HR.apply(this,arguments)}function J3(n,e,t){return zR.apply(this,arguments)}function zR(){return zR=(0,we.Z)(function*(n,e,t){const r=n.Eu.shift(),i=eR.from(r,e,t);yield rB(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield sv(n)}),zR.apply(this,arguments)}function X3(n,e){return WR.apply(this,arguments)}function WR(){return WR=(0,we.Z)(function*(n,e){var t;e&&ap(n).ou&&(yield(t=(0,we.Z)(function*(r,i){if(zL(s=i.code)&&s!==pe.ABORTED){const l=r.Eu.shift();ap(r).Qo(),yield rB(r,()=>r.remoteSyncer.rejectFailedWrite(l.batchId,i)),yield sv(r)}var s}),function(r,i){return t.apply(this,arguments)})(n,e)),iB(n)&&sB(n)}),WR.apply(this,arguments)}function oB(n,e){return qR.apply(this,arguments)}function qR(){return qR=(0,we.Z)(function*(n,e){const t=dt(n);t.asyncQueue.verifyOperationInProgress(),He("RemoteStore","RemoteStore received new credentials");const r=op(t);t.vu.add(3),yield iv(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield iD(t)}),qR.apply(this,arguments)}function KR(n,e){return YR.apply(this,arguments)}function YR(){return YR=(0,we.Z)(function*(n,e){const t=dt(n);e?(t.vu.delete(2),yield iD(t)):e||(t.vu.add(2),yield iv(t),t.bu.set("Unknown"))}),YR.apply(this,arguments)}function ov(n){return n.Su||(n.Su=function(e,t,r){const i=dt(e);return i.fu(),new V3(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:z3.bind(null,n),ao:W3.bind(null,n),nu:q3.bind(null,n)}),n.Ru.push(function(){var e=(0,we.Z)(function*(t){t?(n.Su.Qo(),LR(n)?FR(n):n.bu.set("Unknown")):(yield n.Su.stop(),nB(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function ap(n){return n.Du||(n.Du=function(e,t,r){const i=dt(e);return i.fu(),new U3(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:Z3.bind(null,n),ao:X3.bind(null,n),au:Q3.bind(null,n),cu:J3.bind(null,n)}),n.Ru.push(function(){var e=(0,we.Z)(function*(t){t?(n.Du.Qo(),yield sv(n)):(yield n.Du.stop(),n.Eu.length>0&&(He("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class ZR{constructor(e,t,r,i,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(l=>{})}static createAndSchedule(e,t,r,i,s){const l=Date.now()+r,h=new ZR(e,t,l,i,s);return h.start(r),h}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new xe(pe.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function av(n,e){if(vi("AsyncQueue",`${e}: ${n}`),Kf(n))return new xe(pe.UNAVAILABLE,`${e}: ${n}`);throw n}class lv{constructor(e){this.comparator=e?(t,r)=>e(t,r)||lt.comparator(t.key,r.key):(t,r)=>lt.comparator(t.key,r.key),this.keyedMap=Vw(),this.sortedSet=new _r(this.comparator)}static emptySet(e){return new lv(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof lv)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new lv;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class aB{constructor(){this.Cu=new _r(lt.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):Et():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class uv{constructor(e,t,r,i,s,l,h,m,y){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=l,this.syncStateChanged=h,this.excludesMetadataChanges=m,this.hasCachedResults=y}static fromInitialDocuments(e,t,r,i,s){const l=[];return t.forEach(h=>{l.push({type:0,doc:h})}),new uv(e,t,lv.emptySet(t),l,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Lw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class e6{constructor(){this.Nu=void 0,this.listeners=[]}}class t6{constructor(){this.queries=new rh(e=>IL(e),Lw),this.onlineState="Unknown",this.ku=new Set}}function QR(n,e){return JR.apply(this,arguments)}function JR(){return JR=(0,we.Z)(function*(n,e){const t=dt(n),r=e.query;let i=!1,s=t.queries.get(r);if(s||(i=!0,s=new e6),i)try{s.Nu=yield t.onListen(r)}catch(l){const h=av(l,`Initialization of query '${ZM(e.query)}' failed`);return void e.onError(h)}t.queries.set(r,s),s.listeners.push(e),e.Mu(t.onlineState),s.Nu&&e.$u(s.Nu)&&tO(t)}),JR.apply(this,arguments)}function XR(n,e){return eO.apply(this,arguments)}function eO(){return eO=(0,we.Z)(function*(n,e){const t=dt(n),r=e.query;let i=!1;const s=t.queries.get(r);if(s){const l=s.listeners.indexOf(e);l>=0&&(s.listeners.splice(l,1),i=0===s.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),eO.apply(this,arguments)}function n6(n,e){const t=dt(n);let r=!1;for(const i of e){const l=t.queries.get(i.query);if(l){for(const h of l.listeners)h.$u(i)&&(r=!0);l.Nu=i}}r&&tO(t)}function r6(n,e,t){const r=dt(n),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(t);r.queries.delete(e)}function tO(n){n.ku.forEach(e=>{e.next()})}class nO{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new uv(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=uv.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class i6{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class lB{constructor(e){this.serializer=e}rr(e){return Gc(this.serializer,e)}ur(e){return e.metadata.exists?o2(this.serializer,e.document,!1):Tr.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return bi(e)}}class s6{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=uB(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=xn.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new lB(this.serializer);for(const i of e)if(i.metadata.queries){const s=r.rr(i.metadata.name);for(const l of i.metadata.queries){const h=(t.get(l)||dn()).add(s);t.set(l,h)}}return t}complete(){var e=this;return(0,we.Z)(function*(){const t=yield function x3(n,e,t,r){return CR.apply(this,arguments)}(e.localStore,new lB(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield P3(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function uB(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class cB{constructor(e){this.key=e}}class dB{constructor(e){this.key=e}}class hB{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=dn(),this.mutatedKeys=dn(),this.tc=AL(e),this.ec=new lv(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new aB,i=t?t.ec:this.ec;let s=t?t.mutatedKeys:this.mutatedKeys,l=i,h=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,y="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((D,S)=>{const R=i.get(D),P=Bw(this.query,S)?S:null,$=!!R&&this.mutatedKeys.has(R.key),Z=!!P&&(P.hasLocalMutations||this.mutatedKeys.has(P.key)&&P.hasCommittedMutations);let oe=!1;R&&P?R.data.isEqual(P.data)?$!==Z&&(r.track({type:3,doc:P}),oe=!0):this.rc(R,P)||(r.track({type:2,doc:P}),oe=!0,(m&&this.tc(P,m)>0||y&&this.tc(P,y)<0)&&(h=!0)):!R&&P?(r.track({type:0,doc:P}),oe=!0):R&&!P&&(r.track({type:1,doc:R}),oe=!0,(m||y)&&(h=!0)),oe&&(P?(l=l.add(P),s=Z?s.add(D):s.delete(D)):(l=l.delete(D),s=s.delete(D)))}),null!==this.query.limit)for(;l.size>this.query.limit;){const D="F"===this.query.limitType?l.last():l.first();l=l.delete(D.key),s=s.delete(D.key),r.track({type:1,doc:D})}return{ec:l,ic:r,zi:h,mutatedKeys:s}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const s=e.ic.xu();s.sort((y,D)=>function(S,R){const P=$=>{switch($){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Et()}};return P(S)-P(R)}(y.type,D.type)||this.tc(y.doc,D.doc)),this.oc(r);const l=t?this.uc():[],h=0===this.Zu.size&&this.current?1:0,m=h!==this.Xu;return this.Xu=h,0!==s.length||m?{snapshot:new uv(this.query,e.ec,i,s,e.mutatedKeys,0===h,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:l}:{cc:l}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new aB,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=dn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new dB(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new cB(r))}),t}hc(e){this.Yu=e.ir,this.Zu=dn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return uv.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class o6{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class a6{constructor(e){this.key=e,this.fc=!1}}class l6{constructor(e,t,r,i,s,l){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=l,this.dc={},this.wc=new rh(h=>IL(h),Lw),this._c=new Map,this.mc=new Set,this.gc=new _r(lt.comparator),this.yc=new Map,this.Ic=new mR,this.Tc={},this.Ec=new Map,this.Ac=sm.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function u6(n,e){return rO.apply(this,arguments)}function rO(){return rO=(0,we.Z)(function*(n,e){const t=IO(n);let r,i;const s=t.wc.get(e);if(s)r=s.targetId,t.sharedClientState.addLocalQueryTarget(r),i=s.view.lc();else{const l=yield nv(t.localStore,Co(e)),h=t.sharedClientState.addLocalQueryTarget(l.targetId);r=l.targetId,i=yield iO(t,e,r,"current"===h,l.resumeToken),t.isPrimaryClient&&JI(t.remoteStore,l)}return i}),rO.apply(this,arguments)}function iO(n,e,t,r,i){return sO.apply(this,arguments)}function sO(){return sO=(0,we.Z)(function*(n,e,t,r,i){n.Rc=(S,R,P)=>{return($=(0,we.Z)(function*(Z,oe,Ue,Ge){let tt=oe.view.sc(Ue);tt.zi&&(tt=yield qI(Z.localStore,oe.query,!1).then(({documents:It})=>oe.view.sc(It,tt)));const Xe=Ge&&Ge.targetChanges.get(oe.targetId),ht=oe.view.applyChanges(tt,Z.isPrimaryClient,Xe);return gO(Z,oe.targetId,ht.cc),ht.snapshot}),function(Z,oe,Ue,Ge){return $.apply(this,arguments)})(n,S,R,P);var $};const s=yield qI(n.localStore,e,!0),l=new hB(e,s.ir),h=l.sc(s.documents),m=zw.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),y=l.applyChanges(h,n.isPrimaryClient,m);gO(n,t,y.cc);const D=new o6(e,t,l);return n.wc.set(e,D),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),y.snapshot}),sO.apply(this,arguments)}function c6(n,e){return oO.apply(this,arguments)}function oO(){return oO=(0,we.Z)(function*(n,e){const t=dt(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(s=>!Lw(s,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield rv(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),sD(t.remoteStore,r.targetId),cv(t,r.targetId)}).catch(qf))):(cv(t,r.targetId),yield rv(t.localStore,r.targetId,!0))}),oO.apply(this,arguments)}function aO(){return aO=(0,we.Z)(function*(n,e,t){const r=SO(n);try{const i=yield function(s,l){const h=dt(s),m=Pr.now(),y=l.reduce((R,P)=>R.add(P.key),dn());let D,S;return h.persistence.runTransaction("Locally write mutations","readwrite",R=>{let P=Go(),$=dn();return h.Zi.getEntries(R,y).next(Z=>{P=Z,P.forEach((oe,Ue)=>{Ue.isValidDocument()||($=$.add(oe))})}).next(()=>h.localDocuments.getOverlayedDocuments(R,P)).next(Z=>{D=Z;const oe=[];for(const Ue of l){const Ge=UH(Ue,D.get(Ue.key).overlayedDocument);null!=Ge&&oe.push(new ih(Ue.key,Ge,hL(Ge.value.mapValue),kr.exists(!0)))}return h.mutationQueue.addMutationBatch(R,m,oe,l)}).next(Z=>{S=Z;const oe=Z.applyToLocalDocumentSet(D,$);return h.documentOverlayCache.saveOverlays(R,Z.batchId,oe)})}).then(()=>({batchId:S.batchId,changes:ML(D)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,h){let m=s.Tc[s.currentUser.toKey()];m||(m=new _r(en)),m=m.insert(l,h),s.Tc[s.currentUser.toKey()]=m}(r,i.batchId,t),yield oh(r,i.changes),yield sv(r.remoteStore)}catch(i){const s=av(i,"Failed to persist write");t.reject(s)}}),aO.apply(this,arguments)}function fB(n,e){return lO.apply(this,arguments)}function lO(){return lO=(0,we.Z)(function*(n,e){const t=dt(n);try{const r=yield function R3(n,e){const t=dt(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const l=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const h=[];e.targetChanges.forEach((D,S)=>{const R=i.get(S);if(!R)return;h.push(t.Bs.removeMatchingKeys(s,D.removedDocuments,S).next(()=>t.Bs.addMatchingKeys(s,D.addedDocuments,S)));let P=R.withSequenceNumber(s.currentSequenceNumber);var $,Z,oe;null!==e.targetMismatches.get(S)?P=P.withResumeToken($i.EMPTY_BYTE_STRING,Ot.min()).withLastLimboFreeSnapshotVersion(Ot.min()):D.resumeToken.approximateByteSize()>0&&(P=P.withResumeToken(D.resumeToken,r)),i=i.insert(S,P),Z=P,oe=D,(0===($=R).resumeToken.approximateByteSize()||Z.snapshotVersion.toMicroseconds()-$.snapshotVersion.toMicroseconds()>=3e8||oe.addedDocuments.size+oe.modifiedDocuments.size+oe.removedDocuments.size>0)&&h.push(t.Bs.updateTargetData(s,P))});let m=Go(),y=dn();if(e.documentUpdates.forEach(D=>{e.resolvedLimboDocuments.has(D)&&h.push(t.persistence.referenceDelegate.updateLimboDocument(s,D))}),h.push(z2(s,l,e.documentUpdates).next(D=>{m=D.nr,y=D.sr})),!r.isEqual(Ot.min())){const D=t.Bs.getLastRemoteSnapshotVersion(s).next(S=>t.Bs.setTargetsMetadata(s,s.currentSequenceNumber,r));h.push(D)}return ce.waitFor(h).next(()=>l.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,m,y)).next(()=>m)}).then(s=>(t.Ji=i,s))}(t.localStore,e);e.targetChanges.forEach((i,s)=>{const l=t.yc.get(s);l&&(Rt(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?l.fc=!0:i.modifiedDocuments.size>0?Rt(l.fc):i.removedDocuments.size>0&&(Rt(l.fc),l.fc=!1))}),yield oh(t,r,e)}catch(r){yield qf(r)}}),lO.apply(this,arguments)}function pB(n,e,t){const r=dt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((s,l)=>{const h=l.view.Mu(e);h.snapshot&&i.push(h.snapshot)}),function(s,l){const h=dt(s);h.onlineState=l;let m=!1;h.queries.forEach((y,D)=>{for(const S of D.listeners)S.Mu(l)&&(m=!0)}),m&&tO(h)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function h6(n,e,t){return uO.apply(this,arguments)}function uO(){return uO=(0,we.Z)(function*(n,e,t){const r=dt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),s=i&&i.key;if(s){let l=new _r(lt.comparator);l=l.insert(s,Tr.newNoDocument(s,Ot.min()));const h=dn().add(s),m=new Hw(Ot.min(),new Map,new _r(en),l,h);yield fB(r,m),r.gc=r.gc.remove(s),r.yc.delete(e),mO(r)}else yield rv(r.localStore,e,!1).then(()=>cv(r,e,t)).catch(qf)}),uO.apply(this,arguments)}function f6(n,e){return cO.apply(this,arguments)}function cO(){return cO=(0,we.Z)(function*(n,e){const t=dt(n),r=e.batch.batchId;try{const i=yield function M3(n,e){const t=dt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=t.Zi.newChangeBuffer({trackRemovals:!0});return function(l,h,m,y){const D=m.batch,S=D.keys();let R=ce.resolve();return S.forEach(P=>{R=R.next(()=>y.getEntry(h,P)).next($=>{const Z=m.docVersions.get(P);Rt(null!==Z),$.version.compareTo(Z)<0&&(D.applyToRemoteDocument($,m),$.isValidDocument()&&($.setReadTime(m.commitVersion),y.addEntry($)))})}),R.next(()=>l.mutationQueue.removeMutationBatch(h,D))}(t,r,e,s).next(()=>s.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let h=dn();for(let m=0;m<l.mutationResults.length;++m)l.mutationResults[m].transformResults.length>0&&(h=h.add(l.batch.mutations[m].key));return h}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);pO(t,r,null),fO(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield oh(t,i)}catch(i){yield qf(i)}}),cO.apply(this,arguments)}function p6(n,e,t){return dO.apply(this,arguments)}function dO(){return dO=(0,we.Z)(function*(n,e,t){const r=dt(n);try{const i=yield function(s,l){const h=dt(s);return h.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let y;return h.mutationQueue.lookupMutationBatch(m,l).next(D=>(Rt(null!==D),y=D.keys(),h.mutationQueue.removeMutationBatch(m,D))).next(()=>h.mutationQueue.performConsistencyCheck(m)).next(()=>h.documentOverlayCache.removeOverlaysForBatchId(m,y,l)).next(()=>h.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,y)).next(()=>h.localDocuments.getDocuments(m,y))})}(r.localStore,e);pO(r,e,t),fO(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield oh(r,i)}catch(i){yield qf(i)}}),dO.apply(this,arguments)}function hO(){return hO=(0,we.Z)(function*(n,e){const t=dt(n);op(t.remoteStore)||He("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(s){const l=dt(s);return l.persistence.runTransaction("Get highest unacknowledged batch id","readonly",h=>l.mutationQueue.getHighestUnacknowledgedBatchId(h))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=av(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),hO.apply(this,arguments)}function fO(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function pO(n,e,t){const r=dt(n);let i=r.Tc[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(t?s.reject(t):s.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function cv(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||gB(n,r)})}function gB(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(sD(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),mO(n))}function gO(n,e,t){for(const r of t)r instanceof cB?(n.Ic.addReference(r.key,e),m6(n,r)):r instanceof dB?(He("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||gB(n,r.key)):Et()}function m6(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(He("SyncEngine","New document in limbo: "+t),n.mc.add(r),mO(n))}function mO(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new lt(xn.fromString(e)),r=n.Ac.next();n.yc.set(r,new a6(t)),n.gc=n.gc.insert(t,r),JI(n.remoteStore,new sh(Co(qy(t.path)),r,"TargetPurposeLimboResolution",Aa.ct))}}function oh(n,e,t){return _O.apply(this,arguments)}function _O(){return _O=(0,we.Z)(function*(n,e,t){const r=dt(n),i=[],s=[],l=[];var h;r.wc.isEmpty()||(r.wc.forEach((h,m)=>{l.push(r.Rc(m,e,t).then(y=>{if((y||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,y?.fromCache?"not-current":"current"),y){i.push(y);const D=wR.Li(m.targetId,y);s.push(D)}}))}),yield Promise.all(l),r.dc.nu(i),yield(h=(0,we.Z)(function*(m,y){const D=dt(m);try{yield D.persistence.runTransaction("notifyLocalViewChanges","readwrite",S=>ce.forEach(y,R=>ce.forEach(R.Fi,P=>D.persistence.referenceDelegate.addReference(S,R.targetId,P)).next(()=>ce.forEach(R.Bi,P=>D.persistence.referenceDelegate.removeReference(S,R.targetId,P)))))}catch(S){if(!Kf(S))throw S;He("LocalStore","Failed to update sequence numbers: "+S)}for(const S of y){const R=S.targetId;if(!S.fromCache){const P=D.Ji.get(R),Z=P.withLastLimboFreeSnapshotVersion(P.snapshotVersion);D.Ji=D.Ji.insert(R,Z)}}}),function(m,y){return h.apply(this,arguments)})(r.localStore,s))}),_O.apply(this,arguments)}function _6(n,e){return yO.apply(this,arguments)}function yO(){return yO=(0,we.Z)(function*(n,e){const t=dt(n);if(!t.currentUser.isEqual(e)){He("SyncEngine","User change. New user:",e.toKey());const r=yield $2(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(l=>{l.forEach(h=>{h.reject(new xe(pe.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield oh(t,r.er)}var i}),yO.apply(this,arguments)}function y6(n,e){const t=dt(n),r=t.yc.get(e);if(r&&r.fc)return dn().add(r.key);{let i=dn();const s=t._c.get(e);if(!s)return i;for(const l of s){const h=t.wc.get(l);i=i.unionWith(h.view.nc)}return i}}function v6(n,e){return vO.apply(this,arguments)}function vO(){return vO=(0,we.Z)(function*(n,e){const t=dt(n),r=yield qI(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&gO(t,e.targetId,i.cc),i}),vO.apply(this,arguments)}function b6(n,e){return bO.apply(this,arguments)}function bO(){return bO=(0,we.Z)(function*(n,e){const t=dt(n);return q2(t.localStore,e).then(r=>oh(t,r))}),bO.apply(this,arguments)}function w6(n,e,t,r){return wO.apply(this,arguments)}function wO(){return wO=(0,we.Z)(function*(n,e,t,r){const i=dt(n),s=yield function(l,h){const m=dt(l),y=dt(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",D=>y.Sn(D,h).next(S=>S?m.localDocuments.getDocuments(D,S):ce.resolve(null)))}(i.localStore,e);var h;null!==s?("pending"===t?yield sv(i.remoteStore):"acknowledged"===t||"rejected"===t?(pO(i,e,r||null),fO(i,e),h=e,dt(dt(i.localStore).mutationQueue).Cn(h)):Et(),yield oh(i,s)):He("SyncEngine","Cannot apply mutation batch with id: "+e)}),wO.apply(this,arguments)}function DO(){return DO=(0,we.Z)(function*(n,e){const t=dt(n);if(IO(t),SO(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield mB(t,r.toArray());t.vc=!0,yield KR(t.remoteStore,!0);for(const s of i)JI(t.remoteStore,s)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((s,l)=>{t.sharedClientState.isLocalQueryTarget(l)?r.push(l):i=i.then(()=>(cv(t,l),rv(t.localStore,l,!0))),sD(t.remoteStore,l)}),yield i,yield mB(t,r),function(s){const l=dt(s);l.yc.forEach((h,m)=>{sD(l.remoteStore,m)}),l.Ic.Ts(),l.yc=new Map,l.gc=new _r(lt.comparator)}(t),t.vc=!1,yield KR(t.remoteStore,!1)}}),DO.apply(this,arguments)}function mB(n,e,t){return EO.apply(this,arguments)}function EO(){return EO=(0,we.Z)(function*(n,e,t){const r=dt(n),i=[],s=[];for(const l of e){let h;const m=r._c.get(l);if(m&&0!==m.length){h=yield nv(r.localStore,Co(m[0]));for(const y of m){const D=r.wc.get(y),S=yield v6(r,D);S.snapshot&&s.push(S.snapshot)}}else{const y=yield W2(r.localStore,l);h=yield nv(r.localStore,y),yield iO(r,_B(y),l,!1,h.resumeToken)}i.push(h)}return r.dc.nu(s),i}),EO.apply(this,arguments)}function _B(n){return CL(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function E6(n){const e=dt(n);return dt(dt(e.localStore).persistence).$i()}function C6(n,e,t,r){return CO.apply(this,arguments)}function CO(){return CO=(0,we.Z)(function*(n,e,t,r){const i=dt(n);if(i.vc)return void He("SyncEngine","Ignoring unexpected query state notification.");const s=i._c.get(e);if(s&&s.length>0)switch(t){case"current":case"not-current":{const l=yield q2(i.localStore,SL(s[0])),h=Hw.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,$i.EMPTY_BYTE_STRING);yield oh(i,l,h);break}case"rejected":yield rv(i.localStore,e,!0),cv(i,e,r);break;default:Et()}}),CO.apply(this,arguments)}function T6(n,e,t){return TO.apply(this,arguments)}function TO(){return TO=(0,we.Z)(function*(n,e,t){const r=IO(n);if(r.vc){for(const i of e){if(r._c.has(i)){He("SyncEngine","Adding an already active target "+i);continue}const s=yield W2(r.localStore,i),l=yield nv(r.localStore,s);yield iO(r,_B(s),l.targetId,!1,l.resumeToken),JI(r.remoteStore,l)}for(const i of t)r._c.has(i)&&(yield rv(r.localStore,i,!1).then(()=>{sD(r.remoteStore,i),cv(r,i)}).catch(qf))}}),TO.apply(this,arguments)}function IO(n){const e=dt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=fB.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=y6.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=h6.bind(null,e),e.dc.nu=n6.bind(null,e.eventManager),e.dc.Pc=r6.bind(null,e.eventManager),e}function SO(n){const e=dt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=f6.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=p6.bind(null,e),e}class oD{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,we.Z)(function*(){t.serializer=rD(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return G2(this.persistence,new j2,e.initialUser,this.serializer)}createPersistence(e){return new _R(HI.zs,this.serializer)}createSharedClientState(e){return new Q2}terminate(){var e=this;return(0,we.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class AO extends oD{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield SO(r.Vc.syncEngine),yield sv(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return G2(this.persistence,new j2,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new O2(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new J$(t,this.persistence);return new Q$(e.asyncQueue,r)}createPersistence(e){const t=bR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?qs.withCacheSize(this.cacheSizeBytes):qs.DEFAULT;return new vR(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,X2(),QI(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new Q2}}class yB extends AO{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,we.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof NR&&(r.sharedClientState.syncEngine={jr:w6.bind(null,i),zr:C6.bind(null,i),Wr:T6.bind(null,i),$i:E6.bind(null,i),Qr:b6.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var s=(0,we.Z)(function*(l){yield function D6(n,e){return DO.apply(this,arguments)}(r.Vc.syncEngine,l),r.gcScheduler&&(l&&!r.gcScheduler.started?r.gcScheduler.start():l||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(l&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():l||r.indexBackfillerScheduler.stop())});return function(l){return s.apply(this,arguments)}}())})()}createSharedClientState(e){const t=X2();if(!NR.D(t))throw new xe(pe.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=bR(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new NR(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class dv{initialize(e,t){var r=this;return(0,we.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>pB(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=_6.bind(null,r.syncEngine),yield KR(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new t6}createDatastore(e){const t=rD(e.databaseInfo.databaseId),r=new B3(e.databaseInfo);return new j3(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,s=h=>pB(this.syncEngine,h,0),l=J2.D()?new J2:new k3,new H3(t,r,i,s,l);var t,r,i,s,l}createSyncEngine(e,t){return function(r,i,s,l,h,m,y){const D=new l6(r,i,s,l,h,m);return y&&(D.vc=!0),D}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,we.Z)(function*(t){const r=dt(t);He("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield iv(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function vB(n,e=10240){let t=0;return{read:()=>(0,we.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,we.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class e1{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):vi("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class A6{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new Gi,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,we.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,we.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,we.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const s=yield e.$c(i);return new i6(JSON.parse(s),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,we.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,we.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,we.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class N6{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,we.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new xe(pe.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,we.Z)(function*(s,l){const h=dt(s),m=qw(h.serializer)+"/documents",y={documents:l.map(P=>Ww(h.serializer,P))},D=yield h.vo("BatchGetDocuments",m,y,l.length),S=new Map;D.forEach(P=>{const $=function ZH(n,e){return"found"in e?function(t,r){Rt(!!r.found);const i=Gc(t,r.found.name),s=bi(r.found.updateTime),l=r.found.createTime?bi(r.found.createTime):Ot.min(),h=new Ns({mapValue:{fields:r.found.fields}});return Tr.newFoundDocument(i,s,l,h)}(n,e):"missing"in e?function(t,r){Rt(!!r.missing),Rt(!!r.readTime);const i=Gc(t,r.missing),s=bi(r.readTime);return Tr.newNoDocument(i,s)}(n,e):Et()}(h.serializer,P);S.set($.key.toString(),$)});const R=[];return l.forEach(P=>{const $=S.get(P.toString());Rt(!!$),R.push($)}),R}),function(s,l){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new Qy(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,we.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const s=lt.fromPath(i);e.mutations.push(new JM(s,e.precondition(s)))}),yield(r=(0,we.Z)(function*(i,s){const l=dt(i),h=qw(l.serializer)+"/documents",m={writes:s.map(y=>Kw(l.serializer,y))};yield l.Io("Commit",h,m)}),function(i,s){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw Et();t=Ot.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new xe(pe.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Ot.min())?kr.exists(!1):kr.updateTime(t):kr.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Ot.min()))throw new xe(pe.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return kr.updateTime(t)}return kr.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class M6{constructor(e,t,r,i,s){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=s,this.Bc=r.maxAttempts,this.qo=new RR(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,we.Z)(function*(){const t=new N6(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(s=>{e.Uc(s)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Mw(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!zL(t)}return!1}}class R6{constructor(e,t,r,i){var s=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=hs.UNAUTHENTICATED,this.clientId=GF.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var l=(0,we.Z)(function*(h){He("FirestoreClient","Received user=",h.uid),yield s.authCredentialListener(h),s.user=h});return function(h){return l.apply(this,arguments)}}()),this.appCheckCredentials.start(r,l=>(He("FirestoreClient","Received new app check token=",l),this.appCheckCredentialListener(l,this.user)))}getConfiguration(){var e=this;return(0,we.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new xe(pe.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=av(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function t1(n,e){return NO.apply(this,arguments)}function NO(){return NO=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),He("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,we.Z)(function*(s){r.isEqual(s)||(yield $2(e.localStore,s),r=s)});return function(s){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),NO.apply(this,arguments)}function MO(n,e){return RO.apply(this,arguments)}function RO(){return RO=(0,we.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield OO(n);He("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>oB(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,s)=>oB(e.remoteStore,s)),n._onlineComponents=e}),RO.apply(this,arguments)}function bB(n){return"FirebaseError"===n.name?n.code===pe.FAILED_PRECONDITION||n.code===pe.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function OO(n){return xO.apply(this,arguments)}function xO(){return xO=(0,we.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){He("FirestoreClient","Using user provided OfflineComponentProvider");try{yield t1(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!bB(t))throw t;dl("Error using user provided cache. Falling back to memory cache: "+t),yield t1(n,new oD)}}else He("FirestoreClient","Using default OfflineComponentProvider"),yield t1(n,new oD);return n._offlineComponents}),xO.apply(this,arguments)}function n1(n){return PO.apply(this,arguments)}function PO(){return PO=(0,we.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(He("FirestoreClient","Using user provided OnlineComponentProvider"),yield MO(n,n._uninitializedComponentsProvider._online)):(He("FirestoreClient","Using default OnlineComponentProvider"),yield MO(n,new dv))),n._onlineComponents}),PO.apply(this,arguments)}function wB(n){return OO(n).then(e=>e.persistence)}function r1(n){return OO(n).then(e=>e.localStore)}function DB(n){return n1(n).then(e=>e.remoteStore)}function kO(n){return n1(n).then(e=>e.syncEngine)}function hv(n){return FO.apply(this,arguments)}function FO(){return FO=(0,we.Z)(function*(n){const e=yield n1(n),t=e.eventManager;return t.onListen=u6.bind(null,e.syncEngine),t.onUnlisten=c6.bind(null,e.syncEngine),t}),FO.apply(this,arguments)}function CB(n,e,t={}){const r=new Gi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,s,l,h,m){const y=new e1({next:S=>{s.enqueueAndForget(()=>XR(i,D));const R=S.docs.has(l);!R&&S.fromCache?m.reject(new xe(pe.UNAVAILABLE,"Failed to get document because the client is offline.")):R&&S.fromCache&&h&&"server"===h.source?m.reject(new xe(pe.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new nO(qy(l.path),y,{includeMetadataChanges:!0,Ku:!0});return QR(i,D)}(yield hv(n),n.asyncQueue,e,t,r)})),r.promise}function TB(n,e,t={}){const r=new Gi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function(i,s,l,h,m){const y=new e1({next:S=>{s.enqueueAndForget(()=>XR(i,D)),S.fromCache&&"server"===h.source?m.reject(new xe(pe.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(S)},error:S=>m.reject(S)}),D=new nO(l,y,{includeMetadataChanges:!0,Ku:!0});return QR(i,D)}(yield hv(n),n.asyncQueue,e,t,r)})),r.promise}function IB(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const SB=new Map;function LO(n,e,t){if(!t)throw new xe(pe.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function AB(n,e,t,r){if(!0===e&&!0===r)throw new xe(pe.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function NB(n){if(!lt.isDocumentKey(n))throw new xe(pe.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function MB(n){if(lt.isDocumentKey(n))throw new xe(pe.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function i1(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":Et()}function Sn(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new xe(pe.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=i1(n);throw new xe(pe.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function RB(n,e){if(e<=0)throw new xe(pe.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class OB{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new xe(pe.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new xe(pe.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}AB("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=IB(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new xe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new xe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new xe(pe.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class aD{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new OB({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new xe(pe.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new xe(pe.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new OB(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new V$;switch(t.type){case"firstParty":return new $$(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new xe(pe.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=SB.get(e);t&&(He("ComponentProvider","Removing Datastore"),SB.delete(e),t.terminate())}(this),Promise.resolve()}}class Ir{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new $c(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Ir(this.firestore,e,this._key)}}class Ms{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Ms(this.firestore,e,this._query)}}class $c extends Ms{constructor(e,t,r){super(e,t,qy(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Ir(this.firestore,null,new lt(e))}withConverter(e){return new $c(this.firestore,e,this._path)}}function PB(n,e,...t){if(n=(0,k.m9)(n),LO("collection","path",e),n instanceof aD){const r=xn.fromString(e,...t);return MB(r),new $c(n,null,r)}{if(!(n instanceof Ir||n instanceof $c))throw new xe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xn.fromString(e,...t));return MB(r),new $c(n.firestore,null,r)}}function s1(n,e,...t){if(n=(0,k.m9)(n),1===arguments.length&&(e=GF.A()),LO("doc","path",e),n instanceof aD){const r=xn.fromString(e,...t);return NB(r),new Ir(n,null,new lt(r))}{if(!(n instanceof Ir||n instanceof $c))throw new xe(pe.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(xn.fromString(e,...t));return NB(r),new Ir(n.firestore,n instanceof $c?n.converter:null,new lt(r))}}function kB(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),(n instanceof Ir||n instanceof $c)&&(e instanceof Ir||e instanceof $c)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function BO(n,e){return n=(0,k.m9)(n),e=(0,k.m9)(e),n instanceof Ms&&e instanceof Ms&&n.firestore===e.firestore&&Lw(n._query,e._query)&&n.converter===e.converter}class j6{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new RR(this,"async_queue_retry"),this.Xc=()=>{const t=QI();t&&He("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=QI();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=QI();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new Gi;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,we.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!Kf(t))throw t;He("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,vi("INTERNAL UNHANDLED ERROR: ",function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+"\n"+s.stack),l}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=ZR.createAndSchedule(this,e,t,r,s=>this.na(s));return this.zc.push(i),i}Zc(){this.Wc&&Et()}verifyOperationInProgress(){}sa(){var e=this;return(0,we.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function VO(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class G6{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Sr extends aD{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new j6,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||FB(this),this._firestoreClient.terminate()}}function wi(n){return n._firestoreClient||FB(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function FB(n){var e,t,r;const i=n._freezeSettings(),s=(h=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new vH(n._databaseId,h,n._persistenceKey,(y=i).host,y.ssl,y.experimentalForceLongPolling,y.experimentalAutoDetectLongPolling,IB(y.experimentalLongPollingOptions),y.useFetchStreams));var h,y;n._firestoreClient=new R6(n._authCredentials,n._appCheckCredentials,n._queue,s),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function LB(n,e,t){const r=new Gi;return n.asyncQueue.enqueue((0,we.Z)(function*(){try{yield t1(n,t),yield MO(n,e),r.resolve()}catch(i){const s=i;if(!bB(s))throw s;dl("Error enabling indexeddb cache. Falling back to memory cache: "+s),r.reject(s)}})).then(()=>r.promise)}function BB(n){if(n._initialized||n._terminated)throw new xe(pe.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Hc{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Hc($i.fromBase64String(e))}catch(t){throw new xe(pe.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Hc($i.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class ah{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new xe(pe.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new ni(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class am{constructor(e){this._methodName=e}}class o1{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new xe(pe.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new xe(pe.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return en(this._lat,e._lat)||en(this._long,e._long)}}const X6=/^__.*__$/;class e4{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new ih(e,this.data,this.fieldMask,t,this.fieldTransforms):new Zy(e,this.data,t,this.fieldTransforms)}}class VB{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new ih(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function UB(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Et()}}class a1{constructor(e,t,r,i,s,l){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===s&&this.ua(),this.fieldTransforms=s||[],this.fieldMask=l||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new a1(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return c1(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(UB(this.ca)&&X6.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class t4{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||rD(e)}ya(e,t,r,i=!1){return new a1({ca:e,methodName:t,ga:r,path:ni.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function lm(n){const e=n._freezeSettings(),t=rD(n._databaseId);return new t4(n._databaseId,!!e.ignoreUndefinedProperties,t)}function l1(n,e,t,r,i,s={}){const l=n.ya(s.merge||s.mergeFields?2:0,e,t,i);$O("Data must be an object, but it was:",l,r);const h=$B(r,l);let m,y;if(s.merge)m=new jo(l.fieldMask),y=l.fieldTransforms;else if(s.mergeFields){const D=[];for(const S of s.mergeFields){const R=cD(e,S,t);if(!l.contains(R))throw new xe(pe.INVALID_ARGUMENT,`Field '${R}' is specified in your field mask but missing from your input data.`);zB(D,R)||D.push(R)}m=new jo(D),y=l.fieldTransforms.filter(S=>m.covers(S.field))}else m=null,y=l.fieldTransforms;return new e4(new Ns(h),m,y)}class uD extends am{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof uD}}function jB(n,e,t){return new a1({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class UO extends am{_toFieldTransform(e){return new jw(e.path,new Ky)}isEqual(e){return e instanceof UO}}class n4 extends am{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=jB(this,e,!0),r=this.pa.map(s=>um(s,t)),i=new Jg(r);return new jw(e.path,i)}isEqual(e){return this===e}}class r4 extends am{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=jB(this,e,!0),r=this.pa.map(s=>um(s,t)),i=new Xg(r);return new jw(e.path,i)}isEqual(e){return this===e}}class i4 extends am{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Yy(e.serializer,PL(e.serializer,this.Ia));return new jw(e.path,t)}isEqual(e){return this===e}}function jO(n,e,t,r){const i=n.ya(1,e,t);$O("Data must be an object, but it was:",i,r);const s=[],l=Ns.empty();Yf(r,(m,y)=>{const D=u1(e,m,t);y=(0,k.m9)(y);const S=i.da(D);if(y instanceof uD)s.push(D);else{const R=um(y,S);null!=R&&(s.push(D),l.set(D,R))}});const h=new jo(s);return new VB(l,h,i.fieldTransforms)}function GO(n,e,t,r,i,s){const l=n.ya(1,e,t),h=[cD(e,r,t)],m=[i];if(s.length%2!=0)throw new xe(pe.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let R=0;R<s.length;R+=2)h.push(cD(e,s[R])),m.push(s[R+1]);const y=[],D=Ns.empty();for(let R=h.length-1;R>=0;--R)if(!zB(y,h[R])){const P=h[R];let $=m[R];$=(0,k.m9)($);const Z=l.da(P);if($ instanceof uD)y.push(P);else{const oe=um($,Z);null!=oe&&(y.push(P),D.set(P,oe))}}const S=new jo(y);return new VB(D,S,l.fieldTransforms)}function GB(n,e,t,r=!1){return um(t,n.ya(r?4:3,e))}function um(n,e){if(HB(n=(0,k.m9)(n)))return $O("Unsupported field value:",e,n),$B(n,e);if(n instanceof am)return function(t,r){if(!UB(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let s=0;for(const l of t){let h=um(l,r.wa(s));null==h&&(h={nullValue:"NULL_VALUE"}),i.push(h),s++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,k.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return PL(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Pr.fromDate(t);return{timestampValue:Jy(r.serializer,i)}}if(t instanceof Pr){const i=new Pr(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Jy(r.serializer,i)}}if(t instanceof o1)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Hc)return{bytesValue:t2(r.serializer,t._byteString)};if(t instanceof Ir){const i=r.databaseId,s=t.firestore._databaseId;if(!s.isEqual(i))throw r._a(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:sR(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${i1(t)}`)}(n,e)}function $B(n,e){const t={};return rL(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Yf(n,(r,i)=>{const s=um(i,e.ha(r));null!=s&&(t[r]=s)}),{mapValue:{fields:t}}}function HB(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Pr||n instanceof o1||n instanceof Hc||n instanceof Ir||n instanceof am)}function $O(n,e,t){if(!HB(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=i1(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function cD(n,e,t){if((e=(0,k.m9)(e))instanceof ah)return e._internalPath;if("string"==typeof e)return u1(n,e);throw c1("Field path arguments must be of type string or ",n,!1,void 0,t)}const s4=new RegExp("[~\\*/\\[\\]]");function u1(n,e,t){if(e.search(s4)>=0)throw c1(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new ah(...e.split("."))._internalPath}catch{throw c1(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function c1(n,e,t,r,i){const s=r&&!r.isEmpty(),l=void 0!==i;let h=`Function ${e}() called with invalid data`;t&&(h+=" (via `toFirestore()`)"),h+=". ";let m="";return(s||l)&&(m+=" (found",s&&(m+=` in field ${r}`),l&&(m+=` in document ${i}`),m+=")"),new xe(pe.INVALID_ARGUMENT,h+n+m)}function zB(n,e){return n.some(t=>t.isEqual(e))}class dD{constructor(e,t,r,i,s){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Ir(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new o4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(d1("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class o4 extends dD{data(){return super.data()}}function d1(n,e){return"string"==typeof e?u1(n,e):e instanceof ah?e._internalPath:e._delegate._internalPath}function WB(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new xe(pe.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class HO{}class hD extends HO{}function lp(n,e,...t){let r=[];e instanceof HO&&r.push(e),r=r.concat(t),function(i){const s=i.filter(h=>h instanceof fv).length,l=i.filter(h=>h instanceof fD).length;if(s>1||s>0&&l>0)throw new xe(pe.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class fD extends hD{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new fD(e,t,r)}_apply(e){const t=this._parse(e);return ZB(e._query,t),new Ms(e.firestore,e.converter,YM(e._query,t))}_parse(e){const t=lm(e.firestore);return function(i,s,l,h,m,y,D){let S;if(m.isKeyField()){if("array-contains"===y||"array-contains-any"===y)throw new xe(pe.INVALID_ARGUMENT,`Invalid Query. You can't perform '${y}' queries on documentId().`);if("in"===y||"not-in"===y){YB(D,y);const R=[];for(const P of D)R.push(KB(h,i,P));S={arrayValue:{values:R}}}else S=KB(h,i,D)}else"in"!==y&&"not-in"!==y&&"array-contains-any"!==y||YB(D,y),S=GB(l,"where",D,"in"===y||"not-in"===y);return In.create(m,y,S)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class fv extends HO{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new fv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:ir.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let s=r;const l=i.getFlattenedFilters();for(const h of l)ZB(s,h),s=YM(s,h)}(e._query,t),new Ms(e.firestore,e.converter,YM(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class zO extends hD{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new zO(e,t)}_apply(e){const t=function(r,i,s){if(null!==r.startAt)throw new xe(pe.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new xe(pe.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const l=new zy(i,s);return function(h,m){if(null===qM(h)){const y=NI(h);null!==y&&QB(0,y,m.field)}}(r,l),l}(e._query,this._field,this._direction);return new Ms(e.firestore,e.converter,function(r,i){const s=r.explicitOrderBy.concat([i]);return new nh(r.path,r.collectionGroup,s,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class h1 extends hD{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new h1(e,t,r)}_apply(e){return new Ms(e.firestore,e.converter,MI(e._query,this._limit,this._limitType))}}class f1 extends hD{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new f1(e,t,r)}_apply(e){const t=qB(e,this.type,this._docOrFields,this._inclusive);return new Ms(e.firestore,e.converter,(i=t,new nh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class p1 extends hD{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new p1(e,t,r)}_apply(e){const t=qB(e,this.type,this._docOrFields,this._inclusive);return new Ms(e.firestore,e.converter,(i=t,new nh((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function qB(n,e,t,r){if(t[0]=(0,k.m9)(t[0]),t[0]instanceof dD)return function(i,s,l,h,m){if(!h)throw new xe(pe.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${l}().`);const y=[];for(const D of Qg(i))if(D.field.isKeyField())y.push(Yg(s,h.key));else{const S=h.data.field(D.field);if(DI(S))throw new xe(pe.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+D.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===S){const R=D.field.canonicalString();throw new xe(pe.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${R}' (used as the orderBy) does not exist.`)}y.push(S)}return new tp(y,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=lm(n.firestore);return function(s,l,h,m,y,D){const S=s.explicitOrderBy;if(y.length>S.length)throw new xe(pe.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const R=[];for(let P=0;P<y.length;P++){const $=y[P];if(S[P].field.isKeyField()){if("string"!=typeof $)throw new xe(pe.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof $}`);if(!KM(s)&&-1!==$.indexOf("/"))throw new xe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${$}' contains a slash.`);const Z=s.path.child(xn.fromString($));if(!lt.isDocumentKey(Z))throw new xe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${Z}' is not because it contains an odd number of segments.`);const oe=new lt(Z);R.push(Yg(l,oe))}else{const Z=GB(h,m,$);R.push(Z)}}return new tp(R,D)}(n._query,n.firestore._databaseId,i,e,t,r)}}function KB(n,e,t){if("string"==typeof(t=(0,k.m9)(t))){if(""===t)throw new xe(pe.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!KM(e)&&-1!==t.indexOf("/"))throw new xe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(xn.fromString(t));if(!lt.isDocumentKey(r))throw new xe(pe.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Yg(n,new lt(r))}if(t instanceof Ir)return Yg(n,t._key);throw new xe(pe.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${i1(t)}.`)}function YB(n,e){if(!Array.isArray(n)||0===n.length)throw new xe(pe.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function ZB(n,e){if(e.isInequality()){const r=NI(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new xe(pe.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const s=qM(n);null!==s&&QB(0,i,s)}const t=function(r,i){for(const s of r)for(const l of s.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new xe(pe.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function QB(n,e,t){if(!t.isEqual(e))throw new xe(pe.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class WO{convertValue(e,t="none"){switch(Xf(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ri(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(th(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw Et()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return Yf(e,(i,s)=>{r[i]=this.convertValue(s,t)}),r}convertGeoPoint(e){return new o1(ri(e.latitude),ri(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=EI(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp(Ow(e));default:return null}}convertTimestamp(e){const t=Zf(e);return new Pr(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=xn.fromString(e);Rt(d2(r));const i=new Qf(r.get(1),r.get(3)),s=new lt(r.popFirst(5));return i.isEqual(t)||vi(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}function g1(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class g4 extends WO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ir(this.firestore,null,t)}}class cm{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class lh extends dD{constructor(e,t,r,i,s,l){super(e,t,r,i,l),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new pD(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(d1("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class pD extends lh{data(e={}){return super.data(e)}}class up{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new cm(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new pD(this._firestore,this._userDataWriter,r.key,r,new cm(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new xe(pe.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let s=0;return r._snapshot.docChanges.map(l=>({type:"added",doc:new pD(r._firestore,r._userDataWriter,l.doc.key,l.doc,new cm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:s++}))}{let s=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(l=>i||3!==l.type).map(l=>{const h=new pD(r._firestore,r._userDataWriter,l.doc.key,l.doc,new cm(r._snapshot.mutatedKeys.has(l.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,y=-1;return 0!==l.type&&(m=s.indexOf(l.doc.key),s=s.delete(l.doc.key)),1!==l.type&&(s=s.add(l.doc),y=s.indexOf(l.doc.key)),{type:_4(l.type),doc:h,oldIndex:m,newIndex:y}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function _4(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Et()}}function XB(n,e){return n instanceof lh&&e instanceof lh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof up&&e instanceof up&&n._firestore===e._firestore&&BO(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class cp extends WO{constructor(e){super(),this.firestore=e}convertBytes(e){return new Hc(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Ir(this.firestore,null,t)}}function eV(n,e,t){n=Sn(n,Ir);const r=Sn(n.firestore,Sr),i=g1(n.converter,e,t);return pv(r,[l1(lm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,kr.none())])}function tV(n,e,t,...r){n=Sn(n,Ir);const i=Sn(n.firestore,Sr),s=lm(i);let l;return l="string"==typeof(e=(0,k.m9)(e))||e instanceof ah?GO(s,"updateDoc",n._key,e,t,r):jO(s,"updateDoc",n._key,e),pv(i,[l.toMutation(n._key,kr.exists(!0))])}function nV(n,...e){var t,r,i;n=(0,k.m9)(n);let s={includeMetadataChanges:!1},l=0;"object"!=typeof e[l]||VO(e[l])||(s=e[l],l++);const h={includeMetadataChanges:s.includeMetadataChanges};if(VO(e[l])){const S=e[l];e[l]=null===(t=S.next)||void 0===t?void 0:t.bind(S),e[l+1]=null===(r=S.error)||void 0===r?void 0:r.bind(S),e[l+2]=null===(i=S.complete)||void 0===i?void 0:i.bind(S)}let m,y,D;if(n instanceof Ir)y=Sn(n.firestore,Sr),D=qy(n._key.path),m={next:S=>{e[l]&&e[l](qO(y,n,S))},error:e[l+1],complete:e[l+2]};else{const S=Sn(n,Ms);y=Sn(S.firestore,Sr),D=S._query;const R=new cp(y);m={next:P=>{e[l]&&e[l](new up(y,R,S,P))},error:e[l+1],complete:e[l+2]},WB(n._query)}return function(S,R,P,$){const Z=new e1($),oe=new nO(R,Z,P);return S.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return QR(yield hv(S),oe)})),()=>{Z.Dc(),S.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return XR(yield hv(S),oe)}))}}(wi(y),D,h,m)}function pv(n,e){return function(t,r){const i=new Gi;return t.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function d6(n,e,t){return aO.apply(this,arguments)}(yield kO(t),r,i)})),i.promise}(wi(n),e)}function qO(n,e,t){const r=t.docs.get(e._key),i=new cp(n);return new lh(n,i,e._key,r,new cm(t.hasPendingWrites,t.fromCache),e.converter)}const k4={maxAttempts:5};class rV{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=lm(e)}set(e,t,r){this._verifyNotCommitted();const i=dp(e,this._firestore),s=g1(i.converter,t,r),l=l1(this._dataReader,"WriteBatch.set",i._key,s,null!==i.converter,r);return this._mutations.push(l.toMutation(i._key,kr.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const s=dp(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof ah?GO(this._dataReader,"WriteBatch.update",s._key,t,r,i):jO(this._dataReader,"WriteBatch.update",s._key,t),this._mutations.push(l.toMutation(s._key,kr.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=dp(e,this._firestore);return this._mutations=this._mutations.concat(new Qy(t._key,kr.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new xe(pe.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function dp(n,e){if((n=(0,k.m9)(n)).firestore!==e)throw new xe(pe.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class F4 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=lm(e)}get(e){const t=dp(e,this._firestore),r=new g4(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return Et();const s=i[0];if(s.isFoundDocument())return new dD(this._firestore,r,s.key,s,t.converter);if(s.isNoDocument())return new dD(this._firestore,r,t._key,null,t.converter);throw Et()})}set(e,t,r){const i=dp(e,this._firestore),s=g1(i.converter,t,r),l=l1(this._dataReader,"Transaction.set",i._key,s,null!==i.converter,r);return this._transaction.set(i._key,l),this}update(e,t,r,...i){const s=dp(e,this._firestore);let l;return l="string"==typeof(t=(0,k.m9)(t))||t instanceof ah?GO(this._dataReader,"Transaction.update",s._key,t,r,i):jO(this._dataReader,"Transaction.update",s._key,t),this._transaction.update(s._key,l),this}delete(e){const t=dp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=dp(e,this._firestore),r=new cp(this._firestore);return super.get(e).then(i=>new lh(this._firestore,r,t._key,i._document,new cm(!1,!1),t.converter))}}!function(n,e=!0){jy=es.SDK_VERSION,(0,es._registerComponent)(new Ai.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const s=t.getProvider("app").getImmediate(),l=new Sr(new j$(t.getProvider("auth-internal")),new H$(t.getProvider("app-check-internal")),function(h,m){if(!Object.prototype.hasOwnProperty.apply(h.options,["projectId"]))throw new xe(pe.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Qf(h.options.projectId,m)}(s,r),s);return i=Object.assign({useFetchStreams:e},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),(0,es.registerVersion)(VF,"3.12.1",n),(0,es.registerVersion)(VF,"3.12.1","esm2017")}();function KO(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new xe("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function sV(){if(typeof Uint8Array>"u")throw new xe("unimplemented","Uint8Arrays are not available in this environment.")}function oV(){if(!function _H(){return typeof atob<"u"}())throw new xe("unimplemented","Blobs are unavailable in Firestore in this environment.")}class gD{constructor(e){this._delegate=e}static fromBase64String(e){return oV(),new gD(Hc.fromBase64String(e))}static fromUint8Array(e){return sV(),new gD(Hc.fromUint8Array(e))}toBase64(){return oV(),this._delegate.toBase64()}toUint8Array(){return sV(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function YO(n){return function z4(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class W4{enableIndexedDbPersistence(e,t){return function H6(n,e){BB(n=Sn(n,Sr));const t=wi(n);if(t._uninitializedComponentsProvider)throw new xe(pe.FAILED_PRECONDITION,"SDK cache is already specified.");dl("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new dv;return LB(t,i,new AO(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function z6(n){BB(n=Sn(n,Sr));const e=wi(n);if(e._uninitializedComponentsProvider)throw new xe(pe.FAILED_PRECONDITION,"SDK cache is already specified.");dl("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new dv;return LB(e,r,new yB(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function W6(n){if(n._initialized&&!n._terminated)throw new xe(pe.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new Gi;return n._queue.enqueueAndForgetEvenWhileRestricted((0,we.Z)(function*(){try{yield(t=(0,we.Z)(function*(r){if(!yu.D())return Promise.resolve();const i=r+"main";yield yu.delete(i)}),function(r){return t.apply(this,arguments)})(bR(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class aV{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof Qf||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&dl("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function xB(n,e,t,r={}){var i;const s=(n=Sn(n,aD))._getSettings();if("firestore.googleapis.com"!==s.host&&s.host!==e&&dl("Host has been set in both settings() and useEmulator(), emulator host will be used"),n._setSettings(Object.assign(Object.assign({},s),{host:`${e}:${t}`,ssl:!1})),r.mockUserToken){let l,h;if("string"==typeof r.mockUserToken)l=r.mockUserToken,h=hs.MOCK_USER;else{l=(0,k.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new xe(pe.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");h=new hs(m)}n._authCredentials=new U$(new UF(l,h))}}(this._delegate,e,t,r)}enableNetwork(){return function K6(n){return function O6(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield wB(n),t=yield DB(n);return e.setNetworkEnabled(!0),function(r){const i=dt(r);return i.vu.delete(0),iD(i)}(t)}))}(wi(n=Sn(n,Sr)))}(this._delegate)}disableNetwork(){return function Y6(n){return function x6(n){return n.asyncQueue.enqueue((0,we.Z)(function*(){const e=yield wB(n),t=yield DB(n);return e.setNetworkEnabled(!1),(r=(0,we.Z)(function*(i){const s=dt(i);s.vu.add(0),yield iv(s),s.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(wi(n=Sn(n,Sr)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,AB("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function q6(n){return function(e){const t=new Gi;return e.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return function g6(n,e){return hO.apply(this,arguments)}(yield kO(e),t)})),t.promise}(wi(n=Sn(n,Sr)))}(this._delegate)}onSnapshotsInSync(e){return function I4(n,e){return function F6(n,e){const t=new e1(e);return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield hv(n),i=t,dt(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return r=yield hv(n),i=t,void dt(r).ku.delete(i);var r,i}))}}(wi(n=Sn(n,Sr)),VO(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new xe("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new gv(this,PB(this._delegate,e))}catch(t){throw To(t,"collection()","Firestore.collection()")}}doc(e){try{return new hl(this,s1(this._delegate,e))}catch(t){throw To(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Io(this,function U6(n,e){if(n=Sn(n,aD),LO("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new xe(pe.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ms(n,null,(t=e,new nh(xn.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw To(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function L4(n,e,t){n=Sn(n,Sr);const r=Object.assign(Object.assign({},k4),t);return function(i){if(i.maxAttempts<1)throw new xe(pe.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,s,l){const h=new Gi;return i.asyncQueue.enqueueAndForget((0,we.Z)(function*(){const m=yield function EB(n){return n1(n).then(e=>e.datastore)}(i);new M6(i.asyncQueue,m,l,s,h).run()})),h.promise}(wi(n),i=>e(new F4(n,i)),r)}(this._delegate,t=>e(new lV(this,t)))}batch(){return wi(this._delegate),new uV(new rV(this._delegate,e=>pv(this._delegate,e)))}loadBundle(e){return function Z6(n,e){const t=wi(n=Sn(n,Sr)),r=new G6;return function L6(n,e,t,r){const i=function(s,l){let h;return h="string"==typeof s?qL().encode(s):s,m=function(m,y){if(m instanceof Uint8Array)return vB(m,y);if(m instanceof ArrayBuffer)return vB(new Uint8Array(m),y);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(h),new A6(m,l);var m}(t,rD(e));n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){!function I6(n,e,t){const r=dt(n);var i;(i=(0,we.Z)(function*(s,l,h){try{const m=yield l.getMetadata();if(yield function(R,P){const $=dt(R),Z=bi(P.createTime);return $.persistence.runTransaction("hasNewerBundle","readonly",oe=>$.qs.getBundleMetadata(oe,P.id)).then(oe=>!!oe&&oe.createTime.compareTo(Z)>=0)}(s.localStore,m))return yield l.close(),h._completeWith({taskState:"Success",documentsLoaded:(R=m).totalDocuments,bytesLoaded:R.totalBytes,totalDocuments:R.totalDocuments,totalBytes:R.totalBytes}),Promise.resolve(new Set);h._updateProgress(uB(m));const y=new s6(m,s.localStore,l.serializer);let D=yield l.bc();for(;D;){const R=yield y.zu(D);R&&h._updateProgress(R),D=yield l.bc()}const S=yield y.complete();return yield oh(s,S.Ju,void 0),yield function(R,P){const $=dt(R);return $.persistence.runTransaction("Save bundle","readwrite",Z=>$.qs.saveBundleMetadata(Z,P))}(s.localStore,m),h._completeWith(S.progress),Promise.resolve(S.Hu)}catch(m){return dl("SyncEngine",`Loading bundle failed with ${m}`),h._failWith(m),Promise.resolve(new Set)}var R}),function(s,l,h){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield kO(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Q6(n,e){return function B6(n,e){return n.asyncQueue.enqueue((0,we.Z)(function*(){return function(t,r){const i=dt(t);return i.persistence.runTransaction("Get named query","readonly",s=>i.qs.getNamedQuery(s,r))}(yield r1(n),e)}))}(wi(n=Sn(n,Sr)),e).then(t=>t?new Ms(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Io(this,t):null)}}class m1 extends WO{constructor(e){super(),this.firestore=e}convertBytes(e){return new gD(new Hc(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return hl.forKey(t,this.firestore,null)}}class lV{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new m1(e)}get(e){const t=hm(e);return this._delegate.get(t).then(r=>new mD(this._firestore,new lh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=hm(e);return r?(KO("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=hm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=hm(e);return this._delegate.delete(t),this}}class uV{constructor(e){this._delegate=e}set(e,t,r){const i=hm(e);return r?(KO("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const s=hm(e);return 2===arguments.length?this._delegate.update(s,t):this._delegate.update(s,t,r,...i),this}delete(e){const t=hm(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class dm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new pD(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new _D(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=dm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let s=i.get(t);return s||(s=new dm(e,new m1(e),t),i.set(t,s)),s}}dm.INSTANCES=new WeakMap;class hl{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new m1(e)}static forPath(e,t,r){if(e.length%2!=0)throw new xe("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new hl(t,new Ir(t._delegate,r,new lt(e)))}static forKey(e,t,r){return new hl(t,new Ir(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new gv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new gv(this.firestore,PB(this._delegate,e))}catch(t){throw To(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,k.m9)(e))instanceof Ir&&kB(this._delegate,e)}set(e,t){t=KO("DocumentReference.set",t);try{return t?eV(this._delegate,e,t):eV(this._delegate,e)}catch(r){throw To(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?tV(this._delegate,e):tV(this._delegate,e,t,...r)}catch(i){throw To(i,"updateDoc()","DocumentReference.update()")}}delete(){return function C4(n){return pv(Sn(n.firestore,Sr),[new Qy(n._key,kr.none())])}(this._delegate)}onSnapshot(...e){const t=cV(e),r=dV(e,i=>new mD(this.firestore,new lh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return nV(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function v4(n){n=Sn(n,Ir);const e=Sn(n.firestore,Sr),t=wi(e),r=new cp(e);return function P6(n,e){const t=new Gi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,s,l){try{const h=yield function(m,y){const D=dt(m);return D.persistence.runTransaction("read document","readonly",S=>D.localDocuments.getDocument(S,y))}(i,s);h.isFoundDocument()?l.resolve(h):h.isNoDocument()?l.resolve(null):l.reject(new xe(pe.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(h){const m=av(h,`Failed to get document '${s} from cache`);l.reject(m)}}),function(i,s,l){return r.apply(this,arguments)})(yield r1(n),e,t);var r})),t.promise}(t,n._key).then(i=>new lh(e,r,n._key,i,new cm(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function b4(n){n=Sn(n,Ir);const e=Sn(n.firestore,Sr);return CB(wi(e),n._key,{source:"server"}).then(t=>qO(e,n,t))}(this._delegate):function y4(n){n=Sn(n,Ir);const e=Sn(n.firestore,Sr);return CB(wi(e),n._key).then(t=>qO(e,n,t))}(this._delegate),t.then(r=>new mD(this.firestore,new lh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new hl(this.firestore,this._delegate.withConverter(e?dm.getInstance(this.firestore,e):null))}}function To(n,e,t){return n.message=n.message.replace(e,t),n}function cV(n){for(const e of n)if("object"==typeof e&&!YO(e))return e;return{}}function dV(n,e){var t,r;let i;return i=YO(n[0])?n[0]:YO(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:s=>{i.next&&i.next(e(s))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class mD{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new hl(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return XB(this._delegate,e._delegate)}}class _D extends mD{data(e){const t=this._delegate.data(e);return function B$(n,e){n||Et()}(void 0!==t),t}}class Io{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new m1(e)}where(e,t,r){try{return new Io(this.firestore,lp(this._delegate,function a4(n,e,t){const r=e,i=d1("where",n);return fD._create(i,r,t)}(e,t,r)))}catch(i){throw To(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Io(this.firestore,lp(this._delegate,function l4(n,e="asc"){const t=e,r=d1("orderBy",n);return zO._create(r,t)}(e,t)))}catch(r){throw To(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Io(this.firestore,lp(this._delegate,function u4(n){return RB("limit",n),h1._create("limit",n,"F")}(e)))}catch(t){throw To(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Io(this.firestore,lp(this._delegate,function c4(n){return RB("limitToLast",n),h1._create("limitToLast",n,"L")}(e)))}catch(t){throw To(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Io(this.firestore,lp(this._delegate,function d4(...n){return f1._create("startAt",n,!0)}(...e)))}catch(t){throw To(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Io(this.firestore,lp(this._delegate,function h4(...n){return f1._create("startAfter",n,!1)}(...e)))}catch(t){throw To(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Io(this.firestore,lp(this._delegate,function f4(...n){return p1._create("endBefore",n,!1)}(...e)))}catch(t){throw To(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Io(this.firestore,lp(this._delegate,function p4(...n){return p1._create("endAt",n,!0)}(...e)))}catch(t){throw To(t,"endAt()","Query.endAt()")}}isEqual(e){return BO(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function D4(n){n=Sn(n,Ms);const e=Sn(n.firestore,Sr),t=wi(e),r=new cp(e);return function k6(n,e){const t=new Gi;return n.asyncQueue.enqueueAndForget((0,we.Z)(function*(){return(r=(0,we.Z)(function*(i,s,l){try{const h=yield qI(i,s,!0),m=new hB(s,h.ir),y=m.sc(h.documents),D=m.applyChanges(y,!1);l.resolve(D.snapshot)}catch(h){const m=av(h,`Failed to execute query '${s} against cache`);l.reject(m)}}),function(i,s,l){return r.apply(this,arguments)})(yield r1(n),e,t);var r})),t.promise}(t,n._query).then(i=>new up(e,r,n,i))}(this._delegate):"server"===e?.source?function E4(n){n=Sn(n,Ms);const e=Sn(n.firestore,Sr),t=wi(e),r=new cp(e);return TB(t,n._query,{source:"server"}).then(i=>new up(e,r,n,i))}(this._delegate):function w4(n){n=Sn(n,Ms);const e=Sn(n.firestore,Sr),t=wi(e),r=new cp(e);return WB(n._query),TB(t,n._query).then(i=>new up(e,r,n,i))}(this._delegate),t.then(r=>new ZO(this.firestore,new up(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=cV(e),r=dV(e,i=>new ZO(this.firestore,new up(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return nV(this._delegate,t,r)}withConverter(e){return new Io(this.firestore,this._delegate.withConverter(e?dm.getInstance(this.firestore,e):null))}}class K4{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new _D(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class ZO{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Io(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new _D(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new K4(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new _D(this._firestore,r))})}isEqual(e){return XB(this._delegate,e._delegate)}}class gv extends Io{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new hl(this.firestore,e):null}doc(e){try{return new hl(this.firestore,void 0===e?s1(this._delegate):s1(this._delegate,e))}catch(t){throw To(t,"doc()","CollectionReference.doc()")}}add(e){return function T4(n,e){const t=Sn(n.firestore,Sr),r=s1(n),i=g1(n.converter,e);return pv(t,[l1(lm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,kr.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new hl(this.firestore,t))}isEqual(e){return kB(this._delegate,e._delegate)}withConverter(e){return new gv(this.firestore,this._delegate.withConverter(e?dm.getInstance(this.firestore,e):null))}}function hm(n){return Sn(n,Ir)}class QO{constructor(...e){this._delegate=new ah(...e)}static documentId(){return new QO(ni.keyField().canonicalString())}isEqual(e){return(e=(0,k.m9)(e))instanceof ah&&this._delegate._internalPath.isEqual(e._internalPath)}}class fm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function V4(){return new UO("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new fm(e)}static delete(){const e=function B4(){return new uD("deleteField")}();return e._methodName="FieldValue.delete",new fm(e)}static arrayUnion(...e){const t=function U4(...n){return new n4("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new fm(t)}static arrayRemove(...e){const t=function j4(...n){return new r4("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new fm(t)}static increment(e){const t=function G4(n){return new i4("increment",n)}(e);return t._methodName="FieldValue.increment",new fm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const Y4={Firestore:aV,GeoPoint:o1,Timestamp:Pr,Blob:gD,Transaction:lV,WriteBatch:uV,DocumentReference:hl,DocumentSnapshot:mD,Query:Io,QueryDocumentSnapshot:_D,QuerySnapshot:ZO,CollectionReference:gv,FieldPath:QO,FieldValue:fm,setLogLevel:function q4(n){!function L$(n){Wf.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function hV(n,e){return function J4(n,e=ko.z){return new Jn.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function JO(n,e){return hV(n,e).pipe((0,vt.U)(t=>({payload:t,type:"query"})))}function _1(n,e){return JO(n,e).pipe(Mc(void 0),zN(),(0,vt.U)(([t,r])=>{const i=r.payload.docChanges(),s=i.map(l=>({type:l.type,payload:l}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((l,h)=>{const m=i.find(D=>D.doc.ref.isEqual(l.ref)),y=t?.payload.docs.find(D=>D.ref.isEqual(l.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(l.metadata)||!m&&y&&JSON.stringify(y.metadata)===JSON.stringify(l.metadata)||s.push({type:"modified",payload:{oldIndex:h,newIndex:h,type:"modified",doc:l}})}),s}))}function fV(n,e,t){return _1(n,t).pipe(Es((r,i)=>function ez(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function tz(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return XO(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return XO(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return XO(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(s=>s.payload),e),[]),Fo(),(0,vt.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function XO(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function pV(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Q4(n){(function Z4(n,e){n.INTERNAL.registerComponent(new Ai.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},Y4)))})(n,(e,t)=>new aV(e,t,new W4)),n.registerVersion("@firebase/firestore-compat","0.3.10")}(Lo.Z);class gV{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=_1(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,vt.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe(Mc(void 0),zN(),hr(([r,i])=>i.length>0||!r),(0,vt.U)(([r,i])=>i),Wn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Es((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pV(e);return fV(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}valueChanges(e={}){return JO(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Wn.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(Wn.iC)}add(e){return this.ref.add(e)}doc(e){return new mV(this.ref.doc(e),this.afs)}}class mV{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:s}=_V(r,t);return new gV(i,s,this.afs)}snapshotChanges(){return function X4(n,e){return hV(n,e).pipe(Mc(void 0),zN(),(0,vt.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,vt.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,wn.D)(this.ref.get(e)).pipe(Wn.iC)}}class nz{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?_1(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),hr(t=>t.length>0),Wn.iC):_1(this.query,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}auditTrail(e){return this.stateChanges(e).pipe(Es((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=pV(e);return fV(this.query,t,this.afs.schedulers.outsideAngular).pipe(Wn.iC)}valueChanges(e={}){return JO(this.query,this.afs.schedulers.outsideAngular).pipe((0,vt.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Wn.iC)}get(e){return(0,wn.D)(this.query.get(e)).pipe(Wn.iC)}}const rz=new u.OlP("angularfire2.enableFirestorePersistence"),iz=new u.OlP("angularfire2.firestore.persistenceSettings"),sz=new u.OlP("angularfire2.firestore.settings"),oz=new u.OlP("angularfire2.firestore.use-emulator");function _V(n,e=(t=>t)){return{query:e(n),ref:n}}let az=(()=>{class n{constructor(t,r,i,s,l,h,m,y,D,S,R,P,$,Z,oe,Ue,Ge){this.schedulers=m;const tt=(0,Wr.on)(t,h,r),Xe=D;S&&ly(tt,h,R,$,Z,oe,P,Ue),[this.firestore,this.persistenceEnabled$]=(0,Wr.cc)(`${tt.name}.firestore`,"AngularFirestore",tt.name,()=>{const ht=h.runOutsideAngular(()=>tt.firestore());if(s&&ht.settings(s),Xe&&ht.useEmulator(...Xe),i&&!eo(l)){const It=()=>{try{return(0,wn.D)(ht.enablePersistence(y||void 0).then(()=>!0,()=>!1))}catch(hn){return typeof console<"u"&&console.warn(hn),ct(!1)}};return[ht,h.runOutsideAngular(It)]}return[ht,ct(!1)]},[s,Xe,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:s,query:l}=_V(i,r),h=this.schedulers.ngZone.run(()=>s);return new gV(h,l,this)}collectionGroup(t,r){const i=r||(l=>l),s=this.firestore.collectionGroup(t);return new nz(i(s),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new mV(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(Wr.Dh),u.LFG(Wr.xv,8),u.LFG(rz,8),u.LFG(sz,8),u.LFG(u.Lbi),u.LFG(u.R0b),u.LFG(Wn.HU),u.LFG(iz,8),u.LFG(oz,8),u.LFG(ib,8),u.LFG(eb,8),u.LFG(tb,8),u.LFG(nb,8),u.LFG(rb,8),u.LFG(oy,8),u.LFG(ay,8),u.LFG(Tg,8))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),yV=(()=>{class n{constructor(t,r){this.db=t,this.fsdb=r,this.refNepesseg=t.list("/budapest"),this.fsrefNepesseg=r.collection("/budapest")}get(){return this.refNepesseg}create(t){this.refNepesseg.push(t)}fsget(){return this.fsrefNepesseg}fscreate(t){this.fsrefNepesseg.add({...t})}fsupdate(t,r){return this.fsrefNepesseg.doc(t).update(r)}fsdelete(t){return this.fsrefNepesseg.doc(t).delete()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(db),u.LFG(az))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lz=(()=>{class n{transform(t){return null!=t&&null!=t&&t.sort((r,i)=>r.evszam>i.evszam?-1:r.evszam<i.evszam?1:0),t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275pipe=u.Yjl({name:"orderByYear",type:n,pure:!0}),n})();function uz(n,e){if(1&n&&(u.TgZ(0,"div",4),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.Oqu(t)}}function cz(n,e){if(1&n&&(u.TgZ(0,"div",5),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.hij(" ",t.errorMessage,"\n")}}function dz(n,e){if(1&n&&(u.TgZ(0,"div",8),u._uU(1),u.qZA()),2&n){const t=e.$implicit,r=u.oxw().$implicit;u.xp6(1),u.Oqu(r[t])}}function hz(n,e){if(1&n&&(u.TgZ(0,"div",6),u.YNc(1,dz,2,1,"div",7),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngForOf",t.oszlopok)}}let fz=(()=>{class n{constructor(t){this.base=t,this.oszlopok=["evszam","magyar","nemet","szlovak","egyeb"],this.showError=!1,this.errorMessage="",this.base.fsget().snapshotChanges().pipe((0,vt.U)(r=>r.map(i=>({key:i.payload.doc.id,...i.payload.doc.data()})))).subscribe({next:r=>{this.showError=!1,this.adatok=r},error:r=>{this.showError=!0,this.errorMessage=r}})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(yV))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-adatok"]],decls:5,vars:5,consts:[[1,"row"],["class","col my-2",4,"ngFor","ngForOf"],["class","alert alert-danger","role","alert",4,"ngIf"],["class","row my-1",4,"ngFor","ngForOf"],[1,"col","my-2"],["role","alert",1,"alert","alert-danger"],[1,"row","my-1"],["class","col",4,"ngFor","ngForOf"],[1,"col"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.YNc(1,uz,2,1,"div",1),u.qZA(),u.YNc(2,cz,2,1,"div",2),u.YNc(3,hz,2,1,"div",3),u.ALo(4,"orderByYear")),2&t&&(u.xp6(1),u.Q6J("ngForOf",r.oszlopok),u.xp6(1),u.Q6J("ngIf",r.showError),u.xp6(1),u.Q6J("ngForOf",u.lcZ(4,3,r.adatok)))},dependencies:[Gr,pr,lz]}),n})(),vV=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n}),n})(),pm=(()=>{class n extends vV{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,features:[u.qOj]}),n})();const $o=new u.OlP("NgValueAccessor"),mz={provide:$o,useExisting:(0,u.Gpc)(()=>y1),multi:!0},yz=new u.OlP("CompositionEventMode");let y1=(()=>{class n extends vV{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function _z(){const n=F()?F().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(yz,8))},n.\u0275dir=u.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(s){return r._handleInput(s.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(s){return r._compositionEnd(s.target.value)})},features:[u._Bn([mz]),u.qOj]}),n})();const vz=!1;function hp(n){return null==n||("string"==typeof n||Array.isArray(n))&&0===n.length}const Rs=new u.OlP("NgValidators"),fp=new u.OlP("NgAsyncValidators");function CV(n){return hp(n.value)?{required:!0}:null}function v1(n){return null}function MV(n){return null!=n}function RV(n){const e=(0,u.QGY)(n)?(0,wn.D)(n):n;if(vz&&!(0,u.CqO)(e)){let t="Expected async validator to return Promise or Observable.";throw"object"==typeof n&&(t+=" Are you using a synchronous validator where an async validator is expected?"),new u.vHH(-1101,t)}return e}function OV(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function xV(n,e){return e.map(t=>t(n))}function PV(n){return n.map(e=>function wz(n){return!n.validate}(e)?e:t=>e.validate(t))}function ex(n){return null!=n?function kV(n){if(!n)return null;const e=n.filter(MV);return 0==e.length?null:function(t){return OV(xV(t,e))}}(PV(n)):null}function tx(n){return null!=n?function FV(n){if(!n)return null;const e=n.filter(MV);return 0==e.length?null:function(t){return function pz(...n){const e=(0,ki.jO)(n),{args:t,keys:r}=hb(n),i=new Jn.y(s=>{const{length:l}=t;if(!l)return void s.complete();const h=new Array(l);let m=l,y=l;for(let D=0;D<l;D++){let S=!1;(0,Si.Xf)(t[D]).subscribe((0,yn.x)(s,R=>{S||(S=!0,y--),h[D]=R},()=>m--,void 0,()=>{(!m||!S)&&(y||s.next(r?tN(r,h):h),s.complete())}))}});return e?i.pipe(fb(e)):i}(xV(t,e).map(RV)).pipe((0,vt.U)(OV))}}(PV(n)):null}function LV(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function nx(n){return n?Array.isArray(n)?n:[n]:[]}function b1(n,e){return Array.isArray(n)?n.includes(e):n===e}function UV(n,e){const t=nx(e);return nx(n).forEach(i=>{b1(t,i)||t.push(i)}),t}function jV(n,e){return nx(e).filter(t=>!b1(n,t))}class GV{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=ex(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=tx(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class So extends GV{get formDirective(){return null}get path(){return null}}class pp extends GV{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class $V{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let HV=(()=>{class n extends $V{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(pp,2))},n.\u0275dir=u.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[u.qOj]}),n})(),zV=(()=>{class n extends $V{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(So,10))},n.\u0275dir=u.lG2({type:n,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(t,r){2&t&&u.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[u.qOj]}),n})();function WV(n,e){return n?`with name: '${e}'`:`at index: ${e}`}const sx=!1,yD="VALID",D1="INVALID",mv="PENDING",vD="DISABLED";function ox(n){return(E1(n)?n.validators:n)||null}function ax(n,e){return(E1(e)?e.asyncValidators:n)||null}function E1(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class YV{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===yD}get invalid(){return this.status===D1}get pending(){return this.status==mv}get disabled(){return this.status===vD}get enabled(){return this.status!==vD}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(UV(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(UV(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(jV(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(jV(e,this._rawAsyncValidators))}hasValidator(e){return b1(this._rawValidators,e)}hasAsyncValidator(e){return b1(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=mv,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=vD,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=yD,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===yD||this.status===mv)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?vD:yD}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=mv,this._hasOwnPendingAsyncValidator=!0;const t=RV(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new u.vpe,this.statusChanges=new u.vpe}_calculateStatus(){return this._allControlsDisabled()?vD:this.errors?D1:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(mv)?mv:this._anyControlsHaveStatus(D1)?D1:yD}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){E1(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Az(n){return Array.isArray(n)?ex(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function Nz(n){return Array.isArray(n)?tx(n):n||null}(this._rawAsyncValidators)}}class lx extends YV{constructor(e,t,r){super(ox(t),ax(r,t)),this.controls=e,this._initObservables(),this._setUpdateStrategy(t),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(e,t){return this.controls[e]?this.controls[e]:(this.controls[e]=t,t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange),t)}addControl(e,t,r={}){this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,t={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:t.emitEvent}),this._onCollectionChange()}setControl(e,t,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],t&&this.registerControl(e,t),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,t={}){(function KV(n,e,t){n._forEachChild((r,i)=>{if(void 0===t[i])throw new u.vHH(1002,sx?function Sz(n,e){return`Must supply a value for form control ${WV(n,e)}`}(e,i):"")})})(this,!0,e),Object.keys(e).forEach(r=>{(function qV(n,e,t){const r=n.controls;if(!(e?Object.keys(r):r).length)throw new u.vHH(1e3,sx?function Tz(n){return`\n    There are no form controls registered with this ${n?"group":"array"} yet. If you're using ngModel,\n    you may want to check next tick (e.g. use setTimeout).\n  `}(e):"");if(!r[t])throw new u.vHH(1001,sx?function Iz(n,e){return`Cannot find form control ${WV(n,e)}`}(e,t):"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t)}patchValue(e,t={}){null!=e&&(Object.keys(e).forEach(r=>{const i=this.controls[r];i&&i.patchValue(e[r],{onlySelf:!0,emitEvent:t.emitEvent})}),this.updateValueAndValidity(t))}reset(e={},t={}){this._forEachChild((r,i)=>{r.reset(e[i],{onlySelf:!0,emitEvent:t.emitEvent})}),this._updatePristine(t),this._updateTouched(t),this.updateValueAndValidity(t)}getRawValue(){return this._reduceChildren({},(e,t,r)=>(e[r]=t.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(t,r)=>!!r._syncPendingControls()||t);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(t=>{const r=this.controls[t];r&&e(r,t)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[t,r]of Object.entries(this.controls))if(this.contains(t)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(t,r,i)=>((r.enabled||this.disabled)&&(t[i]=r.value),t))}_reduceChildren(e,t){let r=e;return this._forEachChild((i,s)=>{r=t(r,i,s)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const _v=new u.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>C1}),C1="always";function bD(n,e,t=C1){ux(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function Oz(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&ZV(n,e)})}(n,e),function Pz(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function xz(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&ZV(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function Rz(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function S1(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function ux(n,e){const t=function BV(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(LV(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function VV(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(LV(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();S1(e._rawValidators,i),S1(e._rawAsyncValidators,i)}function ZV(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}const Vz={provide:So,useExisting:(0,u.Gpc)(()=>N1)},wD=(()=>Promise.resolve())();let N1=(()=>{class n extends So{constructor(t,r,i){super(),this.callSetDisabledState=i,this.submitted=!1,this._directives=new Set,this.ngSubmit=new u.vpe,this.form=new lx({},ex(t),tx(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(t){wD.then(()=>{const r=this._findContainer(t.path);t.control=r.registerControl(t.name,t.control),bD(t.control,t,this.callSetDisabledState),t.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(t)})}getControl(t){return this.form.get(t.path)}removeControl(t){wD.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name),this._directives.delete(t)})}addFormGroup(t){wD.then(()=>{const r=this._findContainer(t.path),i=new lx({});(function QV(n,e){ux(n,e)})(i,t),r.registerControl(t.name,i),i.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(t){wD.then(()=>{const r=this._findContainer(t.path);r&&r.removeControl(t.name)})}getFormGroup(t){return this.form.get(t.path)}updateModel(t,r){wD.then(()=>{this.form.get(t.path).setValue(r)})}setValue(t){this.control.setValue(t)}onSubmit(t){return this.submitted=!0,function JV(n,e){n._syncPendingControls(),e.forEach(t=>{const r=t.control;"submit"===r.updateOn&&r._pendingChange&&(t.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(t),"dialog"===t?.target?.method}onReset(){this.resetForm()}resetForm(t){this.form.reset(t),this.submitted=!1}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(t){return t.pop(),t.length?this.form.get(t):this.form}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Rs,10),u.Y36(fp,10),u.Y36(_v,8))},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(t,r){1&t&&u.NdJ("submit",function(s){return r.onSubmit(s)})("reset",function(){return r.onReset()})},inputs:{options:["ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[u._Bn([Vz]),u.qOj]}),n})();function XV(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function eU(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const tU=class extends YV{constructor(e=null,t,r){super(ox(t),ax(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),E1(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=eU(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){XV(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){XV(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){eU(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Gz={provide:pp,useExisting:(0,u.Gpc)(()=>fx)},iU=(()=>Promise.resolve())();let fx=(()=>{class n extends pp{constructor(t,r,i,s,l,h){super(),this._changeDetectorRef=l,this.callSetDisabledState=h,this.control=new tU,this._registered=!1,this.update=new u.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function hx(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(s=>{s.constructor===y1?t=s:function Lz(n){return Object.getPrototypeOf(n.constructor)===pm}(s)?r=s:i=s}),i||r||t||null}(0,s)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function dx(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){bD(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){iU.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,u.D6c)(r);iU.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function T1(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(So,9),u.Y36(Rs,10),u.Y36(fp,10),u.Y36($o,10),u.Y36(u.sBO,8),u.Y36(_v,8))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[u._Bn([Gz]),u.qOj,u.TTD]}),n})(),sU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),n})();const $z={provide:$o,useExisting:(0,u.Gpc)(()=>px),multi:!0};let px=(()=>{class n extends pm{writeValue(t){this.setProperty("value",t??"")}registerOnChange(t){this.onChange=r=>{t(""==r?null:parseFloat(r))}}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(t,r){1&t&&u.NdJ("input",function(s){return r.onChange(s.target.value)})("blur",function(){return r.onTouched()})},features:[u._Bn([$z]),u.qOj]}),n})(),oU=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();let gm=(()=>{class n{constructor(){this._validator=v1}ngOnChanges(t){if(this.inputName in t){const r=this.normalizeInput(t[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):v1,this._onChange&&this._onChange()}}validate(t){return this._validator(t)}registerOnValidatorChange(t){this._onChange=t}enabled(t){return null!=t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,features:[u.TTD]}),n})();const s5={provide:Rs,useExisting:(0,u.Gpc)(()=>bx),multi:!0};let bx=(()=>{class n extends gm{constructor(){super(...arguments),this.inputName="min",this.normalizeInput=t=>function mU(n){return"number"==typeof n?n:parseFloat(n)}(t),this.createValidator=t=>function DV(n){return e=>{if(hp(e.value)||hp(n))return null;const t=parseFloat(e.value);return!isNaN(t)&&t<n?{min:{min:n,actual:e.value}}:null}}(t)}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["input","type","number","min","","formControlName",""],["input","type","number","min","","formControl",""],["input","type","number","min","","ngModel",""]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("min",r._enabled?r.min:null)},inputs:{min:"min"},features:[u._Bn([s5]),u.qOj]}),n})();const o5={provide:Rs,useExisting:(0,u.Gpc)(()=>M1),multi:!0};let M1=(()=>{class n extends gm{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=u.D6c,this.createValidator=t=>CV}enabled(t){return t}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275dir=u.lG2({type:n,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("required",r._enabled?"":null)},inputs:{required:"required"},features:[u._Bn([o5]),u.qOj]}),n})(),h5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[oU]}),n})(),p5=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:_v,useValue:t.callSetDisabledState??C1}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[h5]}),n})();function g5(n,e){if(1&n){const t=u.EpF();u.ynx(0),u.TgZ(1,"label",7),u._uU(2),u.qZA(),u.TgZ(3,"input",8),u.NdJ("ngModelChange",function(i){const l=u.CHM(t).$implicit,h=u.oxw();return u.KtG(h.ujMeres[l]=i)}),u.qZA(),u.BQk()}if(2&n){const t=e.$implicit,r=u.oxw();u.xp6(1),u.Q6J("for",t),u.xp6(1),u.Oqu(t),u.xp6(1),u.Q6J("ngModel",r.ujMeres[t])("id",t)("name",t)}}const m5=[{path:"",component:NG},{path:"adatok",component:fz},{path:"ujadat",component:(()=>{class n{constructor(t,r){this.base=t,this.router=r,this.ujMeres={},this.oszlopok=["evszam","magyar","nemet","szlovak","egyeb"],this.currentDate=new Date,this.ujMeres.evszam=this.currentDate.getFullYear()}create(){console.log(this.ujMeres),this.base.fscreate(this.ujMeres),this.router.navigate(["/adatok"])}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(yV),u.Y36(T))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-uj-adat"]],decls:10,vars:1,consts:[[1,"card"],[1,"card-body"],[1,"card-title"],["ujAdat",""],[1,"form-group"],[4,"ngFor","ngForOf"],["type","submit",1,"btn","btn-primary",3,"click"],[3,"for"],["required","","min","0","type","number",1,"form-control",3,"ngModel","id","name","ngModelChange"]],template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),u._uU(3,"\xdaj m\xe9r\xe9s felvitele"),u.qZA(),u.TgZ(4,"form",null,3)(6,"div",4),u.YNc(7,g5,4,5,"ng-container",5),u.qZA(),u.TgZ(8,"button",6),u.NdJ("click",function(){return r.create()}),u._uU(9,"Submit"),u.qZA()()()()),2&t&&(u.xp6(7),u.Q6J("ngForOf",r.oszlopok))},dependencies:[Gr,sU,y1,px,HV,zV,M1,bx,fx,N1]}),n})()},{path:"**",redirectTo:""}];let _5=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[wk.forRoot(m5),wk]}),n})();var y5=L(1144);const v5=["addListener","removeListener"],b5=["addEventListener","removeEventListener"],w5=["on","off"];function Os(n,e,t,r){if((0,bo.m)(t)&&(r=t,t=void 0),r)return Os(n,e,t).pipe(fb(r));const[i,s]=function C5(n){return(0,bo.m)(n.addEventListener)&&(0,bo.m)(n.removeEventListener)}(n)?b5.map(l=>h=>n[l](e,h,t)):function D5(n){return(0,bo.m)(n.addListener)&&(0,bo.m)(n.removeListener)}(n)?v5.map(EU(n,e)):function E5(n){return(0,bo.m)(n.on)&&(0,bo.m)(n.off)}(n)?w5.map(EU(n,e)):[];if(!i&&(0,y5.z)(n))return(0,Mi.z)(l=>Os(l,e,t))((0,Si.Xf)(n));if(!i)throw new TypeError("Invalid event target");return new Jn.y(l=>{const h=(...m)=>l.next(1<m.length?m:m[0]);return i(h),()=>s(h)})}function EU(n,e){return t=>r=>n[t](e,r)}var T5=L(3532);function wx(n=0,e,t=ko.P){let r=-1;return null!=e&&((0,T5.K)(e)?t=e:r=e),new Jn.y(i=>{let s=function I5(n){return n instanceof Date&&!isNaN(n)}(n)?+n-t.now():n;s<0&&(s=0);let l=0;return t.schedule(function(){i.closed||(i.next(l++),0<=r?this.schedule(void 0,r):i.complete())},s)})}const{isArray:S5}=Array;function CU(n){return 1===n.length&&S5(n[0])?n[0]:n}const IU=new Jn.y(da.Z);function R1(...n){const e=(0,ki.jO)(n),t=CU(n);return t.length?new Jn.y(r=>{let i=t.map(()=>[]),s=t.map(()=>!1);r.add(()=>{i=s=null});for(let l=0;!r.closed&&l<t.length;l++)(0,Si.Xf)(t[l]).subscribe((0,yn.x)(r,h=>{if(i[l].push(h),i.every(m=>m.length)){const m=i.map(y=>y.shift());r.next(e?e(...m):m),i.some((y,D)=>!y.length&&s[D])&&r.complete()}},()=>{s[l]=!0,!i[l].length&&r.complete()}));return()=>{i=s=null}}):il.E}function ii(n){return(0,cr.e)((e,t)=>{(0,Si.Xf)(n).subscribe((0,yn.x)(t,()=>t.complete(),da.Z)),!t.closed&&e.subscribe(t)})}function FW(n,e){}function LW(n,e){if(1&n&&(u.TgZ(0,"button",3),u._uU(1),u.YNc(2,FW,0,0,"ng-template",4),u.qZA()),2&n){const t=e.$implicit;u.Q6J("ngbPanelToggle",t),u.xp6(1),u.hij(" ",t.title," "),u.xp6(1),u.Q6J("ngTemplateOutlet",null==t.titleTpl?null:t.titleTpl.templateRef)}}function BW(n,e){}function VW(n,e){}function UW(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",8),u.NdJ("ngbRef",function(i){u.CHM(t);const s=u.oxw().$implicit;return u.KtG(s.panelDiv=i)}),u.TgZ(1,"div",9),u.YNc(2,VW,0,0,"ng-template",4),u.qZA()()}if(2&n){const t=u.oxw().$implicit;u.s9C("id",t.id),u.uIk("aria-labelledby",t.id+"-header"),u.xp6(2),u.Q6J("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)}}Math,Math,Math;const jW=function(n,e){return{$implicit:n,opened:e}};function GW(n,e){if(1&n&&(u.TgZ(0,"div")(1,"div",5),u.YNc(2,BW,0,0,"ng-template",6),u.qZA(),u.YNc(3,UW,3,3,"div",7),u.qZA()),2&n){const t=e.$implicit,r=u.oxw(),i=u.MAs(1);u.Tol("accordion-item "+(t.cardClass||"")),u.xp6(1),u.Tol("accordion-header "+(t.type?"bg-"+t.type:r.type?"bg-"+r.type:"")),u.MGl("id","",t.id,"-header"),u.xp6(1),u.Q6J("ngTemplateOutlet",(null==t.headerTpl?null:t.headerTpl.templateRef)||i)("ngTemplateOutletContext",u.WLB(8,jW,t,t.isOpen)),u.xp6(1),u.Q6J("ngIf",!r.destroyOnHide||t.isOpen||t.transitionRunning)}}function $W(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",1),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.close())}),u.qZA()}}const F1=["*"];function HW(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",6),u.NdJ("click",function(){const s=u.CHM(t).$implicit,l=u.oxw();return l.focus(),u.KtG(l.select(s.id,l.NgbSlideEventSource.INDICATOR))}),u.qZA()}if(2&n){const t=e.$implicit,r=u.oxw();u.ekj("active",t.id===r.activeId),u.uIk("aria-labelledby","slide-"+t.id)("aria-controls","slide-"+t.id)("aria-selected",t.id===r.activeId)}}function zW(n,e){}function WW(n,e){if(1&n&&(u.TgZ(0,"div",7)(1,"span",8),u.SDv(2,9),u.qZA(),u.YNc(3,zW,0,0,"ng-template",10),u.qZA()),2&n){const t=e.$implicit,r=e.index,i=e.count;u.Q6J("id","slide-"+t.id),u.xp6(2),u.pQV(r+1)(i),u.QtT(2),u.xp6(1),u.Q6J("ngTemplateOutlet",t.tplRef)}}function qW(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",11),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.arrowLeft())}),u._UZ(1,"span",12),u.TgZ(2,"span",8),u.SDv(3,13),u.qZA()()}}function KW(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",14),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.arrowRight())}),u._UZ(1,"span",15),u.TgZ(2,"span",8),u.SDv(3,16),u.qZA()()}}const YW=["ngbDatepickerDayView",""],ZW=["month"],QW=["year"];function JW(n,e){if(1&n&&(u.TgZ(0,"option",5),u._uU(1),u.qZA()),2&n){const t=e.$implicit,r=u.oxw();u.Q6J("value",t),u.uIk("aria-label",r.i18n.getMonthFullName(t,r.date.year)),u.xp6(1),u.Oqu(r.i18n.getMonthShortName(t,r.date.year))}}function XW(n,e){if(1&n&&(u.TgZ(0,"option",5),u._uU(1),u.qZA()),2&n){const t=e.$implicit,r=u.oxw();u.Q6J("value",t),u.xp6(1),u.Oqu(r.i18n.getYearNumerals(t))}}function e8(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"ngb-datepicker-navigation-select",7),u.NdJ("select",function(i){u.CHM(t);const s=u.oxw();return u.KtG(s.select.emit(i))}),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("date",t.date)("disabled",t.disabled)("months",t.selectBoxes.months)("years",t.selectBoxes.years)}}function t8(n,e){1&n&&u._UZ(0,"div",0)}function n8(n,e){1&n&&u._UZ(0,"div",0)}function r8(n,e){if(1&n&&(u.YNc(0,t8,1,0,"div",9),u.TgZ(1,"div",10),u._uU(2),u.qZA(),u.YNc(3,n8,1,0,"div",9)),2&n){const t=e.$implicit,r=e.index,i=u.oxw(2);u.Q6J("ngIf",r>0),u.xp6(2),u.hij(" ",i.i18n.getMonthLabel(t.firstDate)," "),u.xp6(1),u.Q6J("ngIf",r!==i.months.length-1)}}function i8(n,e){if(1&n&&u.YNc(0,r8,4,3,"ng-template",8),2&n){const t=u.oxw();u.Q6J("ngForOf",t.months)}}function s8(n,e){if(1&n&&(u.TgZ(0,"div",5),u._uU(1),u.qZA()),2&n){const t=u.oxw(2);u.xp6(1),u.Oqu(t.i18n.getWeekLabel())}}function o8(n,e){if(1&n&&(u.TgZ(0,"div",6),u._uU(1),u.qZA()),2&n){const t=e.$implicit;u.xp6(1),u.Oqu(t)}}function a8(n,e){if(1&n&&(u.TgZ(0,"div",2),u.YNc(1,s8,2,1,"div",3),u.YNc(2,o8,2,1,"div",4),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.datepicker.showWeekNumbers),u.xp6(1),u.Q6J("ngForOf",t.viewModel.weekdays)}}function l8(n,e){if(1&n&&(u.TgZ(0,"div",11),u._uU(1),u.qZA()),2&n){const t=u.oxw(2).$implicit,r=u.oxw();u.xp6(1),u.Oqu(r.i18n.getWeekNumerals(t.number))}}function u8(n,e){}function c8(n,e){if(1&n&&u.YNc(0,u8,0,0,"ng-template",14),2&n){const t=u.oxw().$implicit,r=u.oxw(3);u.Q6J("ngTemplateOutlet",r.datepicker.dayTemplate)("ngTemplateOutletContext",t.context)}}function d8(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",12),u.NdJ("click",function(i){const l=u.CHM(t).$implicit;return u.oxw(3).doSelect(l),u.KtG(i.preventDefault())}),u.YNc(1,c8,1,2,"ng-template",13),u.qZA()}if(2&n){const t=e.$implicit;u.ekj("disabled",t.context.disabled)("hidden",t.hidden)("ngb-dp-today",t.context.today),u.Q6J("tabindex",t.tabindex),u.uIk("aria-label",t.ariaLabel),u.xp6(1),u.Q6J("ngIf",!t.hidden)}}function h8(n,e){if(1&n&&(u.TgZ(0,"div",8),u.YNc(1,l8,2,1,"div",9),u.YNc(2,d8,2,9,"div",10),u.qZA()),2&n){const t=u.oxw().$implicit,r=u.oxw();u.xp6(1),u.Q6J("ngIf",r.datepicker.showWeekNumbers),u.xp6(1),u.Q6J("ngForOf",t.days)}}function f8(n,e){1&n&&u.YNc(0,h8,3,2,"div",7),2&n&&u.Q6J("ngIf",!e.$implicit.collapsed)}const p8=["defaultDayTemplate"],g8=["content"];function m8(n,e){if(1&n&&u._UZ(0,"div",8),2&n){const r=e.currentMonth,i=e.selected,s=e.disabled,l=e.focused;u.Q6J("date",e.date)("currentMonth",r)("selected",i)("disabled",s)("focused",l)}}function _8(n,e){if(1&n&&(u.TgZ(0,"div",13),u._uU(1),u.qZA()),2&n){const t=u.oxw().$implicit,r=u.oxw(2);u.xp6(1),u.hij(" ",r.i18n.getMonthLabel(t.firstDate)," ")}}function y8(n,e){if(1&n&&(u.TgZ(0,"div",10),u.YNc(1,_8,2,1,"div",11),u._UZ(2,"ngb-datepicker-month",12),u.qZA()),2&n){const t=e.$implicit,r=u.oxw(2);u.xp6(1),u.Q6J("ngIf","none"===r.navigation||r.displayMonths>1&&"select"===r.navigation),u.xp6(1),u.Q6J("month",t.firstDate)}}function v8(n,e){if(1&n&&u.YNc(0,y8,3,2,"div",9),2&n){const t=u.oxw();u.Q6J("ngForOf",t.model.months)}}function b8(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"ngb-datepicker-navigation",14),u.NdJ("navigate",function(i){u.CHM(t);const s=u.oxw();return u.KtG(s.onNavigateEvent(i))})("select",function(i){u.CHM(t);const s=u.oxw();return u.KtG(s.onNavigateDateSelect(i))}),u.qZA()}if(2&n){const t=u.oxw();u.Q6J("date",t.model.firstDate)("months",t.model.months)("disabled",t.model.disabled)("showSelect","select"===t.model.navigation)("prevDisabled",t.model.prevDisabled)("nextDisabled",t.model.nextDisabled)("selectBoxes",t.model.selectBoxes)}}function w8(n,e){}function D8(n,e){}const HU=function(n){return{$implicit:n}},E8=["dialog"],C8=["ngbNavOutlet",""];function T8(n,e){}function I8(n,e){if(1&n&&(u.TgZ(0,"div",2),u.YNc(1,T8,0,0,"ng-template",3),u.qZA()),2&n){const t=u.oxw().$implicit,r=u.oxw();u.Q6J("item",t)("nav",r.nav)("role",r.paneRole),u.xp6(1),u.Q6J("ngTemplateOutlet",(null==t.contentTpl?null:t.contentTpl.templateRef)||null)("ngTemplateOutletContext",u.VKq(5,HU,t.active||r.isPanelTransitioning(t)))}}function S8(n,e){if(1&n&&u.YNc(0,I8,2,7,"div",1),2&n){const t=e.$implicit,r=u.oxw();u.Q6J("ngIf",t.isPanelInDom()||r.isPanelTransitioning(t))}}function A8(n,e){1&n&&(u.TgZ(0,"span",9),u.SDv(1,10),u.qZA())}function N8(n,e){1&n&&(u.TgZ(0,"span",9),u.SDv(1,11),u.qZA())}function M8(n,e){1&n&&(u.TgZ(0,"span",9),u.SDv(1,12),u.qZA())}function R8(n,e){1&n&&(u.TgZ(0,"span",9),u.SDv(1,13),u.qZA())}function O8(n,e){1&n&&u._uU(0,"...")}function x8(n,e){1&n&&u._uU(0),2&n&&u.Oqu(e.$implicit)}function P8(n,e){}const k8=function(n){return{disabled:!0,currentPage:n}};function F8(n,e){if(1&n&&(u.TgZ(0,"a",18),u.YNc(1,P8,0,0,"ng-template",8),u.qZA()),2&n){const t=u.oxw(2).$implicit,r=u.oxw(),i=u.MAs(9);u.xp6(1),u.Q6J("ngTemplateOutlet",(null==r.tplEllipsis?null:r.tplEllipsis.templateRef)||i)("ngTemplateOutletContext",u.VKq(2,k8,t))}}function L8(n,e){}const B8=function(n,e,t){return{disabled:n,$implicit:e,currentPage:t}};function V8(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"a",19),u.NdJ("click",function(i){u.CHM(t);const s=u.oxw().$implicit;return u.oxw(2).selectPage(s),u.KtG(i.preventDefault())}),u.YNc(1,L8,0,0,"ng-template",8),u.qZA()}if(2&n){const t=u.oxw().$implicit,r=u.oxw(),i=r.disabled,s=r.$implicit,l=u.oxw(),h=u.MAs(11);u.uIk("tabindex",i?"-1":null)("aria-disabled",i?"true":null),u.xp6(1),u.Q6J("ngTemplateOutlet",(null==l.tplNumber?null:l.tplNumber.templateRef)||h)("ngTemplateOutletContext",u.kEZ(4,B8,i,t,s))}}function U8(n,e){if(1&n&&(u.TgZ(0,"li",15),u.YNc(1,F8,2,4,"a",16),u.YNc(2,V8,2,8,"a",17),u.qZA()),2&n){const t=e.$implicit,r=u.oxw(),i=r.$implicit,s=r.disabled,l=u.oxw();u.ekj("active",t===i)("disabled",l.isEllipsis(t)||s),u.uIk("aria-current",t===i?"page":null),u.xp6(1),u.Q6J("ngIf",l.isEllipsis(t)),u.xp6(1),u.Q6J("ngIf",!l.isEllipsis(t))}}function j8(n,e){1&n&&u.YNc(0,U8,3,7,"li",14),2&n&&u.Q6J("ngForOf",e.pages)}function G8(n,e){}const Ox=function(n,e){return{disabled:n,currentPage:e}};function $8(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li",15)(1,"a",20),u.NdJ("click",function(i){return u.CHM(t),u.oxw().selectPage(1),u.KtG(i.preventDefault())}),u.YNc(2,G8,0,0,"ng-template",8),u.qZA()()}if(2&n){const t=u.oxw(),r=u.MAs(1);u.ekj("disabled",t.previousDisabled()),u.xp6(1),u.uIk("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),u.xp6(1),u.Q6J("ngTemplateOutlet",(null==t.tplFirst?null:t.tplFirst.templateRef)||r)("ngTemplateOutletContext",u.WLB(6,Ox,t.previousDisabled(),t.page))}}function H8(n,e){}const z8=function(n){return{disabled:n}};function W8(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li",15)(1,"a",21),u.NdJ("click",function(i){u.CHM(t);const s=u.oxw();return s.selectPage(s.page-1),u.KtG(i.preventDefault())}),u.YNc(2,H8,0,0,"ng-template",8),u.qZA()()}if(2&n){const t=u.oxw(),r=u.MAs(3);u.ekj("disabled",t.previousDisabled()),u.xp6(1),u.uIk("tabindex",t.previousDisabled()?"-1":null)("aria-disabled",t.previousDisabled()?"true":null),u.xp6(1),u.Q6J("ngTemplateOutlet",(null==t.tplPrevious?null:t.tplPrevious.templateRef)||r)("ngTemplateOutletContext",u.VKq(6,z8,t.previousDisabled()))}}function q8(n,e){}function K8(n,e){}function Y8(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li",15)(1,"a",22),u.NdJ("click",function(i){u.CHM(t);const s=u.oxw();return s.selectPage(s.page+1),u.KtG(i.preventDefault())}),u.YNc(2,K8,0,0,"ng-template",8),u.qZA()()}if(2&n){const t=u.oxw(),r=u.MAs(5);u.ekj("disabled",t.nextDisabled()),u.xp6(1),u.uIk("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),u.xp6(1),u.Q6J("ngTemplateOutlet",(null==t.tplNext?null:t.tplNext.templateRef)||r)("ngTemplateOutletContext",u.WLB(6,Ox,t.nextDisabled(),t.page))}}function Z8(n,e){}function Q8(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"li",15)(1,"a",23),u.NdJ("click",function(i){u.CHM(t);const s=u.oxw();return s.selectPage(s.pageCount),u.KtG(i.preventDefault())}),u.YNc(2,Z8,0,0,"ng-template",8),u.qZA()()}if(2&n){const t=u.oxw(),r=u.MAs(7);u.ekj("disabled",t.nextDisabled()),u.xp6(1),u.uIk("tabindex",t.nextDisabled()?"-1":null)("aria-disabled",t.nextDisabled()?"true":null),u.xp6(1),u.Q6J("ngTemplateOutlet",(null==t.tplLast?null:t.tplLast.templateRef)||r)("ngTemplateOutletContext",u.WLB(6,Ox,t.nextDisabled(),t.page))}}const J8=function(n,e,t){return{$implicit:n,pages:e,disabled:t}};function t9(n,e){if(1&n&&(u.TgZ(0,"span"),u.SDv(1,1),u.ALo(2,"percent"),u.qZA()),2&n){const t=u.oxw();u.xp6(2),u.pQV(u.lcZ(2,1,t.getValue()/t.max)),u.QtT(1)}}function n9(n,e){1&n&&u._uU(0),2&n&&u.Oqu(100===e.fill?"\u2605":"\u2606")}function r9(n,e){}function i9(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"span",2),u._uU(1),u.qZA(),u.TgZ(2,"span",3),u.NdJ("mouseenter",function(){const s=u.CHM(t).index,l=u.oxw();return u.KtG(l.enter(s+1))})("click",function(){const s=u.CHM(t).index,l=u.oxw();return u.KtG(l.handleClick(s+1))}),u.YNc(3,r9,0,0,"ng-template",4),u.qZA()}if(2&n){const t=e.index,r=u.oxw(),i=u.MAs(1);u.xp6(1),u.hij("(",t<r.nextRate?"*":" ",")"),u.xp6(1),u.Udp("cursor",r.isInteractive()?"pointer":"default"),u.xp6(1),u.Q6J("ngTemplateOutlet",r.starTemplate||r.starTemplateFromContent||i)("ngTemplateOutletContext",r.contexts[t])}}function s9(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",11),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.changeHour(i.hourStep))}),u._UZ(1,"span",12),u.TgZ(2,"span",13),u.SDv(3,14),u.qZA()()}if(2&n){const t=u.oxw();u.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),u.Q6J("disabled",t.disabled)}}function o9(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",11),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.changeHour(-i.hourStep))}),u._UZ(1,"span",15),u.TgZ(2,"span",13),u.SDv(3,16),u.qZA()()}if(2&n){const t=u.oxw();u.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),u.Q6J("disabled",t.disabled)}}function a9(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",11),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.changeMinute(i.minuteStep))}),u._UZ(1,"span",12),u.TgZ(2,"span",13),u.SDv(3,17),u.qZA()()}if(2&n){const t=u.oxw();u.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),u.Q6J("disabled",t.disabled)}}function l9(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",11),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.changeMinute(-i.minuteStep))}),u._UZ(1,"span",15),u.TgZ(2,"span",13),u.SDv(3,18),u.qZA()()}if(2&n){const t=u.oxw();u.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),u.Q6J("disabled",t.disabled)}}function u9(n,e){1&n&&(u.TgZ(0,"div",5),u._uU(1,":"),u.qZA())}function c9(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",11),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.changeSecond(i.secondStep))}),u._UZ(1,"span",12),u.TgZ(2,"span",13),u.SDv(3,21),u.qZA()()}if(2&n){const t=u.oxw(2);u.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),u.Q6J("disabled",t.disabled)}}function d9(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"button",11),u.NdJ("click",function(){u.CHM(t);const i=u.oxw(2);return u.KtG(i.changeSecond(-i.secondStep))}),u._UZ(1,"span",15),u.TgZ(2,"span",13),u.SDv(3,22),u.qZA()()}if(2&n){const t=u.oxw(2);u.ekj("btn-sm",t.isSmallSize)("btn-lg",t.isLargeSize)("disabled",t.disabled),u.Q6J("disabled",t.disabled)}}function h9(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",19),u.YNc(1,c9,4,7,"button",3),u.TgZ(2,"input",20),u.NdJ("change",function(i){u.CHM(t);const s=u.oxw();return u.KtG(s.updateSecond(i.target.value))})("blur",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.handleBlur())})("input",function(i){u.CHM(t);const s=u.oxw();return u.KtG(s.formatInput(i.target))})("keydown.ArrowUp",function(i){u.CHM(t);const s=u.oxw();return s.changeSecond(s.secondStep),u.KtG(i.preventDefault())})("keydown.ArrowDown",function(i){u.CHM(t);const s=u.oxw();return s.changeSecond(-s.secondStep),u.KtG(i.preventDefault())}),u.qZA(),u.YNc(3,d9,4,7,"button",3),u.qZA()}if(2&n){const t=u.oxw();u.xp6(1),u.Q6J("ngIf",t.spinners),u.xp6(1),u.ekj("form-control-sm",t.isSmallSize)("form-control-lg",t.isLargeSize),u.Q6J("value",t.formatMinSec(null==t.model?null:t.model.second))("readOnly",t.readonlyInputs)("disabled",t.disabled),u.xp6(1),u.Q6J("ngIf",t.spinners)}}function f9(n,e){1&n&&u._UZ(0,"div",5)}function p9(n,e){if(1&n&&(u.ynx(0),u.SDv(1,27),u.BQk()),2&n){const t=u.oxw(2);u.xp6(1),u.pQV(t.i18n.getAfternoonPeriod()),u.QtT(1)}}function g9(n,e){if(1&n&&u.SDv(0,28),2&n){const t=u.oxw(2);u.pQV(t.i18n.getMorningPeriod()),u.QtT(0)}}function m9(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",23)(1,"button",24),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.toggleMeridian())}),u.YNc(2,p9,2,1,"ng-container",25),u.YNc(3,g9,1,1,"ng-template",null,26,u.W1O),u.qZA()()}if(2&n){const t=u.MAs(4),r=u.oxw();u.xp6(1),u.ekj("btn-sm",r.isSmallSize)("btn-lg",r.isLargeSize)("disabled",r.disabled),u.Q6J("disabled",r.disabled),u.xp6(1),u.Q6J("ngIf",r.model&&r.model.hour>=12)("ngIfElse",t)}}function _9(n,e){if(1&n&&(u.TgZ(0,"strong",3),u._uU(1),u.qZA()),2&n){const t=u.oxw();u.xp6(1),u.Oqu(t.header)}}function y9(n,e){}function v9(n,e){if(1&n){const t=u.EpF();u.TgZ(0,"div",4),u.YNc(1,y9,0,0,"ng-template",5),u.TgZ(2,"button",6),u.NdJ("click",function(){u.CHM(t);const i=u.oxw();return u.KtG(i.hide())}),u.qZA()()}if(2&n){const t=u.oxw(),r=u.MAs(1);u.xp6(1),u.Q6J("ngTemplateOutlet",t.contentHeaderTpl||r)}}function b9(n,e){if(1&n&&(u.TgZ(0,"span"),u._uU(1),u.qZA()),2&n){const t=u.oxw().$implicit,r=u.oxw();u.Tol(r.highlightClass),u.xp6(1),u.Oqu(t)}}function w9(n,e){if(1&n&&u._uU(0),2&n){const t=u.oxw().$implicit;u.Oqu(t)}}function D9(n,e){if(1&n&&(u.YNc(0,b9,2,3,"span",1),u.YNc(1,w9,1,1,"ng-template",null,2,u.W1O)),2&n){const t=e.odd,r=u.MAs(2);u.Q6J("ngIf",t)("ngIfElse",r)}}function xs(n){return parseInt(`${n}`,10)}function zU(n){return null!=n?`${n}`:""}function L1(n,e,t=0){return Math.max(Math.min(n,e),t)}function Dv(n){return"string"==typeof n}function si(n){return!isNaN(xs(n))}function Qr(n){return"number"==typeof n&&isFinite(n)&&Math.floor(n)===n}function ym(n){return null!=n}function Ev(n){return si(n)?`0${n}`.slice(-2):""}function qU(n,e){return n&&n.className&&n.className.split&&n.className.split(/\s+/).indexOf(e)>=0}function Cv(n){return(n||document.body).getBoundingClientRect()}function KU(n){return n.normalize("NFD").replace(/[\u0300-\u036f]/g,"")}const YU={animation:!0,transitionTimerDelayMs:5},N9=()=>{},{transitionTimerDelayMs:M9}=YU,AD=new Map,Hi=(n,e,t,r)=>{let i=r.context||{};const s=AD.get(e);if(s)switch(r.runningTransition){case"continue":return il.E;case"stop":n.run(()=>s.transition$.complete()),i=Object.assign(s.context,i),AD.delete(e)}const l=t(e,r.animation,i)||N9;if(!r.animation||"none"===window.getComputedStyle(e).transitionProperty)return n.run(()=>l()),ct(void 0).pipe(function S9(n){return e=>new Jn.y(t=>e.subscribe({next:l=>n.run(()=>t.next(l)),error:l=>n.run(()=>t.error(l)),complete:()=>n.run(()=>t.complete())}))}(n));const h=new or.x,m=new or.x,y=h.pipe(function N5(...n){return e=>Ig(e,ct(...n))}(!0));AD.set(e,{transition$:h,complete:()=>{m.next(),m.complete()},context:i});const D=function A9(n){const{transitionDelay:e,transitionDuration:t}=window.getComputedStyle(n);return 1e3*(parseFloat(e)+parseFloat(t))}(e);return n.runOutsideAngular(()=>{const S=Os(e,"transitionend").pipe(ii(y),hr(({target:P})=>P===e));(function TU(...n){return 1===(n=CU(n)).length?(0,Si.Xf)(n[0]):new Jn.y(function A5(n){return e=>{let t=[];for(let r=0;t&&!e.closed&&r<n.length;r++)t.push((0,Si.Xf)(n[r]).subscribe((0,yn.x)(e,i=>{if(t){for(let s=0;s<t.length;s++)s!==r&&t[s].unsubscribe();t=null}e.next(i)})))}}(n))})(wx(D+M9).pipe(ii(y)),S,m).pipe(ii(y)).subscribe(()=>{AD.delete(e),n.run(()=>{l(),h.next(),h.complete()})})}),h.asObservable()},xx=(n,e,t)=>{let{direction:r,maxSize:i,dimension:s}=t;const{classList:l}=n;function h(){l.add("collapse"),"show"===r?l.add("show"):l.remove("show")}if(e)return i||(i=function O9(n,e){if(typeof navigator>"u")return"0px";const{classList:t}=n,r=t.contains("show");r||t.add("show"),n.style[e]="";const i=n.getBoundingClientRect()[e]+"px";return r||t.remove("show"),i}(n,s),t.maxSize=i,n.style[s]="show"!==r?i:"0px",l.remove("collapse"),l.remove("collapsing"),l.remove("show"),Cv(n),l.add("collapsing")),n.style[s]="show"===r?i:"0px",()=>{h(),l.remove("collapsing"),n.style[s]=""};h()};let vm=(()=>{class n{constructor(){this.animation=YU.animation}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),ZU=(()=>{class n{constructor(t){this._ngbConfig=t,this.closeOthers=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(vm))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),x9=0,Px=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","ngbPanelHeader",""]],standalone:!0}),n})(),QU=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","ngbPanelTitle",""]],standalone:!0}),n})(),JU=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","ngbPanelContent",""]],standalone:!0}),n})(),kx=(()=>{class n{constructor(){this.disabled=!1,this.id="ngb-panel-"+x9++,this.isOpen=!1,this.initClassDone=!1,this.transitionRunning=!1,this.shown=new u.vpe,this.hidden=new u.vpe}ngAfterContentChecked(){this.titleTpl=this.titleTpls.first,this.headerTpl=this.headerTpls.first,this.contentTpl=this.contentTpls.first}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["ngb-panel"]],contentQueries:function(t,r,i){if(1&t&&(u.Suo(i,QU,4),u.Suo(i,Px,4),u.Suo(i,JU,4)),2&t){let s;u.iGM(s=u.CRH())&&(r.titleTpls=s),u.iGM(s=u.CRH())&&(r.headerTpls=s),u.iGM(s=u.CRH())&&(r.contentTpls=s)}},inputs:{disabled:"disabled",id:"id",title:"title",type:"type",cardClass:"cardClass"},outputs:{shown:"shown",hidden:"hidden"},standalone:!0}),n})(),P9=(()=>{class n{constructor(t){this._El=t,this.ngbRef=new u.vpe}ngOnInit(){this.ngbRef.emit(this._El.nativeElement)}ngOnDestroy(){this.ngbRef.emit(null)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngbRef",""]],outputs:{ngbRef:"ngbRef"},standalone:!0}),n})(),XU=(()=>{class n{constructor(t,r){this.accordion=t,this.panel=r}set ngbPanelToggle(t){t&&(this.panel=t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36((0,u.Gpc)(()=>Fx)),u.Y36(kx,9))},n.\u0275dir=u.lG2({type:n,selectors:[["button","ngbPanelToggle",""]],hostAttrs:["type","button"],hostVars:5,hostBindings:function(t,r){1&t&&u.NdJ("click",function(){return r.accordion.toggle(r.panel.id)}),2&t&&(u.Ikx("disabled",r.panel.disabled),u.uIk("aria-expanded",r.panel.isOpen)("aria-controls",r.panel.id),u.ekj("collapsed",!r.panel.isOpen))},inputs:{ngbPanelToggle:"ngbPanelToggle"},standalone:!0}),n})(),Fx=(()=>{class n{constructor(t,r,i){this._ngZone=r,this._changeDetector=i,this.activeIds=[],this.destroyOnHide=!0,this.panelChange=new u.vpe,this.shown=new u.vpe,this.hidden=new u.vpe,this.animation=t.animation,this.type=t.type,this.closeOtherPanels=t.closeOthers}isExpanded(t){return this.activeIds.indexOf(t)>-1}expand(t){this._changeOpenState(this._findPanelById(t),!0)}expandAll(){this.closeOtherPanels?0===this.activeIds.length&&this.panels.length&&this._changeOpenState(this.panels.first,!0):this.panels.forEach(t=>this._changeOpenState(t,!0))}collapse(t){this._changeOpenState(this._findPanelById(t),!1)}collapseAll(){this.panels.forEach(t=>{this._changeOpenState(t,!1)})}toggle(t){const r=this._findPanelById(t);r&&this._changeOpenState(r,!r.isOpen)}ngAfterContentChecked(){Dv(this.activeIds)&&(this.activeIds=this.activeIds.split(/\s*,\s*/)),this.panels.forEach(t=>{t.isOpen=!t.disabled&&this.activeIds.indexOf(t.id)>-1}),this.activeIds.length>1&&this.closeOtherPanels&&(this._closeOthers(this.activeIds[0],!1),this._updateActiveIds()),this._ngZone.onStable.pipe(Zr(1)).subscribe(()=>{this.panels.forEach(t=>{const r=t.panelDiv;r?t.initClassDone||(t.initClassDone=!0,Hi(this._ngZone,r,xx,{animation:!1,runningTransition:"continue",context:{direction:t.isOpen?"show":"hide",dimension:"height"}})):t.initClassDone=!1})})}_changeOpenState(t,r){if(null!=t&&!t.disabled&&t.isOpen!==r){let i=!1;this.panelChange.emit({panelId:t.id,nextState:r,preventDefault:()=>{i=!0}}),i||(t.isOpen=r,t.transitionRunning=!0,r&&this.closeOtherPanels&&this._closeOthers(t.id),this._updateActiveIds(),this._runTransitions(this.animation))}}_closeOthers(t,r=!0){this.panels.forEach(i=>{i.id!==t&&i.isOpen&&(i.isOpen=!1,i.transitionRunning=r)})}_findPanelById(t){return this.panels.find(r=>r.id===t)||null}_updateActiveIds(){this.activeIds=this.panels.filter(t=>t.isOpen&&!t.disabled).map(t=>t.id)}_runTransitions(t){this._changeDetector.detectChanges(),this.panels.forEach(r=>{r.transitionRunning&&Hi(this._ngZone,r.panelDiv,xx,{animation:t,runningTransition:"stop",context:{direction:r.isOpen?"show":"hide",dimension:"height"}}).subscribe(()=>{r.transitionRunning=!1;const{id:s}=r;r.isOpen?(r.shown.emit(),this.shown.emit(s)):(r.hidden.emit(),this.hidden.emit(s))})})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(ZU),u.Y36(u.R0b),u.Y36(u.sBO))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-accordion"]],contentQueries:function(t,r,i){if(1&t&&u.Suo(i,kx,4),2&t){let s;u.iGM(s=u.CRH())&&(r.panels=s)}},hostAttrs:["role","tablist",1,"accordion"],hostVars:1,hostBindings:function(t,r){2&t&&u.uIk("aria-multiselectable",!r.closeOtherPanels)},inputs:{animation:"animation",activeIds:"activeIds",closeOtherPanels:["closeOthers","closeOtherPanels"],destroyOnHide:"destroyOnHide",type:"type"},outputs:{panelChange:"panelChange",shown:"shown",hidden:"hidden"},exportAs:["ngbAccordion"],standalone:!0,features:[u.jDz],decls:3,vars:1,consts:[["ngbPanelHeader",""],["t",""],["ngFor","",3,"ngForOf"],[1,"accordion-button",3,"ngbPanelToggle"],[3,"ngTemplateOutlet"],["role","tab",3,"id"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["role","tabpanel",3,"id","ngbRef",4,"ngIf"],["role","tabpanel",3,"id","ngbRef"],[1,"accordion-body"]],template:function(t,r){1&t&&(u.YNc(0,LW,3,3,"ng-template",0,1,u.W1O),u.YNc(2,GW,4,11,"ng-template",2)),2&t&&(u.xp6(2),u.Q6J("ngForOf",r.panels))},dependencies:[Gr,jn,XU,P9,Px,pr],encapsulation:2}),n})(),k9=(()=>{class n{constructor(t){this._ngbConfig=t,this.horizontal=!1}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(vm))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Lx=(()=>{class n{constructor(t,r,i){this._element=t,this._zone=i,this._afterInit=!1,this._isCollapsed=!1,this.ngbCollapseChange=new u.vpe,this.shown=new u.vpe,this.hidden=new u.vpe,this.animation=r.animation,this.horizontal=r.horizontal}set collapsed(t){this._isCollapsed!==t&&(this._isCollapsed=t,this._afterInit&&this._runTransitionWithEvents(t,this.animation))}ngOnInit(){this._runTransition(this._isCollapsed,!1),this._afterInit=!0}toggle(t=this._isCollapsed){this.collapsed=!t,this.ngbCollapseChange.next(this._isCollapsed)}_runTransition(t,r){return Hi(this._zone,this._element.nativeElement,xx,{animation:r,runningTransition:"stop",context:{direction:t?"hide":"show",dimension:this.horizontal?"width":"height"}})}_runTransitionWithEvents(t,r){this._runTransition(t,r).subscribe(()=>{t?this.hidden.emit():this.shown.emit()})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(k9),u.Y36(u.R0b))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngbCollapse",""]],hostVars:2,hostBindings:function(t,r){2&t&&u.ekj("collapse-horizontal",r.horizontal)},inputs:{animation:"animation",collapsed:["ngbCollapse","collapsed"],horizontal:"horizontal"},outputs:{ngbCollapseChange:"ngbCollapseChange",shown:"shown",hidden:"hidden"},exportAs:["ngbCollapse"],standalone:!0}),n})(),nj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Fx]}),n})();const U9=({classList:n})=>{n.remove("show")};let j9=(()=>{class n{constructor(t){this._ngbConfig=t,this.dismissible=!0,this.type="warning"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(vm))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),G9=(()=>{class n{constructor(t,r,i,s){this._renderer=r,this._element=i,this._zone=s,this.closed=new u.vpe,this.dismissible=t.dismissible,this.type=t.type,this.animation=t.animation}close(){const t=Hi(this._zone,this._element.nativeElement,U9,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>this.closed.emit()),t}ngOnChanges(t){const r=t.type;r&&!r.firstChange&&(this._renderer.removeClass(this._element.nativeElement,`alert-${r.previousValue}`),this._renderer.addClass(this._element.nativeElement,`alert-${r.currentValue}`))}ngOnInit(){this._renderer.addClass(this._element.nativeElement,`alert-${this.type}`)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(j9),u.Y36(u.Qsj),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-alert"]],hostAttrs:["role","alert",1,"alert","show"],hostVars:4,hostBindings:function(t,r){2&t&&u.ekj("fade",r.animation)("alert-dismissible",r.dismissible)},inputs:{animation:"animation",dismissible:"dismissible",type:"type"},outputs:{closed:"closed"},exportAs:["ngbAlert"],standalone:!0,features:[u.TTD,u.jDz],ngContentSelectors:F1,decls:2,vars:1,consts:function(){let e;return e=$localize`:@@ngb.alert.close:Close`,[["type","button","class","btn-close","aria-label",e,3,"click",4,"ngIf"],["type","button","aria-label",e,1,"btn-close",3,"click"]]},template:function(t,r){1&t&&(u.F$t(),u.Hsn(0),u.YNc(1,$W,1,0,"button",0)),2&t&&(u.xp6(1),u.Q6J("ngIf",r.dismissible))},dependencies:[pr],styles:["ngb-alert{display:block}\n"],encapsulation:2,changeDetection:0}),n})(),rj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[G9]}),n})();var mp=(()=>(function(n){n.START="start",n.END="end"}(mp||(mp={})),mp))();const ij=({classList:n})=>n.contains("carousel-item-start")||n.contains("carousel-item-end"),ND=n=>{n.remove("carousel-item-start"),n.remove("carousel-item-end")},B1=n=>{ND(n),n.remove("carousel-item-prev"),n.remove("carousel-item-next")},$9=(n,e,{direction:t})=>{const{classList:r}=n;return e?(ij(n)?ND(r):(r.add("carousel-item-"+(t===mp.START?"next":"prev")),Cv(n),r.add("carousel-item-"+t)),()=>{B1(r),r.add("active")}):(ND(r),B1(r),void r.add("active"))},H9=(n,e,{direction:t})=>{const{classList:r}=n;return e?(ij(n)?ND(r):r.add("carousel-item-"+t),()=>{B1(r),r.remove("active")}):(ND(r),B1(r),void r.remove("active"))};let z9=(()=>{class n{constructor(t){this._ngbConfig=t,this.interval=5e3,this.wrap=!0,this.keyboard=!0,this.pauseOnHover=!0,this.pauseOnFocus=!0,this.showNavigationArrows=!0,this.showNavigationIndicators=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(vm))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),W9=0,q9=(()=>{class n{constructor(t){this.tplRef=t,this.id="ngb-slide-"+W9++,this.slid=new u.vpe}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","ngbSlide",""]],inputs:{id:"id"},outputs:{slid:"slid"},standalone:!0}),n})(),K9=(()=>{class n{constructor(t,r,i,s,l){this._platformId=r,this._ngZone=i,this._cd=s,this._container=l,this.NgbSlideEventSource=wm,this._destroy$=new or.x,this._interval$=new mi(0),this._mouseHover$=new mi(!1),this._focused$=new mi(!1),this._pauseOnHover$=new mi(!1),this._pauseOnFocus$=new mi(!1),this._pause$=new mi(!1),this._wrap$=new mi(!1),this.slide=new u.vpe,this.slid=new u.vpe,this._transitionIds=null,this.animation=t.animation,this.interval=t.interval,this.wrap=t.wrap,this.keyboard=t.keyboard,this.pauseOnHover=t.pauseOnHover,this.pauseOnFocus=t.pauseOnFocus,this.showNavigationArrows=t.showNavigationArrows,this.showNavigationIndicators=t.showNavigationIndicators}set interval(t){this._interval$.next(t)}get interval(){return this._interval$.value}set wrap(t){this._wrap$.next(t)}get wrap(){return this._wrap$.value}set pauseOnHover(t){this._pauseOnHover$.next(t)}get pauseOnHover(){return this._pauseOnHover$.value}set pauseOnFocus(t){this._pauseOnFocus$.next(t)}get pauseOnFocus(){return this._pauseOnFocus$.value}set mouseHover(t){this._mouseHover$.next(t)}get mouseHover(){return this._mouseHover$.value}set focused(t){this._focused$.next(t)}get focused(){return this._focused$.value}arrowLeft(){this.focus(),this.prev(wm.ARROW_LEFT)}arrowRight(){this.focus(),this.next(wm.ARROW_RIGHT)}ngAfterContentInit(){(function fh(n){return n===bp})(this._platformId)&&this._ngZone.runOutsideAngular(()=>{const t=hy([this.slide.pipe((0,vt.U)(r=>r.current),Mc(this.activeId)),this._wrap$,this.slides.changes.pipe(Mc(null))]).pipe((0,vt.U)(([r,i])=>{const s=this.slides.toArray(),l=this._getSlideIdxById(r);return i?s.length>1:l<s.length-1}),Fo());hy([this._pause$,this._pauseOnHover$,this._mouseHover$,this._pauseOnFocus$,this._focused$,this._interval$,t]).pipe((0,vt.U)(([r,i,s,l,h,m,y])=>r||i&&s||l&&h||!y?0:m),Fo(),Vn(r=>r>0?wx(r,r):IU),ii(this._destroy$)).subscribe(()=>this._ngZone.run(()=>this.next(wm.TIMER)))}),this.slides.changes.pipe(ii(this._destroy$)).subscribe(()=>{this._transitionIds?.forEach(t=>(n=>{AD.get(n)?.complete()})(this._getSlideElement(t))),this._transitionIds=null,this._cd.markForCheck(),this._ngZone.onStable.pipe(Zr(1)).subscribe(()=>{for(const{id:t}of this.slides){const r=this._getSlideElement(t);t===this.activeId?r.classList.add("active"):r.classList.remove("active")}})})}ngAfterContentChecked(){let t=this._getSlideById(this.activeId);this.activeId=t?t.id:this.slides.length?this.slides.first.id:""}ngAfterViewInit(){if(this.activeId){const t=this._getSlideElement(this.activeId);t&&t.classList.add("active")}}ngOnDestroy(){this._destroy$.next()}select(t,r){this._cycleToSelected(t,this._getSlideEventDirection(this.activeId,t),r)}prev(t){this._cycleToSelected(this._getPrevSlide(this.activeId),mp.END,t)}next(t){this._cycleToSelected(this._getNextSlide(this.activeId),mp.START,t)}pause(){this._pause$.next(!0)}cycle(){this._pause$.next(!1)}focus(){this._container.nativeElement.focus()}_cycleToSelected(t,r,i){const s=this._transitionIds;if(s&&(s[0]!==t||s[1]!==this.activeId))return;let l=this._getSlideById(t);if(l&&l.id!==this.activeId){this._transitionIds=[this.activeId,t],this.slide.emit({prev:this.activeId,current:l.id,direction:r,paused:this._pause$.value,source:i});const h={animation:this.animation,runningTransition:"stop",context:{direction:r}},m=[],y=this._getSlideById(this.activeId);if(y){const P=Hi(this._ngZone,this._getSlideElement(y.id),H9,h);P.subscribe(()=>{y.slid.emit({isShown:!1,direction:r,source:i})}),m.push(P)}const D=this.activeId;this.activeId=l.id;const S=this._getSlideById(this.activeId),R=Hi(this._ngZone,this._getSlideElement(l.id),$9,h);R.subscribe(()=>{S?.slid.emit({isShown:!0,direction:r,source:i})}),m.push(R),R1(...m).pipe(Zr(1)).subscribe(()=>{this._transitionIds=null,this.slid.emit({prev:D,current:l.id,direction:r,paused:this._pause$.value,source:i})})}this._cd.markForCheck()}_getSlideEventDirection(t,r){return this._getSlideIdxById(t)>this._getSlideIdxById(r)?mp.END:mp.START}_getSlideById(t){return this.slides.find(r=>r.id===t)||null}_getSlideIdxById(t){const r=this._getSlideById(t);return null!=r?this.slides.toArray().indexOf(r):-1}_getNextSlide(t){const r=this.slides.toArray(),i=this._getSlideIdxById(t);return i===r.length-1?this.wrap?r[0].id:r[r.length-1].id:r[i+1].id}_getPrevSlide(t){const r=this.slides.toArray(),i=this._getSlideIdxById(t);return 0===i?this.wrap?r[r.length-1].id:r[0].id:r[i-1].id}_getSlideElement(t){return this._container.nativeElement.querySelector(`#slide-${t}`)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(z9),u.Y36(u.Lbi),u.Y36(u.R0b),u.Y36(u.sBO),u.Y36(u.SBq))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-carousel"]],contentQueries:function(t,r,i){if(1&t&&u.Suo(i,q9,4),2&t){let s;u.iGM(s=u.CRH())&&(r.slides=s)}},hostAttrs:["tabIndex","0",1,"carousel","slide"],hostVars:3,hostBindings:function(t,r){1&t&&u.NdJ("keydown.arrowLeft",function(){return r.keyboard&&r.arrowLeft()})("keydown.arrowRight",function(){return r.keyboard&&r.arrowRight()})("mouseenter",function(){return r.mouseHover=!0})("mouseleave",function(){return r.mouseHover=!1})("focusin",function(){return r.focused=!0})("focusout",function(){return r.focused=!1}),2&t&&(u.uIk("aria-activedescendant","slide-"+r.activeId),u.Udp("display","block"))},inputs:{animation:"animation",activeId:"activeId",interval:"interval",wrap:"wrap",keyboard:"keyboard",pauseOnHover:"pauseOnHover",pauseOnFocus:"pauseOnFocus",showNavigationArrows:"showNavigationArrows",showNavigationIndicators:"showNavigationIndicators"},outputs:{slide:"slide",slid:"slid"},exportAs:["ngbCarousel"],standalone:!0,features:[u.jDz],decls:6,vars:6,consts:function(){let e,t,r;return e=$localize`:Currently selected slide number read by screen reader@@ngb.carousel.slide-number: Slide ${"\ufffd0\ufffd"}:INTERPOLATION: of ${"\ufffd1\ufffd"}:INTERPOLATION_1: `,t=$localize`:@@ngb.carousel.previous:Previous`,r=$localize`:@@ngb.carousel.next:Next`,[["role","tablist",1,"carousel-indicators"],["type","button","data-bs-target","","role","tab",3,"active","click",4,"ngFor","ngForOf"],[1,"carousel-inner"],["class","carousel-item","role","tabpanel",3,"id",4,"ngFor","ngForOf"],["class","carousel-control-prev","type","button",3,"click",4,"ngIf"],["class","carousel-control-next","type","button",3,"click",4,"ngIf"],["type","button","data-bs-target","","role","tab",3,"click"],["role","tabpanel",1,"carousel-item",3,"id"],[1,"visually-hidden"],e,[3,"ngTemplateOutlet"],["type","button",1,"carousel-control-prev",3,"click"],["aria-hidden","true",1,"carousel-control-prev-icon"],t,["type","button",1,"carousel-control-next",3,"click"],["aria-hidden","true",1,"carousel-control-next-icon"],r]},template:function(t,r){1&t&&(u.TgZ(0,"div",0),u.YNc(1,HW,1,5,"button",1),u.qZA(),u.TgZ(2,"div",2),u.YNc(3,WW,4,4,"div",3),u.qZA(),u.YNc(4,qW,4,0,"button",4),u.YNc(5,KW,4,0,"button",5)),2&t&&(u.ekj("visually-hidden",!r.showNavigationIndicators),u.xp6(1),u.Q6J("ngForOf",r.slides),u.xp6(2),u.Q6J("ngForOf",r.slides),u.xp6(1),u.Q6J("ngIf",r.showNavigationArrows),u.xp6(1),u.Q6J("ngIf",r.showNavigationArrows))},dependencies:[Gr,jn,pr],encapsulation:2,changeDetection:0}),n})();var wm=(()=>(function(n){n.TIMER="timer",n.ARROW_LEFT="arrowLeft",n.ARROW_RIGHT="arrowRight",n.INDICATOR="indicator"}(wm||(wm={})),wm))();let sj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[K9]}),n})(),oj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();class zi{constructor(e,t,r){this.year=Qr(e)?e:null,this.month=Qr(t)?t:null,this.day=Qr(r)?r:null}static from(e){return e instanceof zi?e:e?new zi(e.year,e.month,e.day):null}equals(e){return null!=e&&this.year===e.year&&this.month===e.month&&this.day===e.day}before(e){return!!e&&(this.year===e.year?this.month===e.month?this.day!==e.day&&this.day<e.day:this.month<e.month:this.year<e.year)}after(e){return!!e&&(this.year===e.year?this.month===e.month?this.day!==e.day&&this.day>e.day:this.month>e.month:this.year>e.year)}}function Tv(n,e){return!function Y9(n,e){return!n&&!e||!!n&&!!e&&n.equals(e)}(n,e)}function aj(n,e){return!(!n&&!e||n&&e&&n.year===e.year&&n.month===e.month)}function V1(n,e,t){return n&&e&&n.before(e)?e:n&&t&&n.after(t)?t:n||null}function Vx(n,e){const{minDate:t,maxDate:r,disabled:i,markDisabled:s}=e;return!(null==n||i||s&&s(n,{year:n.year,month:n.month})||t&&n.before(t)||r&&n.after(r))}function lj(n){return new zi(n.getFullYear(),n.getMonth()+1,n.getDate())}function U1(n){const e=new Date(n.year,n.month-1,n.day,12);return isNaN(e.getTime())||e.setFullYear(n.year),e}let j1=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function i7(){return new s7}()},providedIn:"root"}),n})(),s7=(()=>{class n extends j1{getDaysPerWeek(){return 7}getMonths(){return[1,2,3,4,5,6,7,8,9,10,11,12]}getWeeksPerMonth(){return 6}getNext(t,r="d",i=1){let s=U1(t),l=!0,h=s.getMonth();switch(r){case"y":s.setFullYear(s.getFullYear()+i);break;case"m":h+=i,s.setMonth(h),h%=12,h<0&&(h+=12);break;case"d":s.setDate(s.getDate()+i),l=!1;break;default:return t}return l&&s.getMonth()!==h&&s.setDate(0),lj(s)}getPrev(t,r="d",i=1){return this.getNext(t,r,-i)}getWeekday(t){let i=U1(t).getDay();return 0===i?7:i}getWeekNumber(t,r){7===r&&(r=0);const l=U1(t[(11-r)%7]);l.setDate(l.getDate()+4-(l.getDay()||7));const h=l.getTime();return l.setMonth(0),l.setDate(1),Math.floor(Math.round((h-l.getTime())/864e5)/7)+1}getToday(){return lj(new Date)}isValid(t){if(!(t&&Qr(t.year)&&Qr(t.month)&&Qr(t.day)&&0!==t.year))return!1;const r=U1(t);return!isNaN(r.getTime())&&r.getFullYear()===t.year&&r.getMonth()+1===t.month&&r.getDate()===t.day}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Dm=(()=>{class n{getMonthLabel(t){return`${this.getMonthFullName(t.month,t.year)} ${this.getYearNumerals(t.year)}`}getDayNumerals(t){return`${t.day}`}getWeekNumerals(t){return`${t}`}getYearNumerals(t){return`${t}`}getWeekLabel(){return""}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function o7(n){return new a7(n)}(u.LFG(u.soG)),r},providedIn:"root"}),n})(),a7=(()=>{class n extends Dm{constructor(t){super(),this._locale=t,this._monthsShort=Oe(t,Mt.Standalone,it.Abbreviated),this._monthsFull=Oe(t,Mt.Standalone,it.Wide)}getWeekdayLabel(t,r){const i=Ae(this._locale,Mt.Standalone,void 0===r?it.Short:r);return i.map((l,h)=>i[(h+1)%7])[t-1]||""}getMonthShortName(t){return this._monthsShort[t-1]||""}getMonthFullName(t){return this._monthsFull[t-1]||""}getDayAriaLabel(t){return Ur(new Date(t.year,t.month-1,t.day),"fullDate",this._locale)}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.soG))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Ux=(()=>{class n{constructor(t,r){this._calendar=t,this._i18n=r,this._VALIDATORS={dayTemplateData:i=>{if(this._state.dayTemplateData!==i)return{dayTemplateData:i}},displayMonths:i=>{if(Qr(i=xs(i))&&i>0&&this._state.displayMonths!==i)return{displayMonths:i}},disabled:i=>{if(this._state.disabled!==i)return{disabled:i}},firstDayOfWeek:i=>{if(Qr(i=xs(i))&&i>=0&&this._state.firstDayOfWeek!==i)return{firstDayOfWeek:i}},focusVisible:i=>{if(this._state.focusVisible!==i&&!this._state.disabled)return{focusVisible:i}},markDisabled:i=>{if(this._state.markDisabled!==i)return{markDisabled:i}},maxDate:i=>{const s=this.toValidDate(i,null);if(Tv(this._state.maxDate,s))return{maxDate:s}},minDate:i=>{const s=this.toValidDate(i,null);if(Tv(this._state.minDate,s))return{minDate:s}},navigation:i=>{if(this._state.navigation!==i)return{navigation:i}},outsideDays:i=>{if(this._state.outsideDays!==i)return{outsideDays:i}},weekdays:i=>{const s=!0===i||!1===i?it.Short:i,l=!0!==i&&!1!==i||i;if(this._state.weekdayWidth!==s||this._state.weekdaysVisible!==l)return{weekdayWidth:s,weekdaysVisible:l}}},this._model$=new or.x,this._dateSelect$=new or.x,this._state={dayTemplateData:null,markDisabled:null,maxDate:null,minDate:null,disabled:!1,displayMonths:1,firstDate:null,firstDayOfWeek:1,lastDate:null,focusDate:null,focusVisible:!1,months:[],navigation:"select",outsideDays:"visible",prevDisabled:!1,nextDisabled:!1,selectedDate:null,selectBoxes:{years:[],months:[]},weekdayWidth:it.Short,weekdaysVisible:!0}}get model$(){return this._model$.pipe(hr(t=>t.months.length>0))}get dateSelect$(){return this._dateSelect$.pipe(hr(t=>null!==t))}set(t){let r=Object.keys(t).map(i=>this._VALIDATORS[i](t[i])).reduce((i,s)=>({...i,...s}),{});Object.keys(r).length>0&&this._nextState(r)}focus(t){const r=this.toValidDate(t,null);null!=r&&!this._state.disabled&&Tv(this._state.focusDate,r)&&this._nextState({focusDate:t})}focusSelect(){Vx(this._state.focusDate,this._state)&&this.select(this._state.focusDate,{emitEvent:!0})}open(t){const r=this.toValidDate(t,this._calendar.getToday());null!=r&&!this._state.disabled&&(!this._state.firstDate||aj(this._state.firstDate,r))&&this._nextState({firstDate:r})}select(t,r={}){const i=this.toValidDate(t,null);null!=i&&!this._state.disabled&&(Tv(this._state.selectedDate,i)&&this._nextState({selectedDate:i}),r.emitEvent&&Vx(i,this._state)&&this._dateSelect$.next(i))}toValidDate(t,r){const i=zi.from(t);return void 0===r&&(r=this._calendar.getToday()),this._calendar.isValid(i)?i:r}getMonth(t){for(let r of this._state.months)if(t.month===r.number&&t.year===r.year)return r;throw new Error(`month ${t.month} of year ${t.year} not found`)}_nextState(t){const r=this._updateState(t);this._patchContexts(r),this._state=r,this._model$.next(this._state)}_patchContexts(t){const{months:r,displayMonths:i,selectedDate:s,focusDate:l,focusVisible:h,disabled:m,outsideDays:y}=t;t.months.forEach(D=>{D.weeks.forEach(S=>{S.days.forEach(R=>{l&&(R.context.focused=l.equals(R.date)&&h),R.tabindex=!m&&l&&R.date.equals(l)&&l.month===D.number?0:-1,!0===m&&(R.context.disabled=!0),void 0!==s&&(R.context.selected=null!==s&&s.equals(R.date)),D.number!==R.date.month&&(R.hidden="hidden"===y||"collapsed"===y||i>1&&R.date.after(r[0].firstDate)&&R.date.before(r[i-1].lastDate))})})})}_updateState(t){const r=Object.assign({},this._state,t);let i=r.firstDate;if(("minDate"in t||"maxDate"in t)&&(function Z9(n,e){if(e&&n&&e.before(n))throw new Error(`'maxDate' ${e} should be greater than 'minDate' ${n}`)}(r.minDate,r.maxDate),r.focusDate=V1(r.focusDate,r.minDate,r.maxDate),r.firstDate=V1(r.firstDate,r.minDate,r.maxDate),i=r.focusDate),"disabled"in t&&(r.focusVisible=!1),"selectedDate"in t&&0===this._state.months.length&&(i=r.selectedDate),"focusVisible"in t||"focusDate"in t&&(r.focusDate=V1(r.focusDate,r.minDate,r.maxDate),i=r.focusDate,0!==r.months.length&&r.focusDate&&!r.focusDate.before(r.firstDate)&&!r.focusDate.after(r.lastDate)))return r;if("firstDate"in t&&(r.firstDate=V1(r.firstDate,r.minDate,r.maxDate),i=r.firstDate),i){const l=function t7(n,e,t,r,i){const{displayMonths:s,months:l}=t,h=l.splice(0,l.length);return Array.from({length:s},(y,D)=>{const S=Object.assign(n.getNext(e,"m",D),{day:1});if(l[D]=null,!i){const R=h.findIndex(P=>P.firstDate.equals(S));-1!==R&&(l[D]=h.splice(R,1)[0])}return S}).forEach((y,D)=>{null===l[D]&&(l[D]=function n7(n,e,t,r,i={}){const{dayTemplateData:s,minDate:l,maxDate:h,firstDayOfWeek:m,markDisabled:y,outsideDays:D,weekdayWidth:S,weekdaysVisible:R}=t,P=n.getToday();i.firstDate=null,i.lastDate=null,i.number=e.month,i.year=e.year,i.weeks=i.weeks||[],i.weekdays=i.weekdays||[],e=function r7(n,e,t){const r=n.getDaysPerWeek(),i=new zi(e.year,e.month,1),s=n.getWeekday(i)%r;return n.getPrev(i,"d",(r+s-t)%r)}(n,e,m),R||(i.weekdays.length=0);for(let $=0;$<n.getWeeksPerMonth();$++){let Z=i.weeks[$];Z||(Z=i.weeks[$]={number:0,days:[],collapsed:!0});const oe=Z.days;for(let Ue=0;Ue<n.getDaysPerWeek();Ue++){0===$&&R&&(i.weekdays[Ue]=r.getWeekdayLabel(n.getWeekday(e),S));const Ge=new zi(e.year,e.month,e.day),tt=n.getNext(Ge),Xe=r.getDayAriaLabel(Ge);let ht=!!(l&&Ge.before(l)||h&&Ge.after(h));!ht&&y&&(ht=y(Ge,{month:i.number,year:i.year}));let It=Ge.equals(P),hn=s?s(Ge,{month:i.number,year:i.year}):void 0;null===i.firstDate&&Ge.month===i.number&&(i.firstDate=Ge),Ge.month===i.number&&tt.month!==i.number&&(i.lastDate=Ge);let kn=oe[Ue];kn||(kn=oe[Ue]={}),kn.date=Ge,kn.context=Object.assign(kn.context||{},{$implicit:Ge,date:Ge,data:hn,currentMonth:i.number,currentYear:i.year,disabled:ht,focused:!1,selected:!1,today:It}),kn.tabindex=-1,kn.ariaLabel=Xe,kn.hidden=!1,e=tt}Z.number=n.getWeekNumber(oe.map(Ue=>Ue.date),m),Z.collapsed="collapsed"===D&&oe[0].date.month!==i.number&&oe[oe.length-1].date.month!==i.number}return i}(n,y,t,r,h.shift()||{}))}),l}(this._calendar,i,r,this._i18n,"dayTemplateData"in t||"firstDayOfWeek"in t||"markDisabled"in t||"minDate"in t||"maxDate"in t||"disabled"in t||"outsideDays"in t||"weekdaysVisible"in t);r.months=l,r.firstDate=l[0].firstDate,r.lastDate=l[l.length-1].lastDate,"selectedDate"in t&&!Vx(r.selectedDate,r)&&(r.selectedDate=null),"firstDate"in t&&(!r.focusDate||r.focusDate.before(r.firstDate)||r.focusDate.after(r.lastDate))&&(r.focusDate=i);const h=!this._state.firstDate||this._state.firstDate.year!==r.firstDate.year,m=!this._state.firstDate||this._state.firstDate.month!==r.firstDate.month;"select"===r.navigation?(("minDate"in t||"maxDate"in t||0===r.selectBoxes.years.length||h)&&(r.selectBoxes.years=function J9(n,e,t){if(!n)return[];const r=e?Math.max(e.year,n.year-500):n.year-10,s=(t?Math.min(t.year,n.year+500):n.year+10)-r+1,l=Array(s);for(let h=0;h<s;h++)l[h]=r+h;return l}(r.firstDate,r.minDate,r.maxDate)),("minDate"in t||"maxDate"in t||0===r.selectBoxes.months.length||h)&&(r.selectBoxes.months=function Q9(n,e,t,r){if(!e)return[];let i=n.getMonths(e.year);if(t&&e.year===t.year){const s=i.findIndex(l=>l===t.month);i=i.slice(s)}if(r&&e.year===r.year){const s=i.findIndex(l=>l===r.month);i=i.slice(0,s+1)}return i}(this._calendar,r.firstDate,r.minDate,r.maxDate))):r.selectBoxes={years:[],months:[]},("arrows"===r.navigation||"select"===r.navigation)&&(m||h||"minDate"in t||"maxDate"in t||"disabled"in t)&&(r.prevDisabled=r.disabled||function e7(n,e,t){const r=Object.assign(n.getPrev(e,"m"),{day:1});return null!=t&&(r.year===t.year&&r.month<t.month||r.year<t.year&&1===t.month)}(this._calendar,r.firstDate,r.minDate),r.nextDisabled=r.disabled||function X9(n,e,t){const r=Object.assign(n.getNext(e,"m"),{day:1});return null!=t&&r.after(t)}(this._calendar,r.lastDate,r.maxDate))}return r}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(j1),u.LFG(Dm))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();var Iv=(()=>(function(n){n[n.PREV=0]="PREV",n[n.NEXT=1]="NEXT"}(Iv||(Iv={})),Iv))();let l7=(()=>{class n{constructor(t){this.i18n=t}isMuted(){return!this.selected&&(this.date.month!==this.currentMonth||this.disabled)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Dm))},n.\u0275cmp=u.Xpm({type:n,selectors:[["","ngbDatepickerDayView",""]],hostAttrs:[1,"btn-light"],hostVars:10,hostBindings:function(t,r){2&t&&u.ekj("bg-primary",r.selected)("text-white",r.selected)("text-muted",r.isMuted())("outside",r.isMuted())("active",r.focused)},inputs:{currentMonth:"currentMonth",date:"date",disabled:"disabled",focused:"focused",selected:"selected"},standalone:!0,features:[u.jDz],attrs:YW,decls:1,vars:1,template:function(t,r){1&t&&u._uU(0),2&t&&u.Oqu(r.i18n.getDayNumerals(r.date))},styles:["[ngbDatepickerDayView]{text-align:center;width:2rem;height:2rem;line-height:2rem;border-radius:.25rem;background:transparent}[ngbDatepickerDayView]:hover:not(.bg-primary),[ngbDatepickerDayView].active:not(.bg-primary){background-color:var(--bs-btn-bg);outline:1px solid var(--bs-border-color)}[ngbDatepickerDayView].outside{opacity:.5}\n"],encapsulation:2,changeDetection:0}),n})(),u7=(()=>{class n{constructor(t,r){this.i18n=t,this._renderer=r,this.select=new u.vpe,this._month=-1,this._year=-1}changeMonth(t){this.select.emit(new zi(this.date.year,xs(t),1))}changeYear(t){this.select.emit(new zi(xs(t),this.date.month,1))}ngAfterViewChecked(){this.date&&(this.date.month!==this._month&&(this._month=this.date.month,this._renderer.setProperty(this.monthSelect.nativeElement,"value",this._month)),this.date.year!==this._year&&(this._year=this.date.year,this._renderer.setProperty(this.yearSelect.nativeElement,"value",this._year)))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Dm),u.Y36(u.Qsj))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-datepicker-navigation-select"]],viewQuery:function(t,r){if(1&t&&(u.Gf(ZW,7,u.SBq),u.Gf(QW,7,u.SBq)),2&t){let i;u.iGM(i=u.CRH())&&(r.monthSelect=i.first),u.iGM(i=u.CRH())&&(r.yearSelect=i.first)}},inputs:{date:"date",disabled:"disabled",months:"months",years:"years"},outputs:{select:"select"},standalone:!0,features:[u.jDz],decls:6,vars:4,consts:function(){let e,t,r,i;return e=$localize`:@@ngb.datepicker.select-month:Select month`,t=$localize`:@@ngb.datepicker.select-month:Select month`,r=$localize`:@@ngb.datepicker.select-year:Select year`,i=$localize`:@@ngb.datepicker.select-year:Select year`,[["aria-label",e,"title",t,1,"form-select",3,"disabled","change"],["month",""],[3,"value",4,"ngFor","ngForOf"],["aria-label",r,"title",i,1,"form-select",3,"disabled","change"],["year",""],[3,"value"]]},template:function(t,r){1&t&&(u.TgZ(0,"select",0,1),u.NdJ("change",function(s){return r.changeMonth(s.target.value)}),u.YNc(2,JW,2,3,"option",2),u.qZA(),u.TgZ(3,"select",3,4),u.NdJ("change",function(s){return r.changeYear(s.target.value)}),u.YNc(5,XW,2,2,"option",2),u.qZA()),2&t&&(u.Q6J("disabled",r.disabled),u.xp6(2),u.Q6J("ngForOf",r.months),u.xp6(1),u.Q6J("disabled",r.disabled),u.xp6(2),u.Q6J("ngForOf",r.years))},dependencies:[Gr],styles:["ngb-datepicker-navigation-select>.form-select{flex:1 1 auto;padding:0 .5rem;font-size:.875rem;height:1.85rem}ngb-datepicker-navigation-select>.form-select:focus{z-index:1}ngb-datepicker-navigation-select>.form-select::-ms-value{background-color:transparent!important}\n"],encapsulation:2,changeDetection:0}),n})(),c7=(()=>{class n{constructor(t){this.i18n=t,this.navigation=Iv,this.months=[],this.navigate=new u.vpe,this.select=new u.vpe}onClickPrev(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.PREV)}onClickNext(t){t.currentTarget.focus(),this.navigate.emit(this.navigation.NEXT)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Dm))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-datepicker-navigation"]],inputs:{date:"date",disabled:"disabled",months:"months",showSelect:"showSelect",prevDisabled:"prevDisabled",nextDisabled:"nextDisabled",selectBoxes:"selectBoxes"},outputs:{navigate:"navigate",select:"select"},standalone:!0,features:[u.jDz],decls:8,vars:4,consts:function(){let e,t,r,i;return e=$localize`:@@ngb.datepicker.previous-month:Previous month`,t=$localize`:@@ngb.datepicker.previous-month:Previous month`,r=$localize`:@@ngb.datepicker.next-month:Next month`,i=$localize`:@@ngb.datepicker.next-month:Next month`,[[1,"ngb-dp-arrow"],["type","button","aria-label",e,"title",t,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-chevron"],["class","ngb-dp-navigation-select",3,"date","disabled","months","years","select",4,"ngIf"],[4,"ngIf"],[1,"ngb-dp-arrow","right"],["type","button","aria-label",r,"title",i,1,"btn","btn-link","ngb-dp-arrow-btn",3,"disabled","click"],[1,"ngb-dp-navigation-select",3,"date","disabled","months","years","select"],["ngFor","",3,"ngForOf"],["class","ngb-dp-arrow",4,"ngIf"],[1,"ngb-dp-month-name"]]},template:function(t,r){1&t&&(u.TgZ(0,"div",0)(1,"button",1),u.NdJ("click",function(s){return r.onClickPrev(s)}),u._UZ(2,"span",2),u.qZA()(),u.YNc(3,e8,1,4,"ngb-datepicker-navigation-select",3),u.YNc(4,i8,1,1,null,4),u.TgZ(5,"div",5)(6,"button",6),u.NdJ("click",function(s){return r.onClickNext(s)}),u._UZ(7,"span",2),u.qZA()()),2&t&&(u.xp6(1),u.Q6J("disabled",r.prevDisabled),u.xp6(2),u.Q6J("ngIf",r.showSelect),u.xp6(1),u.Q6J("ngIf",!r.showSelect),u.xp6(2),u.Q6J("disabled",r.nextDisabled))},dependencies:[pr,Gr,u7],styles:["ngb-datepicker-navigation{display:flex;align-items:center}.ngb-dp-navigation-chevron{border-style:solid;border-width:.2em .2em 0 0;display:inline-block;width:.75em;height:.75em;margin-left:.25em;margin-right:.15em;transform:rotate(-135deg)}.ngb-dp-arrow{display:flex;flex:1 1 auto;padding-right:0;padding-left:0;margin:0;width:2rem;height:2rem}.ngb-dp-arrow.right{justify-content:flex-end}.ngb-dp-arrow.right .ngb-dp-navigation-chevron{transform:rotate(45deg);margin-left:.15em;margin-right:.25em}.ngb-dp-arrow-btn{padding:0 .25rem;margin:0 .5rem;border:none;background-color:transparent;z-index:1}.ngb-dp-arrow-btn:focus{outline-width:1px;outline-style:auto}@media all and (-ms-high-contrast: none),(-ms-high-contrast: active){.ngb-dp-arrow-btn:focus{outline-style:solid}}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center}.ngb-dp-navigation-select{display:flex;flex:1 1 9rem}\n"],encapsulation:2,changeDetection:0}),n})();var Nn=(()=>(function(n){n[n.Tab=9]="Tab",n[n.Enter=13]="Enter",n[n.Escape=27]="Escape",n[n.Space=32]="Space",n[n.PageUp=33]="PageUp",n[n.PageDown=34]="PageDown",n[n.End=35]="End",n[n.Home=36]="Home",n[n.ArrowLeft=37]="ArrowLeft",n[n.ArrowUp=38]="ArrowUp",n[n.ArrowRight=39]="ArrowRight",n[n.ArrowDown=40]="ArrowDown"}(Nn||(Nn={})),Nn))();let d7=(()=>{class n{processKey(t,r){const{state:i,calendar:s}=r;switch(t.which){case Nn.PageUp:r.focusDate(s.getPrev(i.focusedDate,t.shiftKey?"y":"m",1));break;case Nn.PageDown:r.focusDate(s.getNext(i.focusedDate,t.shiftKey?"y":"m",1));break;case Nn.End:r.focusDate(t.shiftKey?i.maxDate:i.lastDate);break;case Nn.Home:r.focusDate(t.shiftKey?i.minDate:i.firstDate);break;case Nn.ArrowLeft:r.focusDate(s.getPrev(i.focusedDate,"d",1));break;case Nn.ArrowUp:r.focusDate(s.getPrev(i.focusedDate,"d",s.getDaysPerWeek()));break;case Nn.ArrowRight:r.focusDate(s.getNext(i.focusedDate,"d",1));break;case Nn.ArrowDown:r.focusDate(s.getNext(i.focusedDate,"d",s.getDaysPerWeek()));break;case Nn.Enter:case Nn.Space:r.focusSelect();break;default:return}t.preventDefault(),t.stopPropagation()}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),jx=(()=>{class n{constructor(){this.displayMonths=1,this.firstDayOfWeek=1,this.navigation="select",this.outsideDays="visible",this.showWeekNumbers=!1,this.weekdays=it.Short}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Gx=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function h7(){return new f7}()},providedIn:"root"}),n})(),f7=(()=>{class n extends Gx{fromModel(t){return t&&Qr(t.year)&&Qr(t.month)&&Qr(t.day)?{year:t.year,month:t.month,day:t.day}:null}toModel(t){return t&&Qr(t.year)&&Qr(t.month)&&Qr(t.day)?{year:t.year,month:t.month,day:t.day}:null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),uj=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","ngbDatepickerContent",""]],standalone:!0}),n})(),$x=(()=>{class n{constructor(t,r,i,s){this.i18n=t,this.datepicker=r,this._keyboardService=i,this._service=s}set month(t){this.viewModel=this._service.getMonth(t)}onKeyDown(t){this._keyboardService.processKey(t,this.datepicker)}doSelect(t){!t.context.disabled&&!t.hidden&&this.datepicker.onDateSelect(t.date)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Dm),u.Y36((0,u.Gpc)(()=>G1)),u.Y36(d7),u.Y36(Ux))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-datepicker-month"]],hostAttrs:["role","grid"],hostBindings:function(t,r){1&t&&u.NdJ("keydown",function(s){return r.onKeyDown(s)})},inputs:{month:"month"},standalone:!0,features:[u.jDz],decls:2,vars:2,consts:[["class","ngb-dp-week ngb-dp-weekdays","role","row",4,"ngIf"],["ngFor","",3,"ngForOf"],["role","row",1,"ngb-dp-week","ngb-dp-weekdays"],["class","ngb-dp-weekday ngb-dp-showweek small",4,"ngIf"],["class","ngb-dp-weekday small","role","columnheader",4,"ngFor","ngForOf"],[1,"ngb-dp-weekday","ngb-dp-showweek","small"],["role","columnheader",1,"ngb-dp-weekday","small"],["class","ngb-dp-week","role","row",4,"ngIf"],["role","row",1,"ngb-dp-week"],["class","ngb-dp-week-number small text-muted",4,"ngIf"],["class","ngb-dp-day","role","gridcell",3,"disabled","tabindex","hidden","ngb-dp-today","click",4,"ngFor","ngForOf"],[1,"ngb-dp-week-number","small","text-muted"],["role","gridcell",1,"ngb-dp-day",3,"tabindex","click"],[3,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&(u.YNc(0,a8,3,2,"div",0),u.YNc(1,f8,1,1,"ng-template",1)),2&t&&(u.Q6J("ngIf",r.viewModel.weekdays.length>0),u.xp6(1),u.Q6J("ngForOf",r.viewModel.weeks))},dependencies:[pr,Gr,jn],styles:['ngb-datepicker-month{display:block}.ngb-dp-weekday,.ngb-dp-week-number{line-height:2rem;text-align:center;font-style:italic}.ngb-dp-weekday{color:var(--bs-info)}.ngb-dp-week{border-radius:.25rem;display:flex}.ngb-dp-weekdays{border-bottom:1px solid var(--bs-border-color);border-radius:0;background-color:var(--bs-light)}.ngb-dp-day,.ngb-dp-weekday,.ngb-dp-week-number{width:2rem;height:2rem}.ngb-dp-day{cursor:pointer}.ngb-dp-day.disabled,.ngb-dp-day.hidden{cursor:default;pointer-events:none}.ngb-dp-day[tabindex="0"]{z-index:1}\n'],encapsulation:2}),n})(),G1=(()=>{class n{constructor(t,r,i,s,l,h,m,y){this._service=t,this._calendar=r,this._i18n=i,this._elementRef=h,this._ngbDateAdapter=m,this._ngZone=y,this.injector=(0,u.f3M)(u.zs3),this._controlValue=null,this._destroyed$=new or.x,this._publicState={},this.navigate=new u.vpe,this.dateSelect=new u.vpe,this.onChange=D=>{},this.onTouched=()=>{},["contentTemplate","dayTemplate","dayTemplateData","displayMonths","firstDayOfWeek","footerTemplate","markDisabled","minDate","maxDate","navigation","outsideDays","showWeekNumbers","startDate","weekdays"].forEach(D=>this[D]=s[D]),t.dateSelect$.pipe(ii(this._destroyed$)).subscribe(D=>{this.dateSelect.emit(D)}),t.model$.pipe(ii(this._destroyed$)).subscribe(D=>{const S=D.firstDate,R=this.model?this.model.firstDate:null;this._publicState={maxDate:D.maxDate,minDate:D.minDate,firstDate:D.firstDate,lastDate:D.lastDate,focusedDate:D.focusDate,months:D.months.map(Ue=>Ue.firstDate)};let P=!1;if(!S.equals(R)&&(this.navigate.emit({current:R?{year:R.year,month:R.month}:null,next:{year:S.year,month:S.month},preventDefault:()=>P=!0}),P&&null!==R))return void this._service.open(R);const $=D.selectedDate,Z=D.focusDate,oe=this.model?this.model.focusDate:null;this.model=D,Tv($,this._controlValue)&&(this._controlValue=$,this.onTouched(),this.onChange(this._ngbDateAdapter.toModel($))),Tv(Z,oe)&&oe&&D.focusVisible&&this.focus(),l.markForCheck()})}get state(){return this._publicState}get calendar(){return this._calendar}get i18n(){return this._i18n}focusDate(t){this._service.focus(zi.from(t))}focusSelect(){this._service.focusSelect()}focus(){this._ngZone.onStable.asObservable().pipe(Zr(1)).subscribe(()=>{const t=this._elementRef.nativeElement.querySelector('div.ngb-dp-day[tabindex="0"]');t&&t.focus()})}navigateTo(t){this._service.open(zi.from(t?t.day?t:{...t,day:1}:null))}ngAfterViewInit(){this._ngZone.runOutsideAngular(()=>{const t=Os(this._contentEl.nativeElement,"focusin"),r=Os(this._contentEl.nativeElement,"focusout"),{nativeElement:i}=this._elementRef;(0,Ll.T)(t,r).pipe(hr(({target:s,relatedTarget:l})=>!(qU(s,"ngb-dp-day")&&qU(l,"ngb-dp-day")&&i.contains(s)&&i.contains(l))),ii(this._destroyed$)).subscribe(({type:s})=>this._ngZone.run(()=>this._service.set({focusVisible:"focusin"===s})))})}ngOnDestroy(){this._destroyed$.next()}ngOnInit(){if(void 0===this.model){const t={};["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].forEach(r=>t[r]=this[r]),this._service.set(t),this.navigateTo(this.startDate)}this.dayTemplate||(this.dayTemplate=this._defaultDayTemplate)}ngOnChanges(t){const r={};if(["dayTemplateData","displayMonths","markDisabled","firstDayOfWeek","navigation","minDate","maxDate","outsideDays","weekdays"].filter(i=>i in t).forEach(i=>r[i]=this[i]),this._service.set(r),"startDate"in t){const{currentValue:i,previousValue:s}=t.startDate;aj(s,i)&&this.navigateTo(this.startDate)}}onDateSelect(t){this._service.focus(t),this._service.select(t,{emitEvent:!0})}onNavigateDateSelect(t){this._service.open(t)}onNavigateEvent(t){switch(t){case Iv.PREV:this._service.open(this._calendar.getPrev(this.model.firstDate,"m",1));break;case Iv.NEXT:this._service.open(this._calendar.getNext(this.model.firstDate,"m",1))}}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this._service.set({disabled:t})}writeValue(t){this._controlValue=zi.from(this._ngbDateAdapter.fromModel(t)),this._service.select(this._controlValue)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Ux),u.Y36(j1),u.Y36(Dm),u.Y36(jx),u.Y36(u.sBO),u.Y36(u.SBq),u.Y36(Gx),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-datepicker"]],contentQueries:function(t,r,i){if(1&t&&u.Suo(i,uj,7),2&t){let s;u.iGM(s=u.CRH())&&(r.contentTemplateFromContent=s.first)}},viewQuery:function(t,r){if(1&t&&(u.Gf(p8,7),u.Gf(g8,7)),2&t){let i;u.iGM(i=u.CRH())&&(r._defaultDayTemplate=i.first),u.iGM(i=u.CRH())&&(r._contentEl=i.first)}},hostVars:2,hostBindings:function(t,r){2&t&&u.ekj("disabled",r.model.disabled)},inputs:{contentTemplate:"contentTemplate",dayTemplate:"dayTemplate",dayTemplateData:"dayTemplateData",displayMonths:"displayMonths",firstDayOfWeek:"firstDayOfWeek",footerTemplate:"footerTemplate",markDisabled:"markDisabled",maxDate:"maxDate",minDate:"minDate",navigation:"navigation",outsideDays:"outsideDays",showWeekNumbers:"showWeekNumbers",startDate:"startDate",weekdays:"weekdays"},outputs:{navigate:"navigate",dateSelect:"dateSelect"},exportAs:["ngbDatepicker"],standalone:!0,features:[u._Bn([{provide:$o,useExisting:(0,u.Gpc)(()=>n),multi:!0},Ux]),u.TTD,u.jDz],decls:10,vars:9,consts:[["defaultDayTemplate",""],["defaultContentTemplate",""],[1,"ngb-dp-header"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select",4,"ngIf"],[1,"ngb-dp-content"],["content",""],[3,"ngTemplateOutlet","ngTemplateOutletContext","ngTemplateOutletInjector"],[3,"ngTemplateOutlet"],["ngbDatepickerDayView","",3,"date","currentMonth","selected","disabled","focused"],["class","ngb-dp-month",4,"ngFor","ngForOf"],[1,"ngb-dp-month"],["class","ngb-dp-month-name",4,"ngIf"],[3,"month"],[1,"ngb-dp-month-name"],[3,"date","months","disabled","showSelect","prevDisabled","nextDisabled","selectBoxes","navigate","select"]],template:function(t,r){if(1&t&&(u.YNc(0,m8,1,5,"ng-template",null,0,u.W1O),u.YNc(2,v8,1,1,"ng-template",null,1,u.W1O),u.TgZ(4,"div",2),u.YNc(5,b8,1,7,"ngb-datepicker-navigation",3),u.qZA(),u.TgZ(6,"div",4,5),u.YNc(8,w8,0,0,"ng-template",6),u.qZA(),u.YNc(9,D8,0,0,"ng-template",7)),2&t){const i=u.MAs(3);u.xp6(5),u.Q6J("ngIf","none"!==r.navigation),u.xp6(1),u.ekj("ngb-dp-months",!r.contentTemplate),u.xp6(2),u.Q6J("ngTemplateOutlet",r.contentTemplate||(null==r.contentTemplateFromContent?null:r.contentTemplateFromContent.templateRef)||i)("ngTemplateOutletContext",u.VKq(7,HU,r))("ngTemplateOutletInjector",r.injector),u.xp6(1),u.Q6J("ngTemplateOutlet",r.footerTemplate)}},dependencies:[pr,Gr,jn,l7,$x,c7],styles:["ngb-datepicker{border:1px solid var(--bs-border-color);border-radius:.25rem;display:inline-block}ngb-datepicker-month{pointer-events:auto}ngb-datepicker.dropdown-menu{padding:0}ngb-datepicker.disabled .ngb-dp-weekday,ngb-datepicker.disabled .ngb-dp-week-number,ngb-datepicker.disabled .ngb-dp-month-name{color:var(--bs-text-muted)}.ngb-dp-body{z-index:1055}.ngb-dp-header{border-bottom:0;border-radius:.25rem .25rem 0 0;padding-top:.25rem;background-color:var(--bs-light)}.ngb-dp-months{display:flex}.ngb-dp-month{pointer-events:none}.ngb-dp-month-name{font-size:larger;height:2rem;line-height:2rem;text-align:center;background-color:var(--bs-light)}.ngb-dp-month+.ngb-dp-month .ngb-dp-month-name,.ngb-dp-month+.ngb-dp-month .ngb-dp-week{padding-left:1rem}.ngb-dp-month:last-child .ngb-dp-week{padding-right:.25rem}.ngb-dp-month:first-child .ngb-dp-week{padding-left:.25rem}.ngb-dp-month .ngb-dp-week:last-child{padding-bottom:.25rem}\n"],encapsulation:2,changeDetection:0}),n})();typeof navigator<"u"&&navigator.userAgent&&(/iPad|iPhone|iPod/.test(navigator.userAgent)||/Macintosh/.test(navigator.userAgent)&&navigator.maxTouchPoints&&navigator.maxTouchPoints>2||/Android/.test(navigator.userAgent));const hj=["a[href]","button:not([disabled])",'input:not([disabled]):not([type="hidden"])',"select:not([disabled])","textarea:not([disabled])","[contenteditable]",'[tabindex]:not([tabindex="-1"])'].join(", ");function fj(n){const e=Array.from(n.querySelectorAll(hj)).filter(t=>-1!==t.tabIndex);return[e[0],e[e.length-1]]}new Date(1882,10,12),new Date(2174,10,25);let Ij=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[G1,$x]}),n})(),Nj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();class Tm{constructor(e,t,r){this.nodes=e,this.viewRef=t,this.componentRef=r}}let B7=(()=>{class n{constructor(t,r){this._el=t,this._zone=r}ngOnInit(){this._zone.onStable.asObservable().pipe(Zr(1)).subscribe(()=>{Hi(this._zone,this._el.nativeElement,(t,r)=>{r&&Cv(t),t.classList.add("show")},{animation:this.animation,runningTransition:"continue"})})}hide(){return Hi(this._zone,this._el.nativeElement,({classList:t})=>t.remove("show"),{animation:this.animation,runningTransition:"stop"})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-modal-backdrop"]],hostAttrs:[2,"z-index","1055"],hostVars:6,hostBindings:function(t,r){2&t&&(u.Tol("modal-backdrop"+(r.backdropClass?" "+r.backdropClass:"")),u.ekj("show",!r.animation)("fade",r.animation))},inputs:{animation:"animation",backdropClass:"backdropClass"},standalone:!0,features:[u.jDz],decls:0,vars:0,template:function(t,r){},encapsulation:2}),n})();class Mj{update(e){}close(e){}dismiss(e){}}const V7=["animation","ariaLabelledBy","ariaDescribedBy","backdrop","centered","fullscreen","keyboard","scrollable","size","windowClass","modalDialogClass"],U7=["animation","backdropClass"];class j7{constructor(e,t,r,i){this._windowCmptRef=e,this._contentRef=t,this._backdropCmptRef=r,this._beforeDismiss=i,this._closed=new or.x,this._dismissed=new or.x,this._hidden=new or.x,e.instance.dismissEvent.subscribe(s=>{this.dismiss(s)}),this.result=new Promise((s,l)=>{this._resolve=s,this._reject=l}),this.result.then(null,()=>{})}_applyWindowOptions(e,t){V7.forEach(r=>{ym(t[r])&&(e[r]=t[r])})}_applyBackdropOptions(e,t){U7.forEach(r=>{ym(t[r])&&(e[r]=t[r])})}update(e){this._applyWindowOptions(this._windowCmptRef.instance,e),this._backdropCmptRef&&this._backdropCmptRef.instance&&this._applyBackdropOptions(this._backdropCmptRef.instance,e)}get componentInstance(){if(this._contentRef&&this._contentRef.componentRef)return this._contentRef.componentRef.instance}get closed(){return this._closed.asObservable().pipe(ii(this._hidden))}get dismissed(){return this._dismissed.asObservable().pipe(ii(this._hidden))}get hidden(){return this._hidden.asObservable()}get shown(){return this._windowCmptRef.instance.shown.asObservable()}close(e){this._windowCmptRef&&(this._closed.next(e),this._resolve(e),this._removeModalElements())}_dismiss(e){this._dismissed.next(e),this._reject(e),this._removeModalElements()}dismiss(e){if(this._windowCmptRef)if(this._beforeDismiss){const t=this._beforeDismiss();!function WU(n){return n&&n.then}(t)?!1!==t&&this._dismiss(e):t.then(r=>{!1!==r&&this._dismiss(e)},()=>{})}else this._dismiss(e)}_removeModalElements(){const e=this._windowCmptRef.instance.hide(),t=this._backdropCmptRef?this._backdropCmptRef.instance.hide():ct(void 0);e.subscribe(()=>{const{nativeElement:r}=this._windowCmptRef.location;r.parentNode.removeChild(r),this._windowCmptRef.destroy(),this._contentRef&&this._contentRef.viewRef&&this._contentRef.viewRef.destroy(),this._windowCmptRef=null,this._contentRef=null}),t.subscribe(()=>{if(this._backdropCmptRef){const{nativeElement:r}=this._backdropCmptRef.location;r.parentNode.removeChild(r),this._backdropCmptRef.destroy(),this._backdropCmptRef=null}}),R1(e,t).subscribe(()=>{this._hidden.next(),this._hidden.complete()})}}var OD=(()=>(function(n){n[n.BACKDROP_CLICK=0]="BACKDROP_CLICK",n[n.ESC=1]="ESC"}(OD||(OD={})),OD))();let G7=(()=>{class n{constructor(t,r,i){this._document=t,this._elRef=r,this._zone=i,this._closed$=new or.x,this._elWithFocus=null,this.backdrop=!0,this.keyboard=!0,this.dismissEvent=new u.vpe,this.shown=new or.x,this.hidden=new or.x}get fullscreenClass(){return!0===this.fullscreen?" modal-fullscreen":Dv(this.fullscreen)?` modal-fullscreen-${this.fullscreen}-down`:""}dismiss(t){this.dismissEvent.emit(t)}ngOnInit(){this._elWithFocus=this._document.activeElement,this._zone.onStable.asObservable().pipe(Zr(1)).subscribe(()=>{this._show()})}ngOnDestroy(){this._disableEventHandling()}hide(){const{nativeElement:t}=this._elRef,r={animation:this.animation,runningTransition:"stop"},l=R1(Hi(this._zone,t,()=>t.classList.remove("show"),r),Hi(this._zone,this._dialogEl.nativeElement,()=>{},r));return l.subscribe(()=>{this.hidden.next(),this.hidden.complete()}),this._disableEventHandling(),this._restoreFocus(),l}_show(){const t={animation:this.animation,runningTransition:"continue"};R1(Hi(this._zone,this._elRef.nativeElement,(s,l)=>{l&&Cv(s),s.classList.add("show")},t),Hi(this._zone,this._dialogEl.nativeElement,()=>{},t)).subscribe(()=>{this.shown.next(),this.shown.complete()}),this._enableEventHandling(),this._setFocus()}_enableEventHandling(){const{nativeElement:t}=this._elRef;this._zone.runOutsideAngular(()=>{Os(t,"keydown").pipe(ii(this._closed$),hr(i=>i.which===Nn.Escape)).subscribe(i=>{this.keyboard?requestAnimationFrame(()=>{i.defaultPrevented||this._zone.run(()=>this.dismiss(OD.ESC))}):"static"===this.backdrop&&this._bumpBackdrop()});let r=!1;Os(this._dialogEl.nativeElement,"mousedown").pipe(ii(this._closed$),(0,_i.b)(()=>r=!1),Vn(()=>Os(t,"mouseup").pipe(ii(this._closed$),Zr(1))),hr(({target:i})=>t===i)).subscribe(()=>{r=!0}),Os(t,"click").pipe(ii(this._closed$)).subscribe(({target:i})=>{t===i&&("static"===this.backdrop?this._bumpBackdrop():!0===this.backdrop&&!r&&this._zone.run(()=>this.dismiss(OD.BACKDROP_CLICK))),r=!1})})}_disableEventHandling(){this._closed$.next()}_setFocus(){const{nativeElement:t}=this._elRef;if(!t.contains(document.activeElement)){const r=t.querySelector("[ngbAutofocus]"),i=fj(t)[0];(r||i||t).focus()}}_restoreFocus(){const t=this._document.body,r=this._elWithFocus;let i;i=r&&r.focus&&t.contains(r)?r:t,this._zone.runOutsideAngular(()=>{setTimeout(()=>i.focus()),this._elWithFocus=null})}_bumpBackdrop(){"static"===this.backdrop&&Hi(this._zone,this._elRef.nativeElement,({classList:t})=>(t.add("modal-static"),()=>t.remove("modal-static")),{animation:this.animation,runningTransition:"continue"})}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(le),u.Y36(u.SBq),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-modal-window"]],viewQuery:function(t,r){if(1&t&&u.Gf(E8,7),2&t){let i;u.iGM(i=u.CRH())&&(r._dialogEl=i.first)}},hostAttrs:["role","dialog","tabindex","-1"],hostVars:7,hostBindings:function(t,r){2&t&&(u.uIk("aria-modal",!0)("aria-labelledby",r.ariaLabelledBy)("aria-describedby",r.ariaDescribedBy),u.Tol("modal d-block"+(r.windowClass?" "+r.windowClass:"")),u.ekj("fade",r.animation))},inputs:{animation:"animation",ariaLabelledBy:"ariaLabelledBy",ariaDescribedBy:"ariaDescribedBy",backdrop:"backdrop",centered:"centered",fullscreen:"fullscreen",keyboard:"keyboard",scrollable:"scrollable",size:"size",windowClass:"windowClass",modalDialogClass:"modalDialogClass"},outputs:{dismissEvent:"dismiss"},standalone:!0,features:[u.jDz],ngContentSelectors:F1,decls:4,vars:2,consts:[["role","document"],["dialog",""],[1,"modal-content"]],template:function(t,r){1&t&&(u.F$t(),u.TgZ(0,"div",0,1)(2,"div",2),u.Hsn(3),u.qZA()()),2&t&&u.Tol("modal-dialog"+(r.size?" modal-"+r.size:"")+(r.centered?" modal-dialog-centered":"")+r.fullscreenClass+(r.scrollable?" modal-dialog-scrollable":"")+(r.modalDialogClass?" "+r.modalDialogClass:""))},styles:["ngb-modal-window .component-host-scrollable{display:flex;flex-direction:column;overflow:hidden}\n"],encapsulation:2}),n})(),$7=(()=>{class n{constructor(t){this._document=t}hide(){const t=Math.abs(window.innerWidth-this._document.documentElement.clientWidth),r=this._document.body,i=r.style,{overflow:s,paddingRight:l}=i;if(t>0){const h=parseFloat(window.getComputedStyle(r).paddingRight);i.paddingRight=`${h+t}px`}return i.overflow="hidden",()=>{t>0&&(i.paddingRight=l),i.overflow=s}}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(le))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),H7=(()=>{class n{constructor(t,r,i,s,l,h,m){this._applicationRef=t,this._injector=r,this._environmentInjector=i,this._document=s,this._scrollBar=l,this._rendererFactory=h,this._ngZone=m,this._activeWindowCmptHasChanged=new or.x,this._ariaHiddenValues=new Map,this._scrollBarRestoreFn=null,this._modalRefs=[],this._windowCmpts=[],this._activeInstances=new u.vpe,this._activeWindowCmptHasChanged.subscribe(()=>{if(this._windowCmpts.length){const y=this._windowCmpts[this._windowCmpts.length-1];((n,e,t,r=!1)=>{n.runOutsideAngular(()=>{const i=Os(e,"focusin").pipe(ii(t),(0,vt.U)(s=>s.target));Os(e,"keydown").pipe(ii(t),hr(s=>s.which===Nn.Tab),Vs(i)).subscribe(([s,l])=>{const[h,m]=fj(e);(l===h||l===e)&&s.shiftKey&&(m.focus(),s.preventDefault()),l===m&&!s.shiftKey&&(h.focus(),s.preventDefault())}),r&&Os(e,"click").pipe(ii(t),Vs(i),(0,vt.U)(s=>s[1])).subscribe(s=>s.focus())})})(this._ngZone,y.location.nativeElement,this._activeWindowCmptHasChanged),this._revertAriaHidden(),this._setAriaHidden(y.location.nativeElement)}})}_restoreScrollBar(){const t=this._scrollBarRestoreFn;t&&(this._scrollBarRestoreFn=null,t())}_hideScrollBar(){this._scrollBarRestoreFn||(this._scrollBarRestoreFn=this._scrollBar.hide())}open(t,r,i){const s=i.container instanceof HTMLElement?i.container:ym(i.container)?this._document.querySelector(i.container):this._document.body,l=this._rendererFactory.createRenderer(null,null);if(!s)throw new Error(`The specified modal container "${i.container||"body"}" was not found in the DOM.`);this._hideScrollBar();const h=new Mj,m=(t=i.injector||t).get(u.lqb,null)||this._environmentInjector,y=this._getContentRef(t,m,r,h,i);let D=!1!==i.backdrop?this._attachBackdrop(s):void 0,S=this._attachWindowComponent(s,y.nodes),R=new j7(S,y,D,i.beforeDismiss);return this._registerModalRef(R),this._registerWindowCmpt(S),R.hidden.pipe(Zr(1)).subscribe(()=>Promise.resolve(!0).then(()=>{this._modalRefs.length||(l.removeClass(this._document.body,"modal-open"),this._restoreScrollBar(),this._revertAriaHidden())})),h.close=P=>{R.close(P)},h.dismiss=P=>{R.dismiss(P)},h.update=P=>{R.update(P)},R.update(i),1===this._modalRefs.length&&l.addClass(this._document.body,"modal-open"),D&&D.instance&&D.changeDetectorRef.detectChanges(),S.changeDetectorRef.detectChanges(),R}get activeInstances(){return this._activeInstances}dismissAll(t){this._modalRefs.forEach(r=>r.dismiss(t))}hasOpenModals(){return this._modalRefs.length>0}_attachBackdrop(t){let r=(0,u.LMc)(B7,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector});return this._applicationRef.attachView(r.hostView),t.appendChild(r.location.nativeElement),r}_attachWindowComponent(t,r){let i=(0,u.LMc)(G7,{environmentInjector:this._applicationRef.injector,elementInjector:this._injector,projectableNodes:r});return this._applicationRef.attachView(i.hostView),t.appendChild(i.location.nativeElement),i}_getContentRef(t,r,i,s,l){return i?i instanceof u.Rgc?this._createFromTemplateRef(i,s):Dv(i)?this._createFromString(i):this._createFromComponent(t,r,i,s,l):new Tm([])}_createFromTemplateRef(t,r){const s=t.createEmbeddedView({$implicit:r,close(l){r.close(l)},dismiss(l){r.dismiss(l)}});return this._applicationRef.attachView(s),new Tm([s.rootNodes],s)}_createFromString(t){const r=this._document.createTextNode(`${t}`);return new Tm([[r]])}_createFromComponent(t,r,i,s,l){const h=u.zs3.create({providers:[{provide:Mj,useValue:s}],parent:t}),m=(0,u.LMc)(i,{environmentInjector:r,elementInjector:h}),y=m.location.nativeElement;return l.scrollable&&y.classList.add("component-host-scrollable"),this._applicationRef.attachView(m.hostView),new Tm([[y]],m.hostView,m)}_setAriaHidden(t){const r=t.parentElement;r&&t!==this._document.body&&(Array.from(r.children).forEach(i=>{i!==t&&"SCRIPT"!==i.nodeName&&(this._ariaHiddenValues.set(i,i.getAttribute("aria-hidden")),i.setAttribute("aria-hidden","true"))}),this._setAriaHidden(r))}_revertAriaHidden(){this._ariaHiddenValues.forEach((t,r)=>{t?r.setAttribute("aria-hidden",t):r.removeAttribute("aria-hidden")}),this._ariaHiddenValues.clear()}_registerModalRef(t){const r=()=>{const i=this._modalRefs.indexOf(t);i>-1&&(this._modalRefs.splice(i,1),this._activeInstances.emit(this._modalRefs))};this._modalRefs.push(t),this._activeInstances.emit(this._modalRefs),t.result.then(r,r)}_registerWindowCmpt(t){this._windowCmpts.push(t),this._activeWindowCmptHasChanged.next(),t.onDestroy(()=>{const r=this._windowCmpts.indexOf(t);r>-1&&(this._windowCmpts.splice(r,1),this._activeWindowCmptHasChanged.next())})}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.z2F),u.LFG(u.zs3),u.LFG(u.lqb),u.LFG(le),u.LFG($7),u.LFG(u.FYo),u.LFG(u.R0b))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),z7=(()=>{class n{constructor(t){this._ngbConfig=t,this.backdrop=!0,this.fullscreen=!1,this.keyboard=!0}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(vm))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Rj=(()=>{class n{constructor(t,r,i){this._injector=t,this._modalStack=r,this._config=i}open(t,r={}){const i={...this._config,animation:this._config.animation,...r};return this._modalStack.open(this._injector,t,i)}get activeInstances(){return this._modalStack.activeInstances}dismissAll(t){this._modalStack.dismissAll(t)}hasOpenModals(){return this._modalStack.hasOpenModals()}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.zs3),u.LFG(H7),u.LFG(z7))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Oj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({providers:[Rj]}),n})();const Q7=({classList:n})=>(n.remove("show"),()=>n.remove("active")),J7=(n,e)=>{e&&Cv(n),n.classList.add("show")};let qx=(()=>{class n{constructor(t){this.elRef=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.SBq))},n.\u0275dir=u.lG2({type:n,selectors:[["","ngbNavPane",""]],hostAttrs:[1,"tab-pane"],hostVars:5,hostBindings:function(t,r){2&t&&(u.Ikx("id",r.item.panelDomId),u.uIk("role",r.role?r.role:r.nav.roles?"tabpanel":void 0)("aria-labelledby",r.item.domId),u.ekj("fade",r.nav.animation))},inputs:{item:"item",nav:"nav",role:"role"},standalone:!0}),n})(),kj=(()=>{class n{constructor(t,r){this._cd=t,this._ngZone=r,this._activePane=null}isPanelTransitioning(t){return this._activePane?.item===t}ngAfterViewInit(){this._updateActivePane(),this.nav.navItemChange$.pipe(ii(this.nav.destroy$),Mc(this._activePane?.item||null),Fo(),function O5(n){return hr((e,t)=>n<=t)}(1)).subscribe(t=>{const r={animation:this.nav.animation,runningTransition:"stop"};this._cd.detectChanges(),this._activePane?Hi(this._ngZone,this._activePane.elRef.nativeElement,Q7,r).subscribe(()=>{const i=this._activePane?.item;this._activePane=this._getPaneForItem(t),this._cd.markForCheck(),this._activePane&&(this._activePane.elRef.nativeElement.classList.add("active"),Hi(this._ngZone,this._activePane.elRef.nativeElement,J7,r).subscribe(()=>{t&&(t.shown.emit(),this.nav.shown.emit(t.id))})),i&&(i.hidden.emit(),this.nav.hidden.emit(i.id))}):this._updateActivePane()})}_updateActivePane(){this._activePane=this._getActivePane(),this._activePane?.elRef.nativeElement.classList.add("show"),this._activePane?.elRef.nativeElement.classList.add("active")}_getPaneForItem(t){return this._panes&&this._panes.find(r=>r.item===t)||null}_getActivePane(){return this._panes&&this._panes.find(t=>t.item.active)||null}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.sBO),u.Y36(u.R0b))},n.\u0275cmp=u.Xpm({type:n,selectors:[["","ngbNavOutlet",""]],viewQuery:function(t,r){if(1&t&&u.Gf(qx,5),2&t){let i;u.iGM(i=u.CRH())&&(r._panes=i)}},hostVars:2,hostBindings:function(t,r){2&t&&u.ekj("tab-content",!0)},inputs:{paneRole:"paneRole",nav:["ngbNavOutlet","nav"]},standalone:!0,features:[u.jDz],attrs:C8,decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],["ngbNavPane","",3,"item","nav","role",4,"ngIf"],["ngbNavPane","",3,"item","nav","role"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&u.YNc(0,S8,1,1,"ng-template",0),2&t&&u.Q6J("ngForOf",r.nav.items)},dependencies:[qx,Gr,pr,jn],encapsulation:2,changeDetection:0}),n})(),Fj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[kj]}),n})(),X7=(()=>{class n{constructor(){this.disabled=!1,this.boundaryLinks=!1,this.directionLinks=!0,this.ellipses=!0,this.maxSize=0,this.pageSize=10,this.rotate=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Lj=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","ngbPaginationEllipsis",""]],standalone:!0}),n})(),Bj=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","ngbPaginationFirst",""]],standalone:!0}),n})(),Vj=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","ngbPaginationLast",""]],standalone:!0}),n})(),Uj=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","ngbPaginationNext",""]],standalone:!0}),n})(),jj=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","ngbPaginationNumber",""]],standalone:!0}),n})(),Gj=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","ngbPaginationPrevious",""]],standalone:!0}),n})(),$j=(()=>{class n{constructor(t){this.templateRef=t}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(u.Rgc))},n.\u0275dir=u.lG2({type:n,selectors:[["ng-template","ngbPaginationPages",""]],standalone:!0}),n})(),Hj=(()=>{class n{constructor(t){this.pageCount=0,this.pages=[],this.page=1,this.pageChange=new u.vpe(!0),this.disabled=t.disabled,this.boundaryLinks=t.boundaryLinks,this.directionLinks=t.directionLinks,this.ellipses=t.ellipses,this.maxSize=t.maxSize,this.pageSize=t.pageSize,this.rotate=t.rotate,this.size=t.size}hasPrevious(){return this.page>1}hasNext(){return this.page<this.pageCount}nextDisabled(){return!this.hasNext()||this.disabled}previousDisabled(){return!this.hasPrevious()||this.disabled}selectPage(t){this._updatePages(t)}ngOnChanges(t){this._updatePages(this.page)}isEllipsis(t){return-1===t}_applyEllipses(t,r){this.ellipses&&(t>0&&(t>2?this.pages.unshift(-1):2===t&&this.pages.unshift(2),this.pages.unshift(1)),r<this.pageCount&&(r<this.pageCount-2?this.pages.push(-1):r===this.pageCount-2&&this.pages.push(this.pageCount-1),this.pages.push(this.pageCount)))}_applyRotation(){let t=0,r=this.pageCount,i=Math.floor(this.maxSize/2);return this.page<=i?r=this.maxSize:this.pageCount-this.page<i?t=this.pageCount-this.maxSize:(t=this.page-i-1,r=this.page+(this.maxSize%2==0?i-1:i)),[t,r]}_applyPagination(){let r=(Math.ceil(this.page/this.maxSize)-1)*this.maxSize;return[r,r+this.maxSize]}_setPageInRange(t){const r=this.page;this.page=L1(t,this.pageCount,1),this.page!==r&&si(this.collectionSize)&&this.pageChange.emit(this.page)}_updatePages(t){this.pageCount=Math.ceil(this.collectionSize/this.pageSize),si(this.pageCount)||(this.pageCount=0),this.pages.length=0;for(let r=1;r<=this.pageCount;r++)this.pages.push(r);if(this._setPageInRange(t),this.maxSize>0&&this.pageCount>this.maxSize){let r=0,i=this.pageCount;[r,i]=this.rotate?this._applyRotation():this._applyPagination(),this.pages=this.pages.slice(r,i),this._applyEllipses(r,i)}}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(X7))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-pagination"]],contentQueries:function(t,r,i){if(1&t&&(u.Suo(i,Lj,5),u.Suo(i,Bj,5),u.Suo(i,Vj,5),u.Suo(i,Uj,5),u.Suo(i,jj,5),u.Suo(i,Gj,5),u.Suo(i,$j,5)),2&t){let s;u.iGM(s=u.CRH())&&(r.tplEllipsis=s.first),u.iGM(s=u.CRH())&&(r.tplFirst=s.first),u.iGM(s=u.CRH())&&(r.tplLast=s.first),u.iGM(s=u.CRH())&&(r.tplNext=s.first),u.iGM(s=u.CRH())&&(r.tplNumber=s.first),u.iGM(s=u.CRH())&&(r.tplPrevious=s.first),u.iGM(s=u.CRH())&&(r.tplPages=s.first)}},hostAttrs:["role","navigation"],inputs:{disabled:"disabled",boundaryLinks:"boundaryLinks",directionLinks:"directionLinks",ellipses:"ellipses",rotate:"rotate",collectionSize:"collectionSize",maxSize:"maxSize",page:"page",pageSize:"pageSize",size:"size"},outputs:{pageChange:"pageChange"},standalone:!0,features:[u.TTD,u.jDz],decls:20,vars:12,consts:function(){let e,t,r,i,s,l,h,m;return e=$localize`:@@ngb.pagination.first:««`,t=$localize`:@@ngb.pagination.previous:«`,r=$localize`:@@ngb.pagination.next:»`,i=$localize`:@@ngb.pagination.last:»»`,s=$localize`:@@ngb.pagination.first-aria:First`,l=$localize`:@@ngb.pagination.previous-aria:Previous`,h=$localize`:@@ngb.pagination.next-aria:Next`,m=$localize`:@@ngb.pagination.last-aria:Last`,[["first",""],["previous",""],["next",""],["last",""],["ellipsis",""],["defaultNumber",""],["defaultPages",""],["class","page-item",3,"disabled",4,"ngIf"],[3,"ngTemplateOutlet","ngTemplateOutletContext"],["aria-hidden","true"],e,t,r,i,["class","page-item",3,"active","disabled",4,"ngFor","ngForOf"],[1,"page-item"],["class","page-link","tabindex","-1","aria-disabled","true",4,"ngIf"],["class","page-link","href","",3,"click",4,"ngIf"],["tabindex","-1","aria-disabled","true",1,"page-link"],["href","",1,"page-link",3,"click"],["aria-label",s,"href","",1,"page-link",3,"click"],["aria-label",l,"href","",1,"page-link",3,"click"],["aria-label",h,"href","",1,"page-link",3,"click"],["aria-label",m,"href","",1,"page-link",3,"click"]]},template:function(t,r){if(1&t&&(u.YNc(0,A8,2,0,"ng-template",null,0,u.W1O),u.YNc(2,N8,2,0,"ng-template",null,1,u.W1O),u.YNc(4,M8,2,0,"ng-template",null,2,u.W1O),u.YNc(6,R8,2,0,"ng-template",null,3,u.W1O),u.YNc(8,O8,1,0,"ng-template",null,4,u.W1O),u.YNc(10,x8,1,1,"ng-template",null,5,u.W1O),u.YNc(12,j8,1,1,"ng-template",null,6,u.W1O),u.TgZ(14,"ul"),u.YNc(15,$8,3,9,"li",7),u.YNc(16,W8,3,8,"li",7),u.YNc(17,q8,0,0,"ng-template",8),u.YNc(18,Y8,3,9,"li",7),u.YNc(19,Q8,3,9,"li",7),u.qZA()),2&t){const i=u.MAs(13);u.xp6(14),u.Tol("pagination"+(r.size?" pagination-"+r.size:"")),u.xp6(1),u.Q6J("ngIf",r.boundaryLinks),u.xp6(1),u.Q6J("ngIf",r.directionLinks),u.xp6(1),u.Q6J("ngTemplateOutlet",(null==r.tplPages?null:r.tplPages.templateRef)||i)("ngTemplateOutletContext",u.kEZ(8,J8,r.page,r.pages,r.disabled)),u.xp6(1),u.Q6J("ngIf",r.directionLinks),u.xp6(1),u.Q6J("ngIf",r.boundaryLinks)}},dependencies:[pr,Gr,jn],encapsulation:2,changeDetection:0}),n})(),zj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Hj]}),n})(),qj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),sq=(()=>{class n{constructor(){this.max=100,this.animated=!1,this.ariaLabel="progress bar",this.striped=!1,this.showValue=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),oq=(()=>{class n{constructor(t){this.value=0,this.max=t.max,this.animated=t.animated,this.ariaLabel=t.ariaLabel,this.striped=t.striped,this.textType=t.textType,this.type=t.type,this.showValue=t.showValue,this.height=t.height}set max(t){this._max=!si(t)||t<=0?100:t}get max(){return this._max}getValue(){return L1(this.value,this.max)}getPercentValue(){return 100*this.getValue()/this.max}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(sq))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-progressbar"]],hostAttrs:["role","progressbar","aria-valuemin","0",1,"progress"],hostVars:5,hostBindings:function(t,r){2&t&&(u.uIk("aria-valuenow",r.getValue())("aria-valuemax",r.max)("aria-label",r.ariaLabel),u.Udp("height",r.height))},inputs:{max:"max",animated:"animated",ariaLabel:"ariaLabel",striped:"striped",showValue:"showValue",textType:"textType",type:"type",value:"value",height:"height"},standalone:!0,features:[u.jDz],ngContentSelectors:F1,decls:3,vars:11,consts:function(){let e;return e=$localize`:@@ngb.progressbar.value:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[4,"ngIf"],e]},template:function(t,r){1&t&&(u.F$t(),u.TgZ(0,"div"),u.YNc(1,t9,3,3,"span",0),u.Hsn(2),u.qZA()),2&t&&(u.MT6("progress-bar",r.type?r.textType?" bg-"+r.type:" text-bg-"+r.type:"","",r.textType?" text-"+r.textType:"",""),u.Udp("width",r.getPercentValue(),"%"),u.ekj("progress-bar-animated",r.animated)("progress-bar-striped",r.striped),u.xp6(1),u.Q6J("ngIf",r.showValue))},dependencies:[pr,Zc],encapsulation:2,changeDetection:0}),n})(),Kj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[oq]}),n})(),aq=(()=>{class n{constructor(){this.max=10,this.readonly=!1,this.resettable=!1,this.tabindex=0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),lq=(()=>{class n{constructor(t,r){this._changeDetectorRef=r,this.contexts=[],this.disabled=!1,this.hover=new u.vpe,this.leave=new u.vpe,this.rateChange=new u.vpe(!0),this.onChange=i=>{},this.onTouched=()=>{},this.max=t.max,this.readonly=t.readonly,this.tabindex=t.tabindex}ariaValueText(t,r){return`${t} out of ${r}`}isInteractive(){return!this.readonly&&!this.disabled}enter(t){this.isInteractive()&&this._updateState(t),this.hover.emit(t)}handleBlur(){this.onTouched()}handleClick(t){this.isInteractive()&&this.update(this.resettable&&this.rate===t?0:t)}handleKeyDown(t){switch(t.which){case Nn.ArrowDown:case Nn.ArrowLeft:this.update(this.rate-1);break;case Nn.ArrowUp:case Nn.ArrowRight:this.update(this.rate+1);break;case Nn.Home:this.update(0);break;case Nn.End:this.update(this.max);break;default:return}t.preventDefault()}ngOnChanges(t){t.rate&&this.update(this.rate),t.max&&this._updateMax()}ngOnInit(){this._setupContexts(),this._updateState(this.rate)}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}reset(){this.leave.emit(this.nextRate),this._updateState(this.rate)}setDisabledState(t){this.disabled=t}update(t,r=!0){const i=L1(t,this.max,0);this.isInteractive()&&this.rate!==i&&(this.rate=i,this.rateChange.emit(this.rate)),r&&(this.onChange(this.rate),this.onTouched()),this._updateState(this.rate)}writeValue(t){this.update(t,!1),this._changeDetectorRef.markForCheck()}_updateState(t){this.nextRate=t,this.contexts.forEach((r,i)=>r.fill=Math.round(100*L1(t-i,1,0)))}_updateMax(){this.max>0&&(this._setupContexts(),this.update(this.rate))}_setupContexts(){this.contexts=Array.from({length:this.max},(t,r)=>({fill:0,index:r}))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(aq),u.Y36(u.sBO))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-rating"]],contentQueries:function(t,r,i){if(1&t&&u.Suo(i,u.Rgc,5),2&t){let s;u.iGM(s=u.CRH())&&(r.starTemplateFromContent=s.first)}},hostAttrs:["role","slider","aria-valuemin","0",1,"d-inline-flex"],hostVars:5,hostBindings:function(t,r){1&t&&u.NdJ("blur",function(){return r.handleBlur()})("keydown",function(s){return r.handleKeyDown(s)})("mouseleave",function(){return r.reset()}),2&t&&(u.Ikx("tabindex",r.disabled?-1:r.tabindex),u.uIk("aria-valuemax",r.max)("aria-valuenow",r.nextRate)("aria-valuetext",r.ariaValueText(r.nextRate,r.max))("aria-disabled",!!r.readonly||null))},inputs:{max:"max",rate:"rate",readonly:"readonly",resettable:"resettable",starTemplate:"starTemplate",tabindex:"tabindex",ariaValueText:"ariaValueText"},outputs:{hover:"hover",leave:"leave",rateChange:"rateChange"},standalone:!0,features:[u._Bn([{provide:$o,useExisting:(0,u.Gpc)(()=>n),multi:!0}]),u.TTD,u.jDz],decls:3,vars:1,consts:[["t",""],["ngFor","",3,"ngForOf"],[1,"visually-hidden"],[3,"mouseenter","click"],[3,"ngTemplateOutlet","ngTemplateOutletContext"]],template:function(t,r){1&t&&(u.YNc(0,n9,1,1,"ng-template",null,0,u.W1O),u.YNc(2,i9,4,5,"ng-template",1)),2&t&&(u.xp6(2),u.Q6J("ngForOf",r.contexts))},dependencies:[Gr,jn],encapsulation:2,changeDetection:0}),n})(),Yj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[lq]}),n})();class Zj{constructor(e,t,r){this.hour=xs(e),this.minute=xs(t),this.second=xs(r)}changeHour(e=1){this.updateHour((isNaN(this.hour)?0:this.hour)+e)}updateHour(e){this.hour=si(e)?(e<0?24+e:e)%24:NaN}changeMinute(e=1){this.updateMinute((isNaN(this.minute)?0:this.minute)+e)}updateMinute(e){si(e)?(this.minute=e%60<0?60+e%60:e%60,this.changeHour(Math.floor(e/60))):this.minute=NaN}changeSecond(e=1){this.updateSecond((isNaN(this.second)?0:this.second)+e)}updateSecond(e){si(e)?(this.second=e<0?60+e%60:e%60,this.changeMinute(Math.floor(e/60))):this.second=NaN}isValid(e=!0){return si(this.hour)&&si(this.minute)&&(!e||si(this.second))}toString(){return`${this.hour||0}:${this.minute||0}:${this.second||0}`}}let uq=(()=>{class n{constructor(){this.meridian=!1,this.spinners=!0,this.seconds=!1,this.hourStep=1,this.minuteStep=1,this.secondStep=1,this.disabled=!1,this.readonlyInputs=!1,this.size="medium"}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),Qj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(){return function cq(){return new dq}()},providedIn:"root"}),n})(),dq=(()=>{class n extends Qj{fromModel(t){return t&&Qr(t.hour)&&Qr(t.minute)?{hour:t.hour,minute:t.minute,second:Qr(t.second)?t.second:null}:null}toModel(t){return t&&Qr(t.hour)&&Qr(t.minute)?{hour:t.hour,minute:t.minute,second:Qr(t.second)?t.second:null}:null}}return n.\u0275fac=function(){let e;return function(r){return(e||(e=u.n5z(n)))(r||n)}}(),n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})(),Jj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=u.Yz7({token:n,factory:function(t){let r=null;return r=t?new t:function hq(n){return new fq(n)}(u.LFG(u.soG)),r},providedIn:"root"}),n})(),fq=(()=>{class n extends Jj{constructor(t){super(),this._periods=De(t,Mt.Standalone,it.Narrow)}getMorningPeriod(){return this._periods[0]}getAfternoonPeriod(){return this._periods[1]}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(u.soG))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac}),n})();const pq=/[^0-9]/g;let gq=(()=>{class n{constructor(t,r,i,s){this._config=t,this._ngbTimeAdapter=r,this._cd=i,this.i18n=s,this.onChange=l=>{},this.onTouched=()=>{},this.meridian=t.meridian,this.spinners=t.spinners,this.seconds=t.seconds,this.hourStep=t.hourStep,this.minuteStep=t.minuteStep,this.secondStep=t.secondStep,this.disabled=t.disabled,this.readonlyInputs=t.readonlyInputs,this.size=t.size}set hourStep(t){this._hourStep=Qr(t)?t:this._config.hourStep}get hourStep(){return this._hourStep}set minuteStep(t){this._minuteStep=Qr(t)?t:this._config.minuteStep}get minuteStep(){return this._minuteStep}set secondStep(t){this._secondStep=Qr(t)?t:this._config.secondStep}get secondStep(){return this._secondStep}writeValue(t){const r=this._ngbTimeAdapter.fromModel(t);this.model=r?new Zj(r.hour,r.minute,r.second):new Zj,!this.seconds&&(!r||!si(r.second))&&(this.model.second=0),this._cd.markForCheck()}registerOnChange(t){this.onChange=t}registerOnTouched(t){this.onTouched=t}setDisabledState(t){this.disabled=t}changeHour(t){this.model?.changeHour(t),this.propagateModelChange()}changeMinute(t){this.model?.changeMinute(t),this.propagateModelChange()}changeSecond(t){this.model?.changeSecond(t),this.propagateModelChange()}updateHour(t){const r=!!this.model&&this.model.hour>=12,i=xs(t);this.model?.updateHour(this.meridian&&(r&&i<12||!r&&12===i)?i+12:i),this.propagateModelChange()}updateMinute(t){this.model?.updateMinute(xs(t)),this.propagateModelChange()}updateSecond(t){this.model?.updateSecond(xs(t)),this.propagateModelChange()}toggleMeridian(){this.meridian&&this.changeHour(12)}formatInput(t){t.value=t.value.replace(pq,"")}formatHour(t){return si(t)?Ev(this.meridian?t%12==0?12:t%12:t%24):Ev(NaN)}formatMinSec(t){return Ev(si(t)?t:NaN)}handleBlur(){this.onTouched()}get isSmallSize(){return"small"===this.size}get isLargeSize(){return"large"===this.size}ngOnChanges(t){t.seconds&&!this.seconds&&this.model&&!si(this.model.second)&&(this.model.second=0,this.propagateModelChange(!1))}propagateModelChange(t=!0){t&&this.onTouched(),this.model?.isValid(this.seconds)?this.onChange(this._ngbTimeAdapter.toModel({hour:this.model.hour,minute:this.model.minute,second:this.model.second})):this.onChange(this._ngbTimeAdapter.toModel(null))}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(uq),u.Y36(Qj),u.Y36(u.sBO),u.Y36(Jj))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-timepicker"]],inputs:{meridian:"meridian",spinners:"spinners",seconds:"seconds",hourStep:"hourStep",minuteStep:"minuteStep",secondStep:"secondStep",readonlyInputs:"readonlyInputs",size:"size"},exportAs:["ngbTimepicker"],standalone:!0,features:[u._Bn([{provide:$o,useExisting:(0,u.Gpc)(()=>n),multi:!0}]),u.TTD,u.jDz],decls:16,vars:25,consts:function(){let e,t,r,i,s,l,h,m,y,D,S,R,P,$;return e=$localize`:@@ngb.timepicker.HH:HH`,t=$localize`:@@ngb.timepicker.hours:Hours`,r=$localize`:@@ngb.timepicker.MM:MM`,i=$localize`:@@ngb.timepicker.minutes:Minutes`,s=$localize`:@@ngb.timepicker.increment-hours:Increment hours`,l=$localize`:@@ngb.timepicker.decrement-hours:Decrement hours`,h=$localize`:@@ngb.timepicker.increment-minutes:Increment minutes`,m=$localize`:@@ngb.timepicker.decrement-minutes:Decrement minutes`,y=$localize`:@@ngb.timepicker.SS:SS`,D=$localize`:@@ngb.timepicker.seconds:Seconds`,S=$localize`:@@ngb.timepicker.increment-seconds:Increment seconds`,R=$localize`:@@ngb.timepicker.decrement-seconds:Decrement seconds`,P=$localize`:@@ngb.timepicker.PM:${"\ufffd0\ufffd"}:INTERPOLATION:`,$=$localize`:@@ngb.timepicker.AM:${"\ufffd0\ufffd"}:INTERPOLATION:`,[[3,"disabled"],[1,"ngb-tp"],[1,"ngb-tp-input-container","ngb-tp-hour"],["tabindex","-1","type","button","class","btn btn-link",3,"btn-sm","btn-lg","disabled","click",4,"ngIf"],["type","text","maxlength","2","inputmode","numeric","placeholder",e,"aria-label",t,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],[1,"ngb-tp-spacer"],[1,"ngb-tp-input-container","ngb-tp-minute"],["type","text","maxlength","2","inputmode","numeric","placeholder",r,"aria-label",i,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],["class","ngb-tp-spacer",4,"ngIf"],["class","ngb-tp-input-container ngb-tp-second",4,"ngIf"],["class","ngb-tp-meridian",4,"ngIf"],["tabindex","-1","type","button",1,"btn","btn-link",3,"disabled","click"],[1,"chevron","ngb-tp-chevron"],[1,"visually-hidden"],s,[1,"chevron","ngb-tp-chevron","bottom"],l,h,m,[1,"ngb-tp-input-container","ngb-tp-second"],["type","text","maxlength","2","inputmode","numeric","placeholder",y,"aria-label",D,1,"ngb-tp-input","form-control",3,"value","readOnly","disabled","change","blur","input","keydown.ArrowUp","keydown.ArrowDown"],S,R,[1,"ngb-tp-meridian"],["type","button",1,"btn","btn-outline-primary",3,"disabled","click"],[4,"ngIf","ngIfElse"],["am",""],P,$]},template:function(t,r){1&t&&(u.TgZ(0,"fieldset",0)(1,"div",1)(2,"div",2),u.YNc(3,s9,4,7,"button",3),u.TgZ(4,"input",4),u.NdJ("change",function(s){return r.updateHour(s.target.value)})("blur",function(){return r.handleBlur()})("input",function(s){return r.formatInput(s.target)})("keydown.ArrowUp",function(s){return r.changeHour(r.hourStep),s.preventDefault()})("keydown.ArrowDown",function(s){return r.changeHour(-r.hourStep),s.preventDefault()}),u.qZA(),u.YNc(5,o9,4,7,"button",3),u.qZA(),u.TgZ(6,"div",5),u._uU(7,":"),u.qZA(),u.TgZ(8,"div",6),u.YNc(9,a9,4,7,"button",3),u.TgZ(10,"input",7),u.NdJ("change",function(s){return r.updateMinute(s.target.value)})("blur",function(){return r.handleBlur()})("input",function(s){return r.formatInput(s.target)})("keydown.ArrowUp",function(s){return r.changeMinute(r.minuteStep),s.preventDefault()})("keydown.ArrowDown",function(s){return r.changeMinute(-r.minuteStep),s.preventDefault()}),u.qZA(),u.YNc(11,l9,4,7,"button",3),u.qZA(),u.YNc(12,u9,2,0,"div",8),u.YNc(13,h9,4,9,"div",9),u.YNc(14,f9,1,0,"div",8),u.YNc(15,m9,5,9,"div",10),u.qZA()()),2&t&&(u.ekj("disabled",r.disabled),u.Q6J("disabled",r.disabled),u.xp6(3),u.Q6J("ngIf",r.spinners),u.xp6(1),u.ekj("form-control-sm",r.isSmallSize)("form-control-lg",r.isLargeSize),u.Q6J("value",r.formatHour(null==r.model?null:r.model.hour))("readOnly",r.readonlyInputs)("disabled",r.disabled),u.xp6(1),u.Q6J("ngIf",r.spinners),u.xp6(4),u.Q6J("ngIf",r.spinners),u.xp6(1),u.ekj("form-control-sm",r.isSmallSize)("form-control-lg",r.isLargeSize),u.Q6J("value",r.formatMinSec(null==r.model?null:r.model.minute))("readOnly",r.readonlyInputs)("disabled",r.disabled),u.xp6(1),u.Q6J("ngIf",r.spinners),u.xp6(1),u.Q6J("ngIf",r.seconds),u.xp6(1),u.Q6J("ngIf",r.seconds),u.xp6(1),u.Q6J("ngIf",r.meridian),u.xp6(1),u.Q6J("ngIf",r.meridian))},dependencies:[pr],styles:['ngb-timepicker{font-size:1rem}.ngb-tp{display:flex;align-items:center}.ngb-tp-input-container{width:4em}.ngb-tp-chevron:before{border-style:solid;border-width:.29em .29em 0 0;content:"";display:inline-block;height:.69em;left:.05em;position:relative;top:.15em;transform:rotate(-45deg);vertical-align:middle;width:.69em}.ngb-tp-chevron.bottom:before{top:-.3em;transform:rotate(135deg)}.ngb-tp-input{text-align:center}.ngb-tp-hour,.ngb-tp-minute,.ngb-tp-second,.ngb-tp-meridian{display:flex;flex-direction:column;align-items:center;justify-content:space-around}.ngb-tp-spacer{width:1em;text-align:center}\n'],encapsulation:2}),n})(),Xj=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[gq]}),n})();const mq=(n,e)=>{const{classList:t}=n;if(e)return t.add("fade"),Cv(n),t.add("show","showing"),()=>{t.remove("showing")};t.add("show")},_q=({classList:n})=>(n.add("showing"),()=>{n.remove("show","showing")});let yq=(()=>{class n{constructor(t){this._ngbConfig=t,this.autohide=!0,this.delay=5e3,this.ariaLive="polite"}get animation(){return void 0===this._animation?this._ngbConfig.animation:this._animation}set animation(t){this._animation=t}}return n.\u0275fac=function(t){return new(t||n)(u.LFG(vm))},n.\u0275prov=u.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})(),vq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275dir=u.lG2({type:n,selectors:[["","ngbToastHeader",""]],standalone:!0}),n})(),bq=(()=>{class n{constructor(t,r,i,s){this.ariaLive=t,this._zone=i,this._element=s,this.contentHeaderTpl=null,this.shown=new u.vpe,this.hidden=new u.vpe,null==this.ariaLive&&(this.ariaLive=r.ariaLive),this.delay=r.delay,this.autohide=r.autohide,this.animation=r.animation}ngAfterContentInit(){this._zone.onStable.asObservable().pipe(Zr(1)).subscribe(()=>{this._init(),this.show()})}ngOnChanges(t){"autohide"in t&&(this._clearTimeout(),this._init())}hide(){this._clearTimeout();const t=Hi(this._zone,this._element.nativeElement,_q,{animation:this.animation,runningTransition:"stop"});return t.subscribe(()=>{this.hidden.emit()}),t}show(){const t=Hi(this._zone,this._element.nativeElement,mq,{animation:this.animation,runningTransition:"continue"});return t.subscribe(()=>{this.shown.emit()}),t}_init(){this.autohide&&!this._timeoutID&&(this._timeoutID=setTimeout(()=>this.hide(),this.delay))}_clearTimeout(){this._timeoutID&&(clearTimeout(this._timeoutID),this._timeoutID=null)}}return n.\u0275fac=function(t){return new(t||n)(u.$8M("aria-live"),u.Y36(yq),u.Y36(u.R0b),u.Y36(u.SBq))},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-toast"]],contentQueries:function(t,r,i){if(1&t&&u.Suo(i,vq,7,u.Rgc),2&t){let s;u.iGM(s=u.CRH())&&(r.contentHeaderTpl=s.first)}},hostAttrs:["role","alert","aria-atomic","true",1,"toast"],hostVars:3,hostBindings:function(t,r){2&t&&(u.uIk("aria-live",r.ariaLive),u.ekj("fade",r.animation))},inputs:{animation:"animation",delay:"delay",autohide:"autohide",header:"header"},outputs:{shown:"shown",hidden:"hidden"},exportAs:["ngbToast"],standalone:!0,features:[u.TTD,u.jDz],ngContentSelectors:F1,decls:5,vars:1,consts:function(){let e;return e=$localize`:@@ngb.toast.close-aria:Close`,[["headerTpl",""],[3,"ngIf"],[1,"toast-body"],[1,"me-auto"],[1,"toast-header"],[3,"ngTemplateOutlet"],["type","button","aria-label",e,1,"btn-close",3,"click"]]},template:function(t,r){1&t&&(u.F$t(),u.YNc(0,_9,2,1,"ng-template",null,0,u.W1O),u.YNc(2,v9,3,1,"ng-template",1),u.TgZ(3,"div",2),u.Hsn(4),u.qZA()),2&t&&(u.xp6(2),u.Q6J("ngIf",r.contentHeaderTpl||r.header))},dependencies:[pr,jn],styles:["ngb-toast{display:block}ngb-toast .toast-header .close{margin-left:auto;margin-bottom:.25rem}\n"],encapsulation:2}),n})(),eG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[bq]}),n})(),tG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})(),wq=(()=>{class n{constructor(){this.highlightClass="ngb-highlight",this.accentSensitive=!0}ngOnChanges(t){!this.accentSensitive&&!String.prototype.normalize&&(console.warn("The `accentSensitive` input in `ngb-highlight` cannot be set to `false` in a browser that does not implement the `String.normalize` function. You will have to include a polyfill in your application to use this feature in the current browser."),this.accentSensitive=!0);const r=zU(this.result),i=Array.isArray(this.term)?this.term:[this.term],s=y=>this.accentSensitive?y:KU(y),l=i.map(y=>function T9(n){return n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}(s(zU(y)))).filter(y=>y),h=this.accentSensitive?r:KU(r),m=l.length?h.split(new RegExp(`(${l.join("|")})`,"gmi")):[r];if(this.accentSensitive)this.parts=m;else{let y=0;this.parts=m.map(D=>r.substring(y,y+=D.length))}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["ngb-highlight"]],inputs:{highlightClass:"highlightClass",result:"result",term:"term",accentSensitive:"accentSensitive"},standalone:!0,features:[u.TTD,u.jDz],decls:1,vars:1,consts:[["ngFor","",3,"ngForOf"],[3,"class",4,"ngIf","ngIfElse"],["even",""]],template:function(t,r){1&t&&u.YNc(0,D9,3,2,"ng-template",0),2&t&&u.Q6J("ngForOf",r.parts)},dependencies:[pr,Gr],styles:[".ngb-highlight{font-weight:700}\n"],encapsulation:2,changeDetection:0}),n})();new u.OlP("live announcer delay",{providedIn:"root",factory:function Dq(){return 100}});let nG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[wq]}),n})(),rG=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({}),n})();const Eq=[nj,rj,sj,oj,Ij,Nj,Oj,Fj,rG,zj,qj,Kj,Yj,Xj,eG,tG,nG];let Cq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n}),n.\u0275inj=u.cJS({imports:[Eq,nj,rj,sj,oj,Ij,Nj,Oj,Fj,rG,zj,qj,Kj,Yj,Xj,eG,tG,nG]}),n})();const Kx=function(){return{exact:!0}};let Tq=(()=>{class n{constructor(){this.collapse=!0}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-nav"]],decls:16,vars:7,consts:[[1,"px-3","navbar","navbar-expand-lg","navbar-light","bg-light"],["href","#",1,"navbar-brand"],["type","button","data-toggle","collapse","data-target","#navbarSupportedContent","aria-controls","navbarSupportedContent","aria-expanded","false","aria-label","Toggle navigation",1,"navbar-toggler",3,"click"],[1,"navbar-toggler-icon"],["id","navbarSupportedContent",1,"collapse","navbar-collapse",3,"ngbCollapse"],[1,"navbar-nav","mr-auto"],[1,"nav-item"],["routerLink","/","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/adatok","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"],["routerLink","/ujadat","routerLinkActive","active",1,"nav-link",3,"routerLinkActiveOptions"]],template:function(t,r){1&t&&(u.TgZ(0,"nav",0)(1,"a",1),u._uU(2,"Budapest"),u.qZA(),u.TgZ(3,"button",2),u.NdJ("click",function(){return r.collapse=!r.collapse}),u._UZ(4,"span",3),u.qZA(),u.TgZ(5,"div",4)(6,"ul",5)(7,"li",6)(8,"a",7),u._uU(9,"F\u0151 oldal"),u.qZA()(),u.TgZ(10,"li",6)(11,"a",8),u._uU(12,"Adatok"),u.qZA()(),u.TgZ(13,"li",6)(14,"a",9),u._uU(15,"\xdaj Adat"),u.qZA()()()()()),2&t&&(u.xp6(5),u.Q6J("ngbCollapse",r.collapse),u.xp6(3),u.Q6J("routerLinkActiveOptions",u.DdM(4,Kx)),u.xp6(3),u.Q6J("routerLinkActiveOptions",u.DdM(5,Kx)),u.xp6(3),u.Q6J("routerLinkActiveOptions",u.DdM(6,Kx)))},dependencies:[x,V,Lx]}),n})(),Iq=(()=>{class n{constructor(t){this.modalService=t,this.title="Budapest"}open(t){this.modalService.open(t)}}return n.\u0275fac=function(t){return new(t||n)(u.Y36(Rj))},n.\u0275cmp=u.Xpm({type:n,selectors:[["app-root"]],decls:3,vars:0,consts:[[1,"mx-3"],[1,"container"]],template:function(t,r){1&t&&(u._UZ(0,"app-nav",0),u.TgZ(1,"div",1),u._UZ(2,"router-outlet"),u.qZA())},dependencies:[Vb,Tq]}),n})();const Sq_firebaseConfig={apiKey:"AIzaSyDF_XPFRrfvjVXPW01haPk6QrrpidHcaeg",authDomain:"proba-5f04e.firebaseapp.com",databaseURL:"https://proba-5f04e-default-rtdb.firebaseio.com",projectId:"proba-5f04e",storageBucket:"proba-5f04e.appspot.com",messagingSenderId:"813587862275",appId:"1:813587862275:web:00d55392b5a7fbefbccf36"};let Aq=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=u.oAB({type:n,bootstrap:[Iq]}),n.\u0275inj=u.cJS({imports:[qa,_5,Cq,Wr.hO.initializeApp(Sq_firebaseConfig),GC,p5]}),n})();ud().bootstrapModule(Aq).catch(n=>console.error(n))},9751:(Ct,Ne,L)=>{L.d(Ne,{y:()=>Te});var u=L(930),X=L(727),F=L(8822),he=L(9635),ae=L(2416),le=L(576),Ee=L(2806);let Te=(()=>{class Y{constructor(Re){Re&&(this._subscribe=Re)}lift(Re){const nt=new Y;return nt.source=this,nt.operator=Re,nt}subscribe(Re,nt,yt){const _e=function H(Y){return Y&&Y instanceof u.Lv||function W(Y){return Y&&(0,le.m)(Y.next)&&(0,le.m)(Y.error)&&(0,le.m)(Y.complete)}(Y)&&(0,X.Nn)(Y)}(Re)?Re:new u.Hp(Re,nt,yt);return(0,Ee.x)(()=>{const{operator:ke,source:Fe}=this;_e.add(ke?ke.call(_e,Fe):Fe?this._subscribe(_e):this._trySubscribe(_e))}),_e}_trySubscribe(Re){try{return this._subscribe(Re)}catch(nt){Re.error(nt)}}forEach(Re,nt){return new(nt=ve(nt))((yt,_e)=>{const ke=new u.Hp({next:Fe=>{try{Re(Fe)}catch(We){_e(We),ke.unsubscribe()}},error:_e,complete:yt});this.subscribe(ke)})}_subscribe(Re){var nt;return null===(nt=this.source)||void 0===nt?void 0:nt.subscribe(Re)}[F.L](){return this}pipe(...Re){return(0,he.U)(Re)(this)}toPromise(Re){return new(Re=ve(Re))((nt,yt)=>{let _e;this.subscribe(ke=>_e=ke,ke=>yt(ke),()=>nt(_e))})}}return Y.create=Ke=>new Y(Ke),Y})();function ve(Y){var Ke;return null!==(Ke=Y??ae.v.Promise)&&void 0!==Ke?Ke:Promise}},7579:(Ct,Ne,L)=>{L.d(Ne,{x:()=>Ee});var u=L(9751),X=L(727);const he=(0,L(3888).d)(ve=>function(){ve(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=L(8737),le=L(2806);let Ee=(()=>{class ve extends u.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(H){const Y=new Te(this,this);return Y.operator=H,Y}_throwIfClosed(){if(this.closed)throw new he}next(H){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const Y of this.currentObservers)Y.next(H)}})}error(H){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=H;const{observers:Y}=this;for(;Y.length;)Y.shift().error(H)}})}complete(){(0,le.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:H}=this;for(;H.length;)H.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var H;return(null===(H=this.observers)||void 0===H?void 0:H.length)>0}_trySubscribe(H){return this._throwIfClosed(),super._trySubscribe(H)}_subscribe(H){return this._throwIfClosed(),this._checkFinalizedStatuses(H),this._innerSubscribe(H)}_innerSubscribe(H){const{hasError:Y,isStopped:Ke,observers:Re}=this;return Y||Ke?X.Lc:(this.currentObservers=null,Re.push(H),new X.w0(()=>{this.currentObservers=null,(0,ae.P)(Re,H)}))}_checkFinalizedStatuses(H){const{hasError:Y,thrownError:Ke,isStopped:Re}=this;Y?H.error(Ke):Re&&H.complete()}asObservable(){const H=new u.y;return H.source=this,H}}return ve.create=(W,H)=>new Te(W,H),ve})();class Te extends Ee{constructor(W,H){super(),this.destination=W,this.source=H}next(W){var H,Y;null===(Y=null===(H=this.destination)||void 0===H?void 0:H.next)||void 0===Y||Y.call(H,W)}error(W){var H,Y;null===(Y=null===(H=this.destination)||void 0===H?void 0:H.error)||void 0===Y||Y.call(H,W)}complete(){var W,H;null===(H=null===(W=this.destination)||void 0===W?void 0:W.complete)||void 0===H||H.call(W)}_subscribe(W){var H,Y;return null!==(Y=null===(H=this.source)||void 0===H?void 0:H.subscribe(W))&&void 0!==Y?Y:X.Lc}}},930:(Ct,Ne,L)=>{L.d(Ne,{Hp:()=>yt,Lv:()=>Y});var u=L(576),X=L(727),F=L(2416),he=L(7849),ae=L(5032);const le=ve("C",void 0,void 0);function ve(Le,be,Ie){return{kind:Le,value:be,error:Ie}}var W=L(3410),H=L(2806);class Y extends X.w0{constructor(be){super(),this.isStopped=!1,be?(this.destination=be,(0,X.Nn)(be)&&be.add(this)):this.destination=We}static create(be,Ie,Je){return new yt(be,Ie,Je)}next(be){this.isStopped?Fe(function Te(Le){return ve("N",Le,void 0)}(be),this):this._next(be)}error(be){this.isStopped?Fe(function Ee(Le){return ve("E",void 0,Le)}(be),this):(this.isStopped=!0,this._error(be))}complete(){this.isStopped?Fe(le,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(be){this.destination.next(be)}_error(be){try{this.destination.error(be)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Ke=Function.prototype.bind;function Re(Le,be){return Ke.call(Le,be)}class nt{constructor(be){this.partialObserver=be}next(be){const{partialObserver:Ie}=this;if(Ie.next)try{Ie.next(be)}catch(Je){_e(Je)}}error(be){const{partialObserver:Ie}=this;if(Ie.error)try{Ie.error(be)}catch(Je){_e(Je)}else _e(be)}complete(){const{partialObserver:be}=this;if(be.complete)try{be.complete()}catch(Ie){_e(Ie)}}}class yt extends Y{constructor(be,Ie,Je){let Be;if(super(),(0,u.m)(be)||!be)Be={next:be??void 0,error:Ie??void 0,complete:Je??void 0};else{let pt;this&&F.v.useDeprecatedNextContext?(pt=Object.create(be),pt.unsubscribe=()=>this.unsubscribe(),Be={next:be.next&&Re(be.next,pt),error:be.error&&Re(be.error,pt),complete:be.complete&&Re(be.complete,pt)}):Be=be}this.destination=new nt(Be)}}function _e(Le){F.v.useDeprecatedSynchronousErrorHandling?(0,H.O)(Le):(0,he.h)(Le)}function Fe(Le,be){const{onStoppedNotification:Ie}=F.v;Ie&&W.z.setTimeout(()=>Ie(Le,be))}const We={closed:!0,next:ae.Z,error:function ke(Le){throw Le},complete:ae.Z}},727:(Ct,Ne,L)=>{L.d(Ne,{Lc:()=>le,w0:()=>ae,Nn:()=>Ee});var u=L(576);const F=(0,L(3888).d)(ve=>function(H){ve(this),this.message=H?`${H.length} errors occurred during unsubscription:\n${H.map((Y,Ke)=>`${Ke+1}) ${Y.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=H});var he=L(8737);class ae{constructor(W){this.initialTeardown=W,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let W;if(!this.closed){this.closed=!0;const{_parentage:H}=this;if(H)if(this._parentage=null,Array.isArray(H))for(const Re of H)Re.remove(this);else H.remove(this);const{initialTeardown:Y}=this;if((0,u.m)(Y))try{Y()}catch(Re){W=Re instanceof F?Re.errors:[Re]}const{_finalizers:Ke}=this;if(Ke){this._finalizers=null;for(const Re of Ke)try{Te(Re)}catch(nt){W=W??[],nt instanceof F?W=[...W,...nt.errors]:W.push(nt)}}if(W)throw new F(W)}}add(W){var H;if(W&&W!==this)if(this.closed)Te(W);else{if(W instanceof ae){if(W.closed||W._hasParent(this))return;W._addParent(this)}(this._finalizers=null!==(H=this._finalizers)&&void 0!==H?H:[]).push(W)}}_hasParent(W){const{_parentage:H}=this;return H===W||Array.isArray(H)&&H.includes(W)}_addParent(W){const{_parentage:H}=this;this._parentage=Array.isArray(H)?(H.push(W),H):H?[H,W]:W}_removeParent(W){const{_parentage:H}=this;H===W?this._parentage=null:Array.isArray(H)&&(0,he.P)(H,W)}remove(W){const{_finalizers:H}=this;H&&(0,he.P)(H,W),W instanceof ae&&W._removeParent(this)}}ae.EMPTY=(()=>{const ve=new ae;return ve.closed=!0,ve})();const le=ae.EMPTY;function Ee(ve){return ve instanceof ae||ve&&"closed"in ve&&(0,u.m)(ve.remove)&&(0,u.m)(ve.add)&&(0,u.m)(ve.unsubscribe)}function Te(ve){(0,u.m)(ve)?ve():ve.unsubscribe()}},2416:(Ct,Ne,L)=>{L.d(Ne,{v:()=>u});const u={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},515:(Ct,Ne,L)=>{L.d(Ne,{E:()=>X});const X=new(L(9751).y)(ae=>ae.complete())},8996:(Ct,Ne,L)=>{L.d(Ne,{D:()=>be});var u=L(8421),X=L(5363),F=L(9468),le=L(9751),Te=L(2202),ve=L(576),W=L(9672);function Y(Ie,Je){if(!Ie)throw new Error("Iterable cannot be null");return new le.y(Be=>{(0,W.f)(Be,Je,()=>{const pt=Ie[Symbol.asyncIterator]();(0,W.f)(Be,Je,()=>{pt.next().then(ue=>{ue.done?Be.complete():Be.next(ue.value)})},0,!0)})})}var Ke=L(3670),Re=L(8239),nt=L(1144),yt=L(6495),_e=L(2206),ke=L(4532),Fe=L(3260);function be(Ie,Je){return Je?function Le(Ie,Je){if(null!=Ie){if((0,Ke.c)(Ie))return function he(Ie,Je){return(0,u.Xf)(Ie).pipe((0,F.R)(Je),(0,X.Q)(Je))}(Ie,Je);if((0,nt.z)(Ie))return function Ee(Ie,Je){return new le.y(Be=>{let pt=0;return Je.schedule(function(){pt===Ie.length?Be.complete():(Be.next(Ie[pt++]),Be.closed||this.schedule())})})}(Ie,Je);if((0,Re.t)(Ie))return function ae(Ie,Je){return(0,u.Xf)(Ie).pipe((0,F.R)(Je),(0,X.Q)(Je))}(Ie,Je);if((0,_e.D)(Ie))return Y(Ie,Je);if((0,yt.T)(Ie))return function H(Ie,Je){return new le.y(Be=>{let pt;return(0,W.f)(Be,Je,()=>{pt=Ie[Te.h](),(0,W.f)(Be,Je,()=>{let ue,Mt;try{({value:ue,done:Mt}=pt.next())}catch(it){return void Be.error(it)}Mt?Be.complete():Be.next(ue)},0,!0)}),()=>(0,ve.m)(pt?.return)&&pt.return()})}(Ie,Je);if((0,Fe.L)(Ie))return function We(Ie,Je){return Y((0,Fe.Q)(Ie),Je)}(Ie,Je)}throw(0,ke.z)(Ie)}(Ie,Je):(0,u.Xf)(Ie)}},8421:(Ct,Ne,L)=>{L.d(Ne,{Xf:()=>Ke});var u=L(655),X=L(1144),F=L(8239),he=L(9751),ae=L(3670),le=L(2206),Ee=L(4532),Te=L(6495),ve=L(3260),W=L(576),H=L(7849),Y=L(8822);function Ke(Le){if(Le instanceof he.y)return Le;if(null!=Le){if((0,ae.c)(Le))return function Re(Le){return new he.y(be=>{const Ie=Le[Y.L]();if((0,W.m)(Ie.subscribe))return Ie.subscribe(be);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Le);if((0,X.z)(Le))return function nt(Le){return new he.y(be=>{for(let Ie=0;Ie<Le.length&&!be.closed;Ie++)be.next(Le[Ie]);be.complete()})}(Le);if((0,F.t)(Le))return function yt(Le){return new he.y(be=>{Le.then(Ie=>{be.closed||(be.next(Ie),be.complete())},Ie=>be.error(Ie)).then(null,H.h)})}(Le);if((0,le.D)(Le))return ke(Le);if((0,Te.T)(Le))return function _e(Le){return new he.y(be=>{for(const Ie of Le)if(be.next(Ie),be.closed)return;be.complete()})}(Le);if((0,ve.L)(Le))return function Fe(Le){return ke((0,ve.Q)(Le))}(Le)}throw(0,Ee.z)(Le)}function ke(Le){return new he.y(be=>{(function We(Le,be){var Ie,Je,Be,pt;return(0,u.mG)(this,void 0,void 0,function*(){try{for(Ie=(0,u.KL)(Le);!(Je=yield Ie.next()).done;)if(be.next(Je.value),be.closed)return}catch(ue){Be={error:ue}}finally{try{Je&&!Je.done&&(pt=Ie.return)&&(yield pt.call(Ie))}finally{if(Be)throw Be.error}}be.complete()})})(Le,be).catch(Ie=>be.error(Ie))})}},6451:(Ct,Ne,L)=>{L.d(Ne,{T:()=>le});var u=L(8189),X=L(8421),F=L(515),he=L(3269),ae=L(8996);function le(...Ee){const Te=(0,he.yG)(Ee),ve=(0,he._6)(Ee,1/0),W=Ee;return W.length?1===W.length?(0,X.Xf)(W[0]):(0,u.J)(ve)((0,ae.D)(W,Te)):F.E}},5403:(Ct,Ne,L)=>{L.d(Ne,{x:()=>X});var u=L(930);function X(he,ae,le,Ee,Te){return new F(he,ae,le,Ee,Te)}class F extends u.Lv{constructor(ae,le,Ee,Te,ve,W){super(ae),this.onFinalize=ve,this.shouldUnsubscribe=W,this._next=le?function(H){try{le(H)}catch(Y){ae.error(Y)}}:super._next,this._error=Te?function(H){try{Te(H)}catch(Y){ae.error(Y)}finally{this.unsubscribe()}}:super._error,this._complete=Ee?function(){try{Ee()}catch(H){ae.error(H)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:le}=this;super.unsubscribe(),!le&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},4004:(Ct,Ne,L)=>{L.d(Ne,{U:()=>F});var u=L(4482),X=L(5403);function F(he,ae){return(0,u.e)((le,Ee)=>{let Te=0;le.subscribe((0,X.x)(Ee,ve=>{Ee.next(he.call(ae,ve,Te++))}))})}},8189:(Ct,Ne,L)=>{L.d(Ne,{J:()=>F});var u=L(5577),X=L(4671);function F(he=1/0){return(0,u.z)(X.y,he)}},5577:(Ct,Ne,L)=>{L.d(Ne,{z:()=>Te});var u=L(4004),X=L(8421),F=L(4482),he=L(9672),ae=L(5403),Ee=L(576);function Te(ve,W,H=1/0){return(0,Ee.m)(W)?Te((Y,Ke)=>(0,u.U)((Re,nt)=>W(Y,Re,Ke,nt))((0,X.Xf)(ve(Y,Ke))),H):("number"==typeof W&&(H=W),(0,F.e)((Y,Ke)=>function le(ve,W,H,Y,Ke,Re,nt,yt){const _e=[];let ke=0,Fe=0,We=!1;const Le=()=>{We&&!_e.length&&!ke&&W.complete()},be=Je=>ke<Y?Ie(Je):_e.push(Je),Ie=Je=>{Re&&W.next(Je),ke++;let Be=!1;(0,X.Xf)(H(Je,Fe++)).subscribe((0,ae.x)(W,pt=>{Ke?.(pt),Re?be(pt):W.next(pt)},()=>{Be=!0},void 0,()=>{if(Be)try{for(ke--;_e.length&&ke<Y;){const pt=_e.shift();nt?(0,he.f)(W,nt,()=>Ie(pt)):Ie(pt)}Le()}catch(pt){W.error(pt)}}))};return ve.subscribe((0,ae.x)(W,be,()=>{We=!0,Le()})),()=>{yt?.()}}(Y,Ke,ve,H)))}},5363:(Ct,Ne,L)=>{L.d(Ne,{Q:()=>he});var u=L(9672),X=L(4482),F=L(5403);function he(ae,le=0){return(0,X.e)((Ee,Te)=>{Ee.subscribe((0,F.x)(Te,ve=>(0,u.f)(Te,ae,()=>Te.next(ve),le),()=>(0,u.f)(Te,ae,()=>Te.complete(),le),ve=>(0,u.f)(Te,ae,()=>Te.error(ve),le)))})}},3099:(Ct,Ne,L)=>{L.d(Ne,{B:()=>ae});var u=L(8421),X=L(7579),F=L(930),he=L(4482);function ae(Ee={}){const{connector:Te=(()=>new X.x),resetOnError:ve=!0,resetOnComplete:W=!0,resetOnRefCountZero:H=!0}=Ee;return Y=>{let Ke,Re,nt,yt=0,_e=!1,ke=!1;const Fe=()=>{Re?.unsubscribe(),Re=void 0},We=()=>{Fe(),Ke=nt=void 0,_e=ke=!1},Le=()=>{const be=Ke;We(),be?.unsubscribe()};return(0,he.e)((be,Ie)=>{yt++,!ke&&!_e&&Fe();const Je=nt=nt??Te();Ie.add(()=>{yt--,0===yt&&!ke&&!_e&&(Re=le(Le,H))}),Je.subscribe(Ie),!Ke&&yt>0&&(Ke=new F.Hp({next:Be=>Je.next(Be),error:Be=>{ke=!0,Fe(),Re=le(We,ve,Be),Je.error(Be)},complete:()=>{_e=!0,Fe(),Re=le(We,W),Je.complete()}}),(0,u.Xf)(be).subscribe(Ke))})(Y)}}function le(Ee,Te,...ve){if(!0===Te)return void Ee();if(!1===Te)return;const W=new F.Hp({next:()=>{W.unsubscribe(),Ee()}});return(0,u.Xf)(Te(...ve)).subscribe(W)}},9468:(Ct,Ne,L)=>{L.d(Ne,{R:()=>X});var u=L(4482);function X(F,he=0){return(0,u.e)((ae,le)=>{le.add(F.schedule(()=>ae.subscribe(le),he))})}},8505:(Ct,Ne,L)=>{L.d(Ne,{b:()=>ae});var u=L(576),X=L(4482),F=L(5403),he=L(4671);function ae(le,Ee,Te){const ve=(0,u.m)(le)||Ee||Te?{next:le,error:Ee,complete:Te}:le;return ve?(0,X.e)((W,H)=>{var Y;null===(Y=ve.subscribe)||void 0===Y||Y.call(ve);let Ke=!0;W.subscribe((0,F.x)(H,Re=>{var nt;null===(nt=ve.next)||void 0===nt||nt.call(ve,Re),H.next(Re)},()=>{var Re;Ke=!1,null===(Re=ve.complete)||void 0===Re||Re.call(ve),H.complete()},Re=>{var nt;Ke=!1,null===(nt=ve.error)||void 0===nt||nt.call(ve,Re),H.error(Re)},()=>{var Re,nt;Ke&&(null===(Re=ve.unsubscribe)||void 0===Re||Re.call(ve)),null===(nt=ve.finalize)||void 0===nt||nt.call(ve)}))}):he.y}},4408:(Ct,Ne,L)=>{L.d(Ne,{o:()=>ae});var u=L(727);class X extends u.w0{constructor(Ee,Te){super()}schedule(Ee,Te=0){return this}}const F={setInterval(le,Ee,...Te){const{delegate:ve}=F;return ve?.setInterval?ve.setInterval(le,Ee,...Te):setInterval(le,Ee,...Te)},clearInterval(le){const{delegate:Ee}=F;return(Ee?.clearInterval||clearInterval)(le)},delegate:void 0};var he=L(8737);class ae extends X{constructor(Ee,Te){super(Ee,Te),this.scheduler=Ee,this.work=Te,this.pending=!1}schedule(Ee,Te=0){var ve;if(this.closed)return this;this.state=Ee;const W=this.id,H=this.scheduler;return null!=W&&(this.id=this.recycleAsyncId(H,W,Te)),this.pending=!0,this.delay=Te,this.id=null!==(ve=this.id)&&void 0!==ve?ve:this.requestAsyncId(H,this.id,Te),this}requestAsyncId(Ee,Te,ve=0){return F.setInterval(Ee.flush.bind(Ee,this),ve)}recycleAsyncId(Ee,Te,ve=0){if(null!=ve&&this.delay===ve&&!1===this.pending)return Te;null!=Te&&F.clearInterval(Te)}execute(Ee,Te){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const ve=this._execute(Ee,Te);if(ve)return ve;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Ee,Te){let W,ve=!1;try{this.work(Ee)}catch(H){ve=!0,W=H||new Error("Scheduled action threw falsy error")}if(ve)return this.unsubscribe(),W}unsubscribe(){if(!this.closed){const{id:Ee,scheduler:Te}=this,{actions:ve}=Te;this.work=this.state=this.scheduler=null,this.pending=!1,(0,he.P)(ve,this),null!=Ee&&(this.id=this.recycleAsyncId(Te,Ee,null)),this.delay=null,super.unsubscribe()}}}},7565:(Ct,Ne,L)=>{L.d(Ne,{v:()=>F});var u=L(6063);class X{constructor(ae,le=X.now){this.schedulerActionCtor=ae,this.now=le}schedule(ae,le=0,Ee){return new this.schedulerActionCtor(this,ae).schedule(Ee,le)}}X.now=u.l.now;class F extends X{constructor(ae,le=X.now){super(ae,le),this.actions=[],this._active=!1}flush(ae){const{actions:le}=this;if(this._active)return void le.push(ae);let Ee;this._active=!0;do{if(Ee=ae.execute(ae.state,ae.delay))break}while(ae=le.shift());if(this._active=!1,Ee){for(;ae=le.shift();)ae.unsubscribe();throw Ee}}}},4986:(Ct,Ne,L)=>{L.d(Ne,{P:()=>he,z:()=>F});var u=L(4408);const F=new(L(7565).v)(u.o),he=F},6063:(Ct,Ne,L)=>{L.d(Ne,{l:()=>u});const u={now:()=>(u.delegate||Date).now(),delegate:void 0}},3410:(Ct,Ne,L)=>{L.d(Ne,{z:()=>u});const u={setTimeout(X,F,...he){const{delegate:ae}=u;return ae?.setTimeout?ae.setTimeout(X,F,...he):setTimeout(X,F,...he)},clearTimeout(X){const{delegate:F}=u;return(F?.clearTimeout||clearTimeout)(X)},delegate:void 0}},2202:(Ct,Ne,L)=>{L.d(Ne,{h:()=>X});const X=function u(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(Ct,Ne,L)=>{L.d(Ne,{L:()=>u});const u="function"==typeof Symbol&&Symbol.observable||"@@observable"},3269:(Ct,Ne,L)=>{L.d(Ne,{_6:()=>le,jO:()=>he,yG:()=>ae});var u=L(576),X=L(3532);function F(Ee){return Ee[Ee.length-1]}function he(Ee){return(0,u.m)(F(Ee))?Ee.pop():void 0}function ae(Ee){return(0,X.K)(F(Ee))?Ee.pop():void 0}function le(Ee,Te){return"number"==typeof F(Ee)?Ee.pop():Te}},8737:(Ct,Ne,L)=>{function u(X,F){if(X){const he=X.indexOf(F);0<=he&&X.splice(he,1)}}L.d(Ne,{P:()=>u})},3888:(Ct,Ne,L)=>{function u(X){const he=X(ae=>{Error.call(ae),ae.stack=(new Error).stack});return he.prototype=Object.create(Error.prototype),he.prototype.constructor=he,he}L.d(Ne,{d:()=>u})},2806:(Ct,Ne,L)=>{L.d(Ne,{O:()=>he,x:()=>F});var u=L(2416);let X=null;function F(ae){if(u.v.useDeprecatedSynchronousErrorHandling){const le=!X;if(le&&(X={errorThrown:!1,error:null}),ae(),le){const{errorThrown:Ee,error:Te}=X;if(X=null,Ee)throw Te}}else ae()}function he(ae){u.v.useDeprecatedSynchronousErrorHandling&&X&&(X.errorThrown=!0,X.error=ae)}},9672:(Ct,Ne,L)=>{function u(X,F,he,ae=0,le=!1){const Ee=F.schedule(function(){he(),le?X.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(X.add(Ee),!le)return Ee}L.d(Ne,{f:()=>u})},4671:(Ct,Ne,L)=>{function u(X){return X}L.d(Ne,{y:()=>u})},1144:(Ct,Ne,L)=>{L.d(Ne,{z:()=>u});const u=X=>X&&"number"==typeof X.length&&"function"!=typeof X},2206:(Ct,Ne,L)=>{L.d(Ne,{D:()=>X});var u=L(576);function X(F){return Symbol.asyncIterator&&(0,u.m)(F?.[Symbol.asyncIterator])}},576:(Ct,Ne,L)=>{function u(X){return"function"==typeof X}L.d(Ne,{m:()=>u})},3670:(Ct,Ne,L)=>{L.d(Ne,{c:()=>F});var u=L(8822),X=L(576);function F(he){return(0,X.m)(he[u.L])}},6495:(Ct,Ne,L)=>{L.d(Ne,{T:()=>F});var u=L(2202),X=L(576);function F(he){return(0,X.m)(he?.[u.h])}},8239:(Ct,Ne,L)=>{L.d(Ne,{t:()=>X});var u=L(576);function X(F){return(0,u.m)(F?.then)}},3260:(Ct,Ne,L)=>{L.d(Ne,{L:()=>he,Q:()=>F});var u=L(655),X=L(576);function F(ae){return(0,u.FC)(this,arguments,function*(){const Ee=ae.getReader();try{for(;;){const{value:Te,done:ve}=yield(0,u.qq)(Ee.read());if(ve)return yield(0,u.qq)(void 0);yield yield(0,u.qq)(Te)}}finally{Ee.releaseLock()}})}function he(ae){return(0,X.m)(ae?.getReader)}},3532:(Ct,Ne,L)=>{L.d(Ne,{K:()=>X});var u=L(576);function X(F){return F&&(0,u.m)(F.schedule)}},4482:(Ct,Ne,L)=>{L.d(Ne,{A:()=>X,e:()=>F});var u=L(576);function X(he){return(0,u.m)(he?.lift)}function F(he){return ae=>{if(X(ae))return ae.lift(function(le){try{return he(le,this)}catch(Ee){this.error(Ee)}});throw new TypeError("Unable to lift unknown Observable type")}}},5032:(Ct,Ne,L)=>{function u(){}L.d(Ne,{Z:()=>u})},9635:(Ct,Ne,L)=>{L.d(Ne,{U:()=>F,z:()=>X});var u=L(4671);function X(...he){return F(he)}function F(he){return 0===he.length?u.y:1===he.length?he[0]:function(le){return he.reduce((Ee,Te)=>Te(Ee),le)}}},7849:(Ct,Ne,L)=>{L.d(Ne,{h:()=>F});var u=L(2416),X=L(3410);function F(he){X.z.setTimeout(()=>{const{onUnhandledError:ae}=u.v;if(!ae)throw he;ae(he)})}},4532:(Ct,Ne,L)=>{function u(X){return new TypeError(`You provided ${null!==X&&"object"==typeof X?"an invalid object":`'${X}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}L.d(Ne,{z:()=>u})},655:(Ct,Ne,L)=>{function he(ge,De){var Ae={};for(var Oe in ge)Object.prototype.hasOwnProperty.call(ge,Oe)&&De.indexOf(Oe)<0&&(Ae[Oe]=ge[Oe]);if(null!=ge&&"function"==typeof Object.getOwnPropertySymbols){var rt=0;for(Oe=Object.getOwnPropertySymbols(ge);rt<Oe.length;rt++)De.indexOf(Oe[rt])<0&&Object.prototype.propertyIsEnumerable.call(ge,Oe[rt])&&(Ae[Oe[rt]]=ge[Oe[rt]])}return Ae}function Y(ge,De,Ae,Oe){return new(Ae||(Ae=Promise))(function(je,st){function wt(At){try{Tt(Oe.next(At))}catch(vn){st(vn)}}function Gt(At){try{Tt(Oe.throw(At))}catch(vn){st(vn)}}function Tt(At){At.done?je(At.value):function rt(je){return je instanceof Ae?je:new Ae(function(st){st(je)})}(At.value).then(wt,Gt)}Tt((Oe=Oe.apply(ge,De||[])).next())})}function Le(ge){return this instanceof Le?(this.v=ge,this):new Le(ge)}function be(ge,De,Ae){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var rt,Oe=Ae.apply(ge,De||[]),je=[];return rt={},st("next"),st("throw"),st("return"),rt[Symbol.asyncIterator]=function(){return this},rt;function st(an){Oe[an]&&(rt[an]=function(Ln){return new Promise(function(Lr,Br){je.push([an,Ln,Lr,Br])>1||wt(an,Ln)})})}function wt(an,Ln){try{!function Gt(an){an.value instanceof Le?Promise.resolve(an.value.v).then(Tt,At):vn(je[0][2],an)}(Oe[an](Ln))}catch(Lr){vn(je[0][3],Lr)}}function Tt(an){wt("next",an)}function At(an){wt("throw",an)}function vn(an,Ln){an(Ln),je.shift(),je.length&&wt(je[0][0],je[0][1])}}function Je(ge){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ae,De=ge[Symbol.asyncIterator];return De?De.call(ge):(ge=function yt(ge){var De="function"==typeof Symbol&&Symbol.iterator,Ae=De&&ge[De],Oe=0;if(Ae)return Ae.call(ge);if(ge&&"number"==typeof ge.length)return{next:function(){return ge&&Oe>=ge.length&&(ge=void 0),{value:ge&&ge[Oe++],done:!ge}}};throw new TypeError(De?"Object is not iterable.":"Symbol.iterator is not defined.")}(ge),Ae={},Oe("next"),Oe("throw"),Oe("return"),Ae[Symbol.asyncIterator]=function(){return this},Ae);function Oe(je){Ae[je]=ge[je]&&function(st){return new Promise(function(wt,Gt){!function rt(je,st,wt,Gt){Promise.resolve(Gt).then(function(Tt){je({value:Tt,done:wt})},st)}(wt,Gt,(st=ge[je](st)).done,st.value)})}}}L.d(Ne,{FC:()=>be,KL:()=>Je,_T:()=>he,mG:()=>Y,qq:()=>Le})},4650:(Ct,Ne,L)=>{L.d(Ne,{$8M:()=>Wa,$WT:()=>jr,$Z:()=>dE,AFp:()=>Rb,ALo:()=>fy,AaK:()=>Te,BQk:()=>yg,CHM:()=>El,CRH:()=>Rg,CZH:()=>gu,CqO:()=>FE,D6c:()=>tw,DdM:()=>HC,EJc:()=>Fb,EpF:()=>kE,F$t:()=>GE,F4k:()=>F0,FYo:()=>Xv,FiY:()=>Es,Gf:()=>Rf,GfV:()=>WD,Gpc:()=>H,Hsn:()=>$E,Ikx:()=>bf,JOm:()=>di,KtG:()=>Cl,LFG:()=>Cn,LMc:()=>jN,Lbi:()=>yN,Lck:()=>KA,MAs:()=>pg,MGl:()=>B_,MMx:()=>ub,MT6:()=>mA,NdJ:()=>L0,OlP:()=>fn,Oqu:()=>vf,P3R:()=>gc,PXZ:()=>Bg,Q6J:()=>Ud,QGY:()=>k0,Qsj:()=>o_,QtT:()=>kC,R0b:()=>wo,RDi:()=>Yp,Rgc:()=>Nf,SBq:()=>yc,SDv:()=>ly,Sil:()=>Lb,Suo:()=>Eb,TTD:()=>Qc,TgZ:()=>mg,Tol:()=>nC,Udp:()=>nl,VKq:()=>pb,W1O:()=>eT,WLB:()=>Sf,X6Q:()=>NN,XFs:()=>te,Xpm:()=>ys,Xts:()=>Td,Y36:()=>wc,YKP:()=>lb,YNc:()=>RE,Yjl:()=>Xt,Yz7:()=>At,Z0I:()=>Lr,ZZ4:()=>Xb,_Bn:()=>ab,_UZ:()=>L_,_Vd:()=>tu,_c5:()=>GT,_uU:()=>G0,aQg:()=>ew,c2e:()=>kb,cJS:()=>an,cg1:()=>$d,dDg:()=>TT,dqk:()=>kt,eFA:()=>AT,eJc:()=>Tb,ekj:()=>gi,eoX:()=>Uf,f3M:()=>lr,g9A:()=>xb,h0i:()=>zd,hGG:()=>Gf,hij:()=>H_,iGM:()=>Mg,ifc:()=>Ce,ip1:()=>ll,jDz:()=>UC,kEZ:()=>zC,kL8:()=>Eg,lG2:()=>Pt,lcZ:()=>mb,lqb:()=>Sd,lri:()=>Iy,n5z:()=>Ju,oAB:()=>se,oxw:()=>jE,pQV:()=>PC,q4F:()=>nr,qLn:()=>Md,qOj:()=>A0,qZA:()=>_g,rWj:()=>Do,s9C:()=>B0,sBO:()=>Hb,s_b:()=>gy,soG:()=>Vf,tb:()=>Qd,tp0:()=>Fo,uIk:()=>O0,vHH:()=>_e,vpe:()=>yi,wAp:()=>Lt,xp6:()=>h_,ynx:()=>Gs,z2F:()=>Ay,zSh:()=>Yv,zW0:()=>au,zs3:()=>Od});var u=L(7579),X=L(727),F=L(9751),he=L(6451),ae=L(3099);function le(o){for(let a in o)if(o[a]===le)return a;throw Error("Could not find renamed property on target object.")}function Ee(o,a){for(const c in a)a.hasOwnProperty(c)&&!o.hasOwnProperty(c)&&(o[c]=a[c])}function Te(o){if("string"==typeof o)return o;if(Array.isArray(o))return"["+o.map(Te).join(", ")+"]";if(null==o)return""+o;if(o.overriddenName)return`${o.overriddenName}`;if(o.name)return`${o.name}`;const a=o.toString();if(null==a)return""+a;const c=a.indexOf("\n");return-1===c?a:a.substring(0,c)}function ve(o,a){return null==o||""===o?null===a?"":a:null==a||""===a?o:o+" "+a}const W=le({__forward_ref__:le});function H(o){return o.__forward_ref__=H,o.toString=function(){return Te(this())},o}function Y(o){return Ke(o)?o():o}function Ke(o){return"function"==typeof o&&o.hasOwnProperty(W)&&o.__forward_ref__===H}function Re(o){return o&&!!o.\u0275providers}const yt="https://g.co/ng/security#xss";class _e extends Error{constructor(a,c){super(ke(a,c)),this.code=a}}function ke(o,a){return`NG0${Math.abs(o)}${a?": "+a.trim():""}`}function Fe(o){return"string"==typeof o?o:null==o?"":String(o)}function Je(o,a){throw new _e(-201,!1)}function st(o,a,c,d){throw new Error(`ASSERTION ERROR: ${o}`+(null==d?"":` [Expected=> ${c} ${d} ${a} <=Actual]`))}function At(o){return{token:o.token,providedIn:o.providedIn||null,factory:o.factory,value:void 0}}function an(o){return{providers:o.providers||[],imports:o.imports||[]}}function Ln(o){return Br(o,oi)||Br(o,J)}function Lr(o){return null!==Ln(o)}function Br(o,a){return o.hasOwnProperty(a)?o[a]:null}function Vr(o){return o&&(o.hasOwnProperty(ie)||o.hasOwnProperty(fe))?o[ie]:null}const oi=le({\u0275prov:le}),ie=le({\u0275inj:le}),J=le({ngInjectableDef:le}),fe=le({ngInjectorDef:le});var te=(()=>((te=te||{})[te.Default=0]="Default",te[te.Host=1]="Host",te[te.Self=2]="Self",te[te.SkipSelf=4]="SkipSelf",te[te.Optional=8]="Optional",te))();let qe;function pn(o){const a=qe;return qe=o,a}function Yt(o,a,c){const d=Ln(o);return d&&"root"==d.providedIn?void 0===d.value?d.value=d.factory():d.value:c&te.Optional?null:void 0!==a?a:void Je(Te(o))}const kt=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),Ur={},Un="__NG_DI_FLAG__",Yn="ngTempTokenPath",gn="ngTokenPath",Mn=/\n/gm,Jr="\u0275",Tn="__source";let gs;function cn(o){const a=gs;return gs=o,a}function Ps(o,a=te.Default){if(void 0===gs)throw new _e(-203,!1);return null===gs?Yt(o,void 0,a):gs.get(o,a&te.Optional?null:void 0,a)}function Cn(o,a=te.Default){return(function gt(){return qe}()||Ps)(Y(o),a)}function lr(o,a=te.Default){return Cn(o,yr(a))}function yr(o){return typeof o>"u"||"number"==typeof o?o:0|(o.optional&&8)|(o.host&&1)|(o.self&&2)|(o.skipSelf&&4)}function ms(o){const a=[];for(let c=0;c<o.length;c++){const d=Y(o[c]);if(Array.isArray(d)){if(0===d.length)throw new _e(900,!1);let f,_=te.Default;for(let b=0;b<d.length;b++){const C=d[b],T=_s(C);"number"==typeof T?-1===T?f=C.token:_|=T:f=C}a.push(Cn(f,_))}else a.push(Cn(d))}return a}function Hn(o,a){return o[Un]=a,o.prototype[Un]=a,o}function _s(o){return o[Un]}function U(o){return{toString:o}.toString()}var K=(()=>((K=K||{})[K.OnPush=0]="OnPush",K[K.Default=1]="Default",K))(),Ce=(()=>{return(o=Ce||(Ce={}))[o.Emulated=0]="Emulated",o[o.None=2]="None",o[o.ShadowDom=3]="ShadowDom",Ce;var o})();const re={},$e=[],Ft=le({\u0275cmp:le}),mn=le({\u0275dir:le}),fr=le({\u0275pipe:le}),Zn=le({\u0275mod:le}),An=le({\u0275fac:le}),ln=le({__NG_ELEMENT_ID__:le});let ai=0;function ys(o){return U(()=>{const a=Cu(o),c={...a,decls:o.decls,vars:o.vars,template:o.template,consts:o.consts||null,ngContentSelectors:o.ngContentSelectors,onPush:o.changeDetection===K.OnPush,directiveDefs:null,pipeDefs:null,dependencies:a.standalone&&o.dependencies||null,getStandaloneInjector:null,data:o.data||{},encapsulation:o.encapsulation||Ce.Emulated,id:"c"+ai++,styles:o.styles||$e,_:null,schemas:o.schemas||null,tView:null};yp(c);const d=o.dependencies;return c.directiveDefs=xa(d,!1),c.pipeDefs=xa(d,!0),c})}function pl(o){return Nt(o)||bn(o)}function me(o){return null!==o}function se(o){return U(()=>({type:o.type,bootstrap:o.bootstrap||$e,declarations:o.declarations||$e,imports:o.imports||$e,exports:o.exports||$e,transitiveCompileScopes:null,schemas:o.schemas||null,id:o.id||null}))}function St(o,a){if(null==o)return re;const c={};for(const d in o)if(o.hasOwnProperty(d)){let f=o[d],_=f;Array.isArray(f)&&(_=f[1],f=f[0]),c[f]=d,a&&(a[f]=_)}return c}function Pt(o){return U(()=>{const a=Cu(o);return yp(a),a})}function Xt(o){return{type:o.type,name:o.name,factory:null,pure:!1!==o.pure,standalone:!0===o.standalone,onDestroy:o.type.prototype.ngOnDestroy||null}}function Nt(o){return o[Ft]||null}function bn(o){return o[mn]||null}function _n(o){return o[fr]||null}function jr(o){const a=Nt(o)||bn(o)||_n(o);return null!==a&&a.standalone}function vr(o,a){const c=o[Zn]||null;if(!c&&!0===a)throw new Error(`Type ${Te(o)} does not have '\u0275mod' property.`);return c}function Cu(o){const a={};return{type:o.type,providersResolver:null,factory:null,hostBindings:o.hostBindings||null,hostVars:o.hostVars||0,hostAttrs:o.hostAttrs||null,contentQueries:o.contentQueries||null,declaredInputs:a,exportAs:o.exportAs||null,standalone:!0===o.standalone,selectors:o.selectors||$e,viewQuery:o.viewQuery||null,features:o.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:St(o.inputs,a),outputs:St(o.outputs)}}function yp(o){o.features?.forEach(a=>a(o))}function xa(o,a){if(!o)return null;const c=a?_n:pl;return()=>("function"==typeof o?o():o).map(d=>c(d)).filter(me)}const Ki=0,ot=1,$t=2,zn=3,Yi=4,Rn=5,br=6,Gr=7,ur=8,gl=9,pr=10,Zt=11,ml=12,Ho=13,Qs=14,zo=15,gr=16,Pa=17,Js=18,vs=19,Wo=20,jn=21,Bn=22,_l=1,qc=2,ka=7,No=8,qo=9,$r=10;function xi(o){return Array.isArray(o)&&"object"==typeof o[_l]}function Pi(o){return Array.isArray(o)&&!0===o[_l]}function yl(o){return 0!=(4&o.flags)}function Fa(o){return o.componentOffset>-1}function Kc(o){return 1==(1&o.flags)}function Zi(o){return!!o.template}function Iu(o){return 0!=(256&o[$t])}function Fs(o,a){return o.hasOwnProperty(An)?o[An]:null}class Ko{constructor(a,c,d){this.previousValue=a,this.currentValue=c,this.firstChange=d}isFirstChange(){return this.firstChange}}function Qc(){return vl}function vl(o){return o.type.prototype.ngOnChanges&&(o.setInput=Jc),ph}function ph(){const o=wp(this),a=o?.current;if(a){const c=o.previous;if(c===re)o.previous=a;else for(let d in a)c[d]=a[d];o.current=null,this.ngOnChanges(a)}}function Jc(o,a,c,d){const f=this.declaredInputs[c],_=wp(o)||function Nu(o,a){return o[Mo]=a}(o,{previous:re,current:null}),b=_.current||(_.current={}),C=_.previous,T=C[f];b[f]=new Ko(T&&T.currentValue,a,C===re),o[d]=a}Qc.ngInherit=!0;const Mo="__ngSimpleChanges__";function wp(o){return o[Mo]||null}const Ci=function(o,a,c){};function Hr(o){for(;Array.isArray(o);)o=o[Ki];return o}function to(o,a){return Hr(a[o])}function zr(o,a){return Hr(a[o.index])}function mh(o,a){return o.data[a]}function ui(o,a){return o[a]}function Ar(o,a){const c=a[o];return xi(c)?c:c[Ki]}function no(o){return 64==(64&o[$t])}function Oo(o,a){return null==a?null:o[a]}function Va(o){o[Js]=0}function wl(o,a){o[Rn]+=a;let c=o,d=o[zn];for(;null!==d&&(1===a&&1===c[Rn]||-1===a&&0===c[Rn]);)d[Rn]+=a,c=d,d=d[zn]}const jt={lFrame:td(null),bindingsEnabled:!0};function xu(){return jt.bindingsEnabled}function ye(){return jt.lFrame.lView}function Ht(){return jt.lFrame.tView}function El(o){return jt.lFrame.contextLView=o,o[ur]}function Cl(o){return jt.lFrame.contextLView=null,o}function Nr(){let o=Yo();for(;null!==o&&64===o.type;)o=o.parent;return o}function Yo(){return jt.lFrame.currentTNode}function Pu(){const o=jt.lFrame,a=o.currentTNode;return o.isParent?a:a.parent}function Ti(o,a){const c=jt.lFrame;c.currentTNode=o,c.isParent=a}function wh(){return jt.lFrame.isParent}function ku(){jt.lFrame.isParent=!1}function wr(){const o=jt.lFrame;let a=o.bindingRootIndex;return-1===a&&(a=o.bindingRootIndex=o.tView.bindingStartIndex),a}function Ji(){return jt.lFrame.bindingIndex}function Zo(){return jt.lFrame.bindingIndex++}function Xi(o){const a=jt.lFrame,c=a.bindingIndex;return a.bindingIndex=a.bindingIndex+o,c}function Il(o){jt.lFrame.inI18n=o}function Fu(o,a){const c=jt.lFrame;c.bindingIndex=c.bindingRootIndex=o,Dr(a)}function Dr(o){jt.lFrame.currentDirectiveIndex=o}function ed(){return jt.lFrame.currentQueryIndex}function Lu(o){jt.lFrame.currentQueryIndex=o}function Eh(o){const a=o[ot];return 2===a.type?a.declTNode:1===a.type?o[br]:null}function Bu(o,a,c){if(c&te.SkipSelf){let f=a,_=o;for(;!(f=f.parent,null!==f||c&te.Host||(f=Eh(_),null===f||(_=_[zo],10&f.type))););if(null===f)return!1;a=f,o=_}const d=jt.lFrame=Sl();return d.currentTNode=a,d.lView=o,!0}function Vu(o){const a=Sl(),c=o[ot];jt.lFrame=a,a.currentTNode=c.firstChild,a.lView=o,a.tView=c,a.contextLView=o,a.bindingIndex=c.bindingStartIndex,a.inI18n=!1}function Sl(){const o=jt.lFrame,a=null===o?null:o.child;return null===a?td(o):a}function td(o){const a={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:o,child:null,inI18n:!1};return null!==o&&(o.child=a),a}function Al(){const o=jt.lFrame;return jt.lFrame=o.parent,o.currentTNode=null,o.lView=null,o}const Ch=Al;function Uu(){const o=Al();o.isParent=!0,o.tView=null,o.selectedIndex=-1,o.contextLView=null,o.elementDepthCount=0,o.currentDirectiveIndex=-1,o.currentNamespace=null,o.bindingRootIndex=-1,o.bindingIndex=-1,o.currentQueryIndex=0}function Xr(){return jt.lFrame.selectedIndex}function io(o){jt.lFrame.selectedIndex=o}function Qn(){const o=jt.lFrame;return mh(o.tView,o.selectedIndex)}function $u(o,a){for(let c=a.directiveStart,d=a.directiveEnd;c<d;c++){const _=o.data[c].type.prototype,{ngAfterContentInit:b,ngAfterContentChecked:C,ngAfterViewInit:T,ngAfterViewChecked:M,ngOnDestroy:x}=_;b&&(o.contentHooks??(o.contentHooks=[])).push(-c,b),C&&((o.contentHooks??(o.contentHooks=[])).push(c,C),(o.contentCheckHooks??(o.contentCheckHooks=[])).push(c,C)),T&&(o.viewHooks??(o.viewHooks=[])).push(-c,T),M&&((o.viewHooks??(o.viewHooks=[])).push(c,M),(o.viewCheckHooks??(o.viewCheckHooks=[])).push(c,M)),null!=x&&(o.destroyHooks??(o.destroyHooks=[])).push(c,x)}}function nd(o,a,c){id(o,a,3,c)}function rd(o,a,c,d){(3&o[$t])===c&&id(o,a,c,d)}function Ih(o,a){let c=o[$t];(3&c)===a&&(c&=2047,c+=1,o[$t]=c)}function id(o,a,c,d){const _=d??-1,b=a.length-1;let C=0;for(let T=void 0!==d?65535&o[Js]:0;T<b;T++)if("number"==typeof a[T+1]){if(C=a[T],null!=d&&C>=d)break}else a[T]<0&&(o[Js]+=65536),(C<_||-1==_)&&(ja(o,c,a,T),o[Js]=(4294901760&o[Js])+T+2),T++}function ja(o,a,c,d){const f=c[d]<0,_=c[d+1],C=o[f?-c[d]:c[d]];if(f){if(o[$t]>>11<o[Js]>>16&&(3&o[$t])===a){o[$t]+=2048,Ci(4,C,_);try{_.call(C)}finally{Ci(5,C,_)}}}else{Ci(4,C,_);try{_.call(C)}finally{Ci(5,C,_)}}}const Ga=-1;class so{constructor(a,c,d){this.factory=a,this.resolving=!1,this.canSeeViewProviders=c,this.injectImpl=d}}function $a(o,a,c){let d=0;for(;d<c.length;){const f=c[d];if("number"==typeof f){if(0!==f)break;d++;const _=c[d++],b=c[d++],C=c[d++];o.setAttribute(a,b,C,_)}else{const _=f,b=c[++d];ea(_)?o.setProperty(a,_,b):o.setAttribute(a,_,b),d++}}return d}function sd(o){return 3===o||4===o||6===o}function ea(o){return 64===o.charCodeAt(0)}function ta(o,a){if(null!==a&&0!==a.length)if(null===o||0===o.length)o=a.slice();else{let c=-1;for(let d=0;d<a.length;d++){const f=a[d];"number"==typeof f?c=f:0===c||Wu(o,c,f,null,-1===c||2===c?a[++d]:null)}}return o}function Wu(o,a,c,d,f){let _=0,b=o.length;if(-1===a)b=-1;else for(;_<o.length;){const C=o[_++];if("number"==typeof C){if(C===a){b=-1;break}if(C>a){b=_-1;break}}}for(;_<o.length;){const C=o[_];if("number"==typeof C)break;if(C===c){if(null===d)return void(null!==f&&(o[_+1]=f));if(d===o[_+1])return void(o[_+2]=f)}_++,null!==d&&_++,null!==f&&_++}-1!==b&&(o.splice(b,0,a),_=b+1),o.splice(_++,0,c),null!==d&&o.splice(_++,0,d),null!==f&&o.splice(_++,0,f)}function na(o){return o!==Ga}function xo(o){return 32767&o}function ra(o,a){let c=function Sh(o){return o>>16}(o),d=a;for(;c>0;)d=d[zo],c--;return d}let qu=!0;function Ml(o){const a=qu;return qu=o,a}const Ku=255,Ah=5;let ia=0;const ws={};function od(o,a){const c=za(o,a);if(-1!==c)return c;const d=a[ot];d.firstCreatePass&&(o.injectorIndex=a.length,Ha(d.data,o),Ha(a,null),Ha(d.blueprint,null));const f=Nh(o,a),_=o.injectorIndex;if(na(f)){const b=xo(f),C=ra(f,a),T=C[ot].data;for(let M=0;M<8;M++)a[_+M]=C[b+M]|T[b+M]}return a[_+8]=f,_}function Ha(o,a){o.push(0,0,0,0,0,0,0,0,a)}function za(o,a){return-1===o.injectorIndex||o.parent&&o.parent.injectorIndex===o.injectorIndex||null===a[o.injectorIndex+8]?-1:o.injectorIndex}function Nh(o,a){if(o.parent&&-1!==o.parent.injectorIndex)return o.parent.injectorIndex;let c=0,d=null,f=a;for(;null!==f;){if(d=xl(f),null===d)return Ga;if(c++,f=f[zo],-1!==d.injectorIndex)return d.injectorIndex|c<<16}return Ga}function Fn(o,a,c){!function oo(o,a,c){let d;"string"==typeof c?d=c.charCodeAt(0)||0:c.hasOwnProperty(ln)&&(d=c[ln]),null==d&&(d=c[ln]=ia++);const f=d&Ku;a.data[o+(f>>Ah)]|=1<<f}(o,a,c)}function Yu(o,a,c){if(c&te.Optional||void 0!==o)return o;Je()}function ad(o,a,c,d){if(c&te.Optional&&void 0===d&&(d=null),!(c&(te.Self|te.Host))){const f=o[gl],_=pn(void 0);try{return f?f.get(a,d,c&te.Optional):Yt(a,d,c&te.Optional)}finally{pn(_)}}return Yu(d,0,c)}function Zu(o,a,c,d=te.Default,f){if(null!==o){if(1024&a[$t]){const b=function ud(o,a,c,d,f){let _=o,b=a;for(;null!==_&&null!==b&&1024&b[$t]&&!(256&b[$t]);){const C=Qu(_,b,c,d|te.Self,ws);if(C!==ws)return C;let T=_.parent;if(!T){const M=b[jn];if(M){const x=M.get(c,ws,d);if(x!==ws)return x}T=xl(b),b=b[zo]}_=T}return f}(o,a,c,d,ws);if(b!==ws)return b}const _=Qu(o,a,c,d,ws);if(_!==ws)return _}return ad(a,c,d,f)}function Qu(o,a,c,d,f){const _=function ld(o){if("string"==typeof o)return o.charCodeAt(0)||0;const a=o.hasOwnProperty(ln)?o[ln]:void 0;return"number"==typeof a?a>=0?a&Ku:Sp:a}(c);if("function"==typeof _){if(!Bu(a,o,d))return d&te.Host?Yu(f,0,d):ad(a,c,d,f);try{const b=_(d);if(null!=b||d&te.Optional)return b;Je()}finally{Ch()}}else if("number"==typeof _){let b=null,C=za(o,a),T=Ga,M=d&te.Host?a[gr][br]:null;for((-1===C||d&te.SkipSelf)&&(T=-1===C?Nh(o,a):a[C+8],T!==Ga&&Ol(d,!1)?(b=a[ot],C=xo(T),a=ra(T,a)):C=-1);-1!==C;){const x=a[ot];if(Rl(_,C,x.data)){const V=Mr(C,a,c,b,d,M);if(V!==ws)return V}T=a[C+8],T!==Ga&&Ol(d,a[ot].data[C+8]===M)&&Rl(_,C,a)?(b=x,C=xo(T),a=ra(T,a)):C=-1}}return f}function Mr(o,a,c,d,f,_){const b=a[ot],C=b.data[o+8],x=sa(C,b,c,null==d?Fa(C)&&qu:d!=b&&0!=(3&C.type),f&te.Host&&_===C);return null!==x?mr(a,b,x,C):ws}function sa(o,a,c,d,f){const _=o.providerIndexes,b=a.data,C=1048575&_,T=o.directiveStart,x=_>>20,q=f?C+x:o.directiveEnd;for(let ne=d?C:C+x;ne<q;ne++){const Se=b[ne];if(ne<T&&c===Se||ne>=T&&Se.type===c)return ne}if(f){const ne=b[T];if(ne&&Zi(ne)&&ne.type===c)return T}return null}function mr(o,a,c,d){let f=o[c];const _=a.data;if(function Bm(o){return o instanceof so}(f)){const b=f;b.resolving&&function Le(o,a){const c=a?`. Dependency path: ${a.join(" > ")} > ${o}`:"";throw new _e(-200,`Circular dependency in DI detected for ${o}${c}`)}(function We(o){return"function"==typeof o?o.name||o.toString():"object"==typeof o&&null!=o&&"function"==typeof o.type?o.type.name||o.type.toString():Fe(o)}(_[c]));const C=Ml(b.canSeeViewProviders);b.resolving=!0;const T=b.injectImpl?pn(b.injectImpl):null;Bu(o,d,te.Default);try{f=o[c]=b.factory(void 0,_,o,d),a.firstCreatePass&&c>=d.directiveStart&&function Lm(o,a,c){const{ngOnChanges:d,ngOnInit:f,ngDoCheck:_}=a.type.prototype;if(d){const b=vl(a);(c.preOrderHooks??(c.preOrderHooks=[])).push(o,b),(c.preOrderCheckHooks??(c.preOrderCheckHooks=[])).push(o,b)}f&&(c.preOrderHooks??(c.preOrderHooks=[])).push(0-o,f),_&&((c.preOrderHooks??(c.preOrderHooks=[])).push(o,_),(c.preOrderCheckHooks??(c.preOrderCheckHooks=[])).push(o,_))}(c,_[c],a)}finally{null!==T&&pn(T),Ml(C),b.resolving=!1,Ch()}}return f}function Rl(o,a,c){return!!(c[a+(o>>Ah)]&1<<o)}function Ol(o,a){return!(o&te.Self||o&te.Host&&a)}class ao{constructor(a,c){this._tNode=a,this._lView=c}get(a,c,d){return Zu(this._tNode,this._lView,a,yr(d),c)}}function Sp(){return new ao(Nr(),ye())}function Ju(o){return U(()=>{const a=o.prototype.constructor,c=a[An]||oa(a),d=Object.prototype;let f=Object.getPrototypeOf(o.prototype).constructor;for(;f&&f!==d;){const _=f[An]||oa(f);if(_&&_!==c)return _;f=Object.getPrototypeOf(f)}return _=>new _})}function oa(o){return Ke(o)?()=>{const a=oa(Y(o));return a&&a()}:Fs(o)}function xl(o){const a=o[ot],c=a.type;return 2===c?a.declTNode:1===c?o[br]:null}function Wa(o){return function Mh(o,a){if("class"===a)return o.classes;if("style"===a)return o.styles;const c=o.attrs;if(c){const d=c.length;let f=0;for(;f<d;){const _=c[f];if(sd(_))break;if(0===_)f+=2;else if("number"==typeof _)for(f++;f<d&&"string"==typeof c[f];)f++;else{if(_===a)return c[f+1];f+=2}}}return null}(Nr(),o)}const qa="__parameters__";function la(o,a,c){return U(()=>{const d=function aa(o){return function(...c){if(o){const d=o(...c);for(const f in d)this[f]=d[f]}}}(a);function f(..._){if(this instanceof f)return d.apply(this,_),this;const b=new f(..._);return C.annotation=b,C;function C(T,M,x){const V=T.hasOwnProperty(qa)?T[qa]:Object.defineProperty(T,qa,{value:[]})[qa];for(;V.length<=x;)V.push(null);return(V[x]=V[x]||[]).push(b),T}}return c&&(f.prototype=Object.create(c.prototype)),f.prototype.ngMetadataName=o,f.annotationCls=f,f})}class fn{constructor(a,c){this._desc=a,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof c?this.__NG_ELEMENT_ID__=c:void 0!==c&&(this.\u0275prov=At({token:this,providedIn:c.providedIn||"root",factory:c.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function Bs(o,a){o.forEach(c=>Array.isArray(c)?Bs(c,a):a(c))}function Op(o,a,c){a>=o.length?o.push(c):o.splice(a,0,c)}function ca(o,a){return a>=o.length-1?o.pop():o.splice(a,1)[0]}function ec(o,a){const c=[];for(let d=0;d<o;d++)c.push(a);return c}function Ii(o,a,c){let d=Jn(o,a);return d>=0?o[1|d]=c:(d=~d,function fd(o,a,c,d){let f=o.length;if(f==a)o.push(c,d);else if(1===f)o.push(d,o[0]),o[0]=c;else{for(f--,o.push(o[f-1],o[f]);f>a;)o[f]=o[f-2],f--;o[a]=c,o[a+1]=d}}(o,d,a,c)),d}function ko(o,a){const c=Jn(o,a);if(c>=0)return o[1|c]}function Jn(o,a){return function wn(o,a,c){let d=0,f=o.length>>c;for(;f!==d;){const _=d+(f-d>>1),b=o[_<<c];if(a===b)return _<<c;b>a?f=_:d=_+1}return~(f<<c)}(o,a,1)}const Es=Hn(la("Optional"),8),Fo=Hn(la("SkipSelf"),4);var di=(()=>((di=di||{})[di.Important=1]="Important",di[di.DashCase=2]="DashCase",di))();const co=/^>|^->|<!--|-->|--!>|<!-$/g,$l=/(<|>)/,qn="\u200b$1\u200b";const Vh=new Map;let Uh=0;const Q="__ngContext__";function de(o,a){xi(a)?(o[Q]=a[Wo],function Lp(o){Vh.set(o[Wo],o)}(a)):o[Q]=a}let rs;function Ka(o,a){return rs(o,a)}function ac(o){const a=o[zn];return Pi(a)?a[zn]:a}function lc(o){return Up(o[Ho])}function Ya(o){return Up(o[Yi])}function Up(o){for(;null!==o&&!Pi(o);)o=o[Yi];return o}function zl(o,a,c,d,f){if(null!=d){let _,b=!1;Pi(d)?_=d:xi(d)&&(b=!0,d=d[Ki]);const C=Hr(d);0===o&&null!==c?null==f?$h(a,c,C):va(a,c,C,f||null,!0):1===o&&null!==c?va(a,c,C,f||null,!0):2===o?Wh(a,C,b):3===o&&a.destroyNode(C),null!=_&&function Km(o,a,c,d,f){const _=c[ka];_!==Hr(c)&&zl(a,o,d,_,f);for(let C=$r;C<c.length;C++){const T=c[C];dc(T[ot],T,o,a,d,_)}}(a,o,_,c,f)}}function jh(o,a){return o.createText(a)}function Um(o,a,c){o.setValue(a,c)}function Fv(o,a){return o.createComment(function Bh(o){return o.replace(co,a=>a.replace($l,qn))}(a))}function jp(o,a,c){return o.createElement(a,c)}function $m(o,a){const c=o[qo],d=c.indexOf(a),f=a[zn];512&a[$t]&&(a[$t]&=-513,wl(f,-1)),c.splice(d,1)}function vd(o,a){if(o.length<=$r)return;const c=$r+a,d=o[c];if(d){const f=d[Pa];null!==f&&f!==o&&$m(f,d),a>0&&(o[c-1][Yi]=d[Yi]);const _=ca(o,$r+a);!function jm(o,a){dc(o,a,a[Zt],2,null,null),a[Ki]=null,a[br]=null}(d[ot],d);const b=_[vs];null!==b&&b.detachView(_[ot]),d[zn]=null,d[Yi]=null,d[$t]&=-65}return d}function $p(o,a){if(!(128&a[$t])){const c=a[Zt];c.destroyNode&&dc(o,a,c,3,null,null),function LD(o){let a=o[Ho];if(!a)return uc(o[ot],o);for(;a;){let c=null;if(xi(a))c=a[Ho];else{const d=a[$r];d&&(c=d)}if(!c){for(;a&&!a[Yi]&&a!==o;)xi(a)&&uc(a[ot],a),a=a[zn];null===a&&(a=o),xi(a)&&uc(a[ot],a),c=a&&a[Yi]}a=c}}(a)}}function uc(o,a){if(!(128&a[$t])){a[$t]&=-65,a[$t]|=128,function Vv(o,a){let c;if(null!=o&&null!=(c=o.destroyHooks))for(let d=0;d<c.length;d+=2){const f=a[c[d]];if(!(f instanceof so)){const _=c[d+1];if(Array.isArray(_))for(let b=0;b<_.length;b+=2){const C=f[_[b]],T=_[b+1];Ci(4,C,T);try{T.call(C)}finally{Ci(5,C,T)}}else{Ci(4,f,_);try{_.call(f)}finally{Ci(5,f,_)}}}}}(o,a),function Bv(o,a){const c=o.cleanup,d=a[Gr];let f=-1;if(null!==c)for(let _=0;_<c.length-1;_+=2)if("string"==typeof c[_]){const b=c[_+3];b>=0?d[f=b]():d[f=-b].unsubscribe(),_+=2}else{const b=d[f=c[_+1]];c[_].call(b)}if(null!==d){for(let _=f+1;_<d.length;_++)(0,d[_])();a[Gr]=null}}(o,a),1===a[ot].type&&a[Zt].destroy();const c=a[Pa];if(null!==c&&Pi(a[zn])){c!==a[zn]&&$m(c,a);const d=a[vs];null!==d&&d.detachView(o)}!function E(o){Vh.delete(o[Wo])}(a)}}function Gh(o,a,c){return ya(o,a.parent,c)}function ya(o,a,c){let d=a;for(;null!==d&&40&d.type;)d=(a=d).parent;if(null===d)return c[Ki];{const{componentOffset:f}=d;if(f>-1){const{encapsulation:_}=o.data[d.directiveStart+f];if(_===Ce.None||_===Ce.Emulated)return null}return zr(d,c)}}function va(o,a,c,d,f){o.insertBefore(a,c,d,f)}function $h(o,a,c){o.appendChild(a,c)}function Hm(o,a,c,d,f){null!==d?va(o,a,c,d,f):$h(o,a,c)}function wd(o,a){return o.parentNode(a)}function Hp(o,a,c){return zm(o,a,c)}function zh(o,a,c){return 40&o.type?zr(o,c):null}let Dd,Dn,ba,qt,zm=zh;function Ed(o,a){zm=o,Dd=a}function cc(o,a,c,d){const f=Gh(o,d,a),_=a[Zt],C=Hp(d.parent||a[br],d,a);if(null!=f)if(Array.isArray(c))for(let T=0;T<c.length;T++)Hm(_,f,c[T],C,!1);else Hm(_,f,c,C,!1);void 0!==Dd&&Dd(_,d,a,c,f)}function Cd(o,a){if(null!==a){const c=a.type;if(3&c)return zr(a,o);if(4&c)return ql(-1,o[a.index]);if(8&c){const d=a.child;if(null!==d)return Cd(o,d);{const f=o[a.index];return Pi(f)?ql(-1,f):Hr(f)}}if(32&c)return Ka(a,o)()||Hr(o[a.index]);{const d=Wm(o,a);return null!==d?Array.isArray(d)?d[0]:Cd(ac(o[gr]),d):Cd(o,a.next)}}return null}function Wm(o,a){return null!==a?o[gr][br].projection[a.projection]:null}function ql(o,a){const c=$r+o+1;if(c<a.length){const d=a[c],f=d[ot].firstChild;if(null!==f)return Cd(d,f)}return a[ka]}function Wh(o,a,c){const d=wd(o,a);d&&function Hh(o,a,c,d){o.removeChild(a,c,d)}(o,d,a,c)}function qh(o,a,c,d,f,_,b){for(;null!=c;){const C=d[c.index],T=c.type;if(b&&0===a&&(C&&de(Hr(C),d),c.flags|=2),32!=(32&c.flags))if(8&T)qh(o,a,c.child,d,f,_,!1),zl(a,o,f,C,_);else if(32&T){const M=Ka(c,d);let x;for(;x=M();)zl(a,o,f,x,_);zl(a,o,f,C,_)}else 16&T?zp(o,a,d,c,f,_):zl(a,o,f,C,_);c=b?c.projectionNext:c.next}}function dc(o,a,c,d,f,_){qh(c,d,o.firstChild,a,f,_,!1)}function zp(o,a,c,d,f,_){const b=c[gr],T=b[br].projection[d.projection];if(Array.isArray(T))for(let M=0;M<T.length;M++)zl(a,o,f,T[M],_);else qh(o,a,T,b[zn],f,_,!0)}function Kl(o,a,c){""===c?o.removeAttribute(a,"class"):o.setAttribute(a,"class",c)}function Wp(o,a,c){const{mergedAttrs:d,classes:f,styles:_}=c;null!==d&&$a(o,a,d),null!==f&&Kl(o,a,f),null!==_&&function Kh(o,a,c){o.setAttribute(a,"style",c)}(o,a,_)}function Wt(o){return function En(){if(void 0===Dn&&(Dn=null,kt.trustedTypes))try{Dn=kt.trustedTypes.createPolicy("angular",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return Dn}()?.createHTML(o)||o}function Yp(o){ba=o}function ss(o){return function hi(){if(void 0===qt&&(qt=null,kt.trustedTypes))try{qt=kt.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:o=>o,createScript:o=>o,createScriptURL:o=>o})}catch{}return qt}()?.createScriptURL(o)||o}class Zm{constructor(a){this.changingThisBreaksApplicationSecurity=a}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yt})`}}function Kr(o){return o instanceof Zm?o.changingThisBreaksApplicationSecurity:o}function hc(o,a){const c=function Jm(o){return o instanceof Zm&&o.getTypeName()||null}(o);if(null!=c&&c!==a){if("ResourceURL"===c&&"URL"===a)return!0;throw new Error(`Required a safe ${a}, got a ${c} (see ${yt})`)}return c===a}class Yh{constructor(a){this.inertDocumentHelper=a}getInertBodyElement(a){a="<body><remove></remove>"+a;try{const c=(new window.DOMParser).parseFromString(Wt(a),"text/html").body;return null===c?this.inertDocumentHelper.getInertBodyElement(a):(c.removeChild(c.firstChild),c)}catch{return null}}}class js{constructor(a){this.defaultDoc=a,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(a){const c=this.inertDocument.createElement("template");return c.innerHTML=Wt(a),c}}const fo=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function Yl(o){return(o=String(o)).match(fo)?o:"unsafe:"+o}function Yr(o){const a={};for(const c of o.split(","))a[c]=!0;return a}function Zl(...o){const a={};for(const c of o)for(const d in c)c.hasOwnProperty(d)&&(a[d]=!0);return a}const Bi=Yr("area,br,col,hr,img,wbr"),Xm=Yr("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Zh=Yr("rp,rt"),g=Zl(Bi,Zl(Xm,Yr("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Zl(Zh,Yr("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Zl(Zh,Xm)),w=Yr("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),G=Zl(w,Yr("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Yr("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext"));var On=(()=>((On=On||{})[On.NONE=0]="NONE",On[On.HTML=1]="HTML",On[On.STYLE=2]="STYLE",On[On.SCRIPT=3]="SCRIPT",On[On.URL=4]="URL",On[On.RESOURCE_URL=5]="RESOURCE_URL",On))();function Qh(o){const a=Xl();return a?a.sanitize(On.URL,o)||"":hc(o,"URL")?Kr(o):Yl(Fe(o))}function Jl(o){const a=Xl();if(a)return ss(a.sanitize(On.RESOURCE_URL,o)||"");if(hc(o,"ResourceURL"))return ss(Kr(o));throw new _e(904,!1)}function gc(o,a,c){return function Gv(o,a){return"src"===a&&("embed"===o||"frame"===o||"iframe"===o||"media"===o||"script"===o)||"href"===a&&("base"===o||"link"===o)?Jl:Qh}(a,c)(o)}function Xl(){const o=ye();return o&&o[ml]}const Td=new fn("ENVIRONMENT_INITIALIZER"),UD=new fn("INJECTOR",-1),n_=new fn("INJECTOR_DEF_TYPES");class Xh{get(a,c=Ur){if(c===Ur){const d=new Error(`NullInjectorError: No provider for ${Te(a)}!`);throw d.name="NullInjectorError",d}return c}}function r_(...o){return{\u0275providers:jD(0,o),\u0275fromNgModule:!0}}function jD(o,...a){const c=[],d=new Set;let f;return Bs(a,_=>{const b=_;Hv(b,c,[],d)&&(f||(f=[]),f.push(b))}),void 0!==f&&GD(f,c),c}function GD(o,a){for(let c=0;c<o.length;c++){const{providers:f}=o[c];zv(f,_=>{a.push(_)})}}function Hv(o,a,c,d){if(!(o=Y(o)))return!1;let f=null,_=Vr(o);const b=!_&&Nt(o);if(_||b){if(b&&!b.standalone)return!1;f=o}else{const T=o.ngModule;if(_=Vr(T),!_)return!1;f=T}const C=d.has(f);if(b){if(C)return!1;if(d.add(f),b.dependencies){const T="function"==typeof b.dependencies?b.dependencies():b.dependencies;for(const M of T)Hv(M,a,c,d)}}else{if(!_)return!1;{if(null!=_.imports&&!C){let M;d.add(f);try{Bs(_.imports,x=>{Hv(x,a,c,d)&&(M||(M=[]),M.push(x))})}finally{}void 0!==M&&GD(M,a)}if(!C){const M=Fs(f)||(()=>new f);a.push({provide:f,useFactory:M,deps:$e},{provide:n_,useValue:f,multi:!0},{provide:Td,useValue:()=>Cn(f),multi:!0})}const T=_.providers;null==T||C||zv(T,x=>{a.push(x)})}}return f!==o&&void 0!==o.providers}function zv(o,a){for(let c of o)Re(c)&&(c=c.\u0275providers),Array.isArray(c)?zv(c,a):a(c)}const Wv=le({provide:String,useValue:le});function qv(o){return null!==o&&"object"==typeof o&&Wv in o}function mc(o){return"function"==typeof o}const Yv=new fn("Set Injector scope."),Id={},ef={};let tg;function tf(){return void 0===tg&&(tg=new Xh),tg}class Sd{}class HD extends Sd{get destroyed(){return this._destroyed}constructor(a,c,d,f){super(),this.parent=c,this.source=d,this.scopes=f,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,nf(a,b=>this.processProvider(b)),this.records.set(UD,Vi(void 0,this)),f.has("environment")&&this.records.set(Sd,Vi(void 0,this));const _=this.records.get(Yv);null!=_&&"string"==typeof _.value&&this.scopes.add(_.value),this.injectorDefTypes=new Set(this.get(n_.multi,$e,te.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();for(const a of this._onDestroyHooks)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),this._onDestroyHooks.length=0}}onDestroy(a){this._onDestroyHooks.push(a)}runInContext(a){this.assertNotDestroyed();const c=cn(this),d=pn(void 0);try{return a()}finally{cn(c),pn(d)}}get(a,c=Ur,d=te.Default){this.assertNotDestroyed(),d=yr(d);const f=cn(this),_=pn(void 0);try{if(!(d&te.SkipSelf)){let C=this.records.get(a);if(void 0===C){const T=function Jv(o){return"function"==typeof o||"object"==typeof o&&o instanceof fn}(a)&&Ln(a);C=T&&this.injectableDefInScope(T)?Vi(s_(a),Id):null,this.records.set(a,C)}if(null!=C)return this.hydrate(a,C)}return(d&te.Self?tf():this.parent).get(a,c=d&te.Optional&&c===Ur?null:c)}catch(b){if("NullInjectorError"===b.name){if((b[Yn]=b[Yn]||[]).unshift(Te(a)),f)throw b;return function Ei(o,a,c,d){const f=o[Yn];throw a[Tn]&&f.unshift(a[Tn]),o.message=function j(o,a,c,d=null){o=o&&"\n"===o.charAt(0)&&o.charAt(1)==Jr?o.slice(2):o;let f=Te(a);if(Array.isArray(a))f=a.map(Te).join(" -> ");else if("object"==typeof a){let _=[];for(let b in a)if(a.hasOwnProperty(b)){let C=a[b];_.push(b+":"+("string"==typeof C?JSON.stringify(C):Te(C)))}f=`{${_.join(", ")}}`}return`${c}${d?"("+d+")":""}[${f}]: ${o.replace(Mn,"\n  ")}`}("\n"+o.message,f,c,d),o[gn]=f,o[Yn]=null,o}(b,a,"R3InjectorError",this.source)}throw b}finally{pn(_),cn(f)}}resolveInjectorInitializers(){const a=cn(this),c=pn(void 0);try{const d=this.get(Td.multi,$e,te.Self);for(const f of d)f()}finally{cn(a),pn(c)}}toString(){const a=[],c=this.records;for(const d of c.keys())a.push(Te(d));return`R3Injector[${a.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new _e(205,!1)}processProvider(a){let c=mc(a=Y(a))?a:Y(a&&a.provide);const d=function nS(o){return qv(o)?Vi(void 0,o.useValue):Vi(zD(o),Id)}(a);if(mc(a)||!0!==a.multi)this.records.get(c);else{let f=this.records.get(c);f||(f=Vi(void 0,Id,!0),f.factory=()=>ms(f.multi),this.records.set(c,f)),c=a,f.multi.push(a)}this.records.set(c,d)}hydrate(a,c){return c.value===Id&&(c.value=ef,c.value=c.factory()),"object"==typeof c.value&&c.value&&function Qv(o){return null!==o&&"object"==typeof o&&"function"==typeof o.ngOnDestroy}(c.value)&&this._ngOnDestroyHooks.add(c.value),c.value}injectableDefInScope(a){if(!a.providedIn)return!1;const c=Y(a.providedIn);return"string"==typeof c?"any"===c||this.scopes.has(c):this.injectorDefTypes.has(c)}}function s_(o){const a=Ln(o),c=null!==a?a.factory:Fs(o);if(null!==c)return c;if(o instanceof fn)throw new _e(204,!1);if(o instanceof Function)return function tS(o){const a=o.length;if(a>0)throw ec(a,"?"),new _e(204,!1);const c=function sr(o){return o&&(o[oi]||o[J])||null}(o);return null!==c?()=>c.factory(o):()=>new o}(o);throw new _e(204,!1)}function zD(o,a,c){let d;if(mc(o)){const f=Y(o);return Fs(f)||s_(f)}if(qv(o))d=()=>Y(o.useValue);else if(function Kv(o){return!(!o||!o.useFactory)}(o))d=()=>o.useFactory(...ms(o.deps||[]));else if(function eg(o){return!(!o||!o.useExisting)}(o))d=()=>Cn(Y(o.useExisting));else{const f=Y(o&&(o.useClass||o.provide));if(!function Zv(o){return!!o.deps}(o))return Fs(f)||s_(f);d=()=>new f(...ms(o.deps))}return d}function Vi(o,a,c=!1){return{factory:o,value:a,multi:c?[]:void 0}}function nf(o,a){for(const c of o)Array.isArray(c)?nf(c,a):c&&Re(c)?nf(c.\u0275providers,a):a(c)}class ng{}class _c{}class rS{resolveComponentFactory(a){throw function rf(o){const a=Error(`No component factory found for ${Te(o)}. Did you add it to @NgModule.entryComponents?`);return a.ngComponent=o,a}(a)}}let tu=(()=>{class o{}return o.NULL=new rS,o})();function iS(){return sf(Nr(),ye())}function sf(o,a){return new yc(zr(o,a))}let yc=(()=>{class o{constructor(c){this.nativeElement=c}}return o.__NG_ELEMENT_ID__=iS,o})();function rg(o){return o instanceof yc?o.nativeElement:o}class Xv{}let o_=(()=>{class o{}return o.__NG_ELEMENT_ID__=()=>function Ad(){const o=ye(),c=Ar(Nr().index,o);return(xi(c)?c:o)[Zt]}(),o})(),e0=(()=>{class o{}return o.\u0275prov=At({token:o,providedIn:"root",factory:()=>null}),o})();class WD{constructor(a){this.full=a,this.major=a.split(".")[0],this.minor=a.split(".")[1],this.patch=a.split(".").slice(2).join(".")}}const nr=new WD("15.2.9"),po={},Nd="ngOriginalError";function a_(o){return o[Nd]}class Md{constructor(){this._console=console}handleError(a){const c=this._findOriginalError(a);this._console.error("ERROR",a),c&&this._console.error("ORIGINAL ERROR",c)}_findOriginalError(a){let c=a&&a_(a);for(;c&&a_(c);)c=a_(c);return c||null}}function nu(o){return o instanceof Function?o():o}function r0(o,a,c){let d=o.length;for(;;){const f=o.indexOf(a,c);if(-1===f)return f;if(0===f||o.charCodeAt(f-1)<=32){const _=a.length;if(f+_===d||o.charCodeAt(f+_)<=32)return f}c=f+1}}const ZD="ng-template";function lS(o,a,c){let d=0,f=!0;for(;d<o.length;){let _=o[d++];if("string"==typeof _&&f){const b=o[d++];if(c&&"class"===_&&-1!==r0(b.toLowerCase(),a,0))return!0}else{if(1===_){for(;d<o.length&&"string"==typeof(_=o[d++]);)if(_.toLowerCase()===a)return!0;return!1}"number"==typeof _&&(f=!1)}}return!1}function QD(o){return 4===o.type&&o.value!==ZD}function uS(o,a,c){return a===(4!==o.type||c?o.value:ZD)}function cS(o,a,c){let d=4;const f=o.attrs||[],_=function d_(o){for(let a=0;a<o.length;a++)if(sd(o[a]))return a;return o.length}(f);let b=!1;for(let C=0;C<a.length;C++){const T=a[C];if("number"!=typeof T){if(!b)if(4&d){if(d=2|1&d,""!==T&&!uS(o,T,c)||""===T&&1===a.length){if(wa(d))return!1;b=!0}}else{const M=8&d?T:a[++C];if(8&d&&null!==o.attrs){if(!lS(o.attrs,M,c)){if(wa(d))return!1;b=!0}continue}const V=u_(8&d?"class":T,f,QD(o),c);if(-1===V){if(wa(d))return!1;b=!0;continue}if(""!==M){let q;q=V>_?"":f[V+1].toLowerCase();const ne=8&d?q:null;if(ne&&-1!==r0(ne,M,0)||2&d&&M!==q){if(wa(d))return!1;b=!0}}}}else{if(!b&&!wa(d)&&!wa(T))return!1;if(b&&wa(T))continue;b=!1,d=T|1&d}}return wa(d)||b}function wa(o){return 0==(1&o)}function u_(o,a,c,d){if(null===a)return-1;let f=0;if(d||!c){let _=!1;for(;f<a.length;){const b=a[f];if(b===o)return f;if(3===b||6===b)_=!0;else{if(1===b||2===b){let C=a[++f];for(;"string"==typeof C;)C=a[++f];continue}if(4===b)break;if(0===b){f+=4;continue}}f+=_?1:2}return-1}return function dS(o,a){let c=o.indexOf(4);if(c>-1)for(c++;c<o.length;){const d=o[c];if("number"==typeof d)return-1;if(d===a)return c;c++}return-1}(a,o)}function c_(o,a,c=!1){for(let d=0;d<a.length;d++)if(cS(o,a[d],c))return!0;return!1}function s0(o,a){e:for(let c=0;c<a.length;c++){const d=a[c];if(o.length===d.length){for(let f=0;f<o.length;f++)if(o[f]!==d[f])continue e;return!0}}return!1}function o0(o,a){return o?":not("+a.trim()+")":a}function XD(o){let a=o[0],c=1,d=2,f="",_=!1;for(;c<o.length;){let b=o[c];if("string"==typeof b)if(2&d){const C=o[++c];f+="["+b+(C.length>0?'="'+C+'"':"")+"]"}else 8&d?f+="."+b:4&d&&(f+=" "+b);else""!==f&&!wa(b)&&(a+=o0(_,f),f=""),d=b,_=_||!wa(d);c++}return""!==f&&(a+=o0(_,f)),a}const Qt={};function h_(o){eE(Ht(),ye(),Xr()+o,!1)}function eE(o,a,c,d){if(!d)if(3==(3&a[$t])){const _=o.preOrderCheckHooks;null!==_&&nd(a,_,c)}else{const _=o.preOrderHooks;null!==_&&rd(a,_,0,c)}io(c)}function g_(o,a=null,c=null,d){const f=rE(o,a,c,d);return f.resolveInjectorInitializers(),f}function rE(o,a=null,c=null,d,f=new Set){const _=[c||$e,r_(o)];return d=d||("object"==typeof o?void 0:Te(o)),new HD(_,a||tf(),d||null,f)}let Od=(()=>{class o{static create(c,d){if(Array.isArray(c))return g_({name:""},d,c,"");{const f=c.name??"";return g_({name:f},c.parent,c.providers,f)}}}return o.THROW_IF_NOT_FOUND=Ur,o.NULL=new Xh,o.\u0275prov=At({token:o,providedIn:"any",factory:()=>Cn(UD)}),o.__NG_ELEMENT_ID__=-1,o})();function wc(o,a=te.Default){const c=ye();return null===c?Cn(o,a):Zu(Nr(),c,Y(o),a)}function dE(){throw new Error("invalid")}function cf(o,a){const c=o.contentQueries;if(null!==c)for(let d=0;d<c.length;d+=2){const _=c[d+1];if(-1!==_){const b=o.data[_];Lu(c[d]),b.contentQueries(2,a[_],_)}}}function y_(o,a,c,d,f,_,b,C,T,M,x){const V=a.blueprint.slice();return V[Ki]=f,V[$t]=76|d,(null!==x||o&&1024&o[$t])&&(V[$t]|=1024),Va(V),V[zn]=V[zo]=o,V[ur]=c,V[pr]=b||o&&o[pr],V[Zt]=C||o&&o[Zt],V[ml]=T||o&&o[ml]||null,V[gl]=M||o&&o[gl]||null,V[br]=_,V[Wo]=function Fp(){return Uh++}(),V[jn]=x,V[gr]=2==a.type?o[gr]:V,V}function su(o,a,c,d,f){let _=o.data[a];if(null===_)_=v_(o,a,c,d,f),function Dh(){return jt.lFrame.inI18n}()&&(_.flags|=32);else if(64&_.type){_.type=c,_.value=d,_.attrs=f;const b=Pu();_.injectorIndex=null===b?-1:b.injectorIndex}return Ti(_,!0),_}function v_(o,a,c,d,f){const _=Yo(),b=wh(),T=o.data[a]=function g0(o,a,c,d,f,_){return{type:c,index:d,insertBeforeIndex:null,injectorIndex:a?a.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:0,providerIndexes:0,value:f,attrs:_,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:a,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,b?_:_&&_.parent,c,a,d,f);return null===o.firstChild&&(o.firstChild=T),null!==_&&(b?null==_.child&&null!==T.parent&&(_.child=T):null===_.next&&(_.next=T,T.prev=_)),T}function sg(o,a,c,d){if(0===c)return-1;const f=a.length;for(let _=0;_<c;_++)a.push(d),o.blueprint.push(d),o.data.push(null);return f}function og(o,a,c){Vu(a);try{const d=o.viewQuery;null!==d&&lg(1,d,c);const f=o.template;null!==f&&hE(o,a,f,1,c),o.firstCreatePass&&(o.firstCreatePass=!1),o.staticContentQueries&&cf(o,a),o.staticViewQueries&&lg(2,o.viewQuery,c);const _=o.components;null!==_&&function SS(o,a){for(let c=0;c<a.length;c++)PS(o,a[c])}(a,_)}catch(d){throw o.firstCreatePass&&(o.incompleteFirstPass=!0,o.firstCreatePass=!1),d}finally{a[$t]&=-5,Uu()}}function xd(o,a,c,d){const f=a[$t];if(128!=(128&f)){Vu(a);try{Va(a),function Ls(o){return jt.lFrame.bindingIndex=o}(o.bindingStartIndex),null!==c&&hE(o,a,c,2,d);const b=3==(3&f);if(b){const M=o.preOrderCheckHooks;null!==M&&nd(a,M,null)}else{const M=o.preOrderHooks;null!==M&&rd(a,M,0,null),Ih(a,0)}if(function D0(o){for(let a=lc(o);null!==a;a=Ya(a)){if(!a[qc])continue;const c=a[qo];for(let d=0;d<c.length;d++){const f=c[d];512&f[$t]||wl(f[zn],1),f[$t]|=512}}}(a),function xS(o){for(let a=lc(o);null!==a;a=Ya(a))for(let c=$r;c<a.length;c++){const d=a[c],f=d[ot];no(d)&&xd(f,d,f.template,d[ur])}}(a),null!==o.contentQueries&&cf(o,a),b){const M=o.contentCheckHooks;null!==M&&nd(a,M)}else{const M=o.contentHooks;null!==M&&rd(a,M,1),Ih(a,1)}!function Dc(o,a){const c=o.hostBindingOpCodes;if(null!==c)try{for(let d=0;d<c.length;d++){const f=c[d];if(f<0)io(~f);else{const _=f,b=c[++d],C=c[++d];Fu(b,_),C(2,a[_])}}}finally{io(-1)}}(o,a);const C=o.components;null!==C&&function IS(o,a){for(let c=0;c<a.length;c++)A_(o,a[c])}(a,C);const T=o.viewQuery;if(null!==T&&lg(2,T,d),b){const M=o.viewCheckHooks;null!==M&&nd(a,M)}else{const M=o.viewHooks;null!==M&&rd(a,M,2),Ih(a,2)}!0===o.firstUpdatePass&&(o.firstUpdatePass=!1),a[$t]&=-41,512&a[$t]&&(a[$t]&=-513,wl(a[zn],-1))}finally{Uu()}}}function hE(o,a,c,d,f){const _=Xr(),b=2&d;try{io(-1),b&&a.length>Bn&&eE(o,a,Bn,!1),Ci(b?2:0,f),c(d,f)}finally{io(_),Ci(b?3:1,f)}}function Ec(o,a,c){if(yl(a)){const f=a.directiveEnd;for(let _=a.directiveStart;_<f;_++){const b=o.data[_];b.contentQueries&&b.contentQueries(1,c[_],_)}}}function b_(o,a,c){xu()&&(function y0(o,a,c,d){const f=c.directiveStart,_=c.directiveEnd;Fa(c)&&function _E(o,a,c){const d=zr(a,o),f=f0(c),_=o[pr],b=mo(o,y_(o,f,null,c.onPush?32:16,d,a,_,_.createRenderer(d,c),null,null,null));o[a.index]=b}(a,c,o.data[f+c.componentOffset]),o.firstCreatePass||od(c,a),de(d,a);const b=c.initialInputs;for(let C=f;C<_;C++){const T=o.data[C],M=mr(a,o,C,c);de(M,a),null!==b&&w0(0,C-f,M,T,0,b),Zi(T)&&(Ar(c.index,a)[ur]=mr(a,o,C,c))}}(o,a,c,zr(c,a)),64==(64&c.flags)&&T_(o,a,c))}function w_(o,a,c=zr){const d=a.localNames;if(null!==d){let f=a.index+1;for(let _=0;_<d.length;_+=2){const b=d[_+1],C=-1===b?c(a,o):o[b];o[f++]=C}}}function f0(o){const a=o.tView;return null===a||a.incompleteFirstPass?o.tView=Pd(1,null,o.template,o.decls,o.vars,o.directiveDefs,o.pipeDefs,o.viewQuery,o.schemas,o.consts):a}function Pd(o,a,c,d,f,_,b,C,T,M){const x=Bn+d,V=x+f,q=function D_(o,a){const c=[];for(let d=0;d<a;d++)c.push(d<o?null:Qt);return c}(x,V),ne="function"==typeof M?M():M;return q[ot]={type:o,blueprint:q,template:c,queries:null,viewQuery:C,declTNode:a,data:q.slice().fill(null,x),bindingStartIndex:x,expandoStartIndex:V,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof _?_():_,pipeRegistry:"function"==typeof b?b():b,firstChild:null,schemas:T,consts:ne,incompleteFirstPass:!1}}function E_(o,a,c,d){const f=hf(a);null===c?f.push(d):(f.push(c),o.firstCreatePass&&vE(o).push(d,f.length-1))}function fE(o,a,c,d){for(let f in o)if(o.hasOwnProperty(f)){c=null===c?{}:c;const _=o[f];null===d?df(c,a,f,_):d.hasOwnProperty(f)&&df(c,a,d[f],_)}return c}function df(o,a,c,d){o.hasOwnProperty(c)?o[c].push(a,d):o[c]=[a,d]}function go(o,a,c,d,f,_,b,C){const T=zr(a,c);let x,M=a.inputs;!C&&null!=M&&(x=M[d])?(C0(o,c,x,d,f),Fa(a)&&function m0(o,a){const c=Ar(a,o);16&c[$t]||(c[$t]|=32)}(c,a.index)):3&a.type&&(d=function NS(o){return"class"===o?"className":"for"===o?"htmlFor":"formaction"===o?"formAction":"innerHtml"===o?"innerHTML":"readonly"===o?"readOnly":"tabindex"===o?"tabIndex":o}(d),f=null!=b?b(f,a.value||"",d):f,_.setProperty(T,d,f))}function C_(o,a,c,d){if(xu()){const f=null===d?null:{"":-1},_=function I_(o,a){const c=o.directiveRegistry;let d=null,f=null;if(c)for(let _=0;_<c.length;_++){const b=c[_];if(c_(a,b.selectors,!1))if(d||(d=[]),Zi(b))if(null!==b.findHostDirectiveDefs){const C=[];f=f||new Map,b.findHostDirectiveDefs(b,C,f),d.unshift(...C,b),ou(o,a,C.length)}else d.unshift(b),ou(o,a,0);else f=f||new Map,b.findHostDirectiveDefs?.(b,d,f),d.push(b)}return null===d?null:[d,f]}(o,c);let b,C;null===_?b=C=null:[b,C]=_,null!==b&&pE(o,a,c,b,f,C),f&&function b0(o,a,c){if(a){const d=o.localNames=[];for(let f=0;f<a.length;f+=2){const _=c[a[f+1]];if(null==_)throw new _e(-301,!1);d.push(a[f],_)}}}(c,d,f)}c.mergedAttrs=ta(c.mergedAttrs,c.attrs)}function pE(o,a,c,d,f,_){for(let M=0;M<d.length;M++)Fn(od(c,a),o,d[M].type);!function RS(o,a,c){o.flags|=1,o.directiveStart=a,o.directiveEnd=a+c,o.providerIndexes=a}(c,o.data.length,d.length);for(let M=0;M<d.length;M++){const x=d[M];x.providersResolver&&x.providersResolver(x)}let b=!1,C=!1,T=sg(o,a,d.length,null);for(let M=0;M<d.length;M++){const x=d[M];c.mergedAttrs=ta(c.mergedAttrs,x.hostAttrs),S_(o,c,a,T,x),mE(T,x,f),null!==x.contentQueries&&(c.flags|=4),(null!==x.hostBindings||null!==x.hostAttrs||0!==x.hostVars)&&(c.flags|=64);const V=x.type.prototype;!b&&(V.ngOnChanges||V.ngOnInit||V.ngDoCheck)&&((o.preOrderHooks??(o.preOrderHooks=[])).push(c.index),b=!0),!C&&(V.ngOnChanges||V.ngDoCheck)&&((o.preOrderCheckHooks??(o.preOrderCheckHooks=[])).push(c.index),C=!0),T++}!function AS(o,a,c){const f=a.directiveEnd,_=o.data,b=a.attrs,C=[];let T=null,M=null;for(let x=a.directiveStart;x<f;x++){const V=_[x],q=c?c.get(V):null,Se=q?q.outputs:null;T=fE(V.inputs,x,T,q?q.inputs:null),M=fE(V.outputs,x,M,Se);const Qe=null===T||null===b||QD(a)?null:OS(T,x,b);C.push(Qe)}null!==T&&(T.hasOwnProperty("class")&&(a.flags|=8),T.hasOwnProperty("style")&&(a.flags|=16)),a.initialInputs=C,a.inputs=T,a.outputs=M}(o,c,_)}function T_(o,a,c){const d=c.directiveStart,f=c.directiveEnd,_=c.index,b=function Fm(){return jt.lFrame.currentDirectiveIndex}();try{io(_);for(let C=d;C<f;C++){const T=o.data[C],M=a[C];Dr(C),(null!==T.hostBindings||0!==T.hostVars||null!==T.hostAttrs)&&v0(T,M)}}finally{io(-1),Dr(b)}}function v0(o,a){null!==o.hostBindings&&o.hostBindings(1,a)}function ou(o,a,c){a.componentOffset=c,(o.components??(o.components=[])).push(a.index)}function mE(o,a,c){if(c){if(a.exportAs)for(let d=0;d<a.exportAs.length;d++)c[a.exportAs[d]]=o;Zi(a)&&(c[""]=o)}}function S_(o,a,c,d,f){o.data[d]=f;const _=f.factory||(f.factory=Fs(f.type)),b=new so(_,Zi(f),wc);o.blueprint[d]=b,c[d]=b,function MS(o,a,c,d,f){const _=f.hostBindings;if(_){let b=o.hostBindingOpCodes;null===b&&(b=o.hostBindingOpCodes=[]);const C=~a.index;(function gE(o){let a=o.length;for(;a>0;){const c=o[--a];if("number"==typeof c&&c<0)return c}return 0})(b)!=C&&b.push(C),b.push(c,d,_)}}(o,a,d,sg(o,c,f.hostVars,Qt),f)}function kd(o,a,c,d,f,_,b){if(null==_)o.removeAttribute(a,f,c);else{const C=null==b?Fe(_):b(_,d||"",f);o.setAttribute(a,f,C,c)}}function w0(o,a,c,d,f,_){const b=_[a];if(null!==b){const C=d.setInput;for(let T=0;T<b.length;){const M=b[T++],x=b[T++],V=b[T++];null!==C?d.setInput(c,V,M,x):c[x]=V}}}function OS(o,a,c){let d=null,f=0;for(;f<c.length;){const _=c[f];if(0!==_)if(5!==_){if("number"==typeof _)break;if(o.hasOwnProperty(_)){null===d&&(d=[]);const b=o[_];for(let C=0;C<b.length;C+=2)if(b[C]===a){d.push(_,b[C+1],c[f+1]);break}}f+=2}else f+=2;else f+=4}return d}function yE(o,a,c,d){return[o,!0,!1,a,null,0,d,c,null,null]}function A_(o,a){const c=Ar(a,o);if(no(c)){const d=c[ot];48&c[$t]?xd(d,c,d.template,c[ur]):c[Rn]>0&&N_(c)}}function N_(o){for(let d=lc(o);null!==d;d=Ya(d))for(let f=$r;f<d.length;f++){const _=d[f];if(no(_))if(512&_[$t]){const b=_[ot];xd(b,_,b.template,_[ur])}else _[Rn]>0&&N_(_)}const c=o[ot].components;if(null!==c)for(let d=0;d<c.length;d++){const f=Ar(c[d],o);no(f)&&f[Rn]>0&&N_(f)}}function PS(o,a){const c=Ar(a,o),d=c[ot];(function ag(o,a){for(let c=a.length;c<o.blueprint.length;c++)a.push(o.blueprint[c])})(d,c),og(d,c,c[ur])}function mo(o,a){return o[Ho]?o[Qs][Yi]=a:o[Ho]=a,o[Qs]=a,a}function Cc(o){for(;o;){o[$t]|=32;const a=ac(o);if(Iu(o)&&!a)return o;o=a}return null}function M_(o,a,c,d=!0){const f=a[pr];f.begin&&f.begin();try{xd(o,a,o.template,c)}catch(b){throw d&&E0(a,b),b}finally{f.end&&f.end()}}function lg(o,a,c){Lu(0),a(o,c)}function hf(o){return o[Gr]||(o[Gr]=[])}function vE(o){return o.cleanup||(o.cleanup=[])}function E0(o,a){const c=o[gl],d=c?c.get(Md,null):null;d&&d.handleError(a)}function C0(o,a,c,d,f){for(let _=0;_<c.length;){const b=c[_++],C=c[_++],T=a[b],M=o.data[b];null!==M.setInput?M.setInput(T,f,d,C):T[C]=f}}function ug(o,a,c){let d=c?o.styles:null,f=c?o.classes:null,_=0;if(null!==a)for(let b=0;b<a.length;b++){const C=a[b];"number"==typeof C?_=C:1==_?f=ve(f,C):2==_&&(d=ve(d,C+": "+a[++b]+";"))}c?o.styles=d:o.stylesWithoutHost=d,c?o.classes=f:o.classesWithoutHost=f}function ls(o,a,c,d,f=!1){for(;null!==c;){const _=a[c.index];if(null!==_&&d.push(Hr(_)),Pi(_))for(let C=$r;C<_.length;C++){const T=_[C],M=T[ot].firstChild;null!==M&&ls(T[ot],T,M,d)}const b=c.type;if(8&b)ls(o,a,c.child,d);else if(32&b){const C=Ka(c,a);let T;for(;T=C();)d.push(T)}else if(16&b){const C=Wm(a,c);if(Array.isArray(C))d.push(...C);else{const T=ac(a[gr]);ls(T[ot],T,C,d,!0)}}c=f?c.projectionNext:c.next}return d}class ff{get rootNodes(){const a=this._lView,c=a[ot];return ls(c,a,c.firstChild,[])}constructor(a,c){this._lView=a,this._cdRefInjectingView=c,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[ur]}set context(a){this._lView[ur]=a}get destroyed(){return 128==(128&this._lView[$t])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const a=this._lView[zn];if(Pi(a)){const c=a[No],d=c?c.indexOf(this):-1;d>-1&&(vd(a,d),ca(c,d))}this._attachedToViewContainer=!1}$p(this._lView[ot],this._lView)}onDestroy(a){E_(this._lView[ot],this._lView,null,a)}markForCheck(){Cc(this._cdRefInjectingView||this._lView)}detach(){this._lView[$t]&=-65}reattach(){this._lView[$t]|=64}detectChanges(){M_(this._lView[ot],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new _e(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Gm(o,a){dc(o,a,a[Zt],2,null,null)}(this._lView[ot],this._lView)}attachToAppRef(a){if(this._attachedToViewContainer)throw new _e(902,!1);this._appRef=a}}class FS extends ff{constructor(a){super(a),this._view=a}detectChanges(){const a=this._view;M_(a[ot],a,a[ur],!1)}checkNoChanges(){}get context(){return null}}class T0 extends tu{constructor(a){super(),this.ngModule=a}resolveComponentFactory(a){const c=Nt(a);return new pf(c,this.ngModule)}}function bE(o){const a=[];for(let c in o)o.hasOwnProperty(c)&&a.push({propName:o[c],templateName:c});return a}class BS{constructor(a,c){this.injector=a,this.parentInjector=c}get(a,c,d){d=yr(d);const f=this.injector.get(a,po,d);return f!==po||c===po?f:this.parentInjector.get(a,c,d)}}class pf extends _c{get inputs(){return bE(this.componentDef.inputs)}get outputs(){return bE(this.componentDef.outputs)}constructor(a,c){super(),this.componentDef=a,this.ngModule=c,this.componentType=a.type,this.selector=function hS(o){return o.map(XD).join(",")}(a.selectors),this.ngContentSelectors=a.ngContentSelectors?a.ngContentSelectors:[],this.isBoundToModule=!!c}create(a,c,d,f){let _=(f=f||this.ngModule)instanceof Sd?f:f?.injector;_&&null!==this.componentDef.getStandaloneInjector&&(_=this.componentDef.getStandaloneInjector(_)||_);const b=_?new BS(a,_):a,C=b.get(Xv,null);if(null===C)throw new _e(407,!1);const T=b.get(e0,null),M=C.createRenderer(null,this.componentDef),x=this.componentDef.selectors[0][0]||"div",V=d?function p0(o,a,c){return o.selectRootElement(a,c===Ce.ShadowDom)}(M,d,this.componentDef.encapsulation):jp(M,x,function LS(o){const a=o.toLowerCase();return"svg"===a?"svg":"math"===a?"math":null}(x)),q=this.componentDef.onPush?288:272,ne=Pd(0,null,null,1,0,null,null,null,null,null),Se=y_(null,ne,null,q,null,null,C,M,T,b,null);let Qe,at;Vu(Se);try{const Dt=this.componentDef;let Bt,Me=null;Dt.findHostDirectiveDefs?(Bt=[],Me=new Map,Dt.findHostDirectiveDefs(Dt,Bt,Me),Bt.push(Dt)):Bt=[Dt];const Jt=function wE(o,a){const c=o[ot],d=Bn;return o[d]=a,su(c,d,2,"#host",null)}(Se,V),$n=function US(o,a,c,d,f,_,b,C){const T=f[ot];!function I0(o,a,c,d){for(const f of o)a.mergedAttrs=ta(a.mergedAttrs,f.hostAttrs);null!==a.mergedAttrs&&(ug(a,a.mergedAttrs,!0),null!==c&&Wp(d,c,a))}(d,o,a,b);const M=_.createRenderer(a,c),x=y_(f,f0(c),null,c.onPush?32:16,f[o.index],o,_,M,C||null,null,null);return T.firstCreatePass&&ou(T,o,d.length-1),mo(f,x),f[o.index]=x}(Jt,V,Dt,Bt,Se,C,M);at=mh(ne,Bn),V&&function jS(o,a,c,d){if(d)$a(o,c,["ng-version",nr.full]);else{const{attrs:f,classes:_}=function fS(o){const a=[],c=[];let d=1,f=2;for(;d<o.length;){let _=o[d];if("string"==typeof _)2===f?""!==_&&a.push(_,o[++d]):8===f&&c.push(_);else{if(!wa(f))break;f=_}d++}return{attrs:a,classes:c}}(a.selectors[0]);f&&$a(o,c,f),_&&_.length>0&&Kl(o,c,_.join(" "))}}(M,Dt,V,d),void 0!==c&&function S0(o,a,c){const d=o.projection=[];for(let f=0;f<a.length;f++){const _=c[f];d.push(null!=_?Array.from(_):null)}}(at,this.ngContentSelectors,c),Qe=function O_(o,a,c,d,f,_){const b=Nr(),C=f[ot],T=zr(b,f);pE(C,f,b,c,null,d);for(let x=0;x<c.length;x++)de(mr(f,C,b.directiveStart+x,b),f);T_(C,f,b),T&&de(T,f);const M=mr(f,C,b.directiveStart+b.componentOffset,b);if(o[ur]=f[ur]=M,null!==_)for(const x of _)x(M,a);return Ec(C,b,o),M}($n,Dt,Bt,Me,Se,[GS]),og(ne,Se,null)}finally{Uu()}return new cg(this.componentType,Qe,sf(at,Se),Se,at)}}class cg extends ng{constructor(a,c,d,f,_){super(),this.location=d,this._rootLView=f,this._tNode=_,this.instance=c,this.hostView=this.changeDetectorRef=new FS(f),this.componentType=a}setInput(a,c){const d=this._tNode.inputs;let f;if(null!==d&&(f=d[a])){const _=this._rootLView;C0(_[ot],_,f,a,c),Cc(Ar(this._tNode.index,_))}}get injector(){return new ao(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(a){this.hostView.onDestroy(a)}}function GS(){const o=Nr();$u(ye()[ot],o)}function A0(o){let a=function DE(o){return Object.getPrototypeOf(o.prototype).constructor}(o.type),c=!0;const d=[o];for(;a;){let f;if(Zi(o))f=a.\u0275cmp||a.\u0275dir;else{if(a.\u0275cmp)throw new _e(903,!1);f=a.\u0275dir}if(f){if(c){d.push(f);const b=o;b.inputs=N0(o.inputs),b.declaredInputs=N0(o.declaredInputs),b.outputs=N0(o.outputs);const C=f.hostBindings;C&&M0(o,C);const T=f.viewQuery,M=f.contentQueries;if(T&&$S(o,T),M&&HS(o,M),Ee(o.inputs,f.inputs),Ee(o.declaredInputs,f.declaredInputs),Ee(o.outputs,f.outputs),Zi(f)&&f.data.animation){const x=o.data;x.animation=(x.animation||[]).concat(f.data.animation)}}const _=f.features;if(_)for(let b=0;b<_.length;b++){const C=_[b];C&&C.ngInherit&&C(o),C===A0&&(c=!1)}}a=Object.getPrototypeOf(a)}!function EE(o){let a=0,c=null;for(let d=o.length-1;d>=0;d--){const f=o[d];f.hostVars=a+=f.hostVars,f.hostAttrs=ta(f.hostAttrs,c=ta(c,f.hostAttrs))}}(d)}function N0(o){return o===re?{}:o===$e?[]:o}function $S(o,a){const c=o.viewQuery;o.viewQuery=c?(d,f)=>{a(d,f),c(d,f)}:a}function HS(o,a){const c=o.contentQueries;o.contentQueries=c?(d,f,_)=>{a(d,f,_),c(d,f,_)}:a}function M0(o,a){const c=o.hostBindings;o.hostBindings=c?(d,f)=>{a(d,f),c(d,f)}:a}function au(o){return a=>{a.findHostDirectiveDefs=TE,a.hostDirectives=(Array.isArray(o)?o:o()).map(c=>"function"==typeof c?{directive:Y(c),inputs:re,outputs:re}:{directive:Y(c.directive),inputs:x_(c.inputs),outputs:x_(c.outputs)})}}function TE(o,a,c){if(null!==o.hostDirectives)for(const d of o.hostDirectives){const f=bn(d.directive);P_(f.declaredInputs,d.inputs),TE(f,a,c),c.set(f,d),a.push(f)}}function x_(o){if(void 0===o||0===o.length)return re;const a={};for(let c=0;c<o.length;c+=2)a[o[c]]=o[c+1];return a}function P_(o,a){for(const c in a)a.hasOwnProperty(c)&&(o[a[c]]=o[c])}function dg(o){return!!mf(o)&&(Array.isArray(o)||!(o instanceof Map)&&Symbol.iterator in o)}function mf(o){return null!==o&&("function"==typeof o||"object"==typeof o)}function Vo(o,a,c){return o[a]=c}function us(o,a,c){return!Object.is(o[a],c)&&(o[a]=c,!0)}function lu(o,a,c,d){const f=us(o,a,c);return us(o,a+1,d)||f}function O0(o,a,c,d){const f=ye();return us(f,Zo(),a)&&(Ht(),function tl(o,a,c,d,f,_){const b=zr(o,a);kd(a[Zt],b,_,o.value,c,d,f)}(Qn(),f,o,a,c,d)),O0}function Bd(o,a,c,d){return us(o,Zo(),c)?a+Fe(c)+d:Qt}function RE(o,a,c,d,f,_,b,C){const T=ye(),M=Ht(),x=o+Bn,V=M.firstCreatePass?function KS(o,a,c,d,f,_,b,C,T){const M=a.consts,x=su(a,o,4,b||null,Oo(M,C));C_(a,c,x,Oo(M,T)),$u(a,x);const V=x.tView=Pd(2,x,d,f,_,a.directiveRegistry,a.pipeRegistry,null,a.schemas,M);return null!==a.queries&&(a.queries.template(a,x),V.queries=a.queries.embeddedTView(x)),x}(x,M,T,a,c,d,f,_,b):M.data[x];Ti(V,!1);const q=T[Zt].createComment("");cc(M,T,q,V),de(q,T),mo(T,T[x]=yE(q,T,q,V)),Kc(V)&&b_(M,T,V),null!=b&&w_(T,V,C)}function pg(o){return ui(function km(){return jt.lFrame.contextLView}(),Bn+o)}function Ud(o,a,c){const d=ye();return us(d,Zo(),a)&&go(Ht(),Qn(),d,o,a,d[Zt],c,!1),Ud}function gg(o,a,c,d,f){const b=f?"class":"style";C0(o,c,a.inputs[b],b,d)}function mg(o,a,c,d){const f=ye(),_=Ht(),b=Bn+o,C=f[Zt],T=_.firstCreatePass?function OE(o,a,c,d,f,_){const b=a.consts,T=su(a,o,2,d,Oo(b,f));return C_(a,c,T,Oo(b,_)),null!==T.attrs&&ug(T,T.attrs,!1),null!==T.mergedAttrs&&ug(T,T.mergedAttrs,!0),null!==a.queries&&a.queries.elementStart(a,T),T}(b,_,f,a,c,d):_.data[b],M=f[b]=jp(C,a,function Th(){return jt.lFrame.currentNamespace}()),x=Kc(T);return Ti(T,!0),Wp(C,M,T),32!=(32&T.flags)&&cc(_,f,M,T),0===function yh(){return jt.lFrame.elementDepthCount}()&&de(M,f),function Ou(){jt.lFrame.elementDepthCount++}(),x&&(b_(_,f,T),Ec(_,T,f)),null!==d&&w_(f,T),mg}function _g(){let o=Nr();wh()?ku():(o=o.parent,Ti(o,!1));const a=o;!function vh(){jt.lFrame.elementDepthCount--}();const c=Ht();return c.firstCreatePass&&($u(c,o),yl(o)&&c.queries.elementEnd(o)),null!=a.classesWithoutHost&&function Nl(o){return 0!=(8&o.flags)}(a)&&gg(c,a,ye(),a.classesWithoutHost,!0),null!=a.stylesWithoutHost&&function Jo(o){return 0!=(16&o.flags)}(a)&&gg(c,a,ye(),a.stylesWithoutHost,!1),_g}function L_(o,a,c,d){return mg(o,a,c,d),_g(),L_}function Gs(o,a,c){const d=ye(),f=Ht(),_=o+Bn,b=f.firstCreatePass?function xE(o,a,c,d,f){const _=a.consts,b=Oo(_,d),C=su(a,o,8,"ng-container",b);return null!==b&&ug(C,b,!0),C_(a,c,C,Oo(_,f)),null!==a.queries&&a.queries.elementStart(a,C),C}(_,f,d,a,c):f.data[_];Ti(b,!0);const C=d[_]=d[Zt].createComment("");return cc(f,d,C,b),de(C,d),Kc(b)&&(b_(f,d,b),Ec(f,b,d)),null!=c&&w_(d,b),Gs}function yg(){let o=Nr();const a=Ht();return wh()?ku():(o=o.parent,Ti(o,!1)),a.firstCreatePass&&($u(a,o),yl(o)&&a.queries.elementEnd(o)),yg}function kE(){return ye()}function k0(o){return!!o&&"function"==typeof o.then}function F0(o){return!!o&&"function"==typeof o.subscribe}const FE=F0;function L0(o,a,c,d){const f=ye(),_=Ht(),b=Nr();return function BE(o,a,c,d,f,_,b){const C=Kc(d),M=o.firstCreatePass&&vE(o),x=a[ur],V=hf(a);let q=!0;if(3&d.type||b){const Qe=zr(d,a),at=b?b(Qe):Qe,Dt=V.length,Bt=b?Jt=>b(Hr(Jt[d.index])):d.index;let Me=null;if(!b&&C&&(Me=function YS(o,a,c,d){const f=o.cleanup;if(null!=f)for(let _=0;_<f.length-1;_+=2){const b=f[_];if(b===c&&f[_+1]===d){const C=a[Gr],T=f[_+2];return C.length>T?C[T]:null}"string"==typeof b&&(_+=2)}return null}(o,a,f,d.index)),null!==Me)(Me.__ngLastListenerFn__||Me).__ngNextListenerFn__=_,Me.__ngLastListenerFn__=_,q=!1;else{_=UE(d,a,x,_,!1);const Jt=c.listen(at,f,_);V.push(_,Jt),M&&M.push(f,Bt,Dt,Dt+1)}}else _=UE(d,a,x,_,!1);const ne=d.outputs;let Se;if(q&&null!==ne&&(Se=ne[f])){const Qe=Se.length;if(Qe)for(let at=0;at<Qe;at+=2){const $n=a[Se[at]][Se[at+1]].subscribe(_),ei=V.length;V.push(_,$n),M&&M.push(f,d.index,ei,-(ei+1))}}}(_,f,f[Zt],b,o,a,d),L0}function VE(o,a,c,d){try{return Ci(6,a,c),!1!==c(d)}catch(f){return E0(o,f),!1}finally{Ci(7,a,c)}}function UE(o,a,c,d,f){return function _(b){if(b===Function)return d;Cc(o.componentOffset>-1?Ar(o.index,a):a);let T=VE(a,c,d,b),M=_.__ngNextListenerFn__;for(;M;)T=VE(a,c,M,b)&&T,M=M.__ngNextListenerFn__;return f&&!1===T&&(b.preventDefault(),b.returnValue=!1),T}}function jE(o=1){return function Dp(o){return(jt.lFrame.contextLView=function ju(o,a){for(;o>0;)a=a[zo],o--;return a}(o,jt.lFrame.contextLView))[ur]}(o)}function ZS(o,a){let c=null;const d=function JD(o){const a=o.attrs;if(null!=a){const c=a.indexOf(5);if(!(1&c))return a[c+1]}return null}(o);for(let f=0;f<a.length;f++){const _=a[f];if("*"!==_){if(null===d?c_(o,_,!0):s0(d,_))return f}else c=f}return c}function GE(o){const a=ye()[gr][br];if(!a.projection){const d=a.projection=ec(o?o.length:1,null),f=d.slice();let _=a.child;for(;null!==_;){const b=o?ZS(_,o):0;null!==b&&(f[b]?f[b].projectionNext=_:d[b]=_,f[b]=_),_=_.next}}}function $E(o,a=0,c){const d=ye(),f=Ht(),_=su(f,Bn+o,16,null,c||null);null===_.projection&&(_.projection=a),ku(),32!=(32&_.flags)&&function qm(o,a,c){zp(a[Zt],0,a,c,Gh(o,c,a),Hp(c.parent||a[br],c,a))}(f,d,_)}function B0(o,a,c){return B_(o,"",a,"",c),B0}function B_(o,a,c,d,f){const _=ye(),b=Bd(_,a,c,d);return b!==Qt&&go(Ht(),Qn(),_,o,b,_[Zt],f,!1),B_}function U_(o,a){return o<<17|a<<2}function du(o){return o>>17&32767}function U0(o){return 2|o}function jd(o){return(131068&o)>>2}function j_(o,a){return-131069&o|a<<2}function j0(o){return 1|o}function YE(o,a,c,d,f){const _=o[c+1],b=null===a;let C=d?du(_):jd(_),T=!1;for(;0!==C&&(!1===T||b);){const x=o[C+1];rA(o[C],a)&&(T=!0,o[C+1]=d?j0(x):U0(x)),C=d?du(x):jd(x)}T&&(o[c+1]=d?U0(_):j0(_))}function rA(o,a){return null===o||null==a||(Array.isArray(o)?o[1]:o)===a||!(!Array.isArray(o)||"string"!=typeof a)&&Jn(o,a)>=0}const pi={textEnd:0,key:0,keyEnd:0,value:0,valueEnd:0};function ZE(o){return o.substring(pi.key,pi.keyEnd)}function QE(o,a){const c=pi.textEnd;return c===a?-1:(a=pi.keyEnd=function aA(o,a,c){for(;a<c&&o.charCodeAt(a)>32;)a++;return a}(o,pi.key=a,c),_f(o,a,c))}function _f(o,a,c){for(;a<c&&o.charCodeAt(a)<=32;)a++;return a}function nl(o,a,c){return Da(o,a,c,!1),nl}function gi(o,a){return Da(o,a,null,!0),gi}function nC(o){Ea(G_,rl,o,!0)}function rl(o,a){for(let c=function sA(o){return function JE(o){pi.key=0,pi.keyEnd=0,pi.value=0,pi.valueEnd=0,pi.textEnd=o.length}(o),QE(o,_f(o,0,pi.textEnd))}(a);c>=0;c=QE(a,c))Ii(o,ZE(a),!0)}function Da(o,a,c,d){const f=ye(),_=Ht(),b=Xi(2);_.firstUpdatePass&&bg(_,o,b,d),a!==Qt&&us(f,b,a)&&sC(_,_.data[Xr()],f,f[Zt],o,f[b+1]=function oC(o,a){return null==o||""===o||("string"==typeof a?o+=a:"object"==typeof o&&(o=Te(Kr(o)))),o}(a,c),d,b)}function Ea(o,a,c,d){const f=Ht(),_=Xi(2);f.firstUpdatePass&&bg(f,null,_,d);const b=ye();if(c!==Qt&&us(b,_,c)){const C=f.data[Xr()];if($_(C,d)&&!or(f,_)){let T=d?C.classesWithoutHost:C.stylesWithoutHost;null!==T&&(c=ve(T,c||"")),gg(f,C,b,c,d)}else!function iC(o,a,c,d,f,_,b,C){f===Qt&&(f=$e);let T=0,M=0,x=0<f.length?f[0]:null,V=0<_.length?_[0]:null;for(;null!==x||null!==V;){const q=T<f.length?f[T+1]:void 0,ne=M<_.length?_[M+1]:void 0;let Qe,Se=null;x===V?(T+=2,M+=2,q!==ne&&(Se=V,Qe=ne)):null===V||null!==x&&x<V?(T+=2,Se=x):(M+=2,Se=V,Qe=ne),null!==Se&&sC(o,a,c,d,Se,Qe,b,C),x=T<f.length?f[T]:null,V=M<_.length?_[M]:null}}(f,C,b,b[Zt],b[_+1],b[_+1]=function il(o,a,c){if(null==c||""===c)return $e;const d=[],f=Kr(c);if(Array.isArray(f))for(let _=0;_<f.length;_++)o(d,f[_],!0);else if("object"==typeof f)for(const _ in f)f.hasOwnProperty(_)&&o(d,_,f[_]);else"string"==typeof f&&a(d,f);return d}(o,a,c),d,_)}}function or(o,a){return a>=o.expandoStartIndex}function bg(o,a,c,d){const f=o.data;if(null===f[c+1]){const _=f[Xr()],b=or(o,c);$_(_,d)&&null===a&&!b&&(a=!1),a=function uA(o,a,c,d){const f=function Ua(o){const a=jt.lFrame.currentDirectiveIndex;return-1===a?null:o[a]}(o);let _=d?a.residualClasses:a.residualStyles;if(null===f)0===(d?a.classBindings:a.styleBindings)&&(c=hr(c=yf(null,o,a,c,d),a.attrs,d),_=null);else{const b=a.directiveStylingLast;if(-1===b||o[b]!==f)if(c=yf(f,o,a,c,d),null===_){let T=function cA(o,a,c){const d=c?a.classBindings:a.styleBindings;if(0!==jd(d))return o[du(d)]}(o,a,d);void 0!==T&&Array.isArray(T)&&(T=yf(null,o,a,T[1],d),T=hr(T,a.attrs,d),function rC(o,a,c,d){o[du(c?a.classBindings:a.styleBindings)]=d}(o,a,d,T))}else _=function dA(o,a,c){let d;const f=a.directiveEnd;for(let _=1+a.directiveStylingLast;_<f;_++)d=hr(d,o[_].hostAttrs,c);return hr(d,a.attrs,c)}(o,a,d)}return void 0!==_&&(d?a.residualClasses=_:a.residualStyles=_),c}(f,_,a,d),function tA(o,a,c,d,f,_){let b=_?a.classBindings:a.styleBindings,C=du(b),T=jd(b);o[d]=c;let x,M=!1;if(Array.isArray(c)?(x=c[1],(null===x||Jn(c,x)>0)&&(M=!0)):x=c,f)if(0!==T){const q=du(o[C+1]);o[d+1]=U_(q,C),0!==q&&(o[q+1]=j_(o[q+1],d)),o[C+1]=function JS(o,a){return 131071&o|a<<17}(o[C+1],d)}else o[d+1]=U_(C,0),0!==C&&(o[C+1]=j_(o[C+1],d)),C=d;else o[d+1]=U_(T,0),0===C?C=d:o[T+1]=j_(o[T+1],d),T=d;M&&(o[d+1]=U0(o[d+1])),YE(o,x,d,!0),YE(o,x,d,!1),function nA(o,a,c,d,f){const _=f?o.residualClasses:o.residualStyles;null!=_&&"string"==typeof a&&Jn(_,a)>=0&&(c[d+1]=j0(c[d+1]))}(a,x,o,d,_),b=U_(C,T),_?a.classBindings=b:a.styleBindings=b}(f,_,a,c,b,d)}}function yf(o,a,c,d,f){let _=null;const b=c.directiveEnd;let C=c.directiveStylingLast;for(-1===C?C=c.directiveStart:C++;C<b&&(_=a[C],d=hr(d,_.hostAttrs,f),_!==o);)C++;return null!==o&&(c.directiveStylingLast=C),d}function hr(o,a,c){const d=c?1:2;let f=-1;if(null!==a)for(let _=0;_<a.length;_++){const b=a[_];"number"==typeof b?f=b:f===d&&(Array.isArray(o)||(o=void 0===o?[]:["",o]),Ii(o,b,!!c||a[++_]))}return void 0===o?null:o}function G_(o,a,c){const d=String(a);""!==d&&!d.includes(" ")&&Ii(o,d,c)}function sC(o,a,c,d,f,_,b,C){if(!(3&a.type))return;const T=o.data,M=T[C+1],x=function XS(o){return 1==(1&o)}(M)?sl(T,a,c,f,jd(M),b):void 0;bo(x)||(bo(_)||function QS(o){return 2==(2&o)}(M)&&(_=sl(T,null,c,f,C,b)),function Ym(o,a,c,d,f){if(a)f?o.addClass(c,d):o.removeClass(c,d);else{let _=-1===d.indexOf("-")?void 0:di.DashCase;null==f?o.removeStyle(c,d,_):("string"==typeof f&&f.endsWith("!important")&&(f=f.slice(0,-10),_|=di.Important),o.setStyle(c,d,f,_))}}(d,b,to(Xr(),c),f,_))}function sl(o,a,c,d,f,_){const b=null===a;let C;for(;f>0;){const T=o[f],M=Array.isArray(T),x=M?T[1]:T,V=null===x;let q=c[f+1];q===Qt&&(q=V?$e:void 0);let ne=V?ko(q,d):x===d?q:void 0;if(M&&!bo(ne)&&(ne=ko(T,d)),bo(ne)&&(C=ne,b))return C;const Se=o[f+1];f=b?du(Se):jd(Se)}if(null!==a){let T=_?a.residualClasses:a.residualStyles;null!=T&&(C=ko(T,d))}return C}function bo(o){return void 0!==o}function $_(o,a){return 0!=(o.flags&(a?8:16))}function G0(o,a=""){const c=ye(),d=Ht(),f=o+Bn,_=d.firstCreatePass?su(d,f,1,a,null):d.data[f],b=c[f]=jh(c[Zt],a);cc(d,c,b,_),Ti(_,!1)}function vf(o){return H_("",o,""),vf}function H_(o,a,c){const d=ye(),f=Bd(d,o,a,c);return f!==Qt&&function Bo(o,a,c){const d=to(a,o);Um(o[Zt],d,c)}(d,Xr(),f),H_}function mA(o,a,c,d,f){Ea(Ii,rl,function Tc(o,a,c,d,f,_){const C=lu(o,Ji(),c,f);return Xi(2),C?a+Fe(c)+d+Fe(f)+_:Qt}(ye(),o,a,c,d,f),!0)}function bf(o,a,c){const d=ye();return us(d,Zo(),a)&&go(Ht(),Qn(),d,o,a,d[Zt],c,!0),bf}const Gd=void 0;var mC=["en",[["a","p"],["AM","PM"],Gd],[["AM","PM"],Gd,Gd],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Gd,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Gd,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Gd,"{1} 'at' {0}",Gd],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function DA(o){const c=Math.floor(Math.abs(o)),d=o.toString().replace(/^[^.]*\.?/,"").length;return 1===c&&0===d?1:5}];let wf={};function $d(o){const a=function CA(o){return o.toLowerCase().replace(/_/g,"-")}(o);let c=z0(a);if(c)return c;const d=a.split("-")[0];if(c=z0(d),c)return c;if("en"===d)return mC;throw new _e(701,!1)}function Eg(o){return $d(o)[Lt.PluralCase]}function z0(o){return o in wf||(wf[o]=kt.ng&&kt.ng.common&&kt.ng.common.locales&&kt.ng.common.locales[o]),wf[o]}var Lt=(()=>((Lt=Lt||{})[Lt.LocaleId=0]="LocaleId",Lt[Lt.DayPeriodsFormat=1]="DayPeriodsFormat",Lt[Lt.DayPeriodsStandalone=2]="DayPeriodsStandalone",Lt[Lt.DaysFormat=3]="DaysFormat",Lt[Lt.DaysStandalone=4]="DaysStandalone",Lt[Lt.MonthsFormat=5]="MonthsFormat",Lt[Lt.MonthsStandalone=6]="MonthsStandalone",Lt[Lt.Eras=7]="Eras",Lt[Lt.FirstDayOfWeek=8]="FirstDayOfWeek",Lt[Lt.WeekendRange=9]="WeekendRange",Lt[Lt.DateFormat=10]="DateFormat",Lt[Lt.TimeFormat=11]="TimeFormat",Lt[Lt.DateTimeFormat=12]="DateTimeFormat",Lt[Lt.NumberSymbols=13]="NumberSymbols",Lt[Lt.NumberFormats=14]="NumberFormats",Lt[Lt.CurrencyCode=15]="CurrencyCode",Lt[Lt.CurrencySymbol=16]="CurrencySymbol",Lt[Lt.CurrencyName=17]="CurrencyName",Lt[Lt.Currencies=18]="Currencies",Lt[Lt.Directionality=19]="Directionality",Lt[Lt.PluralCase=20]="PluralCase",Lt[Lt.ExtraData=21]="ExtraData",Lt))();const TA=["zero","one","two","few","many"],Ac="en-US",Df={marker:"element"},Cg={marker:"ICU"};var ar=(()=>((ar=ar||{})[ar.SHIFT=2]="SHIFT",ar[ar.APPEND_EAGERLY=1]="APPEND_EAGERLY",ar[ar.COMMENT=2]="COMMENT",ar))();let Z_=Ac;function Q_(o){(function je(o,a){null==o&&st(a,o,null,"!=")})(o,"Expected localeId to be defined"),"string"==typeof o&&(Z_=o.toLowerCase().replace(/_/g,"-"))}function J_(o,a,c){const d=a.insertBeforeIndex,f=Array.isArray(d)?d[0]:d;return null===f?zh(o,0,c):Hr(c[f])}function X_(o,a,c,d,f){const _=a.insertBeforeIndex;if(Array.isArray(_)){let b=d,C=null;if(3&a.type||(C=b,b=f),null!==b&&-1===a.componentOffset)for(let T=1;T<_.length;T++)va(o,b,c[_[T]],C,!1)}}function ey(o,a){if(o.push(a),o.length>1)for(let c=o.length-2;c>=0;c--){const d=o[c];ty(d)||SA(d,a)&&null===AA(d)&&NA(d,a.index)}}function ty(o){return!(64&o.type)}function SA(o,a){return ty(a)||o.index>a.index}function AA(o){const a=o.insertBeforeIndex;return Array.isArray(a)?a[0]:a}function NA(o,a){const c=o.insertBeforeIndex;Array.isArray(c)?c[0]=a:(Ed(J_,X_),o.insertBeforeIndex=a)}function Nc(o,a){const c=o.data[a];return null===c||"string"==typeof c?null:c.hasOwnProperty("currentCaseLViewIndex")?c:c.value}function q0(o,a,c){const d=v_(o,c,64,null,null);return ey(a,d),d}function Ef(o,a){const c=a[o.currentCaseLViewIndex];return null===c?c:c<0?~c:c}function ny(o){return o>>>17}function K0(o){return(131070&o)>>>1}let ol=0,Cf=0;function DC(o,a,c,d){const f=c[Zt];let b,_=null;for(let C=0;C<a.length;C++){const T=a[C];if("string"==typeof T){const M=a[++C];null===c[M]&&(c[M]=jh(f,T))}else if("number"==typeof T)switch(1&T){case 0:const M=ny(T);let x,V;if(null===_&&(_=M,b=wd(f,d)),M===_?(x=d,V=b):(x=null,V=Hr(c[M])),null!==V){const Qe=K0(T);va(f,V,c[Qe],x,!1);const Dt=Nc(o,Qe);if(null!==Dt&&"object"==typeof Dt){const Bt=Ef(Dt,c);null!==Bt&&DC(o,Dt.create[Bt],c,c[Dt.anchorIdx])}}break;case 1:const ne=a[++C],Se=a[++C];kd(f,to(T>>>1,c),null,null,ne,Se,null)}else switch(T){case Cg:const M=a[++C],x=a[++C];null===c[x]&&de(c[x]=Fv(f,M),c);break;case Df:const V=a[++C],q=a[++C];null===c[q]&&de(c[q]=jp(f,V,null),c)}}}function EC(o,a,c,d,f){for(let _=0;_<c.length;_++){const b=c[_],C=c[++_];if(b&f){let T="";for(let M=_+1;M<=_+C;M++){const x=c[M];if("string"==typeof x)T+=x;else if("number"==typeof x)if(x<0)T+=Fe(a[d-x]);else{const V=x>>>2;switch(3&x){case 1:const q=c[++M],ne=c[++M],Se=o.data[V];"string"==typeof Se?kd(a[Zt],a[V],null,Se,q,T,ne):go(o,Se,a,q,T,a[Zt],ne,!1);break;case 0:const Qe=a[V];null!==Qe&&Um(a[Zt],Qe,T);break;case 2:xA(o,Nc(o,V),a,T);break;case 3:CC(o,Nc(o,V),d,a)}}}}else{const T=c[_+1];if(T>0&&3==(3&T)){const x=Nc(o,T>>>2);a[x.currentCaseLViewIndex]<0&&CC(o,x,d,a)}}_+=C}}function CC(o,a,c,d){let f=d[a.currentCaseLViewIndex];if(null!==f){let _=ol;f<0&&(f=d[a.currentCaseLViewIndex]=~f,_=-1),EC(o,d,a.update[f],c,_)}}function xA(o,a,c,d){const f=function PA(o,a){let c=o.cases.indexOf(a);if(-1===c)switch(o.type){case 1:{const d=function _C(o,a){const c=Eg(a)(parseInt(o,10)),d=TA[c];return void 0!==d?d:"other"}(a,function IA(){return Z_}());c=o.cases.indexOf(d),-1===c&&"other"!==d&&(c=o.cases.indexOf("other"));break}case 0:c=o.cases.indexOf("other")}return-1===c?null:c}(a,d);if(Ef(a,c)!==f&&(TC(o,a,c),c[a.currentCaseLViewIndex]=null===f?null:~f,null!==f)){const b=c[a.anchorIdx];b&&DC(o,a.create[f],c,b)}}function TC(o,a,c){let d=Ef(a,c);if(null!==d){const f=a.remove[d];for(let _=0;_<f.length;_++){const b=f[_];if(b>0){const C=to(b,c);null!==C&&Wh(c[Zt],C)}else TC(o,Nc(o,~b),c)}}}function ry(){const o=[];let c,d,a=-1;function _(C,T){a=0;const M=Ef(C,T);d=null!==M?C.remove[M]:$e}function b(){if(a<d.length){const C=d[a++];return C>0?c[C]:(o.push(a,d),_(c[ot].data[~C],c),b())}return 0===o.length?null:(d=o.pop(),a=o.pop(),b())}return function f(C,T){for(c=T;o.length;)o.pop();return _(C.value,T),b}}const iy=/\ufffd(\d+):?\d*\ufffd/gi,NC=/\ufffd(\d+)\ufffd/,Y0=/^\s*(\ufffd\d+:?\d*\ufffd)\s*,\s*(select|plural)\s*,/,Tf="\ufffd",MC=/\ufffd\/?\*(\d+:\d+)\ufffd/gi,DP=/\ufffd(\/?[#*]\d+):?\d*\ufffd/gi,LA=/\uE500/g;function BA(o,a,c,d,f,_,b){const C=sg(o,d,1,null);let T=C<<ar.SHIFT,M=Pu();a===M&&(M=null),null===M&&(T|=ar.APPEND_EAGERLY),b&&(T|=ar.COMMENT,function Vp(o){void 0===rs&&(rs=o())}(ry)),f.push(T,null===_?"":_);const x=v_(o,C,b?32:1,null===_?"":_,null);ey(c,x);const V=x.index;return Ti(x,!1),null!==M&&a!==M&&function vC(o,a){let c=o.insertBeforeIndex;null===c?(Ed(J_,X_),c=o.insertBeforeIndex=[null,a]):(function it(o,a,c){o!=a&&st(c,o,a,"==")}(Array.isArray(c),!0,"Expecting array here"),c.push(a))}(M,V),x}function CP(o,a,c,d,f,_,b){const C=b.match(iy),T=BA(o,a,c,_,d,C?null:b,!1);C&&If(f,b,T.index,null,0,null)}function If(o,a,c,d,f,_){const b=o.length,C=b+1;o.push(null,null);const T=b+2,M=a.split(iy);let x=0;for(let V=0;V<M.length;V++){const q=M[V];if(1&V){const ne=f+parseInt(q,10);o.push(-1-ne),x|=Q0(ne)}else""!==q&&o.push(q)}return o.push(c<<2|(d?1:0)),d&&o.push(d,_),o[b]=x,o[C]=o.length-T,x}function Q0(o){return 1<<Math.min(o,31)}function Tg(o){let a,_,c="",d=0,f=!1;for(;null!==(a=MC.exec(o));)f?a[0]===`${Tf}/*${_}${Tf}`&&(d=a.index,f=!1):(c+=o.substring(d,a.index+a[0].length),_=a[1],f=!0);return c+=o.slice(d),c}function sy(o,a,c,d,f,_){let b=0;const C={type:f.type,currentCaseLViewIndex:sg(o,a,1,null),anchorIdx:_,cases:[],create:[],remove:[],update:[]};(function NP(o,a,c){o.push(Q0(a.mainBinding),2,-1-a.mainBinding,c<<2|2)})(c,f,_),function W0(o,a,c){const d=o.data[a];null===d?o.data[a]=c:d.value=c}(o,_,C);const T=f.values;for(let M=0;M<T.length;M++){const x=T[M],V=[];for(let q=0;q<x.length;q++){const ne=x[q];if("string"!=typeof ne){const Se=V.push(ne)-1;x[q]=`\x3c!--\ufffd${Se}\ufffd--\x3e`}}b=SP(o,C,a,c,d,f.cases[M],x.join(""),V)|b}b&&function jA(o,a,c){o.push(a,1,c<<2|3)}(c,b,_)}function IP(o){const a=[],c=[];let d=1,f=0;const _=X0(o=o.replace(Y0,function(b,C,T){return d="select"===T?0:1,f=parseInt(C.slice(1),10),""}));for(let b=0;b<_.length;){let C=_[b++].trim();1===d&&(C=C.replace(/\s*(?:=)?(\w+)\s*/,"$1")),C.length&&a.push(C);const T=X0(_[b++]);a.length>c.length&&c.push(T)}return{type:d,mainBinding:f,cases:a,values:c}}function X0(o){if(!o)return[];let a=0;const c=[],d=[],f=/[{}]/g;let _;for(f.lastIndex=0;_=f.exec(o);){const C=_.index;if("}"==_[0]){if(c.pop(),0==c.length){const T=o.substring(a,C);Y0.test(T)?d.push(IP(T)):d.push(T),a=C+1}}else{if(0==c.length){const T=o.substring(a,C);d.push(T),a=C+1}c.push("{")}}const b=o.substring(a);return d.push(b),d}function SP(o,a,c,d,f,_,b,C){const T=[],M=[],x=[];a.cases.push(_),a.create.push(T),a.remove.push(M),a.update.push(x);const q=function tn(o){const a=new js(o);return function fc(){try{return!!(new window.DOMParser).parseFromString(Wt(""),"text/html")}catch{return!1}}()?new Yh(a):a}(function er(){return void 0!==ba?ba:typeof document<"u"?document:void 0}()).getInertBodyElement(b),ne=function el(o){return"content"in o&&function Ql(o){return o.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===o.nodeName}(o)?o.content:null}(q)||q;return ne?RC(o,a,c,d,T,M,x,ne,f,C,0):0}function RC(o,a,c,d,f,_,b,C,T,M,x){let V=0,q=C.firstChild;for(;q;){const ne=sg(o,c,1,null);switch(q.nodeType){case Node.ELEMENT_NODE:const Se=q,Qe=Se.tagName.toLowerCase();if(g.hasOwnProperty(Qe)){xC(f,Df,Qe,T,ne),o.data[ne]=Qe;const Me=Se.attributes;for(let Jt=0;Jt<Me.length;Jt++){const $n=Me.item(Jt),ei=$n.name.toLowerCase();$n.value.match(iy)?G.hasOwnProperty(ei)&&If(b,$n.value,ne,$n.name,0,w[ei]?Yl:null):MP(f,ne,$n)}V=RC(o,a,c,d,f,_,b,q,ne,M,x+1)|V,OC(_,ne,x)}break;case Node.TEXT_NODE:const at=q.textContent||"",Dt=at.match(iy);xC(f,null,Dt?"":at,T,ne),OC(_,ne,x),Dt&&(V=If(b,at,ne,null,0,null)|V);break;case Node.COMMENT_NODE:const Bt=NC.exec(q.textContent||"");if(Bt){const Jt=M[parseInt(Bt[1],10)];xC(f,Cg,"",T,ne),sy(o,c,d,T,Jt,ne),AP(_,ne,x)}}q=q.nextSibling}return V}function OC(o,a,c){0===c&&o.push(a)}function AP(o,a,c){0===c&&(o.push(~a),o.push(a))}function xC(o,a,c,d,f){null!==a&&o.push(a),o.push(c,f,function wC(o,a,c){return o|a<<17|c<<1}(0,d,f))}function MP(o,a,c){o.push(a<<1|1,c.name,c.value)}function oy(o,a,c=-1){const d=Ht(),f=ye(),_=Bn+o,b=Oo(d.consts,a),C=Pu();d.firstCreatePass&&function Z0(o,a,c,d,f,_){const b=Pu(),C=[],T=[],M=[[]];f=function TP(o,a){if(function J0(o){return-1===o}(a))return Tg(o);{const c=o.indexOf(`:${a}${Tf}`)+2+a.toString().length,d=o.search(new RegExp(`${Tf}\\/\\*\\d+:${a}${Tf}`));return Tg(o.substring(c,d))}}(f,_);const x=function EP(o){return o.replace(LA," ")}(f).split(DP);for(let V=0;V<x.length;V++){let q=x[V];if(1&V){const ne=47===q.charCodeAt(0),Qe=(q.charCodeAt(ne?1:0),Bn+Number.parseInt(q.substring(ne?2:1)));if(ne)M.shift(),Ti(Pu(),!1);else{const at=q0(o,M[0],Qe);M.unshift([]),Ti(at,!0)}}else{const ne=X0(q);for(let Se=0;Se<ne.length;Se++){let Qe=ne[Se];if(1&Se){const at=Qe;if("object"!=typeof at)throw new Error(`Unable to parse ICU expression in "${f}" message.`);sy(o,c,T,a,at,BA(o,b,M[0],c,C,"",!0).index)}else""!==Qe&&CP(o,b,M[0],C,T,c,Qe)}}}o.data[d]={create:C,update:T}}(d,null===C?0:C.index,f,_,b,c);const T=d.data[_],x=ya(d,C===f[br]?null:C,f);(function OA(o,a,c,d){const f=o[Zt];for(let _=0;_<a.length;_++){const b=a[_++],C=a[_],M=(b&ar.APPEND_EAGERLY)===ar.APPEND_EAGERLY,x=b>>>ar.SHIFT;let V=o[x];null===V&&(V=o[x]=(b&ar.COMMENT)===ar.COMMENT?f.createComment(C):jh(f,C)),M&&null!==c&&va(f,c,V,d,!1)}})(f,T.create,x,C&&8&C.type?f[C.index]:null),Il(!0)}function ly(o,a,c){oy(o,a,c),function ay(){Il(!1)}()}function PC(o){return function MA(o){o&&(ol|=1<<Math.min(Cf,31)),Cf++}(us(ye(),Zo(),o)),PC}function kC(o){!function RA(o,a,c){if(Cf>0){const d=o.data[c];EC(o,a,Array.isArray(d)?d:d.update,Ji()-Cf-1,ol)}ol=0,Cf=0}(Ht(),ye(),o+Bn)}function uy(o,a,c,d,f){if(o=Y(o),Array.isArray(o))for(let _=0;_<o.length;_++)uy(o[_],a,c,d,f);else{const _=Ht(),b=ye();let C=mc(o)?o:Y(o.provide),T=zD(o);const M=Nr(),x=1048575&M.providerIndexes,V=M.directiveStart,q=M.providerIndexes>>20;if(mc(o)||!o.multi){const ne=new so(T,f,wc),Se=Hd(C,a,f?x:x+q,V);-1===Se?(Fn(od(M,b),_,C),cy(_,o,a.length),a.push(C),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),c.push(ne),b.push(ne)):(c[Se]=ne,b[Se]=ne)}else{const ne=Hd(C,a,x+q,V),Se=Hd(C,a,x,x+q),at=Se>=0&&c[Se];if(f&&!at||!f&&!(ne>=0&&c[ne])){Fn(od(M,b),_,C);const Dt=function qA(o,a,c,d,f){const _=new so(o,c,wc);return _.multi=[],_.index=a,_.componentProviders=0,sb(_,f,d&&!c),_}(f?LC:WA,c.length,f,d,T);!f&&at&&(c[Se].providerFactory=Dt),cy(_,o,a.length,0),a.push(C),M.directiveStart++,M.directiveEnd++,f&&(M.providerIndexes+=1048576),c.push(Dt),b.push(Dt)}else cy(_,o,ne>-1?ne:Se,sb(c[f?Se:ne],T,!f&&d));!f&&d&&at&&c[Se].componentProviders++}}}function cy(o,a,c,d){const f=mc(a),_=function i_(o){return!!o.useClass}(a);if(f||_){const T=(_?Y(a.useClass):a).prototype.ngOnDestroy;if(T){const M=o.destroyHooks||(o.destroyHooks=[]);if(!f&&a.multi){const x=M.indexOf(c);-1===x?M.push(c,[d,T]):M[x+1].push(d,T)}else M.push(c,T)}}}function sb(o,a,c){return c&&o.componentProviders++,o.multi.push(a)-1}function Hd(o,a,c,d){for(let f=c;f<d;f++)if(a[f]===o)return f;return-1}function WA(o,a,c,d){return ob(this.multi,[])}function LC(o,a,c,d){const f=this.multi;let _;if(this.providerFactory){const b=this.providerFactory.componentProviders,C=mr(c,c[ot],this.providerFactory.index,d);_=C.slice(0,b),ob(f,_);for(let T=b;T<C.length;T++)_.push(C[T])}else _=[],ob(f,_);return _}function ob(o,a){for(let c=0;c<o.length;c++)a.push((0,o[c])());return a}function ab(o,a=[]){return c=>{c.providersResolver=(d,f)=>function FC(o,a,c){const d=Ht();if(d.firstCreatePass){const f=Zi(o);uy(c,d.data,d.blueprint,f,!0),uy(a,d.data,d.blueprint,f,!1)}}(d,f?f(o):o,a)}}class zd{}class lb{}function KA(o,a){return new BC(o,a??null)}class BC extends zd{constructor(a,c){super(),this._parent=c,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new T0(this);const d=vr(a);this._bootstrapComponents=nu(d.bootstrap),this._r3Injector=rE(a,c,[{provide:zd,useValue:this},{provide:tu,useValue:this.componentFactoryResolver}],Te(a),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(a)}get injector(){return this._r3Injector}destroy(){const a=this._r3Injector;!a.destroyed&&a.destroy(),this.destroyCbs.forEach(c=>c()),this.destroyCbs=null}onDestroy(a){this.destroyCbs.push(a)}}class dy extends lb{constructor(a){super(),this.moduleType=a}create(a){return new BC(this.moduleType,a)}}class YA extends zd{constructor(a,c,d){super(),this.componentFactoryResolver=new T0(this),this.instance=null;const f=new HD([...a,{provide:zd,useValue:this},{provide:tu,useValue:this.componentFactoryResolver}],c||tf(),d,new Set(["environment"]));this.injector=f,f.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(a){this.injector.onDestroy(a)}}function ub(o,a,c=null){return new YA(o,a,c).injector}let VC=(()=>{class o{constructor(c){this._injector=c,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(c){if(!c.standalone)return null;if(!this.cachedInjectors.has(c.id)){const d=jD(0,c.type),f=d.length>0?ub([d],this._injector,`Standalone[${c.type.name}]`):null;this.cachedInjectors.set(c.id,f)}return this.cachedInjectors.get(c.id)}ngOnDestroy(){try{for(const c of this.cachedInjectors.values())null!==c&&c.destroy()}finally{this.cachedInjectors.clear()}}}return o.\u0275prov=At({token:o,providedIn:"environment",factory:()=>new o(Cn(Sd))}),o})();function UC(o){o.getStandaloneInjector=a=>a.get(VC).getOrCreateStandaloneInjector(o)}function HC(o,a,c){const d=wr()+o,f=ye();return f[d]===Qt?Vo(f,d,c?a.call(c):a()):function hg(o,a){return o[a]}(f,d)}function pb(o,a,c,d){return Mc(ye(),wr(),o,a,c,d)}function Sf(o,a,c,d,f){return function Mi(o,a,c,d,f,_,b){const C=a+c;return lu(o,C,f,_)?Vo(o,C+2,b?d.call(b,f,_):d(f,_)):Af(o,C+2)}(ye(),wr(),o,a,c,d,f)}function zC(o,a,c,d,f,_){return function Rc(o,a,c,d,f,_,b,C){const T=a+c;return function k_(o,a,c,d,f){const _=lu(o,a,c,d);return us(o,a+2,f)||_}(o,T,f,_,b)?Vo(o,T+3,C?d.call(C,f,_,b):d(f,_,b)):Af(o,T+3)}(ye(),wr(),o,a,c,d,f,_)}function Af(o,a){const c=o[a];return c===Qt?void 0:c}function Mc(o,a,c,d,f,_){const b=a+c;return us(o,b,f)?Vo(o,b+1,_?d.call(_,f):d(f)):Af(o,b+1)}function fy(o,a){const c=Ht();let d;const f=o+Bn;c.firstCreatePass?(d=function KC(o,a){if(a)for(let c=a.length-1;c>=0;c--){const d=a[c];if(o===d.name)return d}}(a,c.pipeRegistry),c.data[f]=d,d.onDestroy&&(c.destroyHooks??(c.destroyHooks=[])).push(f,d.onDestroy)):d=c.data[f];const _=d.factory||(d.factory=Fs(d.type)),b=pn(wc);try{const C=Ml(!1),T=_();return Ml(C),function fg(o,a,c,d){c>=o.data.length&&(o.data[c]=null,o.blueprint[c]=null),a[c]=d}(c,ye(),f,T),T}finally{pn(b)}}function mb(o,a,c){const d=o+Bn,f=ye(),_=ui(f,d);return function al(o,a){return o[ot].data[a].pure}(f,d)?Mc(f,wr(),a,_.transform,c,_):_.transform(c)}function yb(o){return a=>{setTimeout(o,void 0,a)}}const yi=class sN extends u.x{constructor(a=!1){super(),this.__isAsync=a}emit(a){super.next(a)}subscribe(a,c,d){let f=a,_=c||(()=>null),b=d;if(a&&"object"==typeof a){const T=a;f=T.next?.bind(T),_=T.error?.bind(T),b=T.complete?.bind(T)}this.__isAsync&&(_=yb(_),f&&(f=yb(f)),b&&(b=yb(b)));const C=super.subscribe({next:f,error:_,complete:b});return a instanceof X.w0&&a.add(C),C}};function YC(){return this._results[Symbol.iterator]()}class py{get changes(){return this._changes||(this._changes=new yi)}constructor(a=!1){this._emitDistinctChangesOnly=a,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const c=py.prototype;c[Symbol.iterator]||(c[Symbol.iterator]=YC)}get(a){return this._results[a]}map(a){return this._results.map(a)}filter(a){return this._results.filter(a)}find(a){return this._results.find(a)}reduce(a,c){return this._results.reduce(a,c)}forEach(a){this._results.forEach(a)}some(a){return this._results.some(a)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(a,c){const d=this;d.dirty=!1;const f=function Ds(o){return o.flat(Number.POSITIVE_INFINITY)}(a);(this._changesDetected=!function hd(o,a,c){if(o.length!==a.length)return!1;for(let d=0;d<o.length;d++){let f=o[d],_=a[d];if(c&&(f=c(f),_=c(_)),_!==f)return!1}return!0}(d._results,f,c))&&(d._results=f,d.length=f.length,d.last=f[this.length-1],d.first=f[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Nf=(()=>{class o{}return o.__NG_ELEMENT_ID__=Oc,o})();const FP=Nf,ji=class extends FP{constructor(a,c,d){super(),this._declarationLView=a,this._declarationTContainer=c,this.elementRef=d}createEmbeddedView(a,c){const d=this._declarationTContainer.tView,f=y_(this._declarationLView,d,a,16,null,d.declTNode,null,null,null,null,c||null);f[Pa]=this._declarationLView[this._declarationTContainer.index];const b=this._declarationLView[vs];return null!==b&&(f[vs]=b.createEmbeddedView(d)),og(d,f,a),new ff(f)}};function Oc(){return Wd(Nr(),ye())}function Wd(o,a){return 4&o.type?new ji(a,o,sf(o,a)):null}let gy=(()=>{class o{}return o.__NG_ELEMENT_ID__=ZC,o})();function ZC(){return wb(Nr(),ye())}const QC=gy,JC=class extends QC{constructor(a,c,d){super(),this._lContainer=a,this._hostTNode=c,this._hostLView=d}get element(){return sf(this._hostTNode,this._hostLView)}get injector(){return new ao(this._hostTNode,this._hostLView)}get parentInjector(){const a=Nh(this._hostTNode,this._hostLView);if(na(a)){const c=ra(a,this._hostLView),d=xo(a);return new ao(c[ot].data[d+8],c)}return new ao(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(a){const c=vb(this._lContainer);return null!==c&&c[a]||null}get length(){return this._lContainer.length-$r}createEmbeddedView(a,c,d){let f,_;"number"==typeof d?f=d:null!=d&&(f=d.index,_=d.injector);const b=a.createEmbeddedView(c||{},_);return this.insert(b,f),b}createComponent(a,c,d,f,_){const b=a&&!function Xu(o){return"function"==typeof o}(a);let C;if(b)C=c;else{const V=c||{};C=V.index,d=V.injector,f=V.projectableNodes,_=V.environmentInjector||V.ngModuleRef}const T=b?a:new pf(Nt(a)),M=d||this.parentInjector;if(!_&&null==T.ngModule){const q=(b?M:this.parentInjector).get(Sd,null);q&&(_=q)}const x=T.create(M,f,void 0,_);return this.insert(x.hostView,C),x}insert(a,c){const d=a._lView,f=d[ot];if(function Xc(o){return Pi(o[zn])}(d)){const x=this.indexOf(a);if(-1!==x)this.detach(x);else{const V=d[zn],q=new JC(V,V[br],V[zn]);q.detach(q.indexOf(a))}}const _=this._adjustIndex(c),b=this._lContainer;!function Wl(o,a,c,d){const f=$r+d,_=c.length;d>0&&(c[f-1][Yi]=a),d<_-$r?(a[Yi]=c[f],Op(c,$r+d,a)):(c.push(a),a[Yi]=null),a[zn]=c;const b=a[Pa];null!==b&&c!==b&&function Lv(o,a){const c=o[qo];a[gr]!==a[zn][zn][gr]&&(o[qc]=!0),null===c?o[qo]=[a]:c.push(a)}(b,a);const C=a[vs];null!==C&&C.insertView(o),a[$t]|=64}(f,d,b,_);const C=ql(_,b),T=d[Zt],M=wd(T,b[ka]);return null!==M&&function Gp(o,a,c,d,f,_){d[Ki]=f,d[br]=a,dc(o,d,c,1,f,_)}(f,b[br],T,d,M,C),a.attachToViewContainerRef(),Op(bb(b),_,a),a}move(a,c){return this.insert(a,c)}indexOf(a){const c=vb(this._lContainer);return null!==c?c.indexOf(a):-1}remove(a){const c=this._adjustIndex(a,-1),d=vd(this._lContainer,c);d&&(ca(bb(this._lContainer),c),$p(d[ot],d))}detach(a){const c=this._adjustIndex(a,-1),d=vd(this._lContainer,c);return d&&null!=ca(bb(this._lContainer),c)?new ff(d):null}_adjustIndex(a,c=0){return a??this.length+c}};function vb(o){return o[No]}function bb(o){return o[No]||(o[No]=[])}function wb(o,a){let c;const d=a[o.index];if(Pi(d))c=d;else{let f;if(8&o.type)f=Hr(d);else{const _=a[Zt];f=_.createComment("");const b=zr(o,a);va(_,wd(_,b),f,function Uv(o,a){return o.nextSibling(a)}(_,b),!1)}a[o.index]=c=yE(d,a,f,o),mo(a,c)}return new JC(c,o,a)}class my{constructor(a){this.queryList=a,this.matches=null}clone(){return new my(this.queryList)}setDirty(){this.queryList.setDirty()}}class Mf{constructor(a=[]){this.queries=a}createEmbeddedView(a){const c=a.queries;if(null!==c){const d=null!==a.contentQueries?a.contentQueries[0]:c.length,f=[];for(let _=0;_<d;_++){const b=c.getByIndex(_);f.push(this.queries[b.indexInDeclarationView].clone())}return new Mf(f)}return null}insertView(a){this.dirtyQueriesWithMatches(a)}detachView(a){this.dirtyQueriesWithMatches(a)}dirtyQueriesWithMatches(a){for(let c=0;c<this.queries.length;c++)null!==Cb(a,c).matches&&this.queries[c].setDirty()}}class fu{constructor(a,c,d=null){this.predicate=a,this.flags=c,this.read=d}}class un{constructor(a=[]){this.queries=a}elementStart(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].elementStart(a,c)}elementEnd(a){for(let c=0;c<this.queries.length;c++)this.queries[c].elementEnd(a)}embeddedTView(a){let c=null;for(let d=0;d<this.length;d++){const f=null!==c?c.length:0,_=this.getByIndex(d).embeddedTView(a,f);_&&(_.indexInDeclarationView=d,null!==c?c.push(_):c=[_])}return null!==c?new un(c):null}template(a,c){for(let d=0;d<this.queries.length;d++)this.queries[d].template(a,c)}getByIndex(a){return this.queries[a]}get length(){return this.queries.length}track(a){this.queries.push(a)}}class qd{constructor(a,c=-1){this.metadata=a,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=c}elementStart(a,c){this.isApplyingToNode(c)&&this.matchTNode(a,c)}elementEnd(a){this._declarationNodeIndex===a.index&&(this._appliesToNextNode=!1)}template(a,c){this.elementStart(a,c)}embeddedTView(a,c){return this.isApplyingToNode(a)?(this.crossesNgTemplate=!0,this.addMatch(-a.index,c),new qd(this.metadata)):null}isApplyingToNode(a){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const c=this._declarationNodeIndex;let d=a.parent;for(;null!==d&&8&d.type&&d.index!==c;)d=d.parent;return c===(null!==d?d.index:-1)}return this._appliesToNextNode}matchTNode(a,c){const d=this.metadata.predicate;if(Array.isArray(d))for(let f=0;f<d.length;f++){const _=d[f];this.matchTNodeWithReadOption(a,c,oN(c,_)),this.matchTNodeWithReadOption(a,c,sa(c,a,_,!1,!1))}else d===Nf?4&c.type&&this.matchTNodeWithReadOption(a,c,-1):this.matchTNodeWithReadOption(a,c,sa(c,a,d,!1,!1))}matchTNodeWithReadOption(a,c,d){if(null!==d){const f=this.metadata.read;if(null!==f)if(f===yc||f===gy||f===Nf&&4&c.type)this.addMatch(c.index,-2);else{const _=sa(c,a,f,!1,!1);null!==_&&this.addMatch(c.index,_)}else this.addMatch(c.index,d)}}addMatch(a,c){null===this.matches?this.matches=[a,c]:this.matches.push(a,c)}}function oN(o,a){const c=o.localNames;if(null!==c)for(let d=0;d<c.length;d+=2)if(c[d]===a)return c[d+1];return null}function aN(o,a,c,d){return-1===c?function Kd(o,a){return 11&o.type?sf(o,a):4&o.type?Wd(o,a):null}(a,o):-2===c?function Ng(o,a,c){return c===yc?sf(a,o):c===Nf?Wd(a,o):c===gy?wb(a,o):void 0}(o,a,d):mr(o,o[ot],c,a)}function _y(o,a,c,d){const f=a[vs].queries[d];if(null===f.matches){const _=o.data,b=c.matches,C=[];for(let T=0;T<b.length;T+=2){const M=b[T];C.push(M<0?null:aN(a,_[M],b[T+1],c.metadata.read))}f.matches=C}return f.matches}function Db(o,a,c,d){const f=o.queries.getByIndex(c),_=f.matches;if(null!==_){const b=_y(o,a,f,c);for(let C=0;C<_.length;C+=2){const T=_[C];if(T>0)d.push(b[C/2]);else{const M=_[C+1],x=a[-T];for(let V=$r;V<x.length;V++){const q=x[V];q[Pa]===q[zn]&&Db(q[ot],q,M,d)}if(null!==x[qo]){const V=x[qo];for(let q=0;q<V.length;q++){const ne=V[q];Db(ne[ot],ne,M,d)}}}}}return d}function Mg(o){const a=ye(),c=Ht(),d=ed();Lu(d+1);const f=Cb(c,d);if(o.dirty&&function Ru(o){return 4==(4&o[$t])}(a)===(2==(2&f.metadata.flags))){if(null===f.matches)o.reset([]);else{const _=f.crossesNgTemplate?Db(c,a,d,[]):_y(c,a,f,d);o.reset(_,rg),o.notifyOnChanges()}return!0}return!1}function Rf(o,a,c){const d=Ht();d.firstCreatePass&&(Og(d,new fu(o,a,c),-1),2==(2&a)&&(d.staticViewQueries=!0)),yy(d,ye(),a)}function Eb(o,a,c,d){const f=Ht();if(f.firstCreatePass){const _=Nr();Og(f,new fu(a,c,d),_.index),function XC(o,a){const c=o.contentQueries||(o.contentQueries=[]);a!==(c.length?c[c.length-1]:-1)&&c.push(o.queries.length-1,a)}(f,o),2==(2&c)&&(f.staticContentQueries=!0)}yy(f,ye(),c)}function Rg(){return function lN(o,a){return o[vs].queries[a].queryList}(ye(),ed())}function yy(o,a,c){const d=new py(4==(4&c));E_(o,a,d,d.destroy),null===a[vs]&&(a[vs]=new Mf),a[vs].queries.push(new my(d))}function Og(o,a,c){null===o.queries&&(o.queries=new un),o.queries.track(new qd(a,c))}function Cb(o,a){return o.queries.getByIndex(a)}function eT(o,a){return Wd(o,a)}function Tb(o){return!!vr(o)}function Bf(...o){}const ll=new fn("Application Initializer");let gu=(()=>{class o{constructor(c){this.appInits=c,this.resolve=Bf,this.reject=Bf,this.initialized=!1,this.done=!1,this.donePromise=new Promise((d,f)=>{this.resolve=d,this.reject=f})}runInitializers(){if(this.initialized)return;const c=[],d=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let f=0;f<this.appInits.length;f++){const _=this.appInits[f]();if(k0(_))c.push(_);else if(FE(_)){const b=new Promise((C,T)=>{_.subscribe({complete:C,error:T})});c.push(b)}}Promise.all(c).then(()=>{d()}).catch(f=>{this.reject(f)}),0===c.length&&d(),this.initialized=!0}}return o.\u0275fac=function(c){return new(c||o)(Cn(ll,8))},o.\u0275prov=At({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Rb=new fn("AppId",{providedIn:"root",factory:function Ob(){return`${Pc()}${Pc()}${Pc()}`}});function Pc(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const xb=new fn("Platform Initializer"),yN=new fn("Platform ID",{providedIn:"platform",factory:()=>"unknown"});let kb=(()=>{class o{log(c){console.log(c)}warn(c){console.warn(c)}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=At({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const Vf=new fn("LocaleId",{providedIn:"root",factory:()=>lr(Vf,te.Optional|te.SkipSelf)||function _T(){return typeof $localize<"u"&&$localize.locale||Ac}()}),Fb=new fn("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class bN{constructor(a,c){this.ngModuleFactory=a,this.componentFactories=c}}let Lb=(()=>{class o{compileModuleSync(c){return new dy(c)}compileModuleAsync(c){return Promise.resolve(this.compileModuleSync(c))}compileModuleAndAllComponentsSync(c){const d=this.compileModuleSync(c),_=nu(vr(c).declarations).reduce((b,C)=>{const T=Nt(C);return T&&b.push(new pf(T)),b},[]);return new bN(d,_)}compileModuleAndAllComponentsAsync(c){return Promise.resolve(this.compileModuleAndAllComponentsSync(c))}clearCache(){}clearCacheFor(c){}getModuleId(c){}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=At({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();const Vb=(()=>Promise.resolve(0))();function Ub(o){typeof Zone>"u"?Vb.then(()=>{o&&o.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",o)}class wo{constructor({enableLongStackTrace:a=!1,shouldCoalesceEventChangeDetection:c=!1,shouldCoalesceRunChangeDetection:d=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new yi(!1),this.onMicrotaskEmpty=new yi(!1),this.onStable=new yi(!1),this.onError=new yi(!1),typeof Zone>"u")throw new _e(908,!1);Zone.assertZonePatched();const f=this;f._nesting=0,f._outer=f._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(f._inner=f._inner.fork(new Zone.TaskTrackingZoneSpec)),a&&Zone.longStackTraceZoneSpec&&(f._inner=f._inner.fork(Zone.longStackTraceZoneSpec)),f.shouldCoalesceEventChangeDetection=!d&&c,f.shouldCoalesceRunChangeDetection=d,f.lastRequestAnimationFrameId=-1,f.nativeRequestAnimationFrame=function DN(){let o=kt.requestAnimationFrame,a=kt.cancelAnimationFrame;if(typeof Zone<"u"&&o&&a){const c=o[Zone.__symbol__("OriginalDelegate")];c&&(o=c);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function JP(o){const a=()=>{!function QP(o){o.isCheckStableRunning||-1!==o.lastRequestAnimationFrameId||(o.lastRequestAnimationFrameId=o.nativeRequestAnimationFrame.call(kt,()=>{o.fakeTopEventTask||(o.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{o.lastRequestAnimationFrameId=-1,Fg(o),o.isCheckStableRunning=!0,DT(o),o.isCheckStableRunning=!1},void 0,()=>{},()=>{})),o.fakeTopEventTask.invoke()}),Fg(o))}(o)};o._inner=o._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(c,d,f,_,b,C)=>{try{return ET(o),c.invokeTask(f,_,b,C)}finally{(o.shouldCoalesceEventChangeDetection&&"eventTask"===_.type||o.shouldCoalesceRunChangeDetection)&&a(),CT(o)}},onInvoke:(c,d,f,_,b,C,T)=>{try{return ET(o),c.invoke(f,_,b,C,T)}finally{o.shouldCoalesceRunChangeDetection&&a(),CT(o)}},onHasTask:(c,d,f,_)=>{c.hasTask(f,_),d===f&&("microTask"==_.change?(o._hasPendingMicrotasks=_.microTask,Fg(o),DT(o)):"macroTask"==_.change&&(o.hasPendingMacrotasks=_.macroTask))},onHandleError:(c,d,f,_)=>(c.handleError(f,_),o.runOutsideAngular(()=>o.onError.emit(_)),!1)})}(f)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!wo.isInAngularZone())throw new _e(909,!1)}static assertNotInAngularZone(){if(wo.isInAngularZone())throw new _e(909,!1)}run(a,c,d){return this._inner.run(a,c,d)}runTask(a,c,d,f){const _=this._inner,b=_.scheduleEventTask("NgZoneEvent: "+f,a,ZP,Bf,Bf);try{return _.runTask(b,c,d)}finally{_.cancelTask(b)}}runGuarded(a,c,d){return this._inner.runGuarded(a,c,d)}runOutsideAngular(a){return this._outer.run(a)}}const ZP={};function DT(o){if(0==o._nesting&&!o.hasPendingMicrotasks&&!o.isStable)try{o._nesting++,o.onMicrotaskEmpty.emit(null)}finally{if(o._nesting--,!o.hasPendingMicrotasks)try{o.runOutsideAngular(()=>o.onStable.emit(null))}finally{o.isStable=!0}}}function Fg(o){o.hasPendingMicrotasks=!!(o._hasPendingMicrotasks||(o.shouldCoalesceEventChangeDetection||o.shouldCoalesceRunChangeDetection)&&-1!==o.lastRequestAnimationFrameId)}function ET(o){o._nesting++,o.isStable&&(o.isStable=!1,o.onUnstable.emit(null))}function CT(o){o._nesting--,DT(o)}class EN{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new yi,this.onMicrotaskEmpty=new yi,this.onStable=new yi,this.onError=new yi}run(a,c,d){return a.apply(c,d)}runGuarded(a,c,d){return a.apply(c,d)}runOutsideAngular(a){return a()}runTask(a,c,d,f){return a.apply(c,d)}}const Iy=new fn(""),Do=new fn("");let jb,TT=(()=>{class o{constructor(c,d,f){this._ngZone=c,this.registry=d,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,jb||(function CN(o){jb=o}(f),f.addToWindow(d)),this._watchAngularEvents(),c.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{wo.assertNotInAngularZone(),Ub(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Ub(()=>{for(;0!==this._callbacks.length;){let c=this._callbacks.pop();clearTimeout(c.timeoutId),c.doneCb(this._didWork)}this._didWork=!1});else{let c=this.getPendingTasks();this._callbacks=this._callbacks.filter(d=>!d.updateCb||!d.updateCb(c)||(clearTimeout(d.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(c=>({source:c.source,creationLocation:c.creationLocation,data:c.data})):[]}addCallback(c,d,f){let _=-1;d&&d>0&&(_=setTimeout(()=>{this._callbacks=this._callbacks.filter(b=>b.timeoutId!==_),c(this._didWork,this.getPendingTasks())},d)),this._callbacks.push({doneCb:c,timeoutId:_,updateCb:f})}whenStable(c,d,f){if(f&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(c,d,f),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(c){this.registry.registerApplication(c,this)}unregisterApplication(c){this.registry.unregisterApplication(c)}findProviders(c,d,f){return[]}}return o.\u0275fac=function(c){return new(c||o)(Cn(wo),Cn(Uf),Cn(Do))},o.\u0275prov=At({token:o,factory:o.\u0275fac}),o})(),Uf=(()=>{class o{constructor(){this._applications=new Map}registerApplication(c,d){this._applications.set(c,d)}unregisterApplication(c){this._applications.delete(c)}unregisterAllApplications(){this._applications.clear()}getTestability(c){return this._applications.get(c)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(c,d=!0){return jb?.findTestabilityInTree(this,c,d)??null}}return o.\u0275fac=function(c){return new(c||o)},o.\u0275prov=At({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();const ul=!1;let Ta=null;const IT=new fn("AllowMultipleToken"),Gb=new fn("PlatformDestroyListeners"),Qd=new fn("appBootstrapListener");class Bg{constructor(a,c){this.name=a,this.token=c}}function AT(o,a,c=[]){const d=`Platform: ${a}`,f=new fn(d);return(_=[])=>{let b=$b();if(!b||b.injector.get(IT,!1)){const C=[...c,..._,{provide:f,useValue:!0}];o?o(C):function Vg(o){if(Ta&&!Ta.get(IT,!1))throw new _e(400,!1);Ta=o;const a=o.get(Sy);(function ST(o){const a=o.get(xb,null);a&&a.forEach(c=>c())})(o)}(function NT(o=[],a){return Od.create({name:a,providers:[{provide:Yv,useValue:"platform"},{provide:Gb,useValue:new Set([()=>Ta=null])},...o]})}(C,d))}return function SN(o){const a=$b();if(!a)throw new _e(401,!1);return a}()}}function $b(){return Ta?.get(Sy)??null}let Sy=(()=>{class o{constructor(c){this._injector=c,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(c,d){const f=function Jd(o,a){let c;return c="noop"===o?new EN:("zone.js"===o?void 0:o)||new wo(a),c}(d?.ngZone,function Ug(o){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!(!o||!o.ngZoneEventCoalescing)||!1,shouldCoalesceRunChangeDetection:!(!o||!o.ngZoneRunCoalescing)||!1}}(d)),_=[{provide:wo,useValue:f}];return f.run(()=>{const b=Od.create({providers:_,parent:this.injector,name:c.moduleType.name}),C=c.create(b),T=C.injector.get(Md,null);if(!T)throw new _e(402,!1);return f.runOutsideAngular(()=>{const M=f.onError.subscribe({next:x=>{T.handleError(x)}});C.onDestroy(()=>{Ny(this._modules,C),M.unsubscribe()})}),function MT(o,a,c){try{const d=c();return k0(d)?d.catch(f=>{throw a.runOutsideAngular(()=>o.handleError(f)),f}):d}catch(d){throw a.runOutsideAngular(()=>o.handleError(d)),d}}(T,f,()=>{const M=C.injector.get(gu);return M.runInitializers(),M.donePromise.then(()=>(Q_(C.injector.get(Vf,Ac)||Ac),this._moduleDoBootstrap(C),C))})})}bootstrapModule(c,d=[]){const f=RT({},d);return function Lg(o,a,c){const d=new dy(c);return Promise.resolve(d)}(0,0,c).then(_=>this.bootstrapModuleFactory(_,f))}_moduleDoBootstrap(c){const d=c.injector.get(Ay);if(c._bootstrapComponents.length>0)c._bootstrapComponents.forEach(f=>d.bootstrap(f));else{if(!c.instance.ngDoBootstrap)throw new _e(-403,!1);c.instance.ngDoBootstrap(d)}this._modules.push(c)}onDestroy(c){this._destroyListeners.push(c)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new _e(404,!1);this._modules.slice().forEach(d=>d.destroy()),this._destroyListeners.forEach(d=>d());const c=this._injector.get(Gb,null);c&&(c.forEach(d=>d()),c.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return o.\u0275fac=function(c){return new(c||o)(Cn(Od))},o.\u0275prov=At({token:o,factory:o.\u0275fac,providedIn:"platform"}),o})();function RT(o,a){return Array.isArray(a)?a.reduce(RT,o):{...o,...a}}let Ay=(()=>{class o{get destroyed(){return this._destroyed}get injector(){return this._injector}constructor(c,d,f){this._zone=c,this._injector=d,this._exceptionHandler=f,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this._destroyed=!1,this._destroyListeners=[],this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const _=new F.y(C=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{C.next(this._stable),C.complete()})}),b=new F.y(C=>{let T;this._zone.runOutsideAngular(()=>{T=this._zone.onStable.subscribe(()=>{wo.assertNotInAngularZone(),Ub(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,C.next(!0))})})});const M=this._zone.onUnstable.subscribe(()=>{wo.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{C.next(!1)}))});return()=>{T.unsubscribe(),M.unsubscribe()}});this.isStable=(0,he.T)(_,b.pipe((0,ae.B)()))}bootstrap(c,d){const f=c instanceof _c;if(!this._injector.get(gu).done){!f&&jr(c);throw new _e(405,ul)}let b;b=f?c:this._injector.get(tu).resolveComponentFactory(c),this.componentTypes.push(b.componentType);const C=function TN(o){return o.isBoundToModule}(b)?void 0:this._injector.get(zd),M=b.create(Od.NULL,[],d||b.selector,C),x=M.location.nativeElement,V=M.injector.get(Iy,null);return V?.registerApplication(x),M.onDestroy(()=>{this.detachView(M.hostView),Ny(this.components,M),V?.unregisterApplication(x)}),this._loadComponent(M),M}tick(){if(this._runningTick)throw new _e(101,!1);try{this._runningTick=!0;for(let c of this._views)c.detectChanges()}catch(c){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(c))}finally{this._runningTick=!1}}attachView(c){const d=c;this._views.push(d),d.attachToAppRef(this)}detachView(c){const d=c;Ny(this._views,d),d.detachFromAppRef()}_loadComponent(c){this.attachView(c.hostView),this.tick(),this.components.push(c);const d=this._injector.get(Qd,[]);d.push(...this._bootstrapListeners),d.forEach(f=>f(c))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(c=>c()),this._views.slice().forEach(c=>c.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(c){return this._destroyListeners.push(c),()=>Ny(this._destroyListeners,c)}destroy(){if(this._destroyed)throw new _e(406,!1);const c=this._injector;c.destroy&&!c.destroyed&&c.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return o.\u0275fac=function(c){return new(c||o)(Cn(wo),Cn(Sd),Cn(Md))},o.\u0275prov=At({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();function Ny(o,a){const c=o.indexOf(a);c>-1&&o.splice(c,1)}function NN(){return!1}let Hb=(()=>{class o{}return o.__NG_ELEMENT_ID__=PT,o})();function PT(o){return function zb(o,a,c){if(Fa(o)&&!c){const d=Ar(o.index,a);return new ff(d,d)}return 47&o.type?new ff(a[gr],a):null}(Nr(),ye(),16==(16&o))}class FT{constructor(){}supports(a){return dg(a)}create(a){return new PN(a)}}const xN=(o,a)=>a;class PN{constructor(a){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=a||xN}forEachItem(a){let c;for(c=this._itHead;null!==c;c=c._next)a(c)}forEachOperation(a){let c=this._itHead,d=this._removalsHead,f=0,_=null;for(;c||d;){const b=!d||c&&c.currentIndex<Zb(d,f,_)?c:d,C=Zb(b,f,_),T=b.currentIndex;if(b===d)f--,d=d._nextRemoved;else if(c=c._next,null==b.previousIndex)f++;else{_||(_=[]);const M=C-f,x=T-f;if(M!=x){for(let q=0;q<M;q++){const ne=q<_.length?_[q]:_[q]=0,Se=ne+q;x<=Se&&Se<M&&(_[q]=ne+1)}_[b.previousIndex]=x-M}}C!==T&&a(b,C,T)}}forEachPreviousItem(a){let c;for(c=this._previousItHead;null!==c;c=c._nextPrevious)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachMovedItem(a){let c;for(c=this._movesHead;null!==c;c=c._nextMoved)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}forEachIdentityChange(a){let c;for(c=this._identityChangesHead;null!==c;c=c._nextIdentityChange)a(c)}diff(a){if(null==a&&(a=[]),!dg(a))throw new _e(900,!1);return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let f,_,b,c=this._itHead,d=!1;if(Array.isArray(a)){this.length=a.length;for(let C=0;C<this.length;C++)_=a[C],b=this._trackByFn(C,_),null!==c&&Object.is(c.trackById,b)?(d&&(c=this._verifyReinsertion(c,_,b,C)),Object.is(c.item,_)||this._addIdentityChange(c,_)):(c=this._mismatch(c,_,b,C),d=!0),c=c._next}else f=0,function SE(o,a){if(Array.isArray(o))for(let c=0;c<o.length;c++)a(o[c]);else{const c=o[Symbol.iterator]();let d;for(;!(d=c.next()).done;)a(d.value)}}(a,C=>{b=this._trackByFn(f,C),null!==c&&Object.is(c.trackById,b)?(d&&(c=this._verifyReinsertion(c,C,b,f)),Object.is(c.item,C)||this._addIdentityChange(c,C)):(c=this._mismatch(c,C,b,f),d=!0),c=c._next,f++}),this.length=f;return this._truncate(c),this.collection=a,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let a;for(a=this._previousItHead=this._itHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._additionsHead;null!==a;a=a._nextAdded)a.previousIndex=a.currentIndex;for(this._additionsHead=this._additionsTail=null,a=this._movesHead;null!==a;a=a._nextMoved)a.previousIndex=a.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(a,c,d,f){let _;return null===a?_=this._itTail:(_=a._prev,this._remove(a)),null!==(a=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._reinsertAfter(a,_,f)):null!==(a=null===this._linkedRecords?null:this._linkedRecords.get(d,f))?(Object.is(a.item,c)||this._addIdentityChange(a,c),this._moveAfter(a,_,f)):a=this._addAfter(new kN(c,d),_,f),a}_verifyReinsertion(a,c,d,f){let _=null===this._unlinkedRecords?null:this._unlinkedRecords.get(d,null);return null!==_?a=this._reinsertAfter(_,a._prev,f):a.currentIndex!=f&&(a.currentIndex=f,this._addToMoves(a,f)),a}_truncate(a){for(;null!==a;){const c=a._next;this._addToRemovals(this._unlink(a)),a=c}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(a,c,d){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(a);const f=a._prevRemoved,_=a._nextRemoved;return null===f?this._removalsHead=_:f._nextRemoved=_,null===_?this._removalsTail=f:_._prevRemoved=f,this._insertAfter(a,c,d),this._addToMoves(a,d),a}_moveAfter(a,c,d){return this._unlink(a),this._insertAfter(a,c,d),this._addToMoves(a,d),a}_addAfter(a,c,d){return this._insertAfter(a,c,d),this._additionsTail=null===this._additionsTail?this._additionsHead=a:this._additionsTail._nextAdded=a,a}_insertAfter(a,c,d){const f=null===c?this._itHead:c._next;return a._next=f,a._prev=c,null===f?this._itTail=a:f._prev=a,null===c?this._itHead=a:c._next=a,null===this._linkedRecords&&(this._linkedRecords=new BT),this._linkedRecords.put(a),a.currentIndex=d,a}_remove(a){return this._addToRemovals(this._unlink(a))}_unlink(a){null!==this._linkedRecords&&this._linkedRecords.remove(a);const c=a._prev,d=a._next;return null===c?this._itHead=d:c._next=d,null===d?this._itTail=c:d._prev=c,a}_addToMoves(a,c){return a.previousIndex===c||(this._movesTail=null===this._movesTail?this._movesHead=a:this._movesTail._nextMoved=a),a}_addToRemovals(a){return null===this._unlinkedRecords&&(this._unlinkedRecords=new BT),this._unlinkedRecords.put(a),a.currentIndex=null,a._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=a,a._prevRemoved=null):(a._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=a),a}_addIdentityChange(a,c){return a.item=c,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=a:this._identityChangesTail._nextIdentityChange=a,a}}class kN{constructor(a,c){this.item=a,this.trackById=c,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class LT{constructor(){this._head=null,this._tail=null}add(a){null===this._head?(this._head=this._tail=a,a._nextDup=null,a._prevDup=null):(this._tail._nextDup=a,a._prevDup=this._tail,a._nextDup=null,this._tail=a)}get(a,c){let d;for(d=this._head;null!==d;d=d._nextDup)if((null===c||c<=d.currentIndex)&&Object.is(d.trackById,a))return d;return null}remove(a){const c=a._prevDup,d=a._nextDup;return null===c?this._head=d:c._nextDup=d,null===d?this._tail=c:d._prevDup=c,null===this._head}}class BT{constructor(){this.map=new Map}put(a){const c=a.trackById;let d=this.map.get(c);d||(d=new LT,this.map.set(c,d)),d.add(a)}get(a,c){const f=this.map.get(a);return f?f.get(a,c):null}remove(a){const c=a.trackById;return this.map.get(c).remove(a)&&this.map.delete(c),a}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Zb(o,a,c){const d=o.previousIndex;if(null===d)return d;let f=0;return c&&d<c.length&&(f=c[d]),d+a+f}class Qb{constructor(){}supports(a){return a instanceof Map||mf(a)}create(){return new ck}}class ck{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(a){let c;for(c=this._mapHead;null!==c;c=c._next)a(c)}forEachPreviousItem(a){let c;for(c=this._previousMapHead;null!==c;c=c._nextPrevious)a(c)}forEachChangedItem(a){let c;for(c=this._changesHead;null!==c;c=c._nextChanged)a(c)}forEachAddedItem(a){let c;for(c=this._additionsHead;null!==c;c=c._nextAdded)a(c)}forEachRemovedItem(a){let c;for(c=this._removalsHead;null!==c;c=c._nextRemoved)a(c)}diff(a){if(a){if(!(a instanceof Map||mf(a)))throw new _e(900,!1)}else a=new Map;return this.check(a)?this:null}onDestroy(){}check(a){this._reset();let c=this._mapHead;if(this._appendAfter=null,this._forEach(a,(d,f)=>{if(c&&c.key===f)this._maybeAddToChanges(c,d),this._appendAfter=c,c=c._next;else{const _=this._getOrCreateRecordForKey(f,d);c=this._insertBeforeOrAppend(c,_)}}),c){c._prev&&(c._prev._next=null),this._removalsHead=c;for(let d=c;null!==d;d=d._nextRemoved)d===this._mapHead&&(this._mapHead=null),this._records.delete(d.key),d._nextRemoved=d._next,d.previousValue=d.currentValue,d.currentValue=null,d._prev=null,d._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(a,c){if(a){const d=a._prev;return c._next=a,c._prev=d,a._prev=c,d&&(d._next=c),a===this._mapHead&&(this._mapHead=c),this._appendAfter=a,a}return this._appendAfter?(this._appendAfter._next=c,c._prev=this._appendAfter):this._mapHead=c,this._appendAfter=c,null}_getOrCreateRecordForKey(a,c){if(this._records.has(a)){const f=this._records.get(a);this._maybeAddToChanges(f,c);const _=f._prev,b=f._next;return _&&(_._next=b),b&&(b._prev=_),f._next=null,f._prev=null,f}const d=new VT(a);return this._records.set(a,d),d.currentValue=c,this._addToAdditions(d),d}_reset(){if(this.isDirty){let a;for(this._previousMapHead=this._mapHead,a=this._previousMapHead;null!==a;a=a._next)a._nextPrevious=a._next;for(a=this._changesHead;null!==a;a=a._nextChanged)a.previousValue=a.currentValue;for(a=this._additionsHead;null!=a;a=a._nextAdded)a.previousValue=a.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(a,c){Object.is(c,a.currentValue)||(a.previousValue=a.currentValue,a.currentValue=c,this._addToChanges(a))}_addToAdditions(a){null===this._additionsHead?this._additionsHead=this._additionsTail=a:(this._additionsTail._nextAdded=a,this._additionsTail=a)}_addToChanges(a){null===this._changesHead?this._changesHead=this._changesTail=a:(this._changesTail._nextChanged=a,this._changesTail=a)}_forEach(a,c){a instanceof Map?a.forEach(c):Object.keys(a).forEach(d=>c(a[d],d))}}class VT{constructor(a){this.key=a,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Jb(){return new Xb([new FT])}let Xb=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(null!=d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||Jb()),deps:[[o,new Fo,new Es]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(null!=d)return d;throw new _e(901,!1)}}return o.\u0275prov=At({token:o,providedIn:"root",factory:Jb}),o})();function UT(){return new ew([new Qb])}let ew=(()=>{class o{constructor(c){this.factories=c}static create(c,d){if(d){const f=d.factories.slice();c=c.concat(f)}return new o(c)}static extend(c){return{provide:o,useFactory:d=>o.create(c,d||UT()),deps:[[o,new Fo,new Es]]}}find(c){const d=this.factories.find(f=>f.supports(c));if(d)return d;throw new _e(901,!1)}}return o.\u0275prov=At({token:o,providedIn:"root",factory:UT}),o})();const GT=AT(null,"core",[]);let Gf=(()=>{class o{constructor(c){}}return o.\u0275fac=function(c){return new(c||o)(Cn(Ay))},o.\u0275mod=se({type:o}),o.\u0275inj=an({}),o})();function tw(o){return"boolean"==typeof o?o:null!=o&&"false"!==o}function jN(o,a){const c=Nt(o),d=a.elementInjector||tf();return new pf(c).create(d,a.projectableNodes,a.hostElement,a.environmentInjector)}},1321:()=>{const Ct=":";class je extends Error{constructor(J){super(`No translation found for ${vn(J)}.`),this.parsedMessage=J,this.type="MissingTranslationError"}}const sr=function(ie,...J){if(sr.translate){const te=sr.translate(ie,J);ie=te[0],J=te[1]}let fe=oi(ie[0],ie.raw[0]);for(let te=1;te<ie.length;te++)fe+=J[te-1]+oi(ie[te],ie.raw[te]);return fe},Vr=":";function oi(ie,J){return J.charAt(0)===Vr?ie.substring(function rt(ie,J){for(let fe=1,te=1;fe<ie.length;fe++,te++)if("\\"===J[te])te++;else if(ie[fe]===Ct)return fe;throw new Error(`Unterminated $localize metadata block in "${J}".`)}(ie,J)+1):ie}(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)().$localize=sr},3942:(Ct,Ne,L)=>{L.d(Ne,{Z:()=>nt});var u=L(2090),X=L(4859),F=L(6881),he=L(1877);class ae{constructor(_e,ke){this._delegate=_e,this.firebase=ke,(0,F._addComponent)(_e,new X.wA("app-compat",()=>this,"PUBLIC")),this.container=_e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(_e){this._delegate.automaticDataCollectionEnabled=_e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(_e=>{this._delegate.checkDestroyed(),_e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,F.deleteApp)(this._delegate)))}_getService(_e,ke=F._DEFAULT_ENTRY_NAME){var Fe;this._delegate.checkDestroyed();const We=this._delegate.container.getProvider(_e);return!We.isInitialized()&&"EXPLICIT"===(null===(Fe=We.getComponent())||void 0===Fe?void 0:Fe.instantiationMode)&&We.initialize(),We.getImmediate({identifier:ke})}_removeServiceInstance(_e,ke=F._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(_e).clearInstance(ke)}_addComponent(_e){(0,F._addComponent)(this._delegate,_e)}_addOrOverwriteComponent(_e){(0,F._addOrOverwriteComponent)(this._delegate,_e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Ee=new u.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),W=function ve(){const yt=function Te(yt){const _e={},ke={__esModule:!0,initializeApp:function Le(Be,pt={}){const ue=F.initializeApp(Be,pt);if((0,u.r3)(_e,ue.name))return _e[ue.name];const Mt=new yt(ue,ke);return _e[ue.name]=Mt,Mt},app:We,registerVersion:F.registerVersion,setLogLevel:F.setLogLevel,onLog:F.onLog,apps:null,SDK_VERSION:F.SDK_VERSION,INTERNAL:{registerComponent:function Ie(Be){const pt=Be.name,ue=pt.replace("-compat","");if(F._registerComponent(Be)&&"PUBLIC"===Be.type){const Mt=(it=We())=>{if("function"!=typeof it[ue])throw Ee.create("invalid-app-argument",{appName:pt});return it[ue]()};void 0!==Be.serviceProps&&(0,u.ZB)(Mt,Be.serviceProps),ke[ue]=Mt,yt.prototype[ue]=function(...it){return this._getService.bind(this,pt).apply(this,Be.multipleInstances?it:[])}}return"PUBLIC"===Be.type?ke[ue]:null},removeApp:function Fe(Be){delete _e[Be]},useAsService:function Je(Be,pt){return"serverAuth"===pt?null:pt},modularAPIs:F}};function We(Be){if(!(0,u.r3)(_e,Be=Be||F._DEFAULT_ENTRY_NAME))throw Ee.create("no-app",{appName:Be});return _e[Be]}return ke.default=ke,Object.defineProperty(ke,"apps",{get:function be(){return Object.keys(_e).map(Be=>_e[Be])}}),We.App=yt,ke}(ae);return yt.INTERNAL=Object.assign(Object.assign({},yt.INTERNAL),{createFirebaseNamespace:ve,extendNamespace:function _e(ke){(0,u.ZB)(yt,ke)},createSubscribe:u.ne,ErrorFactory:u.LL,deepExtend:u.ZB}),yt}(),H=new he.Yd("@firebase/app-compat");if((0,u.jU)()&&void 0!==self.firebase){H.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const yt=self.firebase.SDK_VERSION;yt&&yt.indexOf("LITE")>=0&&H.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const nt=W;!function Re(yt){(0,F.registerVersion)("@firebase/app-compat","0.2.11",yt)}()},6881:(Ct,Ne,L)=>{L.r(Ne),L.d(Ne,{FirebaseError:()=>he.ZR,SDK_VERSION:()=>gs,_DEFAULT_ENTRY_NAME:()=>Yt,_addComponent:()=>ut,_addOrOverwriteComponent:()=>xt,_apps:()=>kt,_clearComponents:()=>gn,_components:()=>on,_getProvider:()=>Un,_registerComponent:()=>Ur,_removeServiceInstance:()=>Yn,deleteApp:()=>qi,getApp:()=>Ps,getApps:()=>Cn,initializeApp:()=>cn,onLog:()=>ms,registerVersion:()=>yr,setLogLevel:()=>Hn});var u=L(5861),X=L(4859),F=L(1877),he=L(2090);const ae=(me,se)=>se.some(Ve=>me instanceof Ve);let le,Ee;const W=new WeakMap,H=new WeakMap,Y=new WeakMap,Ke=new WeakMap,Re=new WeakMap;let _e={get(me,se,Ve){if(me instanceof IDBTransaction){if("done"===se)return H.get(me);if("objectStoreNames"===se)return me.objectStoreNames||Y.get(me);if("store"===se)return Ve.objectStoreNames[1]?void 0:Ve.objectStore(Ve.objectStoreNames[0])}return Le(me[se])},set:(me,se,Ve)=>(me[se]=Ve,!0),has:(me,se)=>me instanceof IDBTransaction&&("done"===se||"store"===se)||se in me};function We(me){return"function"==typeof me?function Fe(me){return me!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function ve(){return Ee||(Ee=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(me)?function(...se){return me.apply(be(this),se),Le(W.get(this))}:function(...se){return Le(me.apply(be(this),se))}:function(se,...Ve){const St=me.call(be(this),se,...Ve);return Y.set(St,se.sort?se.sort():[se]),Le(St)}}(me):(me instanceof IDBTransaction&&function yt(me){if(H.has(me))return;const se=new Promise((Ve,St)=>{const Pt=()=>{me.removeEventListener("complete",Xt),me.removeEventListener("error",Nt),me.removeEventListener("abort",Nt)},Xt=()=>{Ve(),Pt()},Nt=()=>{St(me.error||new DOMException("AbortError","AbortError")),Pt()};me.addEventListener("complete",Xt),me.addEventListener("error",Nt),me.addEventListener("abort",Nt)});H.set(me,se)}(me),ae(me,function Te(){return le||(le=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(me,_e):me)}function Le(me){if(me instanceof IDBRequest)return function nt(me){const se=new Promise((Ve,St)=>{const Pt=()=>{me.removeEventListener("success",Xt),me.removeEventListener("error",Nt)},Xt=()=>{Ve(Le(me.result)),Pt()},Nt=()=>{St(me.error),Pt()};me.addEventListener("success",Xt),me.addEventListener("error",Nt)});return se.then(Ve=>{Ve instanceof IDBCursor&&W.set(Ve,me)}).catch(()=>{}),Re.set(se,me),se}(me);if(Ke.has(me))return Ke.get(me);const se=We(me);return se!==me&&(Ke.set(me,se),Re.set(se,me)),se}const be=me=>Re.get(me),Be=["get","getKey","getAll","getAllKeys","count"],pt=["put","add","delete","clear"],ue=new Map;function Mt(me,se){if(!(me instanceof IDBDatabase)||se in me||"string"!=typeof se)return;if(ue.get(se))return ue.get(se);const Ve=se.replace(/FromIndex$/,""),St=se!==Ve,Pt=pt.includes(Ve);if(!(Ve in(St?IDBIndex:IDBObjectStore).prototype)||!Pt&&!Be.includes(Ve))return;const Xt=function(){var Nt=(0,u.Z)(function*(bn,..._n){const jr=this.transaction(bn,Pt?"readwrite":"readonly");let vr=jr.store;return St&&(vr=vr.index(_n.shift())),(yield Promise.all([vr[Ve](..._n),Pt&&jr.done]))[0]});return function(_n){return Nt.apply(this,arguments)}}();return ue.set(se,Xt),Xt}!function ke(me){_e=me(_e)}(me=>({...me,get:(se,Ve,St)=>Mt(se,Ve)||me.get(se,Ve,St),has:(se,Ve)=>!!Mt(se,Ve)||me.has(se,Ve)}));class it{constructor(se){this.container=se}getPlatformInfoString(){return this.container.getProviders().map(Ve=>{if(function zt(me){return"VERSION"===me.getComponent()?.type}(Ve)){const St=Ve.getImmediate();return`${St.library}/${St.version}`}return null}).filter(Ve=>Ve).join(" ")}}const _t="@firebase/app",ge=new F.Yd("@firebase/app"),Yt="[DEFAULT]",sn={[_t]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},kt=new Map,on=new Map;function ut(me,se){try{me.container.addComponent(se)}catch(Ve){ge.debug(`Component ${se.name} failed to register with FirebaseApp ${me.name}`,Ve)}}function xt(me,se){me.container.addOrOverwriteComponent(se)}function Ur(me){const se=me.name;if(on.has(se))return ge.debug(`There were multiple attempts to register component ${se}.`),!1;on.set(se,me);for(const Ve of kt.values())ut(Ve,me);return!0}function Un(me,se){const Ve=me.container.getProvider("heartbeat").getImmediate({optional:!0});return Ve&&Ve.triggerHeartbeat(),me.container.getProvider(se)}function Yn(me,se,Ve=Yt){Un(me,se).clearInstance(Ve)}function gn(){on.clear()}const Jr=new he.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Tn{constructor(se,Ve,St){this._isDeleted=!1,this._options=Object.assign({},se),this._config=Object.assign({},Ve),this._name=Ve.name,this._automaticDataCollectionEnabled=Ve.automaticDataCollectionEnabled,this._container=St,this.container.addComponent(new X.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(se){this.checkDestroyed(),this._automaticDataCollectionEnabled=se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(se){this._isDeleted=se}checkDestroyed(){if(this.isDeleted)throw Jr.create("app-deleted",{appName:this._name})}}const gs="9.22.1";function cn(me,se={}){let Ve=me;"object"!=typeof se&&(se={name:se});const St=Object.assign({name:Yt,automaticDataCollectionEnabled:!1},se),Pt=St.name;if("string"!=typeof Pt||!Pt)throw Jr.create("bad-app-name",{appName:String(Pt)});if(Ve||(Ve=(0,he.aH)()),!Ve)throw Jr.create("no-options");const Xt=kt.get(Pt);if(Xt){if((0,he.vZ)(Ve,Xt.options)&&(0,he.vZ)(St,Xt.config))return Xt;throw Jr.create("duplicate-app",{appName:Pt})}const Nt=new X.H0(Pt);for(const _n of on.values())Nt.addComponent(_n);const bn=new Tn(Ve,St,Nt);return kt.set(Pt,bn),bn}function Ps(me=Yt){const se=kt.get(me);if(!se&&me===Yt&&(0,he.aH)())return cn();if(!se)throw Jr.create("no-app",{appName:me});return se}function Cn(){return Array.from(kt.values())}function qi(me){return lr.apply(this,arguments)}function lr(){return(lr=(0,u.Z)(function*(me){const se=me.name;kt.has(se)&&(kt.delete(se),yield Promise.all(me.container.getProviders().map(Ve=>Ve.delete())),me.isDeleted=!0)})).apply(this,arguments)}function yr(me,se,Ve){var St;let Pt=null!==(St=sn[me])&&void 0!==St?St:me;Ve&&(Pt+=`-${Ve}`);const Xt=Pt.match(/\s|\//),Nt=se.match(/\s|\//);if(Xt||Nt){const bn=[`Unable to register library "${Pt}" with version "${se}":`];return Xt&&bn.push(`library name "${Pt}" contains illegal characters (whitespace or "/")`),Xt&&Nt&&bn.push("and"),Nt&&bn.push(`version name "${se}" contains illegal characters (whitespace or "/")`),void ge.warn(bn.join(" "))}Ur(new X.wA(`${Pt}-version`,()=>({library:Pt,version:se}),"VERSION"))}function ms(me,se){if(null!==me&&"function"!=typeof me)throw Jr.create("invalid-log-argument");(0,F.Am)(me,se)}function Hn(me){(0,F.Ub)(me)}const _s="firebase-heartbeat-database",Ei=1,j="firebase-heartbeat-store";let U=null;function K(){return U||(U=function Ie(me,se,{blocked:Ve,upgrade:St,blocking:Pt,terminated:Xt}={}){const Nt=indexedDB.open(me,se),bn=Le(Nt);return St&&Nt.addEventListener("upgradeneeded",_n=>{St(Le(Nt.result),_n.oldVersion,_n.newVersion,Le(Nt.transaction),_n)}),Ve&&Nt.addEventListener("blocked",_n=>Ve(_n.oldVersion,_n.newVersion,_n)),bn.then(_n=>{Xt&&_n.addEventListener("close",()=>Xt()),Pt&&_n.addEventListener("versionchange",jr=>Pt(jr.oldVersion,jr.newVersion,jr))}).catch(()=>{}),bn}(_s,Ei,{upgrade:(me,se)=>{0===se&&me.createObjectStore(j)}}).catch(me=>{throw Jr.create("idb-open",{originalErrorMessage:me.message})})),U}function re(){return(re=(0,u.Z)(function*(me){try{return yield(yield K()).transaction(j).objectStore(j).get(mn(me))}catch(se){if(se instanceof he.ZR)ge.warn(se.message);else{const Ve=Jr.create("idb-get",{originalErrorMessage:se?.message});ge.warn(Ve.message)}}})).apply(this,arguments)}function $e(me,se){return Ft.apply(this,arguments)}function Ft(){return(Ft=(0,u.Z)(function*(me,se){try{const St=(yield K()).transaction(j,"readwrite");yield St.objectStore(j).put(se,mn(me)),yield St.done}catch(Ve){if(Ve instanceof he.ZR)ge.warn(Ve.message);else{const St=Jr.create("idb-set",{originalErrorMessage:Ve?.message});ge.warn(St.message)}}})).apply(this,arguments)}function mn(me){return`${me.name}!${me.options.appId}`}class An{constructor(se){this.container=se,this._heartbeatsCache=null;const Ve=this.container.getProvider("app").getImmediate();this._storage=new ys(Ve),this._heartbeatsCachePromise=this._storage.read().then(St=>(this._heartbeatsCache=St,St))}triggerHeartbeat(){var se=this;return(0,u.Z)(function*(){const St=se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Pt=ln();if(null===se._heartbeatsCache&&(se._heartbeatsCache=yield se._heartbeatsCachePromise),se._heartbeatsCache.lastSentHeartbeatDate!==Pt&&!se._heartbeatsCache.heartbeats.some(Xt=>Xt.date===Pt))return se._heartbeatsCache.heartbeats.push({date:Pt,agent:St}),se._heartbeatsCache.heartbeats=se._heartbeatsCache.heartbeats.filter(Xt=>{const Nt=new Date(Xt.date).valueOf();return Date.now()-Nt<=2592e6}),se._storage.overwrite(se._heartbeatsCache)})()}getHeartbeatsHeader(){var se=this;return(0,u.Z)(function*(){if(null===se._heartbeatsCache&&(yield se._heartbeatsCachePromise),null===se._heartbeatsCache||0===se._heartbeatsCache.heartbeats.length)return"";const Ve=ln(),{heartbeatsToSend:St,unsentEntries:Pt}=function ai(me,se=1024){const Ve=[];let St=me.slice();for(const Pt of me){const Xt=Ve.find(Nt=>Nt.agent===Pt.agent);if(Xt){if(Xt.dates.push(Pt.date),ks(Ve)>se){Xt.dates.pop();break}}else if(Ve.push({agent:Pt.agent,dates:[Pt.date]}),ks(Ve)>se){Ve.pop();break}St=St.slice(1)}return{heartbeatsToSend:Ve,unsentEntries:St}}(se._heartbeatsCache.heartbeats),Xt=(0,he.L)(JSON.stringify({version:2,heartbeats:St}));return se._heartbeatsCache.lastSentHeartbeatDate=Ve,Pt.length>0?(se._heartbeatsCache.heartbeats=Pt,yield se._storage.overwrite(se._heartbeatsCache)):(se._heartbeatsCache.heartbeats=[],se._storage.overwrite(se._heartbeatsCache)),Xt})()}}function ln(){return(new Date).toISOString().substring(0,10)}class ys{constructor(se){this.app=se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,u.Z)(function*(){return!!(0,he.hl)()&&(0,he.eu)().then(()=>!0).catch(()=>!1)})()}read(){var se=this;return(0,u.Z)(function*(){return(yield se._canUseIndexedDBPromise)&&(yield function Ce(me){return re.apply(this,arguments)}(se.app))||{heartbeats:[]}})()}overwrite(se){var Ve=this;return(0,u.Z)(function*(){var St;if(yield Ve._canUseIndexedDBPromise){const Xt=yield Ve.read();return $e(Ve.app,{lastSentHeartbeatDate:null!==(St=se.lastSentHeartbeatDate)&&void 0!==St?St:Xt.lastSentHeartbeatDate,heartbeats:se.heartbeats})}})()}add(se){var Ve=this;return(0,u.Z)(function*(){var St;if(yield Ve._canUseIndexedDBPromise){const Xt=yield Ve.read();return $e(Ve.app,{lastSentHeartbeatDate:null!==(St=se.lastSentHeartbeatDate)&&void 0!==St?St:Xt.lastSentHeartbeatDate,heartbeats:[...Xt.heartbeats,...se.heartbeats]})}})()}}function ks(me){return(0,he.L)(JSON.stringify({version:2,heartbeats:me})).length}!function pl(me){Ur(new X.wA("platform-logger",se=>new it(se),"PRIVATE")),Ur(new X.wA("heartbeat",se=>new An(se),"PRIVATE")),yr(_t,"0.9.11",me),yr(_t,"0.9.11","esm2017"),yr("fire-js","")}("")},4859:(Ct,Ne,L)=>{L.d(Ne,{H0:()=>Te,wA:()=>F,zt:()=>ae});var u=L(5861),X=L(2090);class F{constructor(W,H,Y){this.name=W,this.instanceFactory=H,this.type=Y,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(W){return this.instantiationMode=W,this}setMultipleInstances(W){return this.multipleInstances=W,this}setServiceProps(W){return this.serviceProps=W,this}setInstanceCreatedCallback(W){return this.onInstanceCreated=W,this}}const he="[DEFAULT]";class ae{constructor(W,H){this.name=W,this.container=H,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(W){const H=this.normalizeInstanceIdentifier(W);if(!this.instancesDeferred.has(H)){const Y=new X.BH;if(this.instancesDeferred.set(H,Y),this.isInitialized(H)||this.shouldAutoInitialize())try{const Ke=this.getOrInitializeService({instanceIdentifier:H});Ke&&Y.resolve(Ke)}catch{}}return this.instancesDeferred.get(H).promise}getImmediate(W){var H;const Y=this.normalizeInstanceIdentifier(W?.identifier),Ke=null!==(H=W?.optional)&&void 0!==H&&H;if(!this.isInitialized(Y)&&!this.shouldAutoInitialize()){if(Ke)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:Y})}catch(Re){if(Ke)return null;throw Re}}getComponent(){return this.component}setComponent(W){if(W.name!==this.name)throw Error(`Mismatching Component ${W.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=W,this.shouldAutoInitialize()){if(function Ee(ve){return"EAGER"===ve.instantiationMode}(W))try{this.getOrInitializeService({instanceIdentifier:he})}catch{}for(const[H,Y]of this.instancesDeferred.entries()){const Ke=this.normalizeInstanceIdentifier(H);try{const Re=this.getOrInitializeService({instanceIdentifier:Ke});Y.resolve(Re)}catch{}}}}clearInstance(W=he){this.instancesDeferred.delete(W),this.instancesOptions.delete(W),this.instances.delete(W)}delete(){var W=this;return(0,u.Z)(function*(){const H=Array.from(W.instances.values());yield Promise.all([...H.filter(Y=>"INTERNAL"in Y).map(Y=>Y.INTERNAL.delete()),...H.filter(Y=>"_delete"in Y).map(Y=>Y._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(W=he){return this.instances.has(W)}getOptions(W=he){return this.instancesOptions.get(W)||{}}initialize(W={}){const{options:H={}}=W,Y=this.normalizeInstanceIdentifier(W.instanceIdentifier);if(this.isInitialized(Y))throw Error(`${this.name}(${Y}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const Ke=this.getOrInitializeService({instanceIdentifier:Y,options:H});for(const[Re,nt]of this.instancesDeferred.entries())Y===this.normalizeInstanceIdentifier(Re)&&nt.resolve(Ke);return Ke}onInit(W,H){var Y;const Ke=this.normalizeInstanceIdentifier(H),Re=null!==(Y=this.onInitCallbacks.get(Ke))&&void 0!==Y?Y:new Set;Re.add(W),this.onInitCallbacks.set(Ke,Re);const nt=this.instances.get(Ke);return nt&&W(nt,Ke),()=>{Re.delete(W)}}invokeOnInitCallbacks(W,H){const Y=this.onInitCallbacks.get(H);if(Y)for(const Ke of Y)try{Ke(W,H)}catch{}}getOrInitializeService({instanceIdentifier:W,options:H={}}){let Y=this.instances.get(W);if(!Y&&this.component&&(Y=this.component.instanceFactory(this.container,{instanceIdentifier:(ve=W,ve===he?void 0:ve),options:H}),this.instances.set(W,Y),this.instancesOptions.set(W,H),this.invokeOnInitCallbacks(Y,W),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,W,Y)}catch{}var ve;return Y||null}normalizeInstanceIdentifier(W=he){return this.component?this.component.multipleInstances?W:he:W}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class Te{constructor(W){this.name=W,this.providers=new Map}addComponent(W){const H=this.getProvider(W.name);if(H.isComponentSet())throw new Error(`Component ${W.name} has already been registered with ${this.name}`);H.setComponent(W)}addOrOverwriteComponent(W){this.getProvider(W.name).isComponentSet()&&this.providers.delete(W.name),this.addComponent(W)}getProvider(W){if(this.providers.has(W))return this.providers.get(W);const H=new ae(W,this);return this.providers.set(W,H),H}getProviders(){return Array.from(this.providers.values())}}},1877:(Ct,Ne,L)=>{L.d(Ne,{Am:()=>ve,Ub:()=>Te,Yd:()=>Ee,in:()=>X});const u=[];var X=(()=>{return(W=X||(X={}))[W.DEBUG=0]="DEBUG",W[W.VERBOSE=1]="VERBOSE",W[W.INFO=2]="INFO",W[W.WARN=3]="WARN",W[W.ERROR=4]="ERROR",W[W.SILENT=5]="SILENT",X;var W})();const F={debug:X.DEBUG,verbose:X.VERBOSE,info:X.INFO,warn:X.WARN,error:X.ERROR,silent:X.SILENT},he=X.INFO,ae={[X.DEBUG]:"log",[X.VERBOSE]:"log",[X.INFO]:"info",[X.WARN]:"warn",[X.ERROR]:"error"},le=(W,H,...Y)=>{if(H<W.logLevel)return;const Ke=(new Date).toISOString(),Re=ae[H];if(!Re)throw new Error(`Attempted to log a message with an invalid logType (value: ${H})`);console[Re](`[${Ke}]  ${W.name}:`,...Y)};class Ee{constructor(H){this.name=H,this._logLevel=he,this._logHandler=le,this._userLogHandler=null,u.push(this)}get logLevel(){return this._logLevel}set logLevel(H){if(!(H in X))throw new TypeError(`Invalid value "${H}" assigned to \`logLevel\``);this._logLevel=H}setLogLevel(H){this._logLevel="string"==typeof H?F[H]:H}get logHandler(){return this._logHandler}set logHandler(H){if("function"!=typeof H)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=H}get userLogHandler(){return this._userLogHandler}set userLogHandler(H){this._userLogHandler=H}debug(...H){this._userLogHandler&&this._userLogHandler(this,X.DEBUG,...H),this._logHandler(this,X.DEBUG,...H)}log(...H){this._userLogHandler&&this._userLogHandler(this,X.VERBOSE,...H),this._logHandler(this,X.VERBOSE,...H)}info(...H){this._userLogHandler&&this._userLogHandler(this,X.INFO,...H),this._logHandler(this,X.INFO,...H)}warn(...H){this._userLogHandler&&this._userLogHandler(this,X.WARN,...H),this._logHandler(this,X.WARN,...H)}error(...H){this._userLogHandler&&this._userLogHandler(this,X.ERROR,...H),this._logHandler(this,X.ERROR,...H)}}function Te(W){u.forEach(H=>{H.setLogLevel(W)})}function ve(W,H){for(const Y of u){let Ke=null;H&&H.level&&(Ke=F[H.level]),Y.userLogHandler=null===W?null:(Re,nt,...yt)=>{const _e=yt.map(ke=>{if(null==ke)return null;if("string"==typeof ke)return ke;if("number"==typeof ke||"boolean"==typeof ke)return ke.toString();if(ke instanceof Error)return ke.message;try{return JSON.stringify(ke)}catch{return null}}).filter(ke=>ke).join(" ");nt>=(Ke??Re.logLevel)&&W({level:X[nt].toLowerCase(),message:_e,args:yt,type:Re.name})}}}},259:(Ct,Ne,L)=>{L.d(Ne,{C6:()=>u.getApps,Mq:()=>u.getApp});var u=L(6881);(0,u.registerVersion)("firebase","9.22.1","app")},9260:(Ct,Ne,L)=>{L.d(Ne,{Z:()=>u.Z});var u=L(3942);u.Z.registerVersion("firebase","9.22.1","app-compat")},2644:(Ct,Ne,L)=>{L.r(Ne);var u=L(5861),X=L(3942),F=L(2090),he=L(6881),ae=L(655),le=L(1877),Ee=L(4859);const ve={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},Y_EMAIL_SIGNIN="EMAIL_SIGNIN",Y_PASSWORD_RESET="PASSWORD_RESET",Y_RECOVER_EMAIL="RECOVER_EMAIL",Y_REVERT_SECOND_FACTOR_ADDITION="REVERT_SECOND_FACTOR_ADDITION",Y_VERIFY_AND_CHANGE_EMAIL="VERIFY_AND_CHANGE_EMAIL",Y_VERIFY_EMAIL="VERIFY_EMAIL";const nt=function Ke(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},yt=function Re(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},_e=new F.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Fe=new le.Yd("@firebase/auth");function Le(v,...p){Fe.logLevel<=le.in.ERROR&&Fe.error(`Auth (${he.SDK_VERSION}): ${v}`,...p)}function be(v,...p){throw pt(v,...p)}function Ie(v,...p){return pt(v,...p)}function Je(v,p,g){const w=Object.assign(Object.assign({},yt()),{[p]:g});return new F.LL("auth","Firebase",w).create(p,{appName:v.name})}function Be(v,p,g){if(!(p instanceof g))throw g.name!==p.constructor.name&&be(v,"argument-error"),Je(v,"argument-error",`Type of ${p.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function pt(v,...p){if("string"!=typeof v){const g=p[0],w=[...p.slice(1)];return w[0]&&(w[0].appName=v.name),v._errorFactory.create(g,...w)}return _e.create(v,...p)}function ue(v,p,...g){if(!v)throw pt(p,...g)}function Mt(v){const p="INTERNAL ASSERTION FAILED: "+v;throw Le(p),new Error(p)}function it(v,p){v||Mt(p)}function zt(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.href)||""}function _t(){return"http:"===Zs()||"https:"===Zs()}function Zs(){var v;return typeof self<"u"&&(null===(v=self.location)||void 0===v?void 0:v.protocol)||null}class Ae{constructor(p,g){this.shortDelay=p,this.longDelay=g,it(g>p,"Short delay should be less than long delay!"),this.isMobile=(0,F.uI)()||(0,F.b$)()}get(){return function ge(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_t()||(0,F.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Oe(v,p){it(v.emulator,"Emulator should always be set here");const{url:g}=v.emulator;return p?`${g}${p.startsWith("/")?p.slice(1):p}`:g}class rt{static initialize(p,g,w){this.fetchImpl=p,g&&(this.headersImpl=g),w&&(this.responseImpl=w)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void Mt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void Mt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void Mt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const je={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},st=new Ae(3e4,6e4);function wt(v,p){return v.tenantId&&!p.tenantId?Object.assign(Object.assign({},p),{tenantId:v.tenantId}):p}function Gt(v,p,g,w){return Tt.apply(this,arguments)}function Tt(){return(Tt=(0,u.Z)(function*(v,p,g,w,A={}){return At(v,A,(0,u.Z)(function*(){let O={},G={};w&&("GET"===p?G=w:O={body:JSON.stringify(w)});const ee=(0,F.xO)(Object.assign({key:v.config.apiKey},G)).slice(1),Pe=yield v._getAdditionalHeaders();return Pe["Content-Type"]="application/json",v.languageCode&&(Pe["X-Firebase-Locale"]=v.languageCode),rt.fetch()(Lr(v,v.config.apiHost,g,ee),Object.assign({method:p,headers:Pe,referrerPolicy:"no-referrer"},O))}))})).apply(this,arguments)}function At(v,p,g){return vn.apply(this,arguments)}function vn(){return(vn=(0,u.Z)(function*(v,p,g){v._canInitEmulator=!1;const w=Object.assign(Object.assign({},je),p);try{const A=new Br(v),O=yield Promise.race([g(),A.promise]);A.clearNetworkTimeout();const G=yield O.json();if("needConfirmation"in G)throw sr(v,"account-exists-with-different-credential",G);if(O.ok&&!("errorMessage"in G))return G;{const ee=O.ok?G.errorMessage:G.error.message,[Pe,et]=ee.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===Pe)throw sr(v,"credential-already-in-use",G);if("EMAIL_EXISTS"===Pe)throw sr(v,"email-already-in-use",G);if("USER_DISABLED"===Pe)throw sr(v,"user-disabled",G);const ze=w[Pe]||Pe.toLowerCase().replace(/[_\s]+/g,"-");if(et)throw Je(v,ze,et);be(v,ze)}}catch(A){if(A instanceof F.ZR)throw A;be(v,"network-request-failed",{message:String(A)})}})).apply(this,arguments)}function an(v,p,g,w){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,u.Z)(function*(v,p,g,w,A={}){const O=yield Gt(v,p,g,w,A);return"mfaPendingCredential"in O&&be(v,"multi-factor-auth-required",{_serverResponse:O}),O})).apply(this,arguments)}function Lr(v,p,g,w){const A=`${p}${g}?${w}`;return v.config.emulator?Oe(v.config,A):`${v.config.apiScheme}://${A}`}class Br{constructor(p){this.auth=p,this.timer=null,this.promise=new Promise((g,w)=>{this.timer=setTimeout(()=>w(Ie(this.auth,"network-request-failed")),st.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function sr(v,p,g){const w={appName:v.name};g.email&&(w.email=g.email),g.phoneNumber&&(w.phoneNumber=g.phoneNumber);const A=Ie(v,p,w);return A.customData._tokenResponse=g,A}function oi(){return(oi=(0,u.Z)(function*(v,p){return Gt(v,"POST","/v1/accounts:delete",p)})).apply(this,arguments)}function J(){return(J=(0,u.Z)(function*(v,p){return Gt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function te(){return(te=(0,u.Z)(function*(v,p){return Gt(v,"POST","/v1/accounts:lookup",p)})).apply(this,arguments)}function qe(v){if(v)try{const p=new Date(Number(v));if(!isNaN(p.getTime()))return p.toUTCString()}catch{}}function Yt(){return(Yt=(0,u.Z)(function*(v,p=!1){const g=(0,F.m9)(v),w=yield g.getIdToken(p),A=kt(w);ue(A&&A.exp&&A.auth_time&&A.iat,g.auth,"internal-error");const O="object"==typeof A.firebase?A.firebase:void 0,G=O?.sign_in_provider;return{claims:A,token:w,authTime:qe(sn(A.auth_time)),issuedAtTime:qe(sn(A.iat)),expirationTime:qe(sn(A.exp)),signInProvider:G||null,signInSecondFactor:O?.sign_in_second_factor||null}})).apply(this,arguments)}function sn(v){return 1e3*Number(v)}function kt(v){const[p,g,w]=v.split(".");if(void 0===p||void 0===g||void 0===w)return Le("JWT malformed, contained fewer than 3 sections"),null;try{const A=(0,F.tV)(g);return A?JSON.parse(A):(Le("Failed to decode base64 JWT payload"),null)}catch(A){return Le("Caught error parsing JWT payload as JSON",A?.toString()),null}}function ut(v,p){return xt.apply(this,arguments)}function xt(){return(xt=(0,u.Z)(function*(v,p,g=!1){if(g)return p;try{return yield p}catch(w){throw w instanceof F.ZR&&function Ur({code:v}){return"auth/user-disabled"===v||"auth/user-token-expired"===v}(w)&&v.auth.currentUser===v&&(yield v.auth.signOut()),w}})).apply(this,arguments)}class Un{constructor(p){this.user=p,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(p){var g;if(p){const w=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),w}{this.errorBackoff=3e4;const A=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,A)}}schedule(p=!1){var g=this;if(!this.isRunning)return;const w=this.getInterval(p);this.timerId=setTimeout((0,u.Z)(function*(){yield g.iteration()}),w)}iteration(){var p=this;return(0,u.Z)(function*(){try{yield p.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&p.schedule(!0))}p.schedule()})()}}class Yn{constructor(p,g){this.createdAt=p,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=qe(this.lastLoginAt),this.creationTime=qe(this.createdAt)}_copy(p){this.createdAt=p.createdAt,this.lastLoginAt=p.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function gn(v){return Mn.apply(this,arguments)}function Mn(){return Mn=(0,u.Z)(function*(v){var p;const g=v.auth,w=yield v.getIdToken(),A=yield ut(v,function fe(v,p){return te.apply(this,arguments)}(g,{idToken:w}));ue(A?.users.length,g,"internal-error");const O=A.users[0];v._notifyReloadListener(O);const G=null!==(p=O.providerUserInfo)&&void 0!==p&&p.length?function cn(v){return v.map(p=>{var{providerId:g}=p,w=(0,ae._T)(p,["providerId"]);return{providerId:g,uid:w.rawId||"",displayName:w.displayName||null,email:w.email||null,phoneNumber:w.phoneNumber||null,photoURL:w.photoUrl||null}})}(O.providerUserInfo):[],ee=function gs(v,p){return[...v.filter(w=>!p.some(A=>A.providerId===w.providerId)),...p]}(v.providerData,G),ze=!!v.isAnonymous&&!(v.email&&O.passwordHash||ee?.length),mt={uid:O.localId,displayName:O.displayName||null,photoURL:O.photoUrl||null,email:O.email||null,emailVerified:O.emailVerified||!1,phoneNumber:O.phoneNumber||null,tenantId:O.tenantId||null,providerData:ee,metadata:new Yn(O.createdAt,O.lastLoginAt),isAnonymous:ze};Object.assign(v,mt)}),Mn.apply(this,arguments)}function Tn(){return(Tn=(0,u.Z)(function*(v){const p=(0,F.m9)(v);yield gn(p),yield p.auth._persistUserIfCurrent(p),p.auth._notifyListenersIfCurrent(p)})).apply(this,arguments)}function Cn(){return(Cn=(0,u.Z)(function*(v,p){const g=yield At(v,{},(0,u.Z)(function*(){const w=(0,F.xO)({grant_type:"refresh_token",refresh_token:p}).slice(1),{tokenApiHost:A,apiKey:O}=v.config,G=Lr(v,A,"/v1/token",`key=${O}`),ee=yield v._getAdditionalHeaders();return ee["Content-Type"]="application/x-www-form-urlencoded",rt.fetch()(G,{method:"POST",headers:ee,body:w})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class qi{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(p){ue(p.idToken,"internal-error"),ue(typeof p.idToken<"u","internal-error"),ue(typeof p.refreshToken<"u","internal-error");const g="expiresIn"in p&&typeof p.expiresIn<"u"?Number(p.expiresIn):function on(v){const p=kt(v);return ue(p,"internal-error"),ue(typeof p.exp<"u","internal-error"),ue(typeof p.iat<"u","internal-error"),Number(p.exp)-Number(p.iat)}(p.idToken);this.updateTokensAndExpiration(p.idToken,p.refreshToken,g)}getToken(p,g=!1){var w=this;return(0,u.Z)(function*(){return ue(!w.accessToken||w.refreshToken,p,"user-token-expired"),g||!w.accessToken||w.isExpired?w.refreshToken?(yield w.refresh(p,w.refreshToken),w.accessToken):null:w.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(p,g){var w=this;return(0,u.Z)(function*(){const{accessToken:A,refreshToken:O,expiresIn:G}=yield function Ps(v,p){return Cn.apply(this,arguments)}(p,g);w.updateTokensAndExpiration(A,O,Number(G))})()}updateTokensAndExpiration(p,g,w){this.refreshToken=g||null,this.accessToken=p||null,this.expirationTime=Date.now()+1e3*w}static fromJSON(p,g){const{refreshToken:w,accessToken:A,expirationTime:O}=g,G=new qi;return w&&(ue("string"==typeof w,"internal-error",{appName:p}),G.refreshToken=w),A&&(ue("string"==typeof A,"internal-error",{appName:p}),G.accessToken=A),O&&(ue("number"==typeof O,"internal-error",{appName:p}),G.expirationTime=O),G}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(p){this.accessToken=p.accessToken,this.refreshToken=p.refreshToken,this.expirationTime=p.expirationTime}_clone(){return Object.assign(new qi,this.toJSON())}_performRefresh(){return Mt("not implemented")}}function lr(v,p){ue("string"==typeof v||typeof v>"u","internal-error",{appName:p})}class yr{constructor(p){var{uid:g,auth:w,stsTokenManager:A}=p,O=(0,ae._T)(p,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Un(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=w,this.stsTokenManager=A,this.accessToken=A.accessToken,this.displayName=O.displayName||null,this.email=O.email||null,this.emailVerified=O.emailVerified||!1,this.phoneNumber=O.phoneNumber||null,this.photoURL=O.photoURL||null,this.isAnonymous=O.isAnonymous||!1,this.tenantId=O.tenantId||null,this.providerData=O.providerData?[...O.providerData]:[],this.metadata=new Yn(O.createdAt||void 0,O.lastLoginAt||void 0)}getIdToken(p){var g=this;return(0,u.Z)(function*(){const w=yield ut(g,g.stsTokenManager.getToken(g.auth,p));return ue(w,g.auth,"internal-error"),g.accessToken!==w&&(g.accessToken=w,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),w})()}getIdTokenResult(p){return function pn(v){return Yt.apply(this,arguments)}(this,p)}reload(){return function Jr(v){return Tn.apply(this,arguments)}(this)}_assign(p){this!==p&&(ue(this.uid===p.uid,this.auth,"internal-error"),this.displayName=p.displayName,this.photoURL=p.photoURL,this.email=p.email,this.emailVerified=p.emailVerified,this.phoneNumber=p.phoneNumber,this.isAnonymous=p.isAnonymous,this.tenantId=p.tenantId,this.providerData=p.providerData.map(g=>Object.assign({},g)),this.metadata._copy(p.metadata),this.stsTokenManager._assign(p.stsTokenManager))}_clone(p){const g=new yr(Object.assign(Object.assign({},this),{auth:p,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(p){ue(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=p,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(p){this.reloadListener?this.reloadListener(p):this.reloadUserInfo=p}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(p,g=!1){var w=this;return(0,u.Z)(function*(){let A=!1;p.idToken&&p.idToken!==w.stsTokenManager.accessToken&&(w.stsTokenManager.updateFromServerResponse(p),A=!0),g&&(yield gn(w)),yield w.auth._persistUserIfCurrent(w),A&&w.auth._notifyListenersIfCurrent(w)})()}delete(){var p=this;return(0,u.Z)(function*(){const g=yield p.getIdToken();return yield ut(p,function Vr(v,p){return oi.apply(this,arguments)}(p.auth,{idToken:g})),p.stsTokenManager.clearRefreshToken(),p.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(p=>Object.assign({},p)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(p,g){var w,A,O,G,ee,Pe,et,ze;const mt=null!==(w=g.displayName)&&void 0!==w?w:void 0,Kn=null!==(A=g.email)&&void 0!==A?A:void 0,as=null!==(O=g.phoneNumber)&&void 0!==O?O:void 0,el=null!==(G=g.photoURL)&&void 0!==G?G:void 0,Ql=null!==(ee=g.tenantId)&&void 0!==ee?ee:void 0,On=null!==(Pe=g._redirectEventId)&&void 0!==Pe?Pe:void 0,pc=null!==(et=g.createdAt)&&void 0!==et?et:void 0,Kt=null!==(ze=g.lastLoginAt)&&void 0!==ze?ze:void 0,{uid:Qh,emailVerified:Jl,isAnonymous:t_,providerData:tr,stsTokenManager:Jh}=g;ue(Qh&&Jh,p,"internal-error");const Gv=qi.fromJSON(this.name,Jh);ue("string"==typeof Qh,p,"internal-error"),lr(mt,p.name),lr(Kn,p.name),ue("boolean"==typeof Jl,p,"internal-error"),ue("boolean"==typeof t_,p,"internal-error"),lr(as,p.name),lr(el,p.name),lr(Ql,p.name),lr(On,p.name),lr(pc,p.name),lr(Kt,p.name);const gc=new yr({uid:Qh,auth:p,email:Kn,emailVerified:Jl,displayName:mt,isAnonymous:t_,photoURL:el,phoneNumber:as,tenantId:Ql,stsTokenManager:Gv,createdAt:pc,lastLoginAt:Kt});return tr&&Array.isArray(tr)&&(gc.providerData=tr.map($v=>Object.assign({},$v))),On&&(gc._redirectEventId=On),gc}static _fromIdTokenResponse(p,g,w=!1){return(0,u.Z)(function*(){const A=new qi;A.updateFromServerResponse(g);const O=new yr({uid:g.localId,auth:p,stsTokenManager:A,isAnonymous:w});return yield gn(O),O})()}}const ms=new Map;function Hn(v){it(v instanceof Function,"Expected a class definition");let p=ms.get(v);return p?(it(p instanceof v,"Instance stored in cache mismatched with class"),p):(p=new v,ms.set(v,p),p)}const Ei=(()=>{class v{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,u.Z)(function*(){return!0})()}_set(g,w){var A=this;return(0,u.Z)(function*(){A.storage[g]=w})()}_get(g){var w=this;return(0,u.Z)(function*(){const A=w.storage[g];return void 0===A?null:A})()}_remove(g){var w=this;return(0,u.Z)(function*(){delete w.storage[g]})()}_addListener(g,w){}_removeListener(g,w){}}return v.type="NONE",v})();function j(v,p,g){return`firebase:${v}:${p}:${g}`}class U{constructor(p,g,w){this.persistence=p,this.auth=g,this.userKey=w;const{config:A,name:O}=this.auth;this.fullUserKey=j(this.userKey,A.apiKey,O),this.fullPersistenceKey=j("persistence",A.apiKey,O),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(p){return this.persistence._set(this.fullUserKey,p.toJSON())}getCurrentUser(){var p=this;return(0,u.Z)(function*(){const g=yield p.persistence._get(p.fullUserKey);return g?yr._fromJSON(p.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(p){var g=this;return(0,u.Z)(function*(){if(g.persistence===p)return;const w=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=p,w?g.setCurrentUser(w):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(p,g,w="authUser"){return(0,u.Z)(function*(){if(!g.length)return new U(Hn(Ei),p,w);const A=(yield Promise.all(g.map(function(){var et=(0,u.Z)(function*(ze){if(yield ze._isAvailable())return ze});return function(ze){return et.apply(this,arguments)}}()))).filter(et=>et);let O=A[0]||Hn(Ei);const G=j(w,p.config.apiKey,p.name);let ee=null;for(const et of g)try{const ze=yield et._get(G);if(ze){const mt=yr._fromJSON(p,ze);et!==O&&(ee=mt),O=et;break}}catch{}const Pe=A.filter(et=>et._shouldAllowMigration);return O._shouldAllowMigration&&Pe.length?(O=Pe[0],ee&&(yield O._set(G,ee.toJSON())),yield Promise.all(g.map(function(){var et=(0,u.Z)(function*(ze){if(ze!==O)try{yield ze._remove(G)}catch{}});return function(ze){return et.apply(this,arguments)}}())),new U(O,p,w)):new U(O,p,w)})()}}function K(v){const p=v.toLowerCase();if(p.includes("opera/")||p.includes("opr/")||p.includes("opios/"))return"Opera";if(Ft(p))return"IEMobile";if(p.includes("msie")||p.includes("trident/"))return"IE";if(p.includes("edge/"))return"Edge";if(Ce(p))return"Firefox";if(p.includes("silk/"))return"Silk";if(fr(p))return"Blackberry";if(Zn(p))return"Webos";if(re(p))return"Safari";if((p.includes("chrome/")||$e(p))&&!p.includes("edge/"))return"Chrome";if(mn(p))return"Android";{const w=v.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===w?.length)return w[1]}return"Other"}function Ce(v=(0,F.z$)()){return/firefox\//i.test(v)}function re(v=(0,F.z$)()){const p=v.toLowerCase();return p.includes("safari/")&&!p.includes("chrome/")&&!p.includes("crios/")&&!p.includes("android")}function $e(v=(0,F.z$)()){return/crios\//i.test(v)}function Ft(v=(0,F.z$)()){return/iemobile/i.test(v)}function mn(v=(0,F.z$)()){return/android/i.test(v)}function fr(v=(0,F.z$)()){return/blackberry/i.test(v)}function Zn(v=(0,F.z$)()){return/webos/i.test(v)}function An(v=(0,F.z$)()){return/iphone|ipad|ipod/i.test(v)||/macintosh/i.test(v)&&/mobile/i.test(v)}function ks(v=(0,F.z$)()){return An(v)||mn(v)||Zn(v)||fr(v)||/windows phone/i.test(v)||Ft(v)}function me(v,p=[]){let g;switch(v){case"Browser":g=K((0,F.z$)());break;case"Worker":g=`${K((0,F.z$)())}-${v}`;break;default:g=v}const w=p.length?p.join(","):"FirebaseCore-web";return`${g}/JsCore/${he.SDK_VERSION}/${w}`}function Ve(){return(Ve=(0,u.Z)(function*(v){return(yield Gt(v,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function St(v,p){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,u.Z)(function*(v,p){return Gt(v,"GET","/v2/recaptchaConfig",wt(v,p))})).apply(this,arguments)}function Xt(v){return void 0!==v&&void 0!==v.getResponse}function Nt(v){return void 0!==v&&void 0!==v.enterprise}class bn{constructor(p){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===p.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=p.recaptchaKey.split("/")[3],this.emailPasswordEnabled=p.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function jr(v){return new Promise((p,g)=>{const w=document.createElement("script");w.setAttribute("src",v),w.onload=p,w.onerror=A=>{const O=Ie("internal-error");O.customData=A,g(O)},w.type="text/javascript",w.charset="UTF-8",function _n(){var v,p;return null!==(p=null===(v=document.getElementsByTagName("head"))||void 0===v?void 0:v[0])&&void 0!==p?p:document}().appendChild(w)})}function vr(v){return`__${v}${Math.floor(1e6*Math.random())}`}const xa="NO_RECAPTCHA";class Ki{constructor(p){this.type="recaptcha-enterprise",this.auth=Rn(p)}verify(p="verify",g=!1){var w=this;return(0,u.Z)(function*(){function O(){return O=(0,u.Z)(function*(ee){if(!g){if(null==ee.tenantId&&null!=ee._agentRecaptchaConfig)return ee._agentRecaptchaConfig.siteKey;if(null!=ee.tenantId&&void 0!==ee._tenantRecaptchaConfigs[ee.tenantId])return ee._tenantRecaptchaConfigs[ee.tenantId].siteKey}return new Promise(function(){var Pe=(0,u.Z)(function*(et,ze){St(ee,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(mt=>{if(void 0!==mt.recaptchaKey){const Kn=new bn(mt);return null==ee.tenantId?ee._agentRecaptchaConfig=Kn:ee._tenantRecaptchaConfigs[ee.tenantId]=Kn,et(Kn.siteKey)}ze(new Error("recaptcha Enterprise site key undefined"))}).catch(mt=>{ze(mt)})});return function(et,ze){return Pe.apply(this,arguments)}}())}),O.apply(this,arguments)}function G(ee,Pe,et){const ze=window.grecaptcha;Nt(ze)?ze.enterprise.ready(()=>{ze.enterprise.execute(ee,{action:p}).then(mt=>{Pe(mt)}).catch(()=>{Pe(xa)})}):et(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((ee,Pe)=>{(function A(ee){return O.apply(this,arguments)})(w.auth).then(et=>{if(!g&&Nt(window.grecaptcha))G(et,ee,Pe);else{if(typeof window>"u")return void Pe(new Error("RecaptchaVerifier is only supported in browser"));jr("https://www.google.com/recaptcha/enterprise.js?render="+et).then(()=>{G(et,ee,Pe)}).catch(ze=>{Pe(ze)})}}).catch(et=>{Pe(et)})})})()}}function ot(v,p,g){return $t.apply(this,arguments)}function $t(){return($t=(0,u.Z)(function*(v,p,g,w=!1){const A=new Ki(v);let O;try{O=yield A.verify(g)}catch{O=yield A.verify(g,!0)}const G=Object.assign({},p);return Object.assign(G,w?{captchaResp:O}:{captchaResponse:O}),Object.assign(G,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(G,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),G})).apply(this,arguments)}class zn{constructor(p){this.auth=p,this.queue=[]}pushCallback(p,g){const w=O=>new Promise((G,ee)=>{try{G(p(O))}catch(Pe){ee(Pe)}});w.onAbort=g,this.queue.push(w);const A=this.queue.length-1;return()=>{this.queue[A]=()=>Promise.resolve()}}runMiddleware(p){var g=this;return(0,u.Z)(function*(){if(g.auth.currentUser===p)return;const w=[];try{for(const A of g.queue)yield A(p),A.onAbort&&w.push(A.onAbort)}catch(A){w.reverse();for(const O of w)try{O()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:A?.message})}})()}}class Yi{constructor(p,g,w,A){this.app=p,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=w,this.config=A,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new br(this),this.idTokenSubscription=new br(this),this.beforeStateQueue=new zn(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=_e,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=p.name,this.clientVersion=A.sdkClientVersion}_initializeWithPersistence(p,g){var w=this;return g&&(this._popupRedirectResolver=Hn(g)),this._initializationPromise=this.queue((0,u.Z)(function*(){var A,O;if(!w._deleted&&(w.persistenceManager=yield U.create(w,p),!w._deleted)){if(null!==(A=w._popupRedirectResolver)&&void 0!==A&&A._shouldInitProactively)try{yield w._popupRedirectResolver._initialize(w)}catch{}yield w.initializeCurrentUser(g),w.lastNotifiedUid=(null===(O=w.currentUser)||void 0===O?void 0:O.uid)||null,!w._deleted&&(w._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var p=this;return(0,u.Z)(function*(){if(p._deleted)return;const g=yield p.assertedPersistence.getCurrentUser();if(p.currentUser||g){if(p.currentUser&&g&&p.currentUser.uid===g.uid)return p._currentUser._assign(g),void(yield p.currentUser.getIdToken());yield p._updateCurrentUser(g,!0)}})()}initializeCurrentUser(p){var g=this;return(0,u.Z)(function*(){var w;const A=yield g.assertedPersistence.getCurrentUser();let O=A,G=!1;if(p&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const ee=null===(w=g.redirectUser)||void 0===w?void 0:w._redirectEventId,Pe=O?._redirectEventId,et=yield g.tryRedirectSignIn(p);(!ee||ee===Pe)&&et?.user&&(O=et.user,G=!0)}if(!O)return g.directlySetCurrentUser(null);if(!O._redirectEventId){if(G)try{yield g.beforeStateQueue.runMiddleware(O)}catch(ee){O=A,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(ee))}return O?g.reloadAndSetCurrentUserOrClear(O):g.directlySetCurrentUser(null)}return ue(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===O._redirectEventId?g.directlySetCurrentUser(O):g.reloadAndSetCurrentUserOrClear(O)})()}tryRedirectSignIn(p){var g=this;return(0,u.Z)(function*(){let w=null;try{w=yield g._popupRedirectResolver._completeRedirectFn(g,p,!0)}catch{yield g._setRedirectUser(null)}return w})()}reloadAndSetCurrentUserOrClear(p){var g=this;return(0,u.Z)(function*(){try{yield gn(p)}catch(w){if("auth/network-request-failed"!==w?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(p)})()}useDeviceLanguage(){this.languageCode=function De(){if(typeof navigator>"u")return null;const v=navigator;return v.languages&&v.languages[0]||v.language||null}()}_delete(){var p=this;return(0,u.Z)(function*(){p._deleted=!0})()}updateCurrentUser(p){var g=this;return(0,u.Z)(function*(){const w=p?(0,F.m9)(p):null;return w&&ue(w.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(w&&w._clone(g))})()}_updateCurrentUser(p,g=!1){var w=this;return(0,u.Z)(function*(){if(!w._deleted)return p&&ue(w.tenantId===p.tenantId,w,"tenant-id-mismatch"),g||(yield w.beforeStateQueue.runMiddleware(p)),w.queue((0,u.Z)(function*(){yield w.directlySetCurrentUser(p),w.notifyAuthListeners()}))})()}signOut(){var p=this;return(0,u.Z)(function*(){return yield p.beforeStateQueue.runMiddleware(null),(p.redirectPersistenceManager||p._popupRedirectResolver)&&(yield p._setRedirectUser(null)),p._updateCurrentUser(null,!0)})()}setPersistence(p){var g=this;return this.queue((0,u.Z)(function*(){yield g.assertedPersistence.setPersistence(Hn(p))}))}initializeRecaptchaConfig(){var p=this;return(0,u.Z)(function*(){const g=yield St(p,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),w=new bn(g);null==p.tenantId?p._agentRecaptchaConfig=w:p._tenantRecaptchaConfigs[p.tenantId]=w,w.emailPasswordEnabled&&new Ki(p).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(p){this._errorFactory=new F.LL("auth","Firebase",p())}onAuthStateChanged(p,g,w){return this.registerStateListener(this.authStateSubscription,p,g,w)}beforeAuthStateChanged(p,g){return this.beforeStateQueue.pushCallback(p,g)}onIdTokenChanged(p,g,w){return this.registerStateListener(this.idTokenSubscription,p,g,w)}toJSON(){var p;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(p=this._currentUser)||void 0===p?void 0:p.toJSON()}}_setRedirectUser(p,g){var w=this;return(0,u.Z)(function*(){const A=yield w.getOrInitRedirectPersistenceManager(g);return null===p?A.removeCurrentUser():A.setCurrentUser(p)})()}getOrInitRedirectPersistenceManager(p){var g=this;return(0,u.Z)(function*(){if(!g.redirectPersistenceManager){const w=p&&Hn(p)||g._popupRedirectResolver;ue(w,g,"argument-error"),g.redirectPersistenceManager=yield U.create(g,[Hn(w._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(p){var g=this;return(0,u.Z)(function*(){var w,A;return g._isInitialized&&(yield g.queue((0,u.Z)(function*(){}))),(null===(w=g._currentUser)||void 0===w?void 0:w._redirectEventId)===p?g._currentUser:(null===(A=g.redirectUser)||void 0===A?void 0:A._redirectEventId)===p?g.redirectUser:null})()}_persistUserIfCurrent(p){var g=this;return(0,u.Z)(function*(){if(p===g.currentUser)return g.queue((0,u.Z)(function*(){return g.directlySetCurrentUser(p)}))})()}_notifyListenersIfCurrent(p){p===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var p,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const w=null!==(g=null===(p=this.currentUser)||void 0===p?void 0:p.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==w&&(this.lastNotifiedUid=w,this.authStateSubscription.next(this.currentUser))}registerStateListener(p,g,w,A){if(this._deleted)return()=>{};const O="function"==typeof g?g:g.next.bind(g),G=this._isInitialized?Promise.resolve():this._initializationPromise;return ue(G,this,"internal-error"),G.then(()=>O(this.currentUser)),"function"==typeof g?p.addObserver(g,w,A):p.addObserver(g)}directlySetCurrentUser(p){var g=this;return(0,u.Z)(function*(){g.currentUser&&g.currentUser!==p&&g._currentUser._stopProactiveRefresh(),p&&g.isProactiveRefreshEnabled&&p._startProactiveRefresh(),g.currentUser=p,p?yield g.assertedPersistence.setCurrentUser(p):yield g.assertedPersistence.removeCurrentUser()})()}queue(p){return this.operations=this.operations.then(p,p),this.operations}get assertedPersistence(){return ue(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(p){!p||this.frameworks.includes(p)||(this.frameworks.push(p),this.frameworks.sort(),this.clientVersion=me(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var p=this;return(0,u.Z)(function*(){var g;const w={"X-Client-Version":p.clientVersion};p.app.options.appId&&(w["X-Firebase-gmpid"]=p.app.options.appId);const A=yield null===(g=p.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();A&&(w["X-Firebase-Client"]=A);const O=yield p._getAppCheckToken();return O&&(w["X-Firebase-AppCheck"]=O),w})()}_getAppCheckToken(){var p=this;return(0,u.Z)(function*(){var g;const w=yield null===(g=p.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return w?.error&&function We(v,...p){Fe.logLevel<=le.in.WARN&&Fe.warn(`Auth (${he.SDK_VERSION}): ${v}`,...p)}(`Error while retrieving App Check token: ${w.error}`),w?.token})()}}function Rn(v){return(0,F.m9)(v)}class br{constructor(p){this.auth=p,this.observer=null,this.addObserver=(0,F.ne)(g=>this.observer=g)}get next(){return ue(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function pr(v){const p=v.indexOf(":");return p<0?"":v.substr(0,p+1)}function ml(v){if(!v)return null;const p=Number(v);return isNaN(p)?null:p}class Qs{constructor(p,g){this.providerId=p,this.signInMethod=g}toJSON(){return Mt("not implemented")}_getIdTokenResponse(p){return Mt("not implemented")}_linkToIdToken(p,g){return Mt("not implemented")}_getReauthenticationResolver(p){return Mt("not implemented")}}function zo(v,p){return gr.apply(this,arguments)}function gr(){return(gr=(0,u.Z)(function*(v,p){return Gt(v,"POST","/v1/accounts:resetPassword",wt(v,p))})).apply(this,arguments)}function Pa(v,p){return Js.apply(this,arguments)}function Js(){return(Js=(0,u.Z)(function*(v,p){return Gt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function Wo(){return(Wo=(0,u.Z)(function*(v,p){return Gt(v,"POST","/v1/accounts:update",wt(v,p))})).apply(this,arguments)}function jn(v,p){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,u.Z)(function*(v,p){return an(v,"POST","/v1/accounts:signInWithPassword",wt(v,p))})).apply(this,arguments)}function Oi(v,p){return _l.apply(this,arguments)}function _l(){return(_l=(0,u.Z)(function*(v,p){return Gt(v,"POST","/v1/accounts:sendOobCode",wt(v,p))})).apply(this,arguments)}function ka(){return(ka=(0,u.Z)(function*(v,p){return Oi(v,p)})).apply(this,arguments)}function No(v,p){return qo.apply(this,arguments)}function qo(){return(qo=(0,u.Z)(function*(v,p){return Oi(v,p)})).apply(this,arguments)}function $r(v,p){return Tu.apply(this,arguments)}function Tu(){return(Tu=(0,u.Z)(function*(v,p){return Oi(v,p)})).apply(this,arguments)}function Pi(){return(Pi=(0,u.Z)(function*(v,p){return Oi(v,p)})).apply(this,arguments)}function Fa(){return(Fa=(0,u.Z)(function*(v,p){return an(v,"POST","/v1/accounts:signInWithEmailLink",wt(v,p))})).apply(this,arguments)}function Zi(){return(Zi=(0,u.Z)(function*(v,p){return an(v,"POST","/v1/accounts:signInWithEmailLink",wt(v,p))})).apply(this,arguments)}class Iu extends Qs{constructor(p,g,w,A=null){super("password",w),this._email=p,this._password=g,this._tenantId=A}static _fromEmailAndPassword(p,g){return new Iu(p,g,"password")}static _fromEmailAndCode(p,g,w=null){return new Iu(p,g,"emailLink",w)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(p){var g=this;return(0,u.Z)(function*(){var w;switch(g.signInMethod){case"password":const A={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=p._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const O=yield ot(p,A,"signInWithPassword");return jn(p,O)}return jn(p,A).catch(function(){var O=(0,u.Z)(function*(G){if("auth/missing-recaptcha-token"===G.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const ee=yield ot(p,A,"signInWithPassword");return jn(p,ee)}return Promise.reject(G)});return function(G){return O.apply(this,arguments)}}());case"emailLink":return function yl(v,p){return Fa.apply(this,arguments)}(p,{email:g._email,oobCode:g._password});default:be(p,"internal-error")}})()}_linkToIdToken(p,g){var w=this;return(0,u.Z)(function*(){switch(w.signInMethod){case"password":return Pa(p,{idToken:g,returnSecureToken:!0,email:w._email,password:w._password});case"emailLink":return function Kc(v,p){return Zi.apply(this,arguments)}(p,{idToken:g,email:w._email,oobCode:w._password});default:be(p,"internal-error")}})()}_getReauthenticationResolver(p){return this._getIdTokenResponse(p)}}function bs(v,p){return ch.apply(this,arguments)}function ch(){return(ch=(0,u.Z)(function*(v,p){return an(v,"POST","/v1/accounts:signInWithIdp",wt(v,p))})).apply(this,arguments)}class Xs extends Qs{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(p){const g=new Xs(p.providerId,p.signInMethod);return p.idToken||p.accessToken?(p.idToken&&(g.idToken=p.idToken),p.accessToken&&(g.accessToken=p.accessToken),p.nonce&&!p.pendingToken&&(g.nonce=p.nonce),p.pendingToken&&(g.pendingToken=p.pendingToken)):p.oauthToken&&p.oauthTokenSecret?(g.accessToken=p.oauthToken,g.secret=p.oauthTokenSecret):be("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:A}=g,O=(0,ae._T)(g,["providerId","signInMethod"]);if(!w||!A)return null;const G=new Xs(w,A);return G.idToken=O.idToken||void 0,G.accessToken=O.accessToken||void 0,G.secret=O.secret,G.nonce=O.nonce,G.pendingToken=O.pendingToken||null,G}_getIdTokenResponse(p){return bs(p,this.buildRequest())}_linkToIdToken(p,g){const w=this.buildRequest();return w.idToken=g,bs(p,w)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,bs(p,g)}buildRequest(){const p={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)p.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),p.postBody=(0,F.xO)(g)}return p}}function Yc(){return(Yc=(0,u.Z)(function*(v,p){return Gt(v,"POST","/v1/accounts:sendVerificationCode",wt(v,p))})).apply(this,arguments)}function Zc(){return(Zc=(0,u.Z)(function*(v,p){return an(v,"POST","/v1/accounts:signInWithPhoneNumber",wt(v,p))})).apply(this,arguments)}function Su(){return(Su=(0,u.Z)(function*(v,p){const g=yield an(v,"POST","/v1/accounts:signInWithPhoneNumber",wt(v,p));if(g.temporaryProof)throw sr(v,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const dh={USER_NOT_FOUND:"user-not-found"};function Au(){return(Au=(0,u.Z)(function*(v,p){return an(v,"POST","/v1/accounts:signInWithPhoneNumber",wt(v,Object.assign(Object.assign({},p),{operation:"REAUTH"})),dh)})).apply(this,arguments)}class Qi extends Qs{constructor(p){super("phone","phone"),this.params=p}static _fromVerification(p,g){return new Qi({verificationId:p,verificationCode:g})}static _fromTokenResponse(p,g){return new Qi({phoneNumber:p,temporaryProof:g})}_getIdTokenResponse(p){return function Om(v,p){return Zc.apply(this,arguments)}(p,this._makeVerificationRequest())}_linkToIdToken(p,g){return function xm(v,p){return Su.apply(this,arguments)}(p,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(p){return function Mv(v,p){return Au.apply(this,arguments)}(p,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:p,phoneNumber:g,verificationId:w,verificationCode:A}=this.params;return p&&g?{temporaryProof:p,phoneNumber:g}:{sessionInfo:w,code:A}}toJSON(){const p={providerId:this.providerId};return this.params.phoneNumber&&(p.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(p.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(p.verificationCode=this.params.verificationCode),this.params.verificationId&&(p.verificationId=this.params.verificationId),p}static fromJSON(p){"string"==typeof p&&(p=JSON.parse(p));const{verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:O}=p;return w||g||A||O?new Qi({verificationId:g,verificationCode:w,phoneNumber:A,temporaryProof:O}):null}}class La{constructor(p){var g,w,A,O,G,ee;const Pe=(0,F.zd)((0,F.pd)(p)),et=null!==(g=Pe.apiKey)&&void 0!==g?g:null,ze=null!==(w=Pe.oobCode)&&void 0!==w?w:null,mt=function bp(v){switch(v){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(A=Pe.mode)&&void 0!==A?A:null);ue(et&&ze&&mt,"argument-error"),this.apiKey=et,this.operation=mt,this.code=ze,this.continueUrl=null!==(O=Pe.continueUrl)&&void 0!==O?O:null,this.languageCode=null!==(G=Pe.languageCode)&&void 0!==G?G:null,this.tenantId=null!==(ee=Pe.tenantId)&&void 0!==ee?ee:null}static parseLink(p){const g=function hh(v){const p=(0,F.zd)((0,F.pd)(v)).link,g=p?(0,F.zd)((0,F.pd)(p)).deep_link_id:null,w=(0,F.zd)((0,F.pd)(v)).deep_link_id;return(w?(0,F.zd)((0,F.pd)(w)).link:null)||w||g||p||v}(p);try{return new La(g)}catch{return null}}}let fh=(()=>{class v{constructor(){this.providerId=v.PROVIDER_ID}static credential(g,w){return Iu._fromEmailAndPassword(g,w)}static credentialWithLink(g,w){const A=La.parseLink(w);return ue(A,"argument-error"),Iu._fromEmailAndCode(g,A.code,A.tenantId)}}return v.PROVIDER_ID="password",v.EMAIL_PASSWORD_SIGN_IN_METHOD="password",v.EMAIL_LINK_SIGN_IN_METHOD="emailLink",v})();class eo{constructor(p){this.providerId=p,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(p){this.defaultLanguageCode=p}setCustomParameters(p){return this.customParameters=p,this}getCustomParameters(){return this.customParameters}}class Fs extends eo{constructor(){super(...arguments),this.scopes=[]}addScope(p){return this.scopes.includes(p)||this.scopes.push(p),this}getScopes(){return[...this.scopes]}}class Ko extends Fs{static credentialFromJSON(p){const g="string"==typeof p?JSON.parse(p):p;return ue("providerId"in g&&"signInMethod"in g,"argument-error"),Xs._fromParams(g)}credential(p){return this._credential(Object.assign(Object.assign({},p),{nonce:p.rawNonce}))}_credential(p){return ue(p.idToken||p.accessToken,"argument-error"),Xs._fromParams(Object.assign(Object.assign({},p),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(p){return Ko.oauthCredentialFromTaggedObject(p)}static credentialFromError(p){return Ko.oauthCredentialFromTaggedObject(p.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{oauthIdToken:g,oauthAccessToken:w,oauthTokenSecret:A,pendingToken:O,nonce:G,providerId:ee}=p;if(!w&&!A&&!g&&!O||!ee)return null;try{return new Ko(ee)._credential({idToken:g,accessToken:w,nonce:G,pendingToken:O})}catch{return null}}}let Qc=(()=>{class v extends Fs{constructor(){super("facebook.com")}static credential(g){return Xs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.FACEBOOK_SIGN_IN_METHOD="facebook.com",v.PROVIDER_ID="facebook.com",v})(),vl=(()=>{class v extends Fs{constructor(){super("google.com"),this.addScope("profile")}static credential(g,w){return Xs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:w})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:w,oauthAccessToken:A}=g;if(!w&&!A)return null;try{return v.credential(w,A)}catch{return null}}}return v.GOOGLE_SIGN_IN_METHOD="google.com",v.PROVIDER_ID="google.com",v})(),ph=(()=>{class v extends Fs{constructor(){super("github.com")}static credential(g){return Xs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return v.credential(g.oauthAccessToken)}catch{return null}}}return v.GITHUB_SIGN_IN_METHOD="github.com",v.PROVIDER_ID="github.com",v})();class Mo extends Qs{constructor(p,g){super(p,p),this.pendingToken=g}_getIdTokenResponse(p){return bs(p,this.buildRequest())}_linkToIdToken(p,g){const w=this.buildRequest();return w.idToken=g,bs(p,w)}_getReauthenticationResolver(p){const g=this.buildRequest();return g.autoCreate=!1,bs(p,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(p){const g="string"==typeof p?JSON.parse(p):p,{providerId:w,signInMethod:A,pendingToken:O}=g;return w&&A&&O&&w===A?new Mo(w,O):null}static _create(p,g){return new Mo(p,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Nu extends eo{constructor(p){ue(p.startsWith("saml."),"argument-error"),super(p)}static credentialFromResult(p){return Nu.samlCredentialFromTaggedObject(p)}static credentialFromError(p){return Nu.samlCredentialFromTaggedObject(p.customData||{})}static credentialFromJSON(p){const g=Mo.fromJSON(p);return ue(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:p}){if(!p)return null;const{pendingToken:g,providerId:w}=p;if(!g||!w)return null;try{return Mo._create(w,g)}catch{return null}}}let Mu=(()=>{class v extends Fs{constructor(){super("twitter.com")}static credential(g,w){return Xs._fromParams({providerId:v.PROVIDER_ID,signInMethod:v.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:w})}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:w,oauthTokenSecret:A}=g;if(!w||!A)return null;try{return v.credential(w,A)}catch{return null}}}return v.TWITTER_SIGN_IN_METHOD="twitter.com",v.PROVIDER_ID="twitter.com",v})();function Ro(v,p){return Ci.apply(this,arguments)}function Ci(){return(Ci=(0,u.Z)(function*(v,p){return an(v,"POST","/v1/accounts:signUp",wt(v,p))})).apply(this,arguments)}class li{constructor(p){this.user=p.user,this.providerId=p.providerId,this._tokenResponse=p._tokenResponse,this.operationType=p.operationType}static _fromIdTokenResponse(p,g,w,A=!1){return(0,u.Z)(function*(){const O=yield yr._fromIdTokenResponse(p,w,A),G=bl(w);return new li({user:O,providerId:G,_tokenResponse:w,operationType:g})})()}static _forOperation(p,g,w){return(0,u.Z)(function*(){yield p._updateTokensIfNecessary(w,!0);const A=bl(w);return new li({user:p,providerId:A,_tokenResponse:w,operationType:g})})()}}function bl(v){return v.providerId?v.providerId:"phoneNumber"in v?"phone":null}function Ba(){return(Ba=(0,u.Z)(function*(v){var p;const g=Rn(v);if(yield g._initializationPromise,null!==(p=g.currentUser)&&void 0!==p&&p.isAnonymous)return new li({user:g.currentUser,providerId:null,operationType:"signIn"});const w=yield Ro(g,{returnSecureToken:!0}),A=yield li._fromIdTokenResponse(g,"signIn",w,!0);return yield g._updateCurrentUser(A.user),A})).apply(this,arguments)}class to extends F.ZR{constructor(p,g,w,A){var O;super(g.code,g.message),this.operationType=w,this.user=A,Object.setPrototypeOf(this,to.prototype),this.customData={appName:p.name,tenantId:null!==(O=p.tenantId)&&void 0!==O?O:void 0,_serverResponse:g.customData._serverResponse,operationType:w}}static _fromErrorAndOperation(p,g,w,A){return new to(p,g,w,A)}}function zr(v,p,g,w){return("reauthenticate"===p?g._getReauthenticationResolver(v):g._getIdTokenResponse(v)).catch(O=>{throw"auth/multi-factor-auth-required"===O.code?to._fromErrorAndOperation(v,O,p,w):O})}function gh(v){return new Set(v.map(({providerId:p})=>p).filter(p=>!!p))}function ui(){return ui=(0,u.Z)(function*(v,p){const g=(0,F.m9)(v);yield no(!0,g,p);const{providerUserInfo:w}=yield function ie(v,p){return J.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[p]}),A=gh(w||[]);return g.providerData=g.providerData.filter(O=>A.has(O.providerId)),A.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),ui.apply(this,arguments)}function Ar(v,p){return Ru.apply(this,arguments)}function Ru(){return(Ru=(0,u.Z)(function*(v,p,g=!1){const w=yield ut(v,p._linkToIdToken(v.auth,yield v.getIdToken()),g);return li._forOperation(v,"link",w)})).apply(this,arguments)}function no(v,p,g){return Xc.apply(this,arguments)}function Xc(){return(Xc=(0,u.Z)(function*(v,p,g){yield gn(p);const A=!1===v?"provider-already-linked":"no-such-provider";ue(gh(p.providerData).has(g)===v,p.auth,A)})).apply(this,arguments)}function Oo(v,p){return Va.apply(this,arguments)}function Va(){return(Va=(0,u.Z)(function*(v,p,g=!1){const{auth:w}=v,A="reauthenticate";try{const O=yield ut(v,zr(w,A,p,v),g);ue(O.idToken,w,"internal-error");const G=kt(O.idToken);ue(G,w,"internal-error");const{sub:ee}=G;return ue(v.uid===ee,w,"user-mismatch"),li._forOperation(v,A,O)}catch(O){throw"auth/user-not-found"===O?.code&&be(w,"user-mismatch"),O}})).apply(this,arguments)}function wl(v,p){return jt.apply(this,arguments)}function jt(){return(jt=(0,u.Z)(function*(v,p,g=!1){const w="signIn",A=yield zr(v,w,p),O=yield li._fromIdTokenResponse(v,w,A);return g||(yield v._updateCurrentUser(O.user)),O})).apply(this,arguments)}function Dl(v,p){return _h.apply(this,arguments)}function _h(){return(_h=(0,u.Z)(function*(v,p){return wl(Rn(v),p)})).apply(this,arguments)}function yh(v,p){return Ou.apply(this,arguments)}function Ou(){return(Ou=(0,u.Z)(function*(v,p){const g=(0,F.m9)(v);return yield no(!1,g,p.providerId),Ar(g,p)})).apply(this,arguments)}function vh(v,p){return xu.apply(this,arguments)}function xu(){return(xu=(0,u.Z)(function*(v,p){return Oo((0,F.m9)(v),p)})).apply(this,arguments)}function bh(){return(bh=(0,u.Z)(function*(v,p){return an(v,"POST","/v1/accounts:signInWithCustomToken",wt(v,p))})).apply(this,arguments)}function Ht(){return Ht=(0,u.Z)(function*(v,p){const g=Rn(v),w=yield function Pm(v,p){return bh.apply(this,arguments)}(g,{token:p,returnSecureToken:!0}),A=yield li._fromIdTokenResponse(g,"signIn",w);return yield g._updateCurrentUser(A.user),A}),Ht.apply(this,arguments)}class El{constructor(p,g){this.factorId=p,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(p,g){return"phoneInfo"in g?Cl._fromServerResponse(p,g):"totpInfo"in g?Nr._fromServerResponse(p,g):be(p,"internal-error")}}class Cl extends El{constructor(p){super("phone",p),this.phoneNumber=p.phoneInfo}static _fromServerResponse(p,g){return new Cl(g)}}class Nr extends El{constructor(p){super("totp",p)}static _fromServerResponse(p,g){return new Nr(g)}}function Yo(v,p,g){var w;ue((null===(w=g.url)||void 0===w?void 0:w.length)>0,v,"invalid-continue-uri"),ue(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,v,"invalid-dynamic-link-domain"),p.continueUrl=g.url,p.dynamicLinkDomain=g.dynamicLinkDomain,p.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(ue(g.iOS.bundleId.length>0,v,"missing-ios-bundle-id"),p.iOSBundleId=g.iOS.bundleId),g.android&&(ue(g.android.packageName.length>0,v,"missing-android-pkg-name"),p.androidInstallApp=g.android.installApp,p.androidMinimumVersionCode=g.android.minimumVersion,p.androidPackageName=g.android.packageName)}function Ti(){return Ti=(0,u.Z)(function*(v,p,g){var w;const A=Rn(v),O={requestType:"PASSWORD_RESET",email:p,clientType:"CLIENT_TYPE_WEB"};if(null!==(w=A._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const G=yield ot(A,O,"getOobCode",!0);g&&Yo(A,G,g),yield No(A,G)}else g&&Yo(A,O,g),yield No(A,O).catch(function(){var G=(0,u.Z)(function*(ee){if("auth/missing-recaptcha-token"!==ee.code)return Promise.reject(ee);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const Pe=yield ot(A,O,"getOobCode",!0);g&&Yo(A,Pe,g),yield No(A,Pe)}});return function(ee){return G.apply(this,arguments)}}())}),Ti.apply(this,arguments)}function ku(){return(ku=(0,u.Z)(function*(v,p,g){yield zo((0,F.m9)(v),{oobCode:p,newPassword:g})})).apply(this,arguments)}function ro(){return ro=(0,u.Z)(function*(v,p){yield function vs(v,p){return Wo.apply(this,arguments)}((0,F.m9)(v),{oobCode:p})}),ro.apply(this,arguments)}function Tl(v,p){return wr.apply(this,arguments)}function wr(){return(wr=(0,u.Z)(function*(v,p){const g=(0,F.m9)(v),w=yield zo(g,{oobCode:p}),A=w.requestType;switch(ue(A,g,"internal-error"),A){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":ue(w.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":ue(w.mfaInfo,g,"internal-error");default:ue(w.email,g,"internal-error")}let O=null;return w.mfaInfo&&(O=El._fromServerResponse(Rn(g),w.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.newEmail:w.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===w.requestType?w.email:w.newEmail)||null,multiFactorInfo:O},operation:A}})).apply(this,arguments)}function Ls(){return(Ls=(0,u.Z)(function*(v,p){const{data:g}=yield Tl((0,F.m9)(v),p);return g.email})).apply(this,arguments)}function Xi(){return Xi=(0,u.Z)(function*(v,p,g){var w;const A=Rn(v),O={returnSecureToken:!0,email:p,password:g,clientType:"CLIENT_TYPE_WEB"};let G;if(null!==(w=A._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const et=yield ot(A,O,"signUpPassword");G=Ro(A,et)}else G=Ro(A,O).catch(function(){var et=(0,u.Z)(function*(ze){if("auth/missing-recaptcha-token"===ze.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const mt=yield ot(A,O,"signUpPassword");return Ro(A,mt)}return Promise.reject(ze)});return function(ze){return et.apply(this,arguments)}}());const ee=yield G.catch(et=>Promise.reject(et)),Pe=yield li._fromIdTokenResponse(A,"signIn",ee);return yield A._updateCurrentUser(Pe.user),Pe}),Xi.apply(this,arguments)}function Fu(){return Fu=(0,u.Z)(function*(v,p,g){var w;const A=Rn(v),O={requestType:"EMAIL_SIGNIN",email:p,clientType:"CLIENT_TYPE_WEB"};function G(ee,Pe){ue(Pe.handleCodeInApp,A,"argument-error"),Pe&&Yo(A,ee,Pe)}if(null!==(w=A._getRecaptchaConfig())&&void 0!==w&&w.emailPasswordEnabled){const ee=yield ot(A,O,"getOobCode",!0);G(ee,g),yield $r(A,ee)}else G(O,g),yield $r(A,O).catch(function(){var ee=(0,u.Z)(function*(Pe){if("auth/missing-recaptcha-token"!==Pe.code)return Promise.reject(Pe);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const et=yield ot(A,O,"getOobCode",!0);G(et,g),yield $r(A,et)}});return function(Pe){return ee.apply(this,arguments)}}())}),Fu.apply(this,arguments)}function Ua(){return(Ua=(0,u.Z)(function*(v,p,g){const w=(0,F.m9)(v),A=fh.credentialWithLink(p,g||zt());return ue(A._tenantId===(w.tenantId||null),w,"tenant-id-mismatch"),Dl(w,A)})).apply(this,arguments)}function Lu(){return(Lu=(0,u.Z)(function*(v,p){return Gt(v,"POST","/v1/accounts:createAuthUri",wt(v,p))})).apply(this,arguments)}function Bu(){return Bu=(0,u.Z)(function*(v,p){const w={identifier:p,continueUri:_t()?zt():"http://localhost"},{signinMethods:A}=yield function ed(v,p){return Lu.apply(this,arguments)}((0,F.m9)(v),w);return A||[]}),Bu.apply(this,arguments)}function Sl(){return Sl=(0,u.Z)(function*(v,p){const g=(0,F.m9)(v),A={requestType:"VERIFY_EMAIL",idToken:yield v.getIdToken()};p&&Yo(g.auth,A,p);const{email:O}=yield function qc(v,p){return ka.apply(this,arguments)}(g.auth,A);O!==v.email&&(yield v.reload())}),Sl.apply(this,arguments)}function Al(){return Al=(0,u.Z)(function*(v,p,g){const w=(0,F.m9)(v),O={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield v.getIdToken(),newEmail:p};g&&Yo(w.auth,O,g);const{email:G}=yield function xi(v,p){return Pi.apply(this,arguments)}(w.auth,O);G!==v.email&&(yield v.reload())}),Al.apply(this,arguments)}function Uu(){return(Uu=(0,u.Z)(function*(v,p){return Gt(v,"POST","/v1/accounts:update",p)})).apply(this,arguments)}function ju(){return ju=(0,u.Z)(function*(v,{displayName:p,photoURL:g}){if(void 0===p&&void 0===g)return;const w=(0,F.m9)(v),O={idToken:yield w.getIdToken(),displayName:p,photoUrl:g,returnSecureToken:!0},G=yield ut(w,function Ch(v,p){return Uu.apply(this,arguments)}(w.auth,O));w.displayName=G.displayName||null,w.photoURL=G.photoUrl||null;const ee=w.providerData.find(({providerId:Pe})=>"password"===Pe);ee&&(ee.displayName=w.displayName,ee.photoURL=w.photoURL),yield w._updateTokensIfNecessary(G)}),ju.apply(this,arguments)}function Qn(v,p,g){return Gu.apply(this,arguments)}function Gu(){return(Gu=(0,u.Z)(function*(v,p,g){const{auth:w}=v,O={idToken:yield v.getIdToken(),returnSecureToken:!0};p&&(O.email=p),g&&(O.password=g);const G=yield ut(v,Pa(w,O));yield v._updateTokensIfNecessary(G,!0)})).apply(this,arguments)}class Qo{constructor(p,g,w={}){this.isNewUser=p,this.providerId=g,this.profile=w}}class Cp extends Qo{constructor(p,g,w,A){super(p,g,w),this.username=A}}class Th extends Qo{constructor(p,g){super(p,"facebook.com",g)}}class Lm extends Cp{constructor(p,g){super(p,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class $u extends Qo{constructor(p,g){super(p,"google.com",g)}}class nd extends Cp{constructor(p,g,w){super(p,"twitter.com",g,w)}}function rd(v){const{user:p,_tokenResponse:g}=v;return p.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Ep(v){var p,g;if(!v)return null;const{providerId:w}=v,A=v.rawUserInfo?JSON.parse(v.rawUserInfo):{},O=v.isNewUser||"identitytoolkit#SignupNewUserResponse"===v.kind;if(!w&&v?.idToken){const G=null===(g=null===(p=kt(v.idToken))||void 0===p?void 0:p.firebase)||void 0===g?void 0:g.sign_in_provider;if(G)return new Qo(O,"anonymous"!==G&&"custom"!==G?G:null)}if(!w)return null;switch(w){case"facebook.com":return new Th(O,A);case"github.com":return new Lm(O,A);case"google.com":return new $u(O,A);case"twitter.com":return new nd(O,A,v.screenName||null);case"custom":case"anonymous":return new Qo(O,null);default:return new Qo(O,w,A)}}(g)}class Jo{constructor(p,g,w){this.type=p,this.credential=g,this.auth=w}static _fromIdtoken(p,g){return new Jo("enroll",p,g)}static _fromMfaPendingCredential(p){return new Jo("signin",p)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(p){var g,w;if(p?.multiFactorSession){if(null!==(g=p.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Jo._fromMfaPendingCredential(p.multiFactorSession.pendingCredential);if(null!==(w=p.multiFactorSession)&&void 0!==w&&w.idToken)return Jo._fromIdtoken(p.multiFactorSession.idToken)}return null}}class Xo{constructor(p,g,w){this.session=p,this.hints=g,this.signInResolver=w}static _fromError(p,g){const w=Rn(p),A=g.customData._serverResponse,O=(A.mfaInfo||[]).map(ee=>El._fromServerResponse(w,ee));ue(A.mfaPendingCredential,w,"internal-error");const G=Jo._fromMfaPendingCredential(A.mfaPendingCredential);return new Xo(G,O,function(){var ee=(0,u.Z)(function*(Pe){const et=yield Pe._process(w,G);delete A.mfaInfo,delete A.mfaPendingCredential;const ze=Object.assign(Object.assign({},A),{idToken:et.idToken,refreshToken:et.refreshToken});switch(g.operationType){case"signIn":const mt=yield li._fromIdTokenResponse(w,g.operationType,ze);return yield w._updateCurrentUser(mt.user),mt;case"reauthenticate":return ue(g.user,w,"internal-error"),li._forOperation(g.user,g.operationType,ze);default:be(w,"internal-error")}});return function(Pe){return ee.apply(this,arguments)}}())}resolveSignIn(p){var g=this;return(0,u.Z)(function*(){return g.signInResolver(p)})()}}class na{constructor(p){this.user=p,this.enrolledFactors=[],p._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(w=>El._fromServerResponse(p.auth,w)))})}static _fromUser(p){return new na(p)}getSession(){var p=this;return(0,u.Z)(function*(){return Jo._fromIdtoken(yield p.user.getIdToken(),p.user.auth)})()}enroll(p,g){var w=this;return(0,u.Z)(function*(){const A=p,O=yield w.getSession(),G=yield ut(w.user,A._process(w.user.auth,O,g));return yield w.user._updateTokensIfNecessary(G),w.user.reload()})()}unenroll(p){var g=this;return(0,u.Z)(function*(){const w="string"==typeof p?p:p.uid,A=yield g.user.getIdToken();try{const O=yield ut(g.user,function Wu(v,p){return Gt(v,"POST","/v2/accounts/mfaEnrollment:withdraw",wt(v,p))}(g.user.auth,{idToken:A,mfaEnrollmentId:w}));g.enrolledFactors=g.enrolledFactors.filter(({uid:G})=>G!==w),yield g.user._updateTokensIfNecessary(O),yield g.user.reload()}catch(O){throw O}})()}}const xo=new WeakMap,ra="__sak";class qu{constructor(p,g){this.storageRetriever=p,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem(ra,"1"),this.storage.removeItem(ra),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(p,g){return this.storage.setItem(p,JSON.stringify(g)),Promise.resolve()}_get(p){const g=this.storage.getItem(p);return Promise.resolve(g?JSON.parse(g):null)}_remove(p){return this.storage.removeItem(p),Promise.resolve()}get storage(){return this.storageRetriever()}}const ia=(()=>{class v extends qu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,w)=>this.onStorageEvent(g,w),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ml(){const v=(0,F.z$)();return re(v)||An(v)}()&&function pl(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=ks(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const w of Object.keys(this.listeners)){const A=this.storage.getItem(w),O=this.localCache[w];A!==O&&g(w,O,A)}}onStorageEvent(g,w=!1){if(!g.key)return void this.forAllChangedKeys((ee,Pe,et)=>{this.notifyListeners(ee,et)});const A=g.key;if(w?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const ee=this.storage.getItem(A);if(g.newValue!==ee)null!==g.newValue?this.storage.setItem(A,g.newValue):this.storage.removeItem(A);else if(this.localCache[A]===g.newValue&&!w)return}const O=()=>{const ee=this.storage.getItem(A);!w&&this.localCache[A]===ee||this.notifyListeners(A,ee)},G=this.storage.getItem(A);!function ys(){return(0,F.w1)()&&10===document.documentMode}()||G===g.newValue||g.newValue===g.oldValue?O():setTimeout(O,10)}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const O of Array.from(A))O(w&&JSON.parse(w))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,w,A)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:w,newValue:A}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,w){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,w){var A=()=>super._set,O=this;return(0,u.Z)(function*(){yield A().call(O,g,w),O.localCache[g]=JSON.stringify(w)})()}_get(g){var w=()=>super._get,A=this;return(0,u.Z)(function*(){const O=yield w().call(A,g);return A.localCache[g]=JSON.stringify(O),O})()}_remove(g){var w=()=>super._remove,A=this;return(0,u.Z)(function*(){yield w().call(A,g),delete A.localCache[g]})()}}return v.type="LOCAL",v})(),oo=(()=>{class v extends qu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,w){}_removeListener(g,w){}}return v.type="SESSION",v})();let Ha=(()=>{class v{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const w=this.receivers.find(O=>O.isListeningto(g));if(w)return w;const A=new v(g);return this.receivers.push(A),A}isListeningto(g){return this.eventTarget===g}handleEvent(g){var w=this;return(0,u.Z)(function*(){const A=g,{eventId:O,eventType:G,data:ee}=A.data,Pe=w.handlersMap[G];if(!Pe?.size)return;A.ports[0].postMessage({status:"ack",eventId:O,eventType:G});const et=Array.from(Pe).map(function(){var mt=(0,u.Z)(function*(Kn){return Kn(A.origin,ee)});return function(Kn){return mt.apply(this,arguments)}}()),ze=yield function od(v){return Promise.all(v.map(function(){var p=(0,u.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(w){return{fulfilled:!1,reason:w}}});return function(g){return p.apply(this,arguments)}}()))}(et);A.ports[0].postMessage({status:"done",eventId:O,eventType:G,response:ze})})()}_subscribe(g,w){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(w)}_unsubscribe(g,w){this.handlersMap[g]&&w&&this.handlersMap[g].delete(w),(!w||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return v.receivers=[],v})();function za(v="",p=10){let g="";for(let w=0;w<p;w++)g+=Math.floor(10*Math.random());return v+g}class Nh{constructor(p){this.target=p,this.handlers=new Set}removeMessageHandler(p){p.messageChannel&&(p.messageChannel.port1.removeEventListener("message",p.onMessage),p.messageChannel.port1.close()),this.handlers.delete(p)}_send(p,g,w=50){var A=this;return(0,u.Z)(function*(){const O=typeof MessageChannel<"u"?new MessageChannel:null;if(!O)throw new Error("connection_unavailable");let G,ee;return new Promise((Pe,et)=>{const ze=za("",20);O.port1.start();const mt=setTimeout(()=>{et(new Error("unsupported_event"))},w);ee={messageChannel:O,onMessage(Kn){const as=Kn;if(as.data.eventId===ze)switch(as.data.status){case"ack":clearTimeout(mt),G=setTimeout(()=>{et(new Error("timeout"))},3e3);break;case"done":clearTimeout(G),Pe(as.data.response);break;default:clearTimeout(mt),clearTimeout(G),et(new Error("invalid_response"))}}},A.handlers.add(ee),O.port1.addEventListener("message",ee.onMessage),A.target.postMessage({eventType:p,eventId:ze,data:g},[O.port2])}).finally(()=>{ee&&A.removeMessageHandler(ee)})})()}}function Fn(){return window}function Yu(){return typeof Fn().WorkerGlobalScope<"u"&&"function"==typeof Fn().importScripts}function Zu(){return(Zu=(0,u.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const sa="firebaseLocalStorageDb",mr=1,ld="firebaseLocalStorage",Rl="fbase_key";class Ol{constructor(p){this.request=p}toPromise(){return new Promise((p,g)=>{this.request.addEventListener("success",()=>{p(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function ao(v,p){return v.transaction([ld],p?"readwrite":"readonly").objectStore(ld)}function Ju(){const v=indexedDB.open(sa,mr);return new Promise((p,g)=>{v.addEventListener("error",()=>{g(v.error)}),v.addEventListener("upgradeneeded",()=>{const w=v.result;try{w.createObjectStore(ld,{keyPath:Rl})}catch(A){g(A)}}),v.addEventListener("success",(0,u.Z)(function*(){const w=v.result;w.objectStoreNames.contains(ld)?p(w):(w.close(),yield function Sp(){const v=indexedDB.deleteDatabase(sa);return new Ol(v).toPromise()}(),p(yield Ju()))}))})}function oa(v,p,g){return ud.apply(this,arguments)}function ud(){return(ud=(0,u.Z)(function*(v,p,g){const w=ao(v,!0).put({[Rl]:p,value:g});return new Ol(w).toPromise()})).apply(this,arguments)}function Wa(){return(Wa=(0,u.Z)(function*(v,p){const g=ao(v,!1).get(p),w=yield new Ol(g).toPromise();return void 0===w?null:w.value})).apply(this,arguments)}function Po(v,p){const g=ao(v,!0).delete(p);return new Ol(g).toPromise()}const aa=(()=>{class v{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,u.Z)(function*(){return g.db||(g.db=yield Ju()),g.db})()}_withRetries(g){var w=this;return(0,u.Z)(function*(){let A=0;for(;;)try{const O=yield w._openDb();return yield g(O)}catch(O){if(A++>3)throw O;w.db&&(w.db.close(),w.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,u.Z)(function*(){return Yu()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,u.Z)(function*(){g.receiver=Ha._getInstance(function Mr(){return Yu()?self:null}()),g.receiver._subscribe("keyChanged",function(){var w=(0,u.Z)(function*(A,O){return{keyProcessed:(yield g._poll()).includes(O.key)}});return function(A,O){return w.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var w=(0,u.Z)(function*(A,O){return["keyChanged"]});return function(A,O){return w.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,u.Z)(function*(){var w,A;if(g.activeServiceWorker=yield function ad(){return Zu.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Nh(g.activeServiceWorker);const O=yield g.sender._send("ping",{},800);O&&null!==(w=O[0])&&void 0!==w&&w.fulfilled&&null!==(A=O[0])&&void 0!==A&&A.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var w=this;return(0,u.Z)(function*(){if(w.sender&&w.activeServiceWorker&&function Qu(){var v;return(null===(v=navigator?.serviceWorker)||void 0===v?void 0:v.controller)||null}()===w.activeServiceWorker)try{yield w.sender._send("keyChanged",{key:g},w.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,u.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Ju();return yield oa(g,ra,"1"),yield Po(g,ra),!0}catch{}return!1})()}_withPendingWrite(g){var w=this;return(0,u.Z)(function*(){w.pendingWrites++;try{yield g()}finally{w.pendingWrites--}})()}_set(g,w){var A=this;return(0,u.Z)(function*(){return A._withPendingWrite((0,u.Z)(function*(){return yield A._withRetries(O=>oa(O,g,w)),A.localCache[g]=w,A.notifyServiceWorker(g)}))})()}_get(g){var w=this;return(0,u.Z)(function*(){const A=yield w._withRetries(O=>function xl(v,p){return Wa.apply(this,arguments)}(O,g));return w.localCache[g]=A,A})()}_remove(g){var w=this;return(0,u.Z)(function*(){return w._withPendingWrite((0,u.Z)(function*(){return yield w._withRetries(A=>Po(A,g)),delete w.localCache[g],w.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,u.Z)(function*(){const w=yield g._withRetries(G=>{const ee=ao(G,!1).getAll();return new Ol(ee).toPromise()});if(!w)return[];if(0!==g.pendingWrites)return[];const A=[],O=new Set;for(const{fbase_key:G,value:ee}of w)O.add(G),JSON.stringify(g.localCache[G])!==JSON.stringify(ee)&&(g.notifyListeners(G,ee),A.push(G));for(const G of Object.keys(g.localCache))g.localCache[G]&&!O.has(G)&&(g.notifyListeners(G,null),A.push(G));return A})()}notifyListeners(g,w){this.localCache[g]=w;const A=this.listeners[g];if(A)for(const O of Array.from(A))O(w)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,u.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,w){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(w)}_removeListener(g,w){this.listeners[g]&&(this.listeners[g].delete(w),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return v.type="LOCAL",v})(),kl=1e12;class cd{constructor(p){this.auth=p,this.counter=kl,this._widgets=new Map}render(p,g){const w=this.counter;return this._widgets.set(w,new dd(p,this.auth.name,g||{})),this.counter++,w}reset(p){var g;const w=p||kl;null===(g=this._widgets.get(w))||void 0===g||g.delete(),this._widgets.delete(w)}getResponse(p){var g;return(null===(g=this._widgets.get(p||kl))||void 0===g?void 0:g.getResponse())||""}execute(p){var g=this;return(0,u.Z)(function*(){var w;return null===(w=g._widgets.get(p||kl))||void 0===w||w.execute(),""})()}}class dd{constructor(p,g,w){this.params=w,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const A="string"==typeof p?document.getElementById(p):p;ue(A,"argument-error",{appName:g}),this.container=A,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function xv(v){const p=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let w=0;w<v;w++)p.push(g.charAt(Math.floor(Math.random()*g.length)));return p.join("")}(50);const{callback:p,"expired-callback":g}=this.params;if(p)try{p(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Mp=vr("rcb"),Pv=new Ae(3e4,6e4);class kv{constructor(){var p;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(p=Fn().grecaptcha)||void 0===p||!p.render)}load(p,g=""){return ue(function Rp(v){return v.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(v)}(g),p,"argument-error"),this.shouldResolveImmediately(g)&&Xt(Fn().grecaptcha)?Promise.resolve(Fn().grecaptcha):new Promise((w,A)=>{const O=Fn().setTimeout(()=>{A(Ie(p,"network-request-failed"))},Pv.get());Fn()[Mp]=()=>{Fn().clearTimeout(O),delete Fn()[Mp];const ee=Fn().grecaptcha;if(!ee||!Xt(ee))return void A(Ie(p,"internal-error"));const Pe=ee.render;ee.render=(et,ze)=>{const mt=Pe(et,ze);return this.counter++,mt},this.hostLanguage=g,w(ee)},jr(`https://www.google.com/recaptcha/api.js??${(0,F.xO)({onload:Mp,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(O),A(Ie(p,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(p){var g;return!(null===(g=Fn().grecaptcha)||void 0===g||!g.render)&&(p===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Rr{load(p){return(0,u.Z)(function*(){return new cd(p)})()}clearedOneInstance(){}}const Fl="recaptcha",Xu={theme:"light",type:"image"};class hd{constructor(p,g=Object.assign({},Xu),w){this.parameters=g,this.type=Fl,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Rn(w),this.isInvisible="invisible"===this.parameters.size,ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const A="string"==typeof p?document.getElementById(p):p;ue(A,this.auth,"argument-error"),this.container=A,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Rr:new kv,this.validateStartingState()}verify(){var p=this;return(0,u.Z)(function*(){p.assertNotDestroyed();const g=yield p.render(),w=p.getAssertedRecaptcha();return w.getResponse(g)||new Promise(O=>{const G=ee=>{ee&&(p.tokenChangeListeners.delete(G),O(ee))};p.tokenChangeListeners.add(G),p.isInvisible&&w.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(p){return Promise.reject(p)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(p=>{throw this.renderPromise=null,p})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(p=>{this.container.removeChild(p)})}validateStartingState(){ue(!this.parameters.sitekey,this.auth,"argument-error"),ue(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),ue(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(p){return g=>{if(this.tokenChangeListeners.forEach(w=>w(g)),"function"==typeof p)p(g);else if("string"==typeof p){const w=Fn()[p];"function"==typeof w&&w(g)}}}assertNotDestroyed(){ue(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var p=this;return(0,u.Z)(function*(){if(yield p.init(),!p.widgetId){let g=p.container;if(!p.isInvisible){const w=document.createElement("div");g.appendChild(w),g=w}p.widgetId=p.getAssertedRecaptcha().render(g,p.parameters)}return p.widgetId})()}init(){var p=this;return(0,u.Z)(function*(){ue(_t()&&!Yu(),p.auth,"internal-error"),yield function Ds(){let v=null;return new Promise(p=>{"complete"!==document.readyState?(v=()=>p(),window.addEventListener("load",v)):p()}).catch(p=>{throw v&&window.removeEventListener("load",v),p})}(),p.recaptcha=yield p._recaptchaLoader.load(p.auth,p.auth.languageCode||void 0);const g=yield function se(v){return Ve.apply(this,arguments)}(p.auth);ue(g,p.auth,"internal-error"),p.parameters.sitekey=g})()}getAssertedRecaptcha(){return ue(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Bs{constructor(p,g){this.verificationId=p,this.onConfirmation=g}confirm(p){const g=Qi._fromVerification(this.verificationId,p);return this.onConfirmation(g)}}function ca(){return(ca=(0,u.Z)(function*(v,p,g){const w=Rn(v),A=yield nc(w,p,(0,F.m9)(g));return new Bs(A,O=>Dl(w,O))})).apply(this,arguments)}function tc(){return(tc=(0,u.Z)(function*(v,p,g){const w=(0,F.m9)(v);yield no(!1,w,"phone");const A=yield nc(w.auth,p,(0,F.m9)(g));return new Bs(A,O=>yh(w,O))})).apply(this,arguments)}function fd(){return(fd=(0,u.Z)(function*(v,p,g){const w=(0,F.m9)(v),A=yield nc(w.auth,p,(0,F.m9)(g));return new Bs(A,O=>vh(w,O))})).apply(this,arguments)}function nc(v,p,g){return Ii.apply(this,arguments)}function Ii(){return Ii=(0,u.Z)(function*(v,p,g){var w;const A=yield g.verify();try{let O;if(ue("string"==typeof A,v,"argument-error"),ue(g.type===Fl,v,"argument-error"),O="string"==typeof p?{phoneNumber:p}:p,"session"in O){const G=O.session;if("phoneNumber"in O)return ue("enroll"===G.type,v,"internal-error"),(yield function $a(v,p){return Gt(v,"POST","/v2/accounts/mfaEnrollment:start",wt(v,p))}(v,{idToken:G.credential,phoneEnrollmentInfo:{phoneNumber:O.phoneNumber,recaptchaToken:A}})).phoneSessionInfo.sessionInfo;{ue("signin"===G.type,v,"internal-error");const ee=(null===(w=O.multiFactorHint)||void 0===w?void 0:w.uid)||O.multiFactorUid;return ue(ee,v,"missing-multi-factor-info"),(yield function la(v,p){return Gt(v,"POST","/v2/accounts/mfaSignIn:start",wt(v,p))}(v,{mfaPendingCredential:G.credential,mfaEnrollmentId:ee,phoneSignInInfo:{recaptchaToken:A}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:G}=yield function Rm(v,p){return Yc.apply(this,arguments)}(v,{phoneNumber:O.phoneNumber,recaptchaToken:A});return G}}finally{g._reset()}}),Ii.apply(this,arguments)}function Jn(){return(Jn=(0,u.Z)(function*(v,p){yield Ar((0,F.m9)(v),p)})).apply(this,arguments)}let ki=(()=>{class v{constructor(g){this.providerId=v.PROVIDER_ID,this.auth=Rn(g)}verifyPhoneNumber(g,w){return nc(this.auth,g,(0,F.m9)(w))}static credential(g,w){return Qi._fromVerification(g,w)}static credentialFromResult(g){return v.credentialFromTaggedObject(g)}static credentialFromError(g){return v.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:w,temporaryProof:A}=g;return w&&A?Qi._fromTokenResponse(w,A):null}}return v.PROVIDER_ID="phone",v.PHONE_SIGN_IN_METHOD="phone",v})();function wn(v,p){return p?Hn(p):(ue(v._popupRedirectResolver,v,"argument-error"),v._popupRedirectResolver)}class ct extends Qs{constructor(p){super("custom","custom"),this.params=p}_getIdTokenResponse(p){return bs(p,this._buildIdpRequest())}_linkToIdToken(p,g){return bs(p,this._buildIdpRequest(g))}_getReauthenticationResolver(p){return bs(p,this._buildIdpRequest())}_buildIdpRequest(p){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return p&&(g.idToken=p),g}}function Ll(v){return wl(v.auth,new ct(v),v.bypassAuthState)}function vt(v){const{auth:p,user:g}=v;return ue(g,p,"internal-error"),Oo(g,new ct(v),v.bypassAuthState)}function Bl(v){return Si.apply(this,arguments)}function Si(){return(Si=(0,u.Z)(function*(v){const{auth:p,user:g}=v;return ue(g,p,"internal-error"),Ar(g,new ct(v),v.bypassAuthState)})).apply(this,arguments)}class cr{constructor(p,g,w,A,O=!1){this.auth=p,this.resolver=w,this.user=A,this.bypassAuthState=O,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var p=this;return new Promise(function(){var g=(0,u.Z)(function*(w,A){p.pendingPromise={resolve:w,reject:A};try{p.eventManager=yield p.resolver._initialize(p.auth),yield p.onExecution(),p.eventManager.registerConsumer(p)}catch(O){p.reject(O)}});return function(w,A){return g.apply(this,arguments)}}())}onAuthEvent(p){var g=this;return(0,u.Z)(function*(){const{urlResponse:w,sessionId:A,postBody:O,tenantId:G,error:ee,type:Pe}=p;if(ee)return void g.reject(ee);const et={auth:g.auth,requestUri:w,sessionId:A,tenantId:G||void 0,postBody:O||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(Pe)(et))}catch(ze){g.reject(ze)}})()}onError(p){this.reject(p)}getIdpTask(p){switch(p){case"signInViaPopup":case"signInViaRedirect":return Ll;case"linkViaPopup":case"linkViaRedirect":return Bl;case"reauthViaPopup":case"reauthViaRedirect":return vt;default:be(this.auth,"internal-error")}}resolve(p){it(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(p),this.unregisterAndCleanUp()}reject(p){it(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(p),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const yn=new Ae(2e3,1e4);function rc(){return(rc=(0,u.Z)(function*(v,p,g){const w=Rn(v);Be(v,p,eo);const A=wn(w,g);return new da(w,"signInViaPopup",p,A).executeNotNull()})).apply(this,arguments)}function lo(){return(lo=(0,u.Z)(function*(v,p,g){const w=(0,F.m9)(v);Be(w.auth,p,eo);const A=wn(w.auth,g);return new da(w.auth,"reauthViaPopup",p,A,w).executeNotNull()})).apply(this,arguments)}function pd(){return(pd=(0,u.Z)(function*(v,p,g){const w=(0,F.m9)(v);Be(w.auth,p,eo);const A=wn(w.auth,g);return new da(w.auth,"linkViaPopup",p,A,w).executeNotNull()})).apply(this,arguments)}let da=(()=>{class v extends cr{constructor(g,w,A,O,G){super(g,w,O,G),this.provider=A,this.authWindow=null,this.pollId=null,v.currentPopupAction&&v.currentPopupAction.cancel(),v.currentPopupAction=this}executeNotNull(){var g=this;return(0,u.Z)(function*(){const w=yield g.execute();return ue(w,g.auth,"internal-error"),w})()}onExecution(){var g=this;return(0,u.Z)(function*(){it(1===g.filter.length,"Popup operations only handle one event");const w=za();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],w),g.authWindow.associatedEvent=w,g.resolver._originValidation(g.auth).catch(A=>{g.reject(A)}),g.resolver._isIframeWebStorageSupported(g.auth,A=>{A||g.reject(Ie(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(Ie(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,v.currentPopupAction=null}pollUserCancellation(){const g=()=>{var w,A;this.pollId=null!==(A=null===(w=this.authWindow)||void 0===w?void 0:w.window)&&void 0!==A&&A.closed?window.setTimeout(()=>{this.pollId=null,this.reject(Ie(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,yn.get())};g()}}return v.currentPopupAction=null,v})();const Vs="pendingRedirect",ha=new Map;class Wn extends cr{constructor(p,g,w=!1){super(p,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,w),this.eventId=null}execute(){var p=()=>super.execute,g=this;return(0,u.Z)(function*(){let w=ha.get(g.auth._key());if(!w){try{const O=(yield function Wr(v,p){return Pp.apply(this,arguments)}(g.resolver,g.auth))?yield p().call(g):null;w=()=>Promise.resolve(O)}catch(A){w=()=>Promise.reject(A)}ha.set(g.auth._key(),w)}return g.bypassAuthState||ha.set(g.auth._key(),()=>Promise.resolve(null)),w()})()}onAuthEvent(p){var g=()=>super.onAuthEvent,w=this;return(0,u.Z)(function*(){if("signInViaRedirect"===p.type)return g().call(w,p);if("unknown"!==p.type){if(p.eventId){const A=yield w.auth._redirectUserForId(p.eventId);if(A)return w.user=A,g().call(w,p);w.resolve(null)}}else w.resolve(null)})()}onExecution(){return(0,u.Z)(function*(){})()}cleanUp(){}}function Pp(){return(Pp=(0,u.Z)(function*(v,p){const g=Fi(p),w=k(v);if(!(yield w._isAvailable()))return!1;const A="true"===(yield w._get(g));return yield w._remove(g),A})).apply(this,arguments)}function Lo(v,p){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,u.Z)(function*(v,p){return k(v)._set(Fi(p),"true")})).apply(this,arguments)}function es(v,p){ha.set(v._key(),p)}function k(v){return Hn(v._redirectPersistence)}function Fi(v){return j(Vs,v.config.apiKey,v.name)}function Oh(v,p,g){return function xh(v,p,g){return Vl.apply(this,arguments)}(v,p,g)}function Vl(){return(Vl=(0,u.Z)(function*(v,p,g){const w=Rn(v);Be(v,p,eo),yield w._initializationPromise;const A=wn(w,g);return yield Lo(A,w),A._openRedirect(w,p,"signInViaRedirect")})).apply(this,arguments)}function Ph(v,p,g){return function ic(v,p,g){return sc.apply(this,arguments)}(v,p,g)}function sc(){return(sc=(0,u.Z)(function*(v,p,g){const w=(0,F.m9)(v);Be(w.auth,p,eo),yield w.auth._initializationPromise;const A=wn(w.auth,g);yield Lo(A,w.auth);const O=yield ts(w);return A._openRedirect(w.auth,p,"reauthViaRedirect",O)})).apply(this,arguments)}function kh(v,p,g){return function fa(v,p,g){return oc.apply(this,arguments)}(v,p,g)}function oc(){return(oc=(0,u.Z)(function*(v,p,g){const w=(0,F.m9)(v);Be(w.auth,p,eo),yield w.auth._initializationPromise;const A=wn(w.auth,g);yield no(!1,w,p.providerId),yield Lo(A,w.auth);const O=yield ts(w);return A._openRedirect(w.auth,p,"linkViaRedirect",O)})).apply(this,arguments)}function gd(){return(gd=(0,u.Z)(function*(v,p){return yield Rn(v)._initializationPromise,Ul(v,p,!1)})).apply(this,arguments)}function Ul(v,p){return ga.apply(this,arguments)}function ga(){return(ga=(0,u.Z)(function*(v,p,g=!1){const w=Rn(v),A=wn(w,p),G=yield new Wn(w,A,g).execute();return G&&!g&&(delete G.user._redirectEventId,yield w._persistUserIfCurrent(G.user),yield w._setRedirectUser(null,p)),G})).apply(this,arguments)}function ts(v){return jl.apply(this,arguments)}function jl(){return(jl=(0,u.Z)(function*(v){const p=za(`${v.uid}:::`);return v._redirectEventId=p,yield v.auth._setRedirectUser(v),yield v.auth._persistUserIfCurrent(v),p})).apply(this,arguments)}class Xn{constructor(p){this.auth=p,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(p){this.consumers.add(p),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,p)&&(this.sendToConsumer(this.queuedRedirectEvent,p),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(p){this.consumers.delete(p)}onEvent(p){if(this.hasEventBeenHandled(p))return!1;let g=!1;return this.consumers.forEach(w=>{this.isEventForConsumer(p,w)&&(g=!0,this.sendToConsumer(p,w),this.saveEventToCache(p))}),this.hasHandledPotentialRedirect||!function Cs(v){switch(v.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Gl(v);default:return!1}}(p)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=p,g=!0)),g}sendToConsumer(p,g){var w;if(p.error&&!Gl(p)){const A=(null===(w=p.error.code)||void 0===w?void 0:w.split("auth/")[1])||"internal-error";g.onError(Ie(this.auth,A))}else g.onAuthEvent(p)}isEventForConsumer(p,g){const w=null===g.eventId||!!p.eventId&&p.eventId===g.eventId;return g.filter.includes(p.type)&&w}hasEventBeenHandled(p){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(ma(p))}saveEventToCache(p){this.cachedEventUids.add(ma(p)),this.lastProcessedEventTime=Date.now()}}function ma(v){return[v.type,v.eventId,v.sessionId,v.tenantId].filter(p=>p).join("-")}function Gl({type:v,error:p}){return"unknown"===v&&"auth/no-auth-event"===p?.code}function ci(v){return kp.apply(this,arguments)}function kp(){return(kp=(0,u.Z)(function*(v,p={}){return Gt(v,"GET","/v1/projects",p)})).apply(this,arguments)}const _d=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Fh=/^https?/;function qr(){return(qr=(0,u.Z)(function*(v){if(v.config.emulator)return;const{authorizedDomains:p}=yield ci(v);for(const g of p)try{if(uo(g))return}catch{}be(v,"unauthorized-domain")})).apply(this,arguments)}function uo(v){const p=zt(),{protocol:g,hostname:w}=new URL(p);if(v.startsWith("chrome-extension://")){const G=new URL(v);return""===G.hostname&&""===w?"chrome-extension:"===g&&v.replace("chrome-extension://","")===p.replace("chrome-extension://",""):"chrome-extension:"===g&&G.hostname===w}if(!Fh.test(g))return!1;if(_d.test(v))return w===v;const A=v.replace(/\./g,"\\.");return new RegExp("^(.+\\."+A+"|"+A+")$","i").test(w)}const Lh=new Ae(3e4,6e4);function di(){const v=Fn().___jsl;if(v?.H)for(const p of Object.keys(v.H))if(v.H[p].r=v.H[p].r||[],v.H[p].L=v.H[p].L||[],v.H[p].r=[...v.H[p].L],v.CP)for(let g=0;g<v.CP.length;g++)v.CP[g]=null}let $l=null;const Bh=new Ae(5e3,15e3),Vh="__/auth/iframe",Uh="emulator/auth/iframe",Fp={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Lp=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Bp(v){const p=v.config;ue(p.authDomain,v,"auth-domain-config-required");const g=p.emulator?Oe(p,Uh):`https://${v.config.authDomain}/${Vh}`,w={apiKey:p.apiKey,appName:v.name,v:he.SDK_VERSION},A=Lp.get(v.config.apiHost);A&&(w.eid=A);const O=v._getFrameworks();return O.length&&(w.fw=O.join(",")),`${g}?${(0,F.xO)(w).slice(1)}`}function I(){return I=(0,u.Z)(function*(v){const p=yield function qn(v){return $l=$l||function co(v){return new Promise((p,g)=>{var w,A,O;function G(){di(),gapi.load("gapi.iframes",{callback:()=>{p(gapi.iframes.getContext())},ontimeout:()=>{di(),g(Ie(v,"network-request-failed"))},timeout:Lh.get()})}if(null!==(A=null===(w=Fn().gapi)||void 0===w?void 0:w.iframes)&&void 0!==A&&A.Iframe)p(gapi.iframes.getContext());else{if(null===(O=Fn().gapi)||void 0===O||!O.load){const ee=vr("iframefcb");return Fn()[ee]=()=>{gapi.load?G():g(Ie(v,"network-request-failed"))},jr(`https://apis.google.com/js/api.js?onload=${ee}`).catch(Pe=>g(Pe))}G()}}).catch(p=>{throw $l=null,p})}(v),$l}(v),g=Fn().gapi;return ue(g,v,"internal-error"),p.open({where:document.body,url:Bp(v),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Fp,dontclear:!0},w=>new Promise(function(){var A=(0,u.Z)(function*(O,G){yield w.restyle({setHideOnLeave:!1});const ee=Ie(v,"network-request-failed"),Pe=Fn().setTimeout(()=>{G(ee)},Bh.get());function et(){Fn().clearTimeout(Pe),O(w)}w.ping(et).then(et,()=>{G(ee)})});return function(O,G){return A.apply(this,arguments)}}()))}),I.apply(this,arguments)}const N={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},B=500,z=600,Q="_blank",de="http://localhost";class Ye{constructor(p){this.window=p,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const Vt="__/auth/handler",Ut="emulator/auth/handler",Li=encodeURIComponent("fac");function dr(v,p,g,w,A,O){return _a.apply(this,arguments)}function _a(){return(_a=(0,u.Z)(function*(v,p,g,w,A,O){ue(v.config.authDomain,v,"auth-domain-config-required"),ue(v.config.apiKey,v,"invalid-api-key");const G={apiKey:v.config.apiKey,appName:v.name,authType:g,redirectUrl:w,v:he.SDK_VERSION,eventId:A};if(p instanceof eo){p.setDefaultLanguage(v.languageCode),G.providerId=p.providerId||"",(0,F.xb)(p.getCustomParameters())||(G.customParameters=JSON.stringify(p.getCustomParameters()));for(const[ze,mt]of Object.entries(O||{}))G[ze]=mt}if(p instanceof Fs){const ze=p.getScopes().filter(mt=>""!==mt);ze.length>0&&(G.scopes=ze.join(","))}v.tenantId&&(G.tid=v.tenantId);const ee=G;for(const ze of Object.keys(ee))void 0===ee[ze]&&delete ee[ze];const Pe=yield v._getAppCheckToken(),et=Pe?`#${Li}=${encodeURIComponent(Pe)}`:"";return`${function Hl({config:v}){return v.emulator?Oe(v,Ut):`https://${v.authDomain}/${Vt}`}(v)}?${(0,F.xO)(ee).slice(1)}${et}`})).apply(this,arguments)}const ho="webStorageSupport",rs=class ns{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=oo,this._completeRedirectFn=Ul,this._overrideRedirectResult=es}_openPopup(p,g,w,A){var O=this;return(0,u.Z)(function*(){var G;it(null===(G=O.eventManagers[p._key()])||void 0===G?void 0:G.manager,"_initialize() not called before _openPopup()");const ee=yield dr(p,g,w,zt(),A);return function Ze(v,p,g,w=B,A=z){const O=Math.max((window.screen.availHeight-A)/2,0).toString(),G=Math.max((window.screen.availWidth-w)/2,0).toString();let ee="";const Pe=Object.assign(Object.assign({},N),{width:w.toString(),height:A.toString(),top:O,left:G}),et=(0,F.z$)().toLowerCase();g&&(ee=$e(et)?Q:g),Ce(et)&&(p=p||de,Pe.scrollbars="yes");const ze=Object.entries(Pe).reduce((Kn,[as,el])=>`${Kn}${as}=${el},`,"");if(function ai(v=(0,F.z$)()){var p;return An(v)&&!(null===(p=window.navigator)||void 0===p||!p.standalone)}(et)&&"_self"!==ee)return function bt(v,p){const g=document.createElement("a");g.href=v,g.target=p;const w=document.createEvent("MouseEvent");w.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(w)}(p||"",ee),new Ye(null);const mt=window.open(p||"",ee,ze);ue(mt,v,"popup-blocked");try{mt.focus()}catch{}return new Ye(mt)}(p,ee,za())})()}_openRedirect(p,g,w,A){var O=this;return(0,u.Z)(function*(){return yield O._originValidation(p),function Mh(v){Fn().location.href=v}(yield dr(p,g,w,zt(),A)),new Promise(()=>{})})()}_initialize(p){const g=p._key();if(this.eventManagers[g]){const{manager:A,promise:O}=this.eventManagers[g];return A?Promise.resolve(A):(it(O,"If manager is not set, promise should be"),O)}const w=this.initAndGetManager(p);return this.eventManagers[g]={promise:w},w.catch(()=>{delete this.eventManagers[g]}),w}initAndGetManager(p){var g=this;return(0,u.Z)(function*(){const w=yield function E(v){return I.apply(this,arguments)}(p),A=new Xn(p);return w.register("authEvent",O=>(ue(O?.authEvent,p,"invalid-auth-event"),{status:A.onEvent(O.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[p._key()]={manager:A},g.iframes[p._key()]=w,A})()}_isIframeWebStorageSupported(p,g){this.iframes[p._key()].send(ho,{type:ho},A=>{var O;const G=null===(O=A?.[0])||void 0===O?void 0:O[ho];void 0!==G&&g(!!G),be(p,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Us(v){return qr.apply(this,arguments)}(p)),this.originValidationPromises[g]}get _shouldInitProactively(){return ks()||re()||An()}};class Ka{constructor(p){this.factorId=p}_process(p,g,w){switch(g.type){case"enroll":return this._finalizeEnroll(p,g.credential,w);case"signin":return this._finalizeSignIn(p,g.credential);default:return Mt("unexpected MultiFactorSessionType")}}}class Vp extends Ka{constructor(p){super("phone"),this.credential=p}static _fromCredential(p){return new Vp(p)}_finalizeEnroll(p,g,w){return function sd(v,p){return Gt(v,"POST","/v2/accounts/mfaEnrollment:finalize",wt(v,p))}(p,{idToken:g,displayName:w,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(p,g){return function Np(v,p){return Gt(v,"POST","/v2/accounts/mfaSignIn:finalize",wt(v,p))}(p,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let ac=(()=>{class v{constructor(){}static assertion(g){return Vp._fromCredential(g)}}return v.FACTOR_ID="phone",v})();var Up="@firebase/auth";class jh{constructor(p){this.auth=p,this.internalListeners=new Map}getUid(){var p;return this.assertAuthConfigured(),(null===(p=this.auth.currentUser)||void 0===p?void 0:p.uid)||null}getToken(p){var g=this;return(0,u.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(p)}:null})()}addAuthTokenListener(p){if(this.assertAuthConfigured(),this.internalListeners.has(p))return;const g=this.auth.onIdTokenChanged(w=>{p(w?.stsTokenManager.accessToken||null)});this.internalListeners.set(p,g),this.updateProactiveRefresh()}removeAuthTokenListener(p){this.assertAuthConfigured();const g=this.internalListeners.get(p);g&&(this.internalListeners.delete(p),g(),this.updateProactiveRefresh())}assertAuthConfigured(){ue(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function Wl(){return window}(0,F.Pz)("authIdTokenMaxAge"),function Fv(v){(0,he._registerComponent)(new Ee.wA("auth",(p,{options:g})=>{const w=p.getProvider("app").getImmediate(),A=p.getProvider("heartbeat"),O=p.getProvider("app-check-internal"),{apiKey:G,authDomain:ee}=w.options;ue(G&&!G.includes(":"),"invalid-api-key",{appName:w.name});const Pe={apiKey:G,authDomain:ee,clientPlatform:v,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:me(v)},et=new Yi(w,A,O,Pe);return function ur(v,p){const g=p?.persistence||[],w=(Array.isArray(g)?g:[g]).map(Hn);p?.errorMap&&v._updateErrorMap(p.errorMap),v._initializeWithPersistence(w,p?.popupRedirectResolver)}(et,g),et},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((p,g,w)=>{p.getProvider("auth-internal").initialize()})),(0,he._registerComponent)(new Ee.wA("auth-internal",p=>{const g=Rn(p.getProvider("auth").getImmediate());return new jh(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,he.registerVersion)(Up,"0.23.2",function Um(v){switch(v){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(v)),(0,he.registerVersion)(Up,"0.23.2","esm2017")}("Browser");const Lv=2e3;function vd(){return vd=(0,u.Z)(function*(v,p,g){var w;const{BuildInfo:A}=Wl();it(p.sessionId,"AuthEvent did not contain a session ID");const O=yield function va(v){return $h.apply(this,arguments)}(p.sessionId),G={};return An()?G.ibi=A.packageName:mn()?G.apn=A.packageName:be(v,"operation-not-supported-in-this-environment"),A.displayName&&(G.appDisplayName=A.displayName),G.sessionId=O,dr(v,g,p.type,void 0,null!==(w=p.eventId)&&void 0!==w?w:void 0,G)}),vd.apply(this,arguments)}function uc(){return(uc=(0,u.Z)(function*(v){const{BuildInfo:p}=Wl(),g={};An()?g.iosBundleId=p.packageName:mn()?g.androidPackageName=p.packageName:be(v,"operation-not-supported-in-this-environment"),yield ci(v,g)})).apply(this,arguments)}function Gh(){return(Gh=(0,u.Z)(function*(v,p,g){const{cordova:w}=Wl();let A=()=>{};try{yield new Promise((O,G)=>{let ee=null;function Pe(){var mt;O();const Kn=null===(mt=w.plugins.browsertab)||void 0===mt?void 0:mt.close;"function"==typeof Kn&&Kn(),"function"==typeof g?.close&&g.close()}function et(){ee||(ee=window.setTimeout(()=>{G(Ie(v,"redirect-cancelled-by-user"))},Lv))}function ze(){"visible"===document?.visibilityState&&et()}p.addPassiveListener(Pe),document.addEventListener("resume",et,!1),mn()&&document.addEventListener("visibilitychange",ze,!1),A=()=>{p.removePassiveListener(Pe),document.removeEventListener("resume",et,!1),document.removeEventListener("visibilitychange",ze,!1),ee&&window.clearTimeout(ee)}})}finally{A()}})).apply(this,arguments)}function $h(){return($h=(0,u.Z)(function*(v){const p=function Hm(v){if(it(/[0-9a-zA-Z]+/.test(v),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(v);const p=new ArrayBuffer(v.length),g=new Uint8Array(p);for(let w=0;w<v.length;w++)g[w]=v.charCodeAt(w);return g}(v),g=yield crypto.subtle.digest("SHA-256",p);return Array.from(new Uint8Array(g)).map(A=>A.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}const Hh=20;class bd extends Xn{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(p=>{this.resolveInialized=p})}addPassiveListener(p){this.passiveListeners.add(p)}removePassiveListener(p){this.passiveListeners.delete(p)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(p){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(p)),super.onEvent(p)}initialized(){var p=this;return(0,u.Z)(function*(){yield p.initPromise})()}}function Hp(v){return zh.apply(this,arguments)}function zh(){return(zh=(0,u.Z)(function*(v){const p=yield Ed()._get(cc(v));return p&&(yield Ed()._remove(cc(v))),p})).apply(this,arguments)}function Dd(){const v=[],p="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let g=0;g<Hh;g++){const w=Math.floor(Math.random()*p.length);v.push(p.charAt(w))}return v.join("")}function Ed(){return Hn(ia)}function cc(v){return j("authEvent",v.config.apiKey,v.name)}function ql(v){if(!v?.includes("?"))return{};const[p,...g]=v.split("?");return(0,F.zd)(g.join("?"))}const dc=class qh{constructor(){this._redirectPersistence=oo,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ul,this._overrideRedirectResult=es}_initialize(p){var g=this;return(0,u.Z)(function*(){const w=p._key();let A=g.eventManagers.get(w);return A||(A=new bd(p),g.eventManagers.set(w,A),g.attachCallbackListeners(p,A)),A})()}_openPopup(p){be(p,"operation-not-supported-in-this-environment")}_openRedirect(p,g,w,A){var O=this;return(0,u.Z)(function*(){!function ya(v){var p,g,w,A,O,G,ee,Pe,et,ze;const mt=Wl();ue("function"==typeof(null===(p=mt?.universalLinks)||void 0===p?void 0:p.subscribe),v,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),ue(typeof(null===(g=mt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),ue("function"==typeof(null===(O=null===(A=null===(w=mt?.cordova)||void 0===w?void 0:w.plugins)||void 0===A?void 0:A.browsertab)||void 0===O?void 0:O.openUrl),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(Pe=null===(ee=null===(G=mt?.cordova)||void 0===G?void 0:G.plugins)||void 0===ee?void 0:ee.browsertab)||void 0===Pe?void 0:Pe.isAvailable),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),ue("function"==typeof(null===(ze=null===(et=mt?.cordova)||void 0===et?void 0:et.InAppBrowser)||void 0===ze?void 0:ze.open),v,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(p);const G=yield O._initialize(p);yield G.initialized(),G.resetRedirect(),function we(){ha.clear()}(),yield O._originValidation(p);const ee=function wd(v,p,g=null){return{type:p,eventId:g,urlResponse:null,sessionId:Dd(),postBody:null,tenantId:v.tenantId,error:Ie(v,"no-auth-event")}}(p,w,A);yield function Uv(v,p){return Ed()._set(cc(v),p)}(p,ee);const Pe=yield function $m(v,p,g){return vd.apply(this,arguments)}(p,ee,g),et=yield function Bv(v){const{cordova:p}=Wl();return new Promise(g=>{p.plugins.browsertab.isAvailable(w=>{let A=null;w?p.plugins.browsertab.openUrl(v):A=p.InAppBrowser.open(v,function ln(v=(0,F.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(v)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(v)}()?"_blank":"_system","location=yes"),g(A)})})}(Pe);return function Vv(v,p,g){return Gh.apply(this,arguments)}(p,G,et)})()}_isIframeWebStorageSupported(p,g){throw new Error("Method not implemented.")}_originValidation(p){const g=p._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function $p(v){return uc.apply(this,arguments)}(p)),this.originValidationPromises[g]}attachCallbackListeners(p,g){const{universalLinks:w,handleOpenURL:A,BuildInfo:O}=Wl(),G=setTimeout((0,u.Z)(function*(){yield Hp(p),g.onEvent(qm())}),500),ee=function(){var ze=(0,u.Z)(function*(mt){clearTimeout(G);const Kn=yield Hp(p);let as=null;Kn&&mt?.url&&(as=function zm(v,p){var g,w;const A=function Wm(v){const p=ql(v),g=p.link?decodeURIComponent(p.link):void 0,w=ql(g).link,A=p.deep_link_id?decodeURIComponent(p.deep_link_id):void 0;return ql(A).link||A||w||g||v}(p);if(A.includes("/__/auth/callback")){const O=ql(A),G=O.firebaseError?function Cd(v){try{return JSON.parse(v)}catch{return null}}(decodeURIComponent(O.firebaseError)):null,ee=null===(w=null===(g=G?.code)||void 0===g?void 0:g.split("auth/"))||void 0===w?void 0:w[1],Pe=ee?Ie(ee):null;return Pe?{type:v.type,eventId:v.eventId,tenantId:v.tenantId,error:Pe,urlResponse:null,sessionId:null,postBody:null}:{type:v.type,eventId:v.eventId,tenantId:v.tenantId,sessionId:v.sessionId,urlResponse:A,postBody:null}}return null}(Kn,mt.url)),g.onEvent(as||qm())});return function(Kn){return ze.apply(this,arguments)}}();typeof w<"u"&&"function"==typeof w.subscribe&&w.subscribe(null,ee);const Pe=A,et=`${O.packageName.toLowerCase()}://`;Wl().handleOpenURL=function(){var ze=(0,u.Z)(function*(mt){if(mt.toLowerCase().startsWith(et)&&ee({url:mt}),"function"==typeof Pe)try{Pe(mt)}catch(Kn){console.error(Kn)}});return function(mt){return ze.apply(this,arguments)}}()}};function qm(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:Ie("no-auth-event")}}const Kh=1e3;function Kl(){var v;return(null===(v=self?.location)||void 0===v?void 0:v.protocol)||null}function Dn(v=(0,F.z$)()){return!("file:"!==Kl()&&"ionic:"!==Kl()&&"capacitor:"!==Kl()||!v.toLowerCase().match(/iphone|ipad|ipod|android/))}function qp(){try{const v=self.localStorage,p=za();if(v)return v.setItem(p,"1"),v.removeItem(p),!function Gn(v=(0,F.z$)()){return function Wt(){return(0,F.w1)()&&11===document?.documentMode}()||function Za(v=(0,F.z$)()){return/Edge\/\d+/.test(v)}(v)}()||(0,F.hl)()}catch{return Kp()&&(0,F.hl)()}return!1}function Kp(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function ba(){return(function Wp(){return"http:"===Kl()||"https:"===Kl()}()||(0,F.ru)()||Dn())&&!function En(){return(0,F.b$)()||(0,F.UG)()}()&&qp()&&!Kp()}function Yp(){return Dn()&&typeof document<"u"}function qt(){return(qt=(0,u.Z)(function*(){return!!Yp()&&new Promise(v=>{const p=setTimeout(()=>{v(!1)},Kh);document.addEventListener("deviceready",()=>{clearTimeout(p),v(!0)})})})).apply(this,arguments)}const is={LOCAL:"local",NONE:"none",SESSION:"session"},Qa=ue,ss="persistence";function Zp(v){return Qp.apply(this,arguments)}function Qp(){return(Qp=(0,u.Z)(function*(v){yield v._initializationPromise;const p=Ja(),g=j(ss,v.config.apiKey,v.name);p&&p.setItem(g,v._getPersistence())})).apply(this,arguments)}function Ja(){var v;try{return(null===(v=function hi(){return typeof window<"u"?window:null}())||void 0===v?void 0:v.sessionStorage)||null}catch{return null}}const Jp=ue;class Kr{constructor(){this.browserResolver=Hn(rs),this.cordovaResolver=Hn(dc),this.underlyingResolver=null,this._redirectPersistence=oo,this._completeRedirectFn=Ul,this._overrideRedirectResult=es}_initialize(p){var g=this;return(0,u.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(p)})()}_openPopup(p,g,w,A){var O=this;return(0,u.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openPopup(p,g,w,A)})()}_openRedirect(p,g,w,A){var O=this;return(0,u.Z)(function*(){return yield O.selectUnderlyingResolver(),O.assertedUnderlyingResolver._openRedirect(p,g,w,A)})()}_isIframeWebStorageSupported(p,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(p,g)}_originValidation(p){return this.assertedUnderlyingResolver._originValidation(p)}get _shouldInitProactively(){return Yp()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Jp(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var p=this;return(0,u.Z)(function*(){if(p.underlyingResolver)return;const g=yield function er(){return qt.apply(this,arguments)}();p.underlyingResolver=g?p.cordovaResolver:p.browserResolver})()}}function hc(v){return v.unwrap()}function BD(v){return jv(v)}function jv(v){const{_tokenResponse:p}=v instanceof F.ZR?v.customData:v;if(!p)return null;if(!(v instanceof F.ZR)&&"temporaryProof"in p&&"phoneNumber"in p)return ki.credentialFromResult(v);const g=p.providerId;if(!g||g===ve.PASSWORD)return null;let w;switch(g){case ve.GOOGLE:w=vl;break;case ve.FACEBOOK:w=Qc;break;case ve.GITHUB:w=ph;break;case ve.TWITTER:w=Mu;break;default:const{oauthIdToken:A,oauthAccessToken:O,oauthTokenSecret:G,pendingToken:ee,nonce:Pe}=p;return O||G||A||ee?ee?g.startsWith("saml.")?Mo._create(g,ee):Xs._fromParams({providerId:g,signInMethod:g,pendingToken:ee,idToken:A,accessToken:O}):new Ko(g).credential({idToken:A,accessToken:O,rawNonce:Pe}):null}return v instanceof F.ZR?w.credentialFromError(v):w.credentialFromResult(v)}function os(v,p){return p.catch(g=>{throw g instanceof F.ZR&&function VD(v,p){var g;const w=null===(g=p.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===p?.code)p.resolver=new Yh(v,function zu(v,p){var g;const w=(0,F.m9)(v),A=p;return ue(p.customData.operationType,w,"argument-error"),ue(null===(g=A.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,w,"argument-error"),Xo._fromError(w,A)}(v,p));else if(w){const A=jv(p),O=p;A&&(O.credential=A,O.tenantId=w.tenantId||void 0,O.email=w.email||void 0,O.phoneNumber=w.phoneNumber||void 0)}}(v,g),g}).then(g=>{const A=g.user;return{operationType:g.operationType,credential:BD(g),additionalUserInfo:rd(g),user:js.getOrCreate(A)}})}function Xa(v,p){return tn.apply(this,arguments)}function tn(){return(tn=(0,u.Z)(function*(v,p){const g=yield p;return{verificationId:g.verificationId,confirm:w=>os(v,g.confirm(w))}})).apply(this,arguments)}class Yh{constructor(p,g){this.resolver=g,this.auth=function Jm(v){return v.wrapped()}(p)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(p){return os(hc(this.auth),this.resolver.resolveSignIn(p))}}class js{constructor(p){this._delegate=p,this.multiFactor=function Sh(v){const p=(0,F.m9)(v);return xo.has(p)||xo.set(p,na._fromUser(p)),xo.get(p)}(p)}static getOrCreate(p){return js.USER_MAP.has(p)||js.USER_MAP.set(p,new js(p)),js.USER_MAP.get(p)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(p){return this._delegate.getIdTokenResult(p)}getIdToken(p){return this._delegate.getIdToken(p)}linkAndRetrieveDataWithCredential(p){return this.linkWithCredential(p)}linkWithCredential(p){var g=this;return(0,u.Z)(function*(){return os(g.auth,yh(g._delegate,p))})()}linkWithPhoneNumber(p,g){var w=this;return(0,u.Z)(function*(){return Xa(w.auth,function ec(v,p,g){return tc.apply(this,arguments)}(w._delegate,p,g))})()}linkWithPopup(p){var g=this;return(0,u.Z)(function*(){return os(g.auth,function Fo(v,p,g){return pd.apply(this,arguments)}(g._delegate,p,Kr))})()}linkWithRedirect(p){var g=this;return(0,u.Z)(function*(){return yield Zp(Rn(g.auth)),kh(g._delegate,p,Kr)})()}reauthenticateAndRetrieveDataWithCredential(p){return this.reauthenticateWithCredential(p)}reauthenticateWithCredential(p){var g=this;return(0,u.Z)(function*(){return os(g.auth,vh(g._delegate,p))})()}reauthenticateWithPhoneNumber(p,g){return Xa(this.auth,function xp(v,p,g){return fd.apply(this,arguments)}(this._delegate,p,g))}reauthenticateWithPopup(p){return os(this.auth,function Es(v,p,g){return lo.apply(this,arguments)}(this._delegate,p,Kr))}reauthenticateWithRedirect(p){var g=this;return(0,u.Z)(function*(){return yield Zp(Rn(g.auth)),Ph(g._delegate,p,Kr)})()}sendEmailVerification(p){return function Vu(v,p){return Sl.apply(this,arguments)}(this._delegate,p)}unlink(p){var g=this;return(0,u.Z)(function*(){return yield function mh(v,p){return ui.apply(this,arguments)}(g._delegate,p),g})()}updateEmail(p){return function Xr(v,p){return Qn((0,F.m9)(v),p,null)}(this._delegate,p)}updatePassword(p){return function io(v,p){return Qn((0,F.m9)(v),null,p)}(this._delegate,p)}updatePhoneNumber(p){return function ko(v,p){return Jn.apply(this,arguments)}(this._delegate,p)}updateProfile(p){return function Dp(v,p){return ju.apply(this,arguments)}(this._delegate,p)}verifyBeforeUpdateEmail(p,g){return function td(v,p,g){return Al.apply(this,arguments)}(this._delegate,p,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}js.USER_MAP=new WeakMap;const fc=ue;let fo=(()=>{class v{constructor(g,w){if(this.app=g,w.isInitialized())return this._delegate=w.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:A}=g.options;fc(A,"invalid-api-key",{appName:g.name}),fc(A,"invalid-api-key",{appName:g.name});const O=typeof window<"u"?Kr:void 0;this._delegate=w.initialize({options:{persistence:Yr(A,g.name),popupRedirectResolver:O}}),this._delegate._updateErrorMap(nt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?js.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,w){!function gl(v,p,g){const w=Rn(v);ue(w._canInitEmulator,w,"emulator-config-failed"),ue(/^https?:\/\//.test(p),w,"invalid-emulator-scheme");const A=!!g?.disableWarnings,O=pr(p),{host:G,port:ee}=function Zt(v){const p=pr(v),g=/(\/\/)?([^?#/]+)/.exec(v.substr(p.length));if(!g)return{host:"",port:null};const w=g[2].split("@").pop()||"",A=/^(\[[^\]]+\])(:|$)/.exec(w);if(A){const O=A[1];return{host:O,port:ml(w.substr(O.length+1))}}{const[O,G]=w.split(":");return{host:O,port:ml(G)}}}(p);w.config.emulator={url:`${O}//${G}${null===ee?"":`:${ee}`}/`},w.settings.appVerificationDisabledForTesting=!0,w.emulatorConfig=Object.freeze({host:G,port:ee,protocol:O.replace(":",""),options:Object.freeze({disableWarnings:A})}),A||function Ho(){function v(){const p=document.createElement("p"),g=p.style;p.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",p.classList.add("firebase-emulator-warning"),document.body.appendChild(p)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",v):v())}()}(this._delegate,g,w)}applyActionCode(g){return function km(v,p){return ro.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return Tl(this._delegate,g)}confirmPasswordReset(g,w){return function wh(v,p,g){return ku.apply(this,arguments)}(this._delegate,g,w)}createUserWithEmailAndPassword(g,w){var A=this;return(0,u.Z)(function*(){return os(A._delegate,function Zo(v,p,g){return Xi.apply(this,arguments)}(A._delegate,g,w))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Eh(v,p){return Bu.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function Fm(v,p){return"EMAIL_SIGNIN"===La.parseLink(p)?.operation}(0,g)}getRedirectResult(){var g=this;return(0,u.Z)(function*(){fc(ba(),g._delegate,"operation-not-supported-in-this-environment");const w=yield function pa(v,p){return gd.apply(this,arguments)}(g._delegate,Kr);return w?os(g._delegate,Promise.resolve(w)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function zp(v,p){Rn(v)._logFramework(p)}(this._delegate,g)}onAuthStateChanged(g,w,A){const{next:O,error:G,complete:ee}=Yl(g,w,A);return this._delegate.onAuthStateChanged(O,G,ee)}onIdTokenChanged(g,w,A){const{next:O,error:G,complete:ee}=Yl(g,w,A);return this._delegate.onIdTokenChanged(O,G,ee)}sendSignInLinkToEmail(g,w){return function Il(v,p,g){return Fu.apply(this,arguments)}(this._delegate,g,w)}sendPasswordResetEmail(g,w){return function Pu(v,p,g){return Ti.apply(this,arguments)}(this._delegate,g,w||void 0)}setPersistence(g){var w=this;return(0,u.Z)(function*(){let A;switch(function Zm(v,p){Qa(Object.values(is).includes(p),v,"invalid-persistence-type"),(0,F.b$)()?Qa(p!==is.SESSION,v,"unsupported-persistence-type"):(0,F.UG)()?Qa(p===is.NONE,v,"unsupported-persistence-type"):Kp()?Qa(p===is.NONE||p===is.LOCAL&&(0,F.hl)(),v,"unsupported-persistence-type"):Qa(p===is.NONE||qp(),v,"unsupported-persistence-type")}(w._delegate,g),g){case is.SESSION:A=oo;break;case is.LOCAL:A=(yield Hn(aa)._isAvailable())?aa:ia;break;case is.NONE:A=Ei;break;default:return be("argument-error",{appName:w._delegate.name})}return w._delegate.setPersistence(A)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return os(this._delegate,function Hr(v){return Ba.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return os(this._delegate,Dl(this._delegate,g))}signInWithCustomToken(g){return os(this._delegate,function ye(v,p){return Ht.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,w){return os(this._delegate,function Dh(v,p,g){return Dl((0,F.m9)(v),fh.credential(p,g))}(this._delegate,g,w))}signInWithEmailLink(g,w){return os(this._delegate,function Dr(v,p,g){return Ua.apply(this,arguments)}(this._delegate,g,w))}signInWithPhoneNumber(g,w){return Xa(this._delegate,function Op(v,p,g){return ca.apply(this,arguments)}(this._delegate,g,w))}signInWithPopup(g){var w=this;return(0,u.Z)(function*(){return fc(ba(),w._delegate,"operation-not-supported-in-this-environment"),os(w._delegate,function Vn(v,p,g){return rc.apply(this,arguments)}(w._delegate,g,Kr))})()}signInWithRedirect(g){var w=this;return(0,u.Z)(function*(){return fc(ba(),w._delegate,"operation-not-supported-in-this-environment"),yield Zp(w._delegate),Oh(w._delegate,g,Kr)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function Ji(v,p){return Ls.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return v.Persistence=is,v})();function Yl(v,p,g){let w=v;"function"!=typeof v&&({next:w,error:p,complete:g}=v);const A=w;return{next:G=>A(G&&js.getOrCreate(G)),error:p,complete:g}}function Yr(v,p){const g=function Qm(v,p){const g=Ja();if(!g)return[];const w=j(ss,v,p);switch(g.getItem(w)){case is.NONE:return[Ei];case is.LOCAL:return[aa,oo];case is.SESSION:return[oo];default:return[]}}(v,p);if(typeof self<"u"&&!g.includes(aa)&&g.push(aa),typeof window<"u")for(const w of[ia,oo])g.includes(w)||g.push(w);return g.includes(Ei)||g.push(Ei),g}class Zl{constructor(){this.providerId="phone",this._delegate=new ki(hc(X.Z.auth()))}static credential(p,g){return ki.credential(p,g)}verifyPhoneNumber(p,g){return this._delegate.verifyPhoneNumber(p,g)}unwrap(){return this._delegate}}Zl.PHONE_SIGN_IN_METHOD=ki.PHONE_SIGN_IN_METHOD,Zl.PROVIDER_ID=ki.PROVIDER_ID;const Bi=ue;class Xm{constructor(p,g,w=X.Z.app()){var A;Bi(null===(A=w.options)||void 0===A?void 0:A.apiKey,"invalid-api-key",{appName:w.name}),this._delegate=new hd(p,g,w.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function e_(v){v.INTERNAL.registerComponent(new Ee.wA("auth-compat",p=>{const g=p.getProvider("app-compat").getImmediate(),w=p.getProvider("auth");return new fo(g,w)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:Y_EMAIL_SIGNIN,PASSWORD_RESET:Y_PASSWORD_RESET,RECOVER_EMAIL:Y_RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:Y_REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:Y_VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:Y_VERIFY_EMAIL}},EmailAuthProvider:fh,FacebookAuthProvider:Qc,GithubAuthProvider:ph,GoogleAuthProvider:vl,OAuthProvider:Ko,SAMLAuthProvider:Nu,PhoneAuthProvider:Zl,PhoneMultiFactorGenerator:ac,RecaptchaVerifier:Xm,TwitterAuthProvider:Mu,Auth:fo,AuthCredential:Qs,Error:F.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),v.registerVersion("@firebase/auth-compat","0.4.2")}(X.Z)},5861:(Ct,Ne,L)=>{function u(F,he,ae,le,Ee,Te,ve){try{var W=F[Te](ve),H=W.value}catch(Y){return void ae(Y)}W.done?he(H):Promise.resolve(H).then(le,Ee)}function X(F){return function(){var he=this,ae=arguments;return new Promise(function(le,Ee){var Te=F.apply(he,ae);function ve(H){u(Te,le,Ee,ve,W,"next",H)}function W(H){u(Te,le,Ee,ve,W,"throw",H)}ve(void 0)})}}L.d(Ne,{Z:()=>X})}},Ct=>{var Ne=u=>Ct(Ct.s=u);Ne(1321),Ne(7851)}]);